var _a=Object.defineProperty;var ba=(s,e,t)=>e in s?_a(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var Se=(s,e,t)=>ba(s,typeof e!="symbol"?e+"":e,t);import{A as Me,s as bt,n as Pe,d as _,O as Je,i as G,e as o,P as K,x as f,f as y,h as R,k as F,Q,l as k,m as L,R as El,r as Es,p as xe,S as Be,b as re,T as Ss,j as Z,t as X,U as Os,y as Le,o as Te,B as ks,z as ct,V as Cn,W as Zt,q as ya,X as Sl,Y as Al,Z as _e,v as ka,_ as wa,$ as Ir,a0 as Tl,I as Ea,a1 as Sa,a2 as Aa,a3 as Cl}from"../chunks/CdCOery0.js";import{a as Oe,S as yt,i as kt,f as Xt,d as dt,t as Ve,g as en,c as tn,m as ht,e as pt,b as gt}from"../chunks/CqCFC2cg.js";import{w as lt}from"../chunks/BHhKbfRM.js";/* empty css                */const Ta=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function We(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function As(s,e){s.d(1),e.delete(s.key)}function Ts(s,e,t,n,r,i,a,l,c,u,d,m){let h=s.length,g=i.length,p=h;const v={};for(;p--;)v[s[p].key]=p;const S=[],C=new Map,b=new Map,A=[];for(p=g;p--;){const w=m(r,i,p),O=t(w);let N=a.get(O);N?A.push(()=>N.p(w,e)):(N=u(O,w),N.c()),C.set(O,S[p]=N),O in v&&b.set(O,Math.abs(p-v[O]))}const E=new Set,T=new Set;function I(w){Oe(w,1),w.m(l,d),a.set(w.key,w),d=w.first,g--}for(;h&&g;){const w=S[g-1],O=s[h-1],N=w.key,x=O.key;w===O?(d=w.first,h--,g--):C.has(x)?!a.has(N)||E.has(N)?I(w):T.has(x)?h--:b.get(N)>b.get(x)?(T.add(N),I(w)):(E.add(x),h--):(c(O,a),h--)}for(;h--;){const w=s[h];C.has(w.key)||c(w,a)}for(;g;)I(S[g-1]);return Me(A),S}const Qt=Object.create(null);Qt.open="0";Qt.close="1";Qt.ping="2";Qt.pong="3";Qt.message="4";Qt.upgrade="5";Qt.noop="6";const mn=Object.create(null);Object.keys(Qt).forEach(s=>{mn[Qt[s]]=s});const Yn={type:"error",data:"parser error"},Il=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Dl=typeof ArrayBuffer=="function",Rl=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,ar=({type:s,data:e},t,n)=>Il&&e instanceof Blob?t?n(e):Dr(e,n):Dl&&(e instanceof ArrayBuffer||Rl(e))?t?n(e):Dr(new Blob([e]),n):n(Qt[s]+(e||"")),Dr=(s,e)=>{const t=new FileReader;return t.onload=function(){const n=t.result.split(",")[1];e("b"+(n||""))},t.readAsDataURL(s)};function Rr(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let Fn;function Ca(s,e){if(Il&&s.data instanceof Blob)return s.data.arrayBuffer().then(Rr).then(e);if(Dl&&(s.data instanceof ArrayBuffer||Rl(s.data)))return e(Rr(s.data));ar(s,!1,t=>{Fn||(Fn=new TextEncoder),e(Fn.encode(t))})}const Nr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$s=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<Nr.length;s++)$s[Nr.charCodeAt(s)]=s;const Ia=s=>{let e=s.length*.75,t=s.length,n,r=0,i,a,l,c;s[s.length-1]==="="&&(e--,s[s.length-2]==="="&&e--);const u=new ArrayBuffer(e),d=new Uint8Array(u);for(n=0;n<t;n+=4)i=$s[s.charCodeAt(n)],a=$s[s.charCodeAt(n+1)],l=$s[s.charCodeAt(n+2)],c=$s[s.charCodeAt(n+3)],d[r++]=i<<2|a>>4,d[r++]=(a&15)<<4|l>>2,d[r++]=(l&3)<<6|c&63;return u},Da=typeof ArrayBuffer=="function",or=(s,e)=>{if(typeof s!="string")return{type:"message",data:Nl(s,e)};const t=s.charAt(0);return t==="b"?{type:"message",data:Ra(s.substring(1),e)}:mn[t]?s.length>1?{type:mn[t],data:s.substring(1)}:{type:mn[t]}:Yn},Ra=(s,e)=>{if(Da){const t=Ia(s);return Nl(t,e)}else return{base64:!0,data:s}},Nl=(s,e)=>{switch(e){case"blob":return s instanceof Blob?s:new Blob([s]);case"arraybuffer":default:return s instanceof ArrayBuffer?s:s.buffer}},Ol="",Na=(s,e)=>{const t=s.length,n=new Array(t);let r=0;s.forEach((i,a)=>{ar(i,!1,l=>{n[a]=l,++r===t&&e(n.join(Ol))})})},Oa=(s,e)=>{const t=s.split(Ol),n=[];for(let r=0;r<t.length;r++){const i=or(t[r],e);if(n.push(i),i.type==="error")break}return n};function Pa(){return new TransformStream({transform(s,e){Ca(s,t=>{const n=t.length;let r;if(n<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,n);else if(n<65536){r=new Uint8Array(3);const i=new DataView(r.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{r=new Uint8Array(9);const i=new DataView(r.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}s.data&&typeof s.data!="string"&&(r[0]|=128),e.enqueue(r),e.enqueue(t)})}})}let Ln;function an(s){return s.reduce((e,t)=>e+t.length,0)}function on(s,e){if(s[0].length===e)return s.shift();const t=new Uint8Array(e);let n=0;for(let r=0;r<e;r++)t[r]=s[0][n++],n===s[0].length&&(s.shift(),n=0);return s.length&&n<s[0].length&&(s[0]=s[0].slice(n)),t}function Fa(s,e){Ln||(Ln=new TextDecoder);const t=[];let n=0,r=-1,i=!1;return new TransformStream({transform(a,l){for(t.push(a);;){if(n===0){if(an(t)<1)break;const c=on(t,1);i=(c[0]&128)===128,r=c[0]&127,r<126?n=3:r===126?n=1:n=2}else if(n===1){if(an(t)<2)break;const c=on(t,2);r=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),n=3}else if(n===2){if(an(t)<8)break;const c=on(t,8),u=new DataView(c.buffer,c.byteOffset,c.length),d=u.getUint32(0);if(d>Math.pow(2,21)-1){l.enqueue(Yn);break}r=d*Math.pow(2,32)+u.getUint32(4),n=3}else{if(an(t)<r)break;const c=on(t,r);l.enqueue(or(i?c:Ln.decode(c),e)),n=0}if(r===0||r>s){l.enqueue(Yn);break}}}})}const Pl=4;function Ye(s){if(s)return La(s)}function La(s){for(var e in Ye.prototype)s[e]=Ye.prototype[e];return s}Ye.prototype.on=Ye.prototype.addEventListener=function(s,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(e),this};Ye.prototype.once=function(s,e){function t(){this.off(s,t),e.apply(this,arguments)}return t.fn=e,this.on(s,t),this};Ye.prototype.off=Ye.prototype.removeListener=Ye.prototype.removeAllListeners=Ye.prototype.removeEventListener=function(s,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+s];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var n,r=0;r<t.length;r++)if(n=t[r],n===e||n.fn===e){t.splice(r,1);break}return t.length===0&&delete this._callbacks["$"+s],this};Ye.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+s],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t){t=t.slice(0);for(var n=0,r=t.length;n<r;++n)t[n].apply(this,e)}return this};Ye.prototype.emitReserved=Ye.prototype.emit;Ye.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};Ye.prototype.hasListeners=function(s){return!!this.listeners(s).length};const In=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Ft=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),xa="arraybuffer";function Fl(s,...e){return e.reduce((t,n)=>(s.hasOwnProperty(n)&&(t[n]=s[n]),t),{})}const Ma=Ft.setTimeout,Ba=Ft.clearTimeout;function Dn(s,e){e.useNativeTimers?(s.setTimeoutFn=Ma.bind(Ft),s.clearTimeoutFn=Ba.bind(Ft)):(s.setTimeoutFn=Ft.setTimeout.bind(Ft),s.clearTimeoutFn=Ft.clearTimeout.bind(Ft))}const Ua=1.33;function za(s){return typeof s=="string"?Va(s):Math.ceil((s.byteLength||s.size)*Ua)}function Va(s){let e=0,t=0;for(let n=0,r=s.length;n<r;n++)e=s.charCodeAt(n),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(n++,t+=4);return t}function Ll(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function qa(s){let e="";for(let t in s)s.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(s[t]));return e}function Ha(s){let e={},t=s.split("&");for(let n=0,r=t.length;n<r;n++){let i=t[n].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class ja extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class cr extends Ye{constructor(e){super(),this.writable=!1,Dn(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new ja(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=or(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=qa(e);return t.length?"?"+t:""}}class Ga extends cr{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||t()})),this.writable||(n++,this.once("drain",function(){--n||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};Oa(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Na(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=Ll()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let xl=!1;try{xl=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Wa=xl;function $a(){}class Ya extends Ga{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let n=location.port;n||(n=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(r,i)=>{this.onError("xhr post error",r,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,n)=>{this.onError("xhr poll error",t,n)}),this.pollXhr=e}}class Kt extends Ye{constructor(e,t,n){super(),this.createRequest=e,Dn(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const t=Fl(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let r in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(r)&&n.setRequestHeader(r,this._opts.extraHeaders[r])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var r;n.readyState===3&&((r=this._opts.cookieJar)===null||r===void 0||r.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(r){this.setTimeoutFn(()=>{this._onError(r)},0);return}typeof document<"u"&&(this._index=Kt.requestsCount++,Kt.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=$a,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Kt.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Kt.requestsCount=0;Kt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Or);else if(typeof addEventListener=="function"){const s="onpagehide"in Ft?"pagehide":"unload";addEventListener(s,Or,!1)}}function Or(){for(let s in Kt.requests)Kt.requests.hasOwnProperty(s)&&Kt.requests[s].abort()}const Za=function(){const s=Ml({xdomain:!1});return s&&s.responseType!==null}();class Xa extends Ya{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Za&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Kt(Ml,this.uri(),e)}}function Ml(s){const e=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Wa))return new XMLHttpRequest}catch{}if(!e)try{return new Ft[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Bl=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Ka extends cr{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=Bl?{}:Fl(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;ar(n,this.supportsBinary,i=>{try{this.doWrite(n,i)}catch{}r&&In(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Ll()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const xn=Ft.WebSocket||Ft.MozWebSocket;class Qa extends Ka{createSocket(e,t,n){return Bl?new xn(e,t,n):t?new xn(e,t):new xn(e)}doWrite(e,t){this.ws.send(t)}}class Ja extends cr{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=Fa(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),r=Pa();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const i=()=>{n.read().then(({done:l,value:c})=>{l||(this.onPacket(c),i())}).catch(l=>{})};i();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;this._writer.write(n).then(()=>{r&&In(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const eo={websocket:Qa,webtransport:Ja,polling:Xa},to=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,so=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Zn(s){if(s.length>8e3)throw"URI too long";const e=s,t=s.indexOf("["),n=s.indexOf("]");t!=-1&&n!=-1&&(s=s.substring(0,t)+s.substring(t,n).replace(/:/g,";")+s.substring(n,s.length));let r=to.exec(s||""),i={},a=14;for(;a--;)i[so[a]]=r[a]||"";return t!=-1&&n!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=no(i,i.path),i.queryKey=ro(i,i.query),i}function no(s,e){const t=/\/{2,9}/g,n=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function ro(s,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,r,i){r&&(t[r]=i)}),t}const Xn=typeof addEventListener=="function"&&typeof removeEventListener=="function",vn=[];Xn&&addEventListener("offline",()=>{vn.forEach(s=>s())},!1);class as extends Ye{constructor(e,t){if(super(),this.binaryType=xa,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const n=Zn(e);t.hostname=n.host,t.secure=n.protocol==="https"||n.protocol==="wss",t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=Zn(t.host).host);Dn(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(n=>{const r=n.prototype.name;this.transports.push(r),this._transportsByName[r]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Ha(this.opts.query)),Xn&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},vn.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=Pl,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&as.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",as.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let n=0;n<this.writeBuffer.length;n++){const r=this.writeBuffer[n].data;if(r&&(t+=za(r)),n>0&&t>this._maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,In(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,r){if(typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(as.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Xn&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=vn.indexOf(this._offlineEventListener);n!==-1&&vn.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}as.protocol=Pl;class io extends as{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;as.priorWebsocketSuccess=!1;const r=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",m=>{if(!n)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;as.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(d(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=t.name,this.emitReserved("upgradeError",h)}}))};function i(){n||(n=!0,d(),t.close(),t=null)}const a=m=>{const h=new Error("probe error: "+m);h.transport=t.name,i(),this.emitReserved("upgradeError",h)};function l(){a("transport closed")}function c(){a("socket closed")}function u(m){t&&m.name!==t.name&&i()}const d=()=>{t.removeListener("open",r),t.removeListener("error",a),t.removeListener("close",l),this.off("close",c),this.off("upgrading",u)};t.once("open",r),t.once("error",a),t.once("close",l),this.once("close",c),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}let lo=class extends io{constructor(e,t={}){const n=typeof e=="object"?e:t;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(r=>eo[r]).filter(r=>!!r)),super(e,n)}};function ao(s,e="",t){let n=s;t=t||typeof location<"u"&&location,s==null&&(s=t.protocol+"//"+t.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=t.protocol+s:s=t.host+s),/^(https?|wss?):\/\//.test(s)||(typeof t<"u"?s=t.protocol+"//"+s:s="https://"+s),n=Zn(s)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+e,n.href=n.protocol+"://"+i+(t&&t.port===n.port?"":":"+n.port),n}const oo=typeof ArrayBuffer=="function",co=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,Ul=Object.prototype.toString,uo=typeof Blob=="function"||typeof Blob<"u"&&Ul.call(Blob)==="[object BlobConstructor]",fo=typeof File=="function"||typeof File<"u"&&Ul.call(File)==="[object FileConstructor]";function ur(s){return oo&&(s instanceof ArrayBuffer||co(s))||uo&&s instanceof Blob||fo&&s instanceof File}function _n(s,e){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let t=0,n=s.length;t<n;t++)if(_n(s[t]))return!0;return!1}if(ur(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return _n(s.toJSON(),!0);for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&_n(s[t]))return!0;return!1}function ho(s){const e=[],t=s.data,n=s;return n.data=Kn(t,e),n.attachments=e.length,{packet:n,buffers:e}}function Kn(s,e){if(!s)return s;if(ur(s)){const t={_placeholder:!0,num:e.length};return e.push(s),t}else if(Array.isArray(s)){const t=new Array(s.length);for(let n=0;n<s.length;n++)t[n]=Kn(s[n],e);return t}else if(typeof s=="object"&&!(s instanceof Date)){const t={};for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=Kn(s[n],e));return t}return s}function po(s,e){return s.data=Qn(s.data,e),delete s.attachments,s}function Qn(s,e){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<e.length)return e[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let t=0;t<s.length;t++)s[t]=Qn(s[t],e);else if(typeof s=="object")for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&(s[t]=Qn(s[t],e));return s}const go=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],mo=5;var Ee;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(Ee||(Ee={}));class vo{constructor(e){this.replacer=e}encode(e){return(e.type===Ee.EVENT||e.type===Ee.ACK)&&_n(e)?this.encodeAsBinary({type:e.type===Ee.EVENT?Ee.BINARY_EVENT:Ee.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===Ee.BINARY_EVENT||e.type===Ee.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=ho(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}function Pr(s){return Object.prototype.toString.call(s)==="[object Object]"}class fr extends Ye{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===Ee.BINARY_EVENT;n||t.type===Ee.BINARY_ACK?(t.type=n?Ee.EVENT:Ee.ACK,this.reconstructor=new _o(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(ur(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(Ee[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Ee.BINARY_EVENT||n.type===Ee.BINARY_ACK){const i=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const a=e.substring(i,t);if(a!=Number(a)||e.charAt(t)!=="-")throw new Error("Illegal attachments");n.attachments=Number(a)}if(e.charAt(t+1)==="/"){const i=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););n.nsp=e.substring(i,t)}else n.nsp="/";const r=e.charAt(t+1);if(r!==""&&Number(r)==r){const i=t+1;for(;++t;){const a=e.charAt(t);if(a==null||Number(a)!=a){--t;break}if(t===e.length)break}n.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=this.tryParse(e.substr(t));if(fr.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case Ee.CONNECT:return Pr(t);case Ee.DISCONNECT:return t===void 0;case Ee.CONNECT_ERROR:return typeof t=="string"||Pr(t);case Ee.EVENT:case Ee.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&go.indexOf(t[0])===-1);case Ee.ACK:case Ee.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class _o{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=po(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const bo=Object.freeze(Object.defineProperty({__proto__:null,Decoder:fr,Encoder:vo,get PacketType(){return Ee},protocol:mo},Symbol.toStringTag,{value:"Module"}));function zt(s,e,t){return s.on(e,t),function(){s.off(e,t)}}const yo=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class zl extends Ye{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[zt(e,"open",this.onopen.bind(this)),zt(e,"packet",this.onpacket.bind(this)),zt(e,"error",this.onerror.bind(this)),zt(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,r,i;if(yo.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const a={type:Ee.EVENT,data:t};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const d=this.ids++,m=t.pop();this._registerAckCallback(d,m),a.id=d}const l=(r=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||r===void 0?void 0:r.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var n;const r=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(r===void 0){this.acks[e]=t;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===e&&this.sendBuffer.splice(l,1);t.call(this,new Error("operation has timed out"))},r),a=(...l)=>{this.io.clearTimeoutFn(i),t.apply(this,l)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...t){return new Promise((n,r)=>{const i=(a,l)=>a?r(a):n(l);i.withError=!0,t.push(i),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((r,...i)=>n!==this._queue[0]?void 0:(r!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(r)):(this._queue.shift(),t&&t(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Ee.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Ee.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ee.EVENT:case Ee.BINARY_EVENT:this.onevent(e);break;case Ee.ACK:case Ee.BINARY_ACK:this.onack(e);break;case Ee.DISCONNECT:this.ondisconnect();break;case Ee.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...r){n||(n=!0,t.packet({type:Ee.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ee.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function Fs(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}Fs.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*s);s=Math.floor(e*10)&1?s+t:s-t}return Math.min(s,this.max)|0};Fs.prototype.reset=function(){this.attempts=0};Fs.prototype.setMin=function(s){this.ms=s};Fs.prototype.setMax=function(s){this.max=s};Fs.prototype.setJitter=function(s){this.jitter=s};class Jn extends Ye{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Dn(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((n=t.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Fs({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||bo;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new lo(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=zt(t,"open",function(){n.onopen(),e&&e()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),e?e(l):this.maybeReconnectOnOpen()},a=zt(t,"error",i);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{r(),i(new Error("timeout")),t.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(r),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(zt(e,"ping",this.onping.bind(this)),zt(e,"data",this.ondata.bind(this)),zt(e,"error",this.onerror.bind(this)),zt(e,"close",this.onclose.bind(this)),zt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){In(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new zl(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t)if(this.nsps[n].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(r=>{r?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",r)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Us={};function bn(s,e){typeof s=="object"&&(e=s,s=void 0),e=e||{};const t=ao(s,e.path||"/socket.io"),n=t.source,r=t.id,i=t.path,a=Us[r]&&i in Us[r].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let c;return l?c=new Jn(n,e):(Us[r]||(Us[r]=new Jn(n,e)),c=Us[r]),t.query&&!e.query&&(e.query=t.queryKey),c.socket(t.path,e)}Object.assign(bn,{Manager:Jn,Socket:zl,io:bn,connect:bn});let $t=null;function ko(){$t||($t=new(window.AudioContext||window.webkitAudioContext))}function Vl(){if(ko(),!$t)return;const s=$t.createOscillator(),e=$t.createGain();s.connect(e),e.connect($t.destination),s.frequency.value=800,s.type="sine",e.gain.setValueAtTime(.1,$t.currentTime),e.gain.exponentialRampToValueAtTime(.01,$t.currentTime+.1),s.start($t.currentTime),s.stop($t.currentTime+.1)}function wo(s,e){if(e)return;if(!(localStorage.getItem("notificationsEnabled")==="true")){console.log("Notifications disabled in settings");return}if(Notification.permission!=="granted"){console.log("Notification permission not granted:",Notification.permission);return}if(Vl(),!document.hidden){console.log("Page is visible, skipping desktop notification");return}let n="",r="",i="/icon-192.png";switch(s.type){case"text":n=s.user,r=s.text;break;case"gif":n=s.user,r="ðŸŽ¬ Sent a GIF";break;case"file":n=s.user,r=`ðŸ“Ž Sent a file: ${s.fileName}`;break}const a=new Notification(n,{body:r,icon:i,badge:i,tag:`message-${s.id}`,requireInteraction:!1,silent:!1});a.onclick=()=>{window.focus(),a.close()},setTimeout(()=>{a.close()},5e3)}function dr(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Cs=dr();function ql(s){Cs=s}var Xs={exec:()=>null};function Ce(s,e=""){let t=typeof s=="string"?s:s.source,n={replace:(r,i)=>{let a=typeof i=="string"?i:i.source;return a=a.replace(mt.caret,"$1"),t=t.replace(r,a),n},getRegex:()=>new RegExp(t,e)};return n}var Eo=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),mt={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:s=>new RegExp(`^( {0,3}${s})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}#`),htmlBeginRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}<(?:[a-z].*>|!--)`,"i")},So=/^(?:[ \t]*(?:\n|$))+/,Ao=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,To=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,sn=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Co=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr=/(?:[*+-]|\d{1,9}[.)])/,Hl=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,jl=Ce(Hl).replace(/bull/g,hr).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Io=Ce(Hl).replace(/bull/g,hr).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),pr=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Do=/^[^\n]+/,gr=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,Ro=Ce(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",gr).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),No=Ce(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,hr).getRegex(),Rn="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",mr=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Oo=Ce("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",mr).replace("tag",Rn).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Gl=Ce(pr).replace("hr",sn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Rn).getRegex(),Po=Ce(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Gl).getRegex(),vr={blockquote:Po,code:Ao,def:Ro,fences:To,heading:Co,hr:sn,html:Oo,lheading:jl,list:No,newline:So,paragraph:Gl,table:Xs,text:Do},Fr=Ce("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",sn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Rn).getRegex(),Fo={...vr,lheading:Io,table:Fr,paragraph:Ce(pr).replace("hr",sn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Fr).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Rn).getRegex()},Lo={...vr,html:Ce(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",mr).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Xs,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ce(pr).replace("hr",sn).replace("heading",` *#{1,6} *[^
]`).replace("lheading",jl).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},xo=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Mo=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Wl=/^( {2,}|\\)\n(?!\s*$)/,Bo=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Nn=/[\p{P}\p{S}]/u,_r=/[\s\p{P}\p{S}]/u,$l=/[^\s\p{P}\p{S}]/u,Uo=Ce(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,_r).getRegex(),Yl=/(?!~)[\p{P}\p{S}]/u,zo=/(?!~)[\s\p{P}\p{S}]/u,Vo=/(?:[^\s\p{P}\p{S}]|~)/u,qo=Ce(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",Eo?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Zl=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Ho=Ce(Zl,"u").replace(/punct/g,Nn).getRegex(),jo=Ce(Zl,"u").replace(/punct/g,Yl).getRegex(),Xl="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Go=Ce(Xl,"gu").replace(/notPunctSpace/g,$l).replace(/punctSpace/g,_r).replace(/punct/g,Nn).getRegex(),Wo=Ce(Xl,"gu").replace(/notPunctSpace/g,Vo).replace(/punctSpace/g,zo).replace(/punct/g,Yl).getRegex(),$o=Ce("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,$l).replace(/punctSpace/g,_r).replace(/punct/g,Nn).getRegex(),Yo=Ce(/\\(punct)/,"gu").replace(/punct/g,Nn).getRegex(),Zo=Ce(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Xo=Ce(mr).replace("(?:-->|$)","-->").getRegex(),Ko=Ce("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Xo).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),kn=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Qo=Ce(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",kn).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Kl=Ce(/^!?\[(label)\]\[(ref)\]/).replace("label",kn).replace("ref",gr).getRegex(),Ql=Ce(/^!?\[(ref)\](?:\[\])?/).replace("ref",gr).getRegex(),Jo=Ce("reflink|nolink(?!\\()","g").replace("reflink",Kl).replace("nolink",Ql).getRegex(),Lr=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,br={_backpedal:Xs,anyPunctuation:Yo,autolink:Zo,blockSkip:qo,br:Wl,code:Mo,del:Xs,emStrongLDelim:Ho,emStrongRDelimAst:Go,emStrongRDelimUnd:$o,escape:xo,link:Qo,nolink:Ql,punctuation:Uo,reflink:Kl,reflinkSearch:Jo,tag:Ko,text:Bo,url:Xs},ec={...br,link:Ce(/^!?\[(label)\]\((.*?)\)/).replace("label",kn).getRegex(),reflink:Ce(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",kn).getRegex()},er={...br,emStrongRDelimAst:Wo,emStrongLDelim:jo,url:Ce(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",Lr).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Ce(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",Lr).getRegex()},tc={...er,br:Ce(Wl).replace("{2,}","*").getRegex(),text:Ce(er.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},cn={normal:vr,gfm:Fo,pedantic:Lo},zs={normal:br,gfm:er,breaks:tc,pedantic:ec},sc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},xr=s=>sc[s];function ss(s,e){if(e){if(mt.escapeTest.test(s))return s.replace(mt.escapeReplace,xr)}else if(mt.escapeTestNoEncode.test(s))return s.replace(mt.escapeReplaceNoEncode,xr);return s}function Mr(s){try{s=encodeURI(s).replace(mt.percentDecode,"%")}catch{return null}return s}function Br(s,e){var i;let t=s.replace(mt.findPipe,(a,l,c)=>{let u=!1,d=l;for(;--d>=0&&c[d]==="\\";)u=!u;return u?"|":" |"}),n=t.split(mt.splitPipe),r=0;if(n[0].trim()||n.shift(),n.length>0&&!((i=n.at(-1))!=null&&i.trim())&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(mt.slashPipe,"|");return n}function Vs(s,e,t){let n=s.length;if(n===0)return"";let r=0;for(;r<n&&s.charAt(n-r-1)===e;)r++;return s.slice(0,n-r)}function nc(s,e){if(s.indexOf(e[1])===-1)return-1;let t=0;for(let n=0;n<s.length;n++)if(s[n]==="\\")n++;else if(s[n]===e[0])t++;else if(s[n]===e[1]&&(t--,t<0))return n;return t>0?-2:-1}function Ur(s,e,t,n,r){let i=e.href,a=e.title||null,l=s[1].replace(r.other.outputLinkReplace,"$1");n.state.inLink=!0;let c={type:s[0].charAt(0)==="!"?"image":"link",raw:t,href:i,title:a,text:l,tokens:n.inlineTokens(l)};return n.state.inLink=!1,c}function rc(s,e,t){let n=s.match(t.other.indentCodeCompensation);if(n===null)return e;let r=n[1];return e.split(`
`).map(i=>{let a=i.match(t.other.beginningSpace);if(a===null)return i;let[l]=a;return l.length>=r.length?i.slice(r.length):i}).join(`
`)}var wn=class{constructor(s){Se(this,"options");Se(this,"rules");Se(this,"lexer");this.options=s||Cs}space(s){let e=this.rules.block.newline.exec(s);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(s){let e=this.rules.block.code.exec(s);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:Vs(t,`
`)}}}fences(s){let e=this.rules.block.fences.exec(s);if(e){let t=e[0],n=rc(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:n}}}heading(s){let e=this.rules.block.heading.exec(s);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let n=Vs(t,"#");(this.options.pedantic||!n||this.rules.other.endingSpaceChar.test(n))&&(t=n.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(s){let e=this.rules.block.hr.exec(s);if(e)return{type:"hr",raw:Vs(e[0],`
`)}}blockquote(s){let e=this.rules.block.blockquote.exec(s);if(e){let t=Vs(e[0],`
`).split(`
`),n="",r="",i=[];for(;t.length>0;){let a=!1,l=[],c;for(c=0;c<t.length;c++)if(this.rules.other.blockquoteStart.test(t[c]))l.push(t[c]),a=!0;else if(!a)l.push(t[c]);else break;t=t.slice(c);let u=l.join(`
`),d=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}
${u}`:u,r=r?`${r}
${d}`:d;let m=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,i,!0),this.lexer.state.top=m,t.length===0)break;let h=i.at(-1);if((h==null?void 0:h.type)==="code")break;if((h==null?void 0:h.type)==="blockquote"){let g=h,p=g.raw+`
`+t.join(`
`),v=this.blockquote(p);i[i.length-1]=v,n=n.substring(0,n.length-g.raw.length)+v.raw,r=r.substring(0,r.length-g.text.length)+v.text;break}else if((h==null?void 0:h.type)==="list"){let g=h,p=g.raw+`
`+t.join(`
`),v=this.list(p);i[i.length-1]=v,n=n.substring(0,n.length-h.raw.length)+v.raw,r=r.substring(0,r.length-g.raw.length)+v.raw,t=p.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:n,tokens:i,text:r}}}list(s){var t,n;let e=this.rules.block.list.exec(s);if(e){let r=e[1].trim(),i=r.length>1,a={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");let l=this.rules.other.listItemRegex(r),c=!1;for(;s;){let d=!1,m="",h="";if(!(e=l.exec(s))||this.rules.block.hr.test(s))break;m=e[0],s=s.substring(m.length);let g=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,C=>" ".repeat(3*C.length)),p=s.split(`
`,1)[0],v=!g.trim(),S=0;if(this.options.pedantic?(S=2,h=g.trimStart()):v?S=e[1].length+1:(S=e[2].search(this.rules.other.nonSpaceChar),S=S>4?1:S,h=g.slice(S),S+=e[1].length),v&&this.rules.other.blankLine.test(p)&&(m+=p+`
`,s=s.substring(p.length+1),d=!0),!d){let C=this.rules.other.nextBulletRegex(S),b=this.rules.other.hrRegex(S),A=this.rules.other.fencesBeginRegex(S),E=this.rules.other.headingBeginRegex(S),T=this.rules.other.htmlBeginRegex(S);for(;s;){let I=s.split(`
`,1)[0],w;if(p=I,this.options.pedantic?(p=p.replace(this.rules.other.listReplaceNesting,"  "),w=p):w=p.replace(this.rules.other.tabCharGlobal,"    "),A.test(p)||E.test(p)||T.test(p)||C.test(p)||b.test(p))break;if(w.search(this.rules.other.nonSpaceChar)>=S||!p.trim())h+=`
`+w.slice(S);else{if(v||g.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||A.test(g)||E.test(g)||b.test(g))break;h+=`
`+p}!v&&!p.trim()&&(v=!0),m+=I+`
`,s=s.substring(I.length+1),g=w.slice(S)}}a.loose||(c?a.loose=!0:this.rules.other.doubleBlankLine.test(m)&&(c=!0)),a.items.push({type:"list_item",raw:m,task:!!this.options.gfm&&this.rules.other.listIsTask.test(h),loose:!1,text:h,tokens:[]}),a.raw+=m}let u=a.items.at(-1);if(u)u.raw=u.raw.trimEnd(),u.text=u.text.trimEnd();else return;a.raw=a.raw.trimEnd();for(let d of a.items){if(this.lexer.state.top=!1,d.tokens=this.lexer.blockTokens(d.text,[]),d.task){if(d.text=d.text.replace(this.rules.other.listReplaceTask,""),((t=d.tokens[0])==null?void 0:t.type)==="text"||((n=d.tokens[0])==null?void 0:n.type)==="paragraph"){d.tokens[0].raw=d.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),d.tokens[0].text=d.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let h=this.lexer.inlineQueue.length-1;h>=0;h--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[h].src)){this.lexer.inlineQueue[h].src=this.lexer.inlineQueue[h].src.replace(this.rules.other.listReplaceTask,"");break}}let m=this.rules.other.listTaskCheckbox.exec(d.raw);if(m){let h={type:"checkbox",raw:m[0]+" ",checked:m[0]!=="[ ]"};d.checked=h.checked,a.loose?d.tokens[0]&&["paragraph","text"].includes(d.tokens[0].type)&&"tokens"in d.tokens[0]&&d.tokens[0].tokens?(d.tokens[0].raw=h.raw+d.tokens[0].raw,d.tokens[0].text=h.raw+d.tokens[0].text,d.tokens[0].tokens.unshift(h)):d.tokens.unshift({type:"paragraph",raw:h.raw,text:h.raw,tokens:[h]}):d.tokens.unshift(h)}}if(!a.loose){let m=d.tokens.filter(g=>g.type==="space"),h=m.length>0&&m.some(g=>this.rules.other.anyLine.test(g.raw));a.loose=h}}if(a.loose)for(let d of a.items){d.loose=!0;for(let m of d.tokens)m.type==="text"&&(m.type="paragraph")}return a}}html(s){let e=this.rules.block.html.exec(s);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(s){let e=this.rules.block.def.exec(s);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:n,title:r}}}table(s){var a;let e=this.rules.block.table.exec(s);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let t=Br(e[1]),n=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=(a=e[3])!=null&&a.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===n.length){for(let l of n)this.rules.other.tableAlignRight.test(l)?i.align.push("right"):this.rules.other.tableAlignCenter.test(l)?i.align.push("center"):this.rules.other.tableAlignLeft.test(l)?i.align.push("left"):i.align.push(null);for(let l=0;l<t.length;l++)i.header.push({text:t[l],tokens:this.lexer.inline(t[l]),header:!0,align:i.align[l]});for(let l of r)i.rows.push(Br(l,i.header.length).map((c,u)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:i.align[u]})));return i}}lheading(s){let e=this.rules.block.lheading.exec(s);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(s){let e=this.rules.block.paragraph.exec(s);if(e){let t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(s){let e=this.rules.block.text.exec(s);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(s){let e=this.rules.inline.escape.exec(s);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(s){let e=this.rules.inline.tag.exec(s);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(s){let e=this.rules.inline.link.exec(s);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let i=Vs(t.slice(0,-1),"\\");if((t.length-i.length)%2===0)return}else{let i=nc(e[2],"()");if(i===-2)return;if(i>-1){let a=(e[0].indexOf("!")===0?5:4)+e[1].length+i;e[2]=e[2].substring(0,i),e[0]=e[0].substring(0,a).trim(),e[3]=""}}let n=e[2],r="";if(this.options.pedantic){let i=this.rules.other.pedanticHrefTitle.exec(n);i&&(n=i[1],r=i[3])}else r=e[3]?e[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?n=n.slice(1):n=n.slice(1,-1)),Ur(e,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(s,e){let t;if((t=this.rules.inline.reflink.exec(s))||(t=this.rules.inline.nolink.exec(s))){let n=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=e[n.toLowerCase()];if(!r){let i=t[0].charAt(0);return{type:"text",raw:i,text:i}}return Ur(t,r,t[0],this.lexer,this.rules)}}emStrong(s,e,t=""){let n=this.rules.inline.emStrongLDelim.exec(s);if(!(!n||n[3]&&t.match(this.rules.other.unicodeAlphaNumeric))&&(!(n[1]||n[2])||!t||this.rules.inline.punctuation.exec(t))){let r=[...n[0]].length-1,i,a,l=r,c=0,u=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,e=e.slice(-1*s.length+r);(n=u.exec(e))!=null;){if(i=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!i)continue;if(a=[...i].length,n[3]||n[4]){l+=a;continue}else if((n[5]||n[6])&&r%3&&!((r+a)%3)){c+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+c);let d=[...n[0]][0].length,m=s.slice(0,r+n.index+d+a);if(Math.min(r,a)%2){let g=m.slice(1,-1);return{type:"em",raw:m,text:g,tokens:this.lexer.inlineTokens(g)}}let h=m.slice(2,-2);return{type:"strong",raw:m,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(s){let e=this.rules.inline.code.exec(s);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),n=this.rules.other.nonSpaceChar.test(t),r=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return n&&r&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(s){let e=this.rules.inline.br.exec(s);if(e)return{type:"br",raw:e[0]}}del(s){let e=this.rules.inline.del.exec(s);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(s){let e=this.rules.inline.autolink.exec(s);if(e){let t,n;return e[2]==="@"?(t=e[1],n="mailto:"+t):(t=e[1],n=t),{type:"link",raw:e[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}url(s){var t;let e;if(e=this.rules.inline.url.exec(s)){let n,r;if(e[2]==="@")n=e[0],r="mailto:"+n;else{let i;do i=e[0],e[0]=((t=this.rules.inline._backpedal.exec(e[0]))==null?void 0:t[0])??"";while(i!==e[0]);n=e[0],e[1]==="www."?r="http://"+e[0]:r=e[0]}return{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(s){let e=this.rules.inline.text.exec(s);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},qt=class tr{constructor(e){Se(this,"tokens");Se(this,"options");Se(this,"state");Se(this,"inlineQueue");Se(this,"tokenizer");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Cs,this.options.tokenizer=this.options.tokenizer||new wn,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:mt,block:cn.normal,inline:zs.normal};this.options.pedantic?(t.block=cn.pedantic,t.inline=zs.pedantic):this.options.gfm&&(t.block=cn.gfm,this.options.breaks?t.inline=zs.breaks:t.inline=zs.gfm),this.tokenizer.rules=t}static get rules(){return{block:cn,inline:zs}}static lex(e,t){return new tr(t).lex(e)}static lexInline(e,t){return new tr(t).inlineTokens(e)}lex(e){e=e.replace(mt.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){var r,i,a;for(this.options.pedantic&&(e=e.replace(mt.tabCharGlobal,"    ").replace(mt.spaceLine,""));e;){let l;if((i=(r=this.options.extensions)==null?void 0:r.block)!=null&&i.some(u=>(l=u.call({lexer:this},e,t))?(e=e.substring(l.raw.length),t.push(l),!0):!1))continue;if(l=this.tokenizer.space(e)){e=e.substring(l.raw.length);let u=t.at(-1);l.raw.length===1&&u!==void 0?u.raw+=`
`:t.push(l);continue}if(l=this.tokenizer.code(e)){e=e.substring(l.raw.length);let u=t.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+l.raw,u.text+=`
`+l.text,this.inlineQueue.at(-1).src=u.text):t.push(l);continue}if(l=this.tokenizer.fences(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.heading(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.hr(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.blockquote(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.list(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.html(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.def(e)){e=e.substring(l.raw.length);let u=t.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+l.raw,u.text+=`
`+l.raw,this.inlineQueue.at(-1).src=u.text):this.tokens.links[l.tag]||(this.tokens.links[l.tag]={href:l.href,title:l.title},t.push(l));continue}if(l=this.tokenizer.table(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.lheading(e)){e=e.substring(l.raw.length),t.push(l);continue}let c=e;if((a=this.options.extensions)!=null&&a.startBlock){let u=1/0,d=e.slice(1),m;this.options.extensions.startBlock.forEach(h=>{m=h.call({lexer:this},d),typeof m=="number"&&m>=0&&(u=Math.min(u,m))}),u<1/0&&u>=0&&(c=e.substring(0,u+1))}if(this.state.top&&(l=this.tokenizer.paragraph(c))){let u=t.at(-1);n&&(u==null?void 0:u.type)==="paragraph"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+l.raw,u.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):t.push(l),n=c.length!==e.length,e=e.substring(l.raw.length);continue}if(l=this.tokenizer.text(e)){e=e.substring(l.raw.length);let u=t.at(-1);(u==null?void 0:u.type)==="text"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+l.raw,u.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):t.push(l);continue}if(e){let u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var c,u,d,m,h;let n=e,r=null;if(this.tokens.links){let g=Object.keys(this.tokens.links);if(g.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)g.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,r.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let i;for(;(r=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)i=r[2]?r[2].length:0,n=n.slice(0,r.index+i)+"["+"a".repeat(r[0].length-i-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);n=((u=(c=this.options.hooks)==null?void 0:c.emStrongMask)==null?void 0:u.call({lexer:this},n))??n;let a=!1,l="";for(;e;){a||(l=""),a=!1;let g;if((m=(d=this.options.extensions)==null?void 0:d.inline)!=null&&m.some(v=>(g=v.call({lexer:this},e,t))?(e=e.substring(g.raw.length),t.push(g),!0):!1))continue;if(g=this.tokenizer.escape(e)){e=e.substring(g.raw.length),t.push(g);continue}if(g=this.tokenizer.tag(e)){e=e.substring(g.raw.length),t.push(g);continue}if(g=this.tokenizer.link(e)){e=e.substring(g.raw.length),t.push(g);continue}if(g=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(g.raw.length);let v=t.at(-1);g.type==="text"&&(v==null?void 0:v.type)==="text"?(v.raw+=g.raw,v.text+=g.text):t.push(g);continue}if(g=this.tokenizer.emStrong(e,n,l)){e=e.substring(g.raw.length),t.push(g);continue}if(g=this.tokenizer.codespan(e)){e=e.substring(g.raw.length),t.push(g);continue}if(g=this.tokenizer.br(e)){e=e.substring(g.raw.length),t.push(g);continue}if(g=this.tokenizer.del(e)){e=e.substring(g.raw.length),t.push(g);continue}if(g=this.tokenizer.autolink(e)){e=e.substring(g.raw.length),t.push(g);continue}if(!this.state.inLink&&(g=this.tokenizer.url(e))){e=e.substring(g.raw.length),t.push(g);continue}let p=e;if((h=this.options.extensions)!=null&&h.startInline){let v=1/0,S=e.slice(1),C;this.options.extensions.startInline.forEach(b=>{C=b.call({lexer:this},S),typeof C=="number"&&C>=0&&(v=Math.min(v,C))}),v<1/0&&v>=0&&(p=e.substring(0,v+1))}if(g=this.tokenizer.inlineText(p)){e=e.substring(g.raw.length),g.raw.slice(-1)!=="_"&&(l=g.raw.slice(-1)),a=!0;let v=t.at(-1);(v==null?void 0:v.type)==="text"?(v.raw+=g.raw,v.text+=g.text):t.push(g);continue}if(e){let v="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(v);break}else throw new Error(v)}}return t}},En=class{constructor(s){Se(this,"options");Se(this,"parser");this.options=s||Cs}space(s){return""}code({text:s,lang:e,escaped:t}){var i;let n=(i=(e||"").match(mt.notSpaceStart))==null?void 0:i[0],r=s.replace(mt.endingNewline,"")+`
`;return n?'<pre><code class="language-'+ss(n)+'">'+(t?r:ss(r,!0))+`</code></pre>
`:"<pre><code>"+(t?r:ss(r,!0))+`</code></pre>
`}blockquote({tokens:s}){return`<blockquote>
${this.parser.parse(s)}</blockquote>
`}html({text:s}){return s}def(s){return""}heading({tokens:s,depth:e}){return`<h${e}>${this.parser.parseInline(s)}</h${e}>
`}hr(s){return`<hr>
`}list(s){let e=s.ordered,t=s.start,n="";for(let a=0;a<s.items.length;a++){let l=s.items[a];n+=this.listitem(l)}let r=e?"ol":"ul",i=e&&t!==1?' start="'+t+'"':"";return"<"+r+i+`>
`+n+"</"+r+`>
`}listitem(s){return`<li>${this.parser.parse(s.tokens)}</li>
`}checkbox({checked:s}){return"<input "+(s?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:s}){return`<p>${this.parser.parseInline(s)}</p>
`}table(s){let e="",t="";for(let r=0;r<s.header.length;r++)t+=this.tablecell(s.header[r]);e+=this.tablerow({text:t});let n="";for(let r=0;r<s.rows.length;r++){let i=s.rows[r];t="";for(let a=0;a<i.length;a++)t+=this.tablecell(i[a]);n+=this.tablerow({text:t})}return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+n+`</table>
`}tablerow({text:s}){return`<tr>
${s}</tr>
`}tablecell(s){let e=this.parser.parseInline(s.tokens),t=s.header?"th":"td";return(s.align?`<${t} align="${s.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:s}){return`<strong>${this.parser.parseInline(s)}</strong>`}em({tokens:s}){return`<em>${this.parser.parseInline(s)}</em>`}codespan({text:s}){return`<code>${ss(s,!0)}</code>`}br(s){return"<br>"}del({tokens:s}){return`<del>${this.parser.parseInline(s)}</del>`}link({href:s,title:e,tokens:t}){let n=this.parser.parseInline(t),r=Mr(s);if(r===null)return n;s=r;let i='<a href="'+s+'"';return e&&(i+=' title="'+ss(e)+'"'),i+=">"+n+"</a>",i}image({href:s,title:e,text:t,tokens:n}){n&&(t=this.parser.parseInline(n,this.parser.textRenderer));let r=Mr(s);if(r===null)return ss(t);s=r;let i=`<img src="${s}" alt="${t}"`;return e&&(i+=` title="${ss(e)}"`),i+=">",i}text(s){return"tokens"in s&&s.tokens?this.parser.parseInline(s.tokens):"escaped"in s&&s.escaped?s.text:ss(s.text)}},yr=class{strong({text:s}){return s}em({text:s}){return s}codespan({text:s}){return s}del({text:s}){return s}html({text:s}){return s}text({text:s}){return s}link({text:s}){return""+s}image({text:s}){return""+s}br(){return""}checkbox({raw:s}){return s}},Ht=class sr{constructor(e){Se(this,"options");Se(this,"renderer");Se(this,"textRenderer");this.options=e||Cs,this.options.renderer=this.options.renderer||new En,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new yr}static parse(e,t){return new sr(t).parse(e)}static parseInline(e,t){return new sr(t).parseInline(e)}parse(e){var n,r;let t="";for(let i=0;i<e.length;i++){let a=e[i];if((r=(n=this.options.extensions)==null?void 0:n.renderers)!=null&&r[a.type]){let c=a,u=this.options.extensions.renderers[c.type].call({parser:this},c);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(c.type)){t+=u||"";continue}}let l=a;switch(l.type){case"space":{t+=this.renderer.space(l);break}case"hr":{t+=this.renderer.hr(l);break}case"heading":{t+=this.renderer.heading(l);break}case"code":{t+=this.renderer.code(l);break}case"table":{t+=this.renderer.table(l);break}case"blockquote":{t+=this.renderer.blockquote(l);break}case"list":{t+=this.renderer.list(l);break}case"checkbox":{t+=this.renderer.checkbox(l);break}case"html":{t+=this.renderer.html(l);break}case"def":{t+=this.renderer.def(l);break}case"paragraph":{t+=this.renderer.paragraph(l);break}case"text":{t+=this.renderer.text(l);break}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return t}parseInline(e,t=this.renderer){var r,i;let n="";for(let a=0;a<e.length;a++){let l=e[a];if((i=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&i[l.type]){let u=this.options.extensions.renderers[l.type].call({parser:this},l);if(u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(l.type)){n+=u||"";continue}}let c=l;switch(c.type){case"escape":{n+=t.text(c);break}case"html":{n+=t.html(c);break}case"link":{n+=t.link(c);break}case"image":{n+=t.image(c);break}case"checkbox":{n+=t.checkbox(c);break}case"strong":{n+=t.strong(c);break}case"em":{n+=t.em(c);break}case"codespan":{n+=t.codespan(c);break}case"br":{n+=t.br(c);break}case"del":{n+=t.del(c);break}case"text":{n+=t.text(c);break}default:{let u='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return n}},gn,Ys=(gn=class{constructor(s){Se(this,"options");Se(this,"block");this.options=s||Cs}preprocess(s){return s}postprocess(s){return s}processAllTokens(s){return s}emStrongMask(s){return s}provideLexer(){return this.block?qt.lex:qt.lexInline}provideParser(){return this.block?Ht.parse:Ht.parseInline}},Se(gn,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),Se(gn,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),gn),ic=class{constructor(...s){Se(this,"defaults",dr());Se(this,"options",this.setOptions);Se(this,"parse",this.parseMarkdown(!0));Se(this,"parseInline",this.parseMarkdown(!1));Se(this,"Parser",Ht);Se(this,"Renderer",En);Se(this,"TextRenderer",yr);Se(this,"Lexer",qt);Se(this,"Tokenizer",wn);Se(this,"Hooks",Ys);this.use(...s)}walkTokens(s,e){var n,r;let t=[];for(let i of s)switch(t=t.concat(e.call(this,i)),i.type){case"table":{let a=i;for(let l of a.header)t=t.concat(this.walkTokens(l.tokens,e));for(let l of a.rows)for(let c of l)t=t.concat(this.walkTokens(c.tokens,e));break}case"list":{let a=i;t=t.concat(this.walkTokens(a.items,e));break}default:{let a=i;(r=(n=this.defaults.extensions)==null?void 0:n.childTokens)!=null&&r[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{let c=a[l].flat(1/0);t=t.concat(this.walkTokens(c,e))}):a.tokens&&(t=t.concat(this.walkTokens(a.tokens,e)))}}return t}use(...s){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return s.forEach(t=>{let n={...t};if(n.async=this.defaults.async||n.async||!1,t.extensions&&(t.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){let i=e.renderers[r.name];i?e.renderers[r.name]=function(...a){let l=r.renderer.apply(this,a);return l===!1&&(l=i.apply(this,a)),l}:e.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let i=e[r.level];i?i.unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&(r.level==="block"?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:r.level==="inline"&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),n.extensions=e),t.renderer){let r=this.defaults.renderer||new En(this.defaults);for(let i in t.renderer){if(!(i in r))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;let a=i,l=t.renderer[a],c=r[a];r[a]=(...u)=>{let d=l.apply(r,u);return d===!1&&(d=c.apply(r,u)),d||""}}n.renderer=r}if(t.tokenizer){let r=this.defaults.tokenizer||new wn(this.defaults);for(let i in t.tokenizer){if(!(i in r))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;let a=i,l=t.tokenizer[a],c=r[a];r[a]=(...u)=>{let d=l.apply(r,u);return d===!1&&(d=c.apply(r,u)),d}}n.tokenizer=r}if(t.hooks){let r=this.defaults.hooks||new Ys;for(let i in t.hooks){if(!(i in r))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;let a=i,l=t.hooks[a],c=r[a];Ys.passThroughHooks.has(i)?r[a]=u=>{if(this.defaults.async&&Ys.passThroughHooksRespectAsync.has(i))return(async()=>{let m=await l.call(r,u);return c.call(r,m)})();let d=l.call(r,u);return c.call(r,d)}:r[a]=(...u)=>{if(this.defaults.async)return(async()=>{let m=await l.apply(r,u);return m===!1&&(m=await c.apply(r,u)),m})();let d=l.apply(r,u);return d===!1&&(d=c.apply(r,u)),d}}n.hooks=r}if(t.walkTokens){let r=this.defaults.walkTokens,i=t.walkTokens;n.walkTokens=function(a){let l=[];return l.push(i.call(this,a)),r&&(l=l.concat(r.call(this,a))),l}}this.defaults={...this.defaults,...n}}),this}setOptions(s){return this.defaults={...this.defaults,...s},this}lexer(s,e){return qt.lex(s,e??this.defaults)}parser(s,e){return Ht.parse(s,e??this.defaults)}parseMarkdown(s){return(e,t)=>{let n={...t},r={...this.defaults,...n},i=this.onError(!!r.silent,!!r.async);if(this.defaults.async===!0&&n.async===!1)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(r.hooks&&(r.hooks.options=r,r.hooks.block=s),r.async)return(async()=>{let a=r.hooks?await r.hooks.preprocess(e):e,l=await(r.hooks?await r.hooks.provideLexer():s?qt.lex:qt.lexInline)(a,r),c=r.hooks?await r.hooks.processAllTokens(l):l;r.walkTokens&&await Promise.all(this.walkTokens(c,r.walkTokens));let u=await(r.hooks?await r.hooks.provideParser():s?Ht.parse:Ht.parseInline)(c,r);return r.hooks?await r.hooks.postprocess(u):u})().catch(i);try{r.hooks&&(e=r.hooks.preprocess(e));let a=(r.hooks?r.hooks.provideLexer():s?qt.lex:qt.lexInline)(e,r);r.hooks&&(a=r.hooks.processAllTokens(a)),r.walkTokens&&this.walkTokens(a,r.walkTokens);let l=(r.hooks?r.hooks.provideParser():s?Ht.parse:Ht.parseInline)(a,r);return r.hooks&&(l=r.hooks.postprocess(l)),l}catch(a){return i(a)}}}onError(s,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,s){let n="<p>An error occurred:</p><pre>"+ss(t.message+"",!0)+"</pre>";return e?Promise.resolve(n):n}if(e)return Promise.reject(t);throw t}}},ws=new ic;function Re(s,e){return ws.parse(s,e)}Re.options=Re.setOptions=function(s){return ws.setOptions(s),Re.defaults=ws.defaults,ql(Re.defaults),Re};Re.getDefaults=dr;Re.defaults=Cs;Re.use=function(...s){return ws.use(...s),Re.defaults=ws.defaults,ql(Re.defaults),Re};Re.walkTokens=function(s,e){return ws.walkTokens(s,e)};Re.parseInline=ws.parseInline;Re.Parser=Ht;Re.parser=Ht.parse;Re.Renderer=En;Re.TextRenderer=yr;Re.Lexer=qt;Re.lexer=qt.lex;Re.Tokenizer=wn;Re.Hooks=Ys;Re.parse=Re;Re.options;Re.setOptions;Re.use;Re.walkTokens;Re.parseInline;Ht.parse;qt.lex;var zr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lc(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Jl={exports:{}};(function(s){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var t=function(n){var r=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,a={},l={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function b(A){return A instanceof c?new c(A.type,b(A.content),A.alias):Array.isArray(A)?A.map(b):A.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(b){return Object.prototype.toString.call(b).slice(8,-1)},objId:function(b){return b.__id||Object.defineProperty(b,"__id",{value:++i}),b.__id},clone:function b(A,E){E=E||{};var T,I;switch(l.util.type(A)){case"Object":if(I=l.util.objId(A),E[I])return E[I];T={},E[I]=T;for(var w in A)A.hasOwnProperty(w)&&(T[w]=b(A[w],E));return T;case"Array":return I=l.util.objId(A),E[I]?E[I]:(T=[],E[I]=T,A.forEach(function(O,N){T[N]=b(O,E)}),T);default:return A}},getLanguage:function(b){for(;b;){var A=r.exec(b.className);if(A)return A[1].toLowerCase();b=b.parentElement}return"none"},setLanguage:function(b,A){b.className=b.className.replace(RegExp(r,"gi"),""),b.classList.add("language-"+A)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(T){var b=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(T.stack)||[])[1];if(b){var A=document.getElementsByTagName("script");for(var E in A)if(A[E].src==b)return A[E]}return null}},isActive:function(b,A,E){for(var T="no-"+A;b;){var I=b.classList;if(I.contains(A))return!0;if(I.contains(T))return!1;b=b.parentElement}return!!E}},languages:{plain:a,plaintext:a,text:a,txt:a,extend:function(b,A){var E=l.util.clone(l.languages[b]);for(var T in A)E[T]=A[T];return E},insertBefore:function(b,A,E,T){T=T||l.languages;var I=T[b],w={};for(var O in I)if(I.hasOwnProperty(O)){if(O==A)for(var N in E)E.hasOwnProperty(N)&&(w[N]=E[N]);E.hasOwnProperty(O)||(w[O]=I[O])}var x=T[b];return T[b]=w,l.languages.DFS(l.languages,function(D,P){P===x&&D!=b&&(this[D]=w)}),w},DFS:function b(A,E,T,I){I=I||{};var w=l.util.objId;for(var O in A)if(A.hasOwnProperty(O)){E.call(A,O,A[O],T||O);var N=A[O],x=l.util.type(N);x==="Object"&&!I[w(N)]?(I[w(N)]=!0,b(N,E,null,I)):x==="Array"&&!I[w(N)]&&(I[w(N)]=!0,b(N,E,O,I))}}},plugins:{},highlightAll:function(b,A){l.highlightAllUnder(document,b,A)},highlightAllUnder:function(b,A,E){var T={callback:E,container:b,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};l.hooks.run("before-highlightall",T),T.elements=Array.prototype.slice.apply(T.container.querySelectorAll(T.selector)),l.hooks.run("before-all-elements-highlight",T);for(var I=0,w;w=T.elements[I++];)l.highlightElement(w,A===!0,T.callback)},highlightElement:function(b,A,E){var T=l.util.getLanguage(b),I=l.languages[T];l.util.setLanguage(b,T);var w=b.parentElement;w&&w.nodeName.toLowerCase()==="pre"&&l.util.setLanguage(w,T);var O=b.textContent,N={element:b,language:T,grammar:I,code:O};function x(P){N.highlightedCode=P,l.hooks.run("before-insert",N),N.element.innerHTML=N.highlightedCode,l.hooks.run("after-highlight",N),l.hooks.run("complete",N),E&&E.call(N.element)}if(l.hooks.run("before-sanity-check",N),w=N.element.parentElement,w&&w.nodeName.toLowerCase()==="pre"&&!w.hasAttribute("tabindex")&&w.setAttribute("tabindex","0"),!N.code){l.hooks.run("complete",N),E&&E.call(N.element);return}if(l.hooks.run("before-highlight",N),!N.grammar){x(l.util.encode(N.code));return}if(A&&n.Worker){var D=new Worker(l.filename);D.onmessage=function(P){x(P.data)},D.postMessage(JSON.stringify({language:N.language,code:N.code,immediateClose:!0}))}else x(l.highlight(N.code,N.grammar,N.language))},highlight:function(b,A,E){var T={code:b,grammar:A,language:E};if(l.hooks.run("before-tokenize",T),!T.grammar)throw new Error('The language "'+T.language+'" has no grammar.');return T.tokens=l.tokenize(T.code,T.grammar),l.hooks.run("after-tokenize",T),c.stringify(l.util.encode(T.tokens),T.language)},tokenize:function(b,A){var E=A.rest;if(E){for(var T in E)A[T]=E[T];delete A.rest}var I=new m;return h(I,I.head,b),d(b,I,A,I.head,0),p(I)},hooks:{all:{},add:function(b,A){var E=l.hooks.all;E[b]=E[b]||[],E[b].push(A)},run:function(b,A){var E=l.hooks.all[b];if(!(!E||!E.length))for(var T=0,I;I=E[T++];)I(A)}},Token:c};n.Prism=l;function c(b,A,E,T){this.type=b,this.content=A,this.alias=E,this.length=(T||"").length|0}c.stringify=function b(A,E){if(typeof A=="string")return A;if(Array.isArray(A)){var T="";return A.forEach(function(x){T+=b(x,E)}),T}var I={type:A.type,content:b(A.content,E),tag:"span",classes:["token",A.type],attributes:{},language:E},w=A.alias;w&&(Array.isArray(w)?Array.prototype.push.apply(I.classes,w):I.classes.push(w)),l.hooks.run("wrap",I);var O="";for(var N in I.attributes)O+=" "+N+'="'+(I.attributes[N]||"").replace(/"/g,"&quot;")+'"';return"<"+I.tag+' class="'+I.classes.join(" ")+'"'+O+">"+I.content+"</"+I.tag+">"};function u(b,A,E,T){b.lastIndex=A;var I=b.exec(E);if(I&&T&&I[1]){var w=I[1].length;I.index+=w,I[0]=I[0].slice(w)}return I}function d(b,A,E,T,I,w){for(var O in E)if(!(!E.hasOwnProperty(O)||!E[O])){var N=E[O];N=Array.isArray(N)?N:[N];for(var x=0;x<N.length;++x){if(w&&w.cause==O+","+x)return;var D=N[x],P=D.inside,z=!!D.lookbehind,U=!!D.greedy,W=D.alias;if(U&&!D.pattern.global){var j=D.pattern.toString().match(/[imsuy]*$/)[0];D.pattern=RegExp(D.pattern.source,j+"g")}for(var B=D.pattern||D,H=T.next,V=I;H!==A.tail&&!(w&&V>=w.reach);V+=H.value.length,H=H.next){var q=H.value;if(A.length>b.length)return;if(!(q instanceof c)){var Y=1,$;if(U){if($=u(B,V,b,z),!$||$.index>=b.length)break;var fe=$.index,ee=$.index+$[0].length,ae=V;for(ae+=H.value.length;fe>=ae;)H=H.next,ae+=H.value.length;if(ae-=H.value.length,V=ae,H.value instanceof c)continue;for(var ie=H;ie!==A.tail&&(ae<ee||typeof ie.value=="string");ie=ie.next)Y++,ae+=ie.value.length;Y--,q=b.slice(V,ae),$.index-=V}else if($=u(B,0,q,z),!$)continue;var fe=$.index,ce=$[0],se=q.slice(0,fe),de=q.slice(fe+ce.length),Ae=V+q.length;w&&Ae>w.reach&&(w.reach=Ae);var ne=H.prev;se&&(ne=h(A,ne,se),V+=se.length),g(A,ne,Y);var ge=new c(O,P?l.tokenize(ce,P):ce,W,ce);if(H=h(A,ne,ge),de&&h(A,H,de),Y>1){var he={cause:O+","+x,reach:Ae};d(b,A,E,H.prev,V,he),w&&he.reach>w.reach&&(w.reach=he.reach)}}}}}}function m(){var b={value:null,prev:null,next:null},A={value:null,prev:b,next:null};b.next=A,this.head=b,this.tail=A,this.length=0}function h(b,A,E){var T=A.next,I={value:E,prev:A,next:T};return A.next=I,T.prev=I,b.length++,I}function g(b,A,E){for(var T=A.next,I=0;I<E&&T!==b.tail;I++)T=T.next;A.next=T,T.prev=A,b.length-=I}function p(b){for(var A=[],E=b.head.next;E!==b.tail;)A.push(E.value),E=E.next;return A}if(!n.document)return n.addEventListener&&(l.disableWorkerMessageHandler||n.addEventListener("message",function(b){var A=JSON.parse(b.data),E=A.language,T=A.code,I=A.immediateClose;n.postMessage(l.highlight(T,l.languages[E],E)),I&&n.close()},!1)),l;var v=l.util.currentScript();v&&(l.filename=v.src,v.hasAttribute("data-manual")&&(l.manual=!0));function S(){l.manual||l.highlightAll()}if(!l.manual){var C=document.readyState;C==="loading"||C==="interactive"&&v&&v.defer?document.addEventListener("DOMContentLoaded",S):window.requestAnimationFrame?window.requestAnimationFrame(S):window.setTimeout(S,16)}return l}(e);s.exports&&(s.exports=t),typeof zr<"u"&&(zr.Prism=t),t.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.languages.markup.doctype.inside["internal-subset"].inside=t.languages.markup,t.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(r,i){var a={};a["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[i]},a.cdata=/^<!\[CDATA\[|\]\]>$/i;var l={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:a}};l["language-"+i]={pattern:/[\s\S]+/,inside:t.languages[i]};var c={};c[r]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return r}),"i"),lookbehind:!0,greedy:!0,inside:l},t.languages.insertBefore("markup","cdata",c)}}),Object.defineProperty(t.languages.markup.tag,"addAttribute",{value:function(n,r){t.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[r,"language-"+r],inside:t.languages[r]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.xml=t.languages.extend("markup",{}),t.languages.ssml=t.languages.xml,t.languages.atom=t.languages.xml,t.languages.rss=t.languages.xml,function(n){var r=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+r.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+r.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+r.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+r.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:r,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var i=n.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:t.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),t.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),t.languages.markup&&(t.languages.markup.tag.addInlined("script","javascript"),t.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),t.languages.js=t.languages.javascript,function(){if(typeof t>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loadingâ€¦",r=function(v,S){return"âœ– Error "+v+" while fetching file: "+S},i="âœ– Error: File does not exist or is empty",a={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},l="data-src-status",c="loading",u="loaded",d="failed",m="pre[data-src]:not(["+l+'="'+u+'"]):not(['+l+'="'+c+'"])';function h(v,S,C){var b=new XMLHttpRequest;b.open("GET",v,!0),b.onreadystatechange=function(){b.readyState==4&&(b.status<400&&b.responseText?S(b.responseText):b.status>=400?C(r(b.status,b.statusText)):C(i))},b.send(null)}function g(v){var S=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(v||"");if(S){var C=Number(S[1]),b=S[2],A=S[3];return b?A?[C,Number(A)]:[C,void 0]:[C,C]}}t.hooks.add("before-highlightall",function(v){v.selector+=", "+m}),t.hooks.add("before-sanity-check",function(v){var S=v.element;if(S.matches(m)){v.code="",S.setAttribute(l,c);var C=S.appendChild(document.createElement("CODE"));C.textContent=n;var b=S.getAttribute("data-src"),A=v.language;if(A==="none"){var E=(/\.(\w+)$/.exec(b)||[,"none"])[1];A=a[E]||E}t.util.setLanguage(C,A),t.util.setLanguage(S,A);var T=t.plugins.autoloader;T&&T.loadLanguages(A),h(b,function(I){S.setAttribute(l,u);var w=g(S.getAttribute("data-range"));if(w){var O=I.split(/\r\n?|\n/g),N=w[0],x=w[1]==null?O.length:w[1];N<0&&(N+=O.length),N=Math.max(0,Math.min(N-1,O.length)),x<0&&(x+=O.length),x=Math.max(0,Math.min(x,O.length)),I=O.slice(N,x).join(`
`),S.hasAttribute("data-start")||S.setAttribute("data-start",String(N+1))}C.textContent=I,t.highlightElement(C)},function(I){S.setAttribute(l,d),C.textContent=I})}}),t.plugins.fileHighlight={highlight:function(S){for(var C=(S||document).querySelectorAll(m),b=0,A;A=C[b++];)t.highlightElement(A)}};var p=!1;t.fileHighlight=function(){p||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),p=!0),t.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(Jl);var ac=Jl.exports;const Mn=lc(ac);/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:ea,setPrototypeOf:Vr,isFrozen:oc,getPrototypeOf:cc,getOwnPropertyDescriptor:uc}=Object;let{freeze:vt,seal:Lt,create:nr}=Object,{apply:rr,construct:ir}=typeof Reflect<"u"&&Reflect;vt||(vt=function(e){return e});Lt||(Lt=function(e){return e});rr||(rr=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return e.apply(t,r)});ir||(ir=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new e(...n)});const un=_t(Array.prototype.forEach),fc=_t(Array.prototype.lastIndexOf),qr=_t(Array.prototype.pop),qs=_t(Array.prototype.push),dc=_t(Array.prototype.splice),yn=_t(String.prototype.toLowerCase),Bn=_t(String.prototype.toString),Un=_t(String.prototype.match),Hs=_t(String.prototype.replace),hc=_t(String.prototype.indexOf),pc=_t(String.prototype.trim),Bt=_t(Object.prototype.hasOwnProperty),ft=_t(RegExp.prototype.test),js=gc(TypeError);function _t(s){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return rr(s,e,n)}}function gc(s){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ir(s,t)}}function ke(s,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:yn;Vr&&Vr(s,null);let n=e.length;for(;n--;){let r=e[n];if(typeof r=="string"){const i=t(r);i!==r&&(oc(e)||(e[n]=i),r=i)}s[r]=!0}return s}function mc(s){for(let e=0;e<s.length;e++)Bt(s,e)||(s[e]=null);return s}function ns(s){const e=nr(null);for(const[t,n]of ea(s))Bt(s,t)&&(Array.isArray(n)?e[t]=mc(n):n&&typeof n=="object"&&n.constructor===Object?e[t]=ns(n):e[t]=n);return e}function Gs(s,e){for(;s!==null;){const n=uc(s,e);if(n){if(n.get)return _t(n.get);if(typeof n.value=="function")return _t(n.value)}s=cc(s)}function t(){return null}return t}const Hr=vt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),zn=vt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Vn=vt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),vc=vt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),qn=vt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),_c=vt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),jr=vt(["#text"]),Gr=vt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Hn=vt(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Wr=vt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),fn=vt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),bc=Lt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),yc=Lt(/<%[\w\W]*|[\w\W]*%>/gm),kc=Lt(/\$\{[\w\W]*/gm),wc=Lt(/^data-[\-\w.\u00B7-\uFFFF]+$/),Ec=Lt(/^aria-[\-\w]+$/),ta=Lt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Sc=Lt(/^(?:\w+script|data):/i),Ac=Lt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),sa=Lt(/^html$/i),Tc=Lt(/^[a-z][.\w]*(-[.\w]+)+$/i);var $r=Object.freeze({__proto__:null,ARIA_ATTR:Ec,ATTR_WHITESPACE:Ac,CUSTOM_ELEMENT:Tc,DATA_ATTR:wc,DOCTYPE_NAME:sa,ERB_EXPR:yc,IS_ALLOWED_URI:ta,IS_SCRIPT_OR_DATA:Sc,MUSTACHE_EXPR:bc,TMPLIT_EXPR:kc});const Ws={element:1,text:3,progressingInstruction:7,comment:8,document:9},Cc=function(){return typeof window>"u"?null:window},Ic=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},Yr=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function na(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Cc();const e=ue=>na(ue);if(e.version="3.3.0",e.removed=[],!s||!s.document||s.document.nodeType!==Ws.document||!s.Element)return e.isSupported=!1,e;let{document:t}=s;const n=t,r=n.currentScript,{DocumentFragment:i,HTMLTemplateElement:a,Node:l,Element:c,NodeFilter:u,NamedNodeMap:d=s.NamedNodeMap||s.MozNamedAttrMap,HTMLFormElement:m,DOMParser:h,trustedTypes:g}=s,p=c.prototype,v=Gs(p,"cloneNode"),S=Gs(p,"remove"),C=Gs(p,"nextSibling"),b=Gs(p,"childNodes"),A=Gs(p,"parentNode");if(typeof a=="function"){const ue=t.createElement("template");ue.content&&ue.content.ownerDocument&&(t=ue.content.ownerDocument)}let E,T="";const{implementation:I,createNodeIterator:w,createDocumentFragment:O,getElementsByTagName:N}=t,{importNode:x}=n;let D=Yr();e.isSupported=typeof ea=="function"&&typeof A=="function"&&I&&I.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:P,ERB_EXPR:z,TMPLIT_EXPR:U,DATA_ATTR:W,ARIA_ATTR:j,IS_SCRIPT_OR_DATA:B,ATTR_WHITESPACE:H,CUSTOM_ELEMENT:V}=$r;let{IS_ALLOWED_URI:q}=$r,Y=null;const $=ke({},[...Hr,...zn,...Vn,...qn,...jr]);let ee=null;const ae=ke({},[...Gr,...Hn,...Wr,...fn]);let ie=Object.seal(nr(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),fe=null,ce=null;const se=Object.seal(nr(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let de=!0,Ae=!0,ne=!1,ge=!0,he=!1,be=!0,me=!1,Ne=!1,tt=!1,Ue=!1,Ie=!1,De=!1,Xe=!0,st=!1;const J="user-content-";let pe=!0,nt=!1,Ze={},Fe=null;const Ct=ke({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let jt=null;const Ke=ke({},["audio","video","img","source","image","track"]);let ve=null;const we=ke({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Rt="http://www.w3.org/1998/Math/MathML",xt="http://www.w3.org/2000/svg",He="http://www.w3.org/1999/xhtml";let Nt=He,Ot=!1,It=null;const wt=ke({},[Rt,xt,He],Bn);let Dt=ke({},["mi","mo","mn","ms","mtext"]),Qe=ke({},["annotation-xml"]);const Jt=ke({},["title","style","font","a","script"]);let ze=null;const Gt=["application/xhtml+xml","text/html"],ds="text/html";let ye=null,je=null;const Is=t.createElement("form"),hs=function(M){return M instanceof RegExp||M instanceof Function},at=function(){let M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(je&&je===M)){if((!M||typeof M!="object")&&(M={}),M=ns(M),ze=Gt.indexOf(M.PARSER_MEDIA_TYPE)===-1?ds:M.PARSER_MEDIA_TYPE,ye=ze==="application/xhtml+xml"?Bn:yn,Y=Bt(M,"ALLOWED_TAGS")?ke({},M.ALLOWED_TAGS,ye):$,ee=Bt(M,"ALLOWED_ATTR")?ke({},M.ALLOWED_ATTR,ye):ae,It=Bt(M,"ALLOWED_NAMESPACES")?ke({},M.ALLOWED_NAMESPACES,Bn):wt,ve=Bt(M,"ADD_URI_SAFE_ATTR")?ke(ns(we),M.ADD_URI_SAFE_ATTR,ye):we,jt=Bt(M,"ADD_DATA_URI_TAGS")?ke(ns(Ke),M.ADD_DATA_URI_TAGS,ye):Ke,Fe=Bt(M,"FORBID_CONTENTS")?ke({},M.FORBID_CONTENTS,ye):Ct,fe=Bt(M,"FORBID_TAGS")?ke({},M.FORBID_TAGS,ye):ns({}),ce=Bt(M,"FORBID_ATTR")?ke({},M.FORBID_ATTR,ye):ns({}),Ze=Bt(M,"USE_PROFILES")?M.USE_PROFILES:!1,de=M.ALLOW_ARIA_ATTR!==!1,Ae=M.ALLOW_DATA_ATTR!==!1,ne=M.ALLOW_UNKNOWN_PROTOCOLS||!1,ge=M.ALLOW_SELF_CLOSE_IN_ATTR!==!1,he=M.SAFE_FOR_TEMPLATES||!1,be=M.SAFE_FOR_XML!==!1,me=M.WHOLE_DOCUMENT||!1,Ue=M.RETURN_DOM||!1,Ie=M.RETURN_DOM_FRAGMENT||!1,De=M.RETURN_TRUSTED_TYPE||!1,tt=M.FORCE_BODY||!1,Xe=M.SANITIZE_DOM!==!1,st=M.SANITIZE_NAMED_PROPS||!1,pe=M.KEEP_CONTENT!==!1,nt=M.IN_PLACE||!1,q=M.ALLOWED_URI_REGEXP||ta,Nt=M.NAMESPACE||He,Dt=M.MATHML_TEXT_INTEGRATION_POINTS||Dt,Qe=M.HTML_INTEGRATION_POINTS||Qe,ie=M.CUSTOM_ELEMENT_HANDLING||{},M.CUSTOM_ELEMENT_HANDLING&&hs(M.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ie.tagNameCheck=M.CUSTOM_ELEMENT_HANDLING.tagNameCheck),M.CUSTOM_ELEMENT_HANDLING&&hs(M.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ie.attributeNameCheck=M.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),M.CUSTOM_ELEMENT_HANDLING&&typeof M.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ie.allowCustomizedBuiltInElements=M.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),he&&(Ae=!1),Ie&&(Ue=!0),Ze&&(Y=ke({},jr),ee=[],Ze.html===!0&&(ke(Y,Hr),ke(ee,Gr)),Ze.svg===!0&&(ke(Y,zn),ke(ee,Hn),ke(ee,fn)),Ze.svgFilters===!0&&(ke(Y,Vn),ke(ee,Hn),ke(ee,fn)),Ze.mathMl===!0&&(ke(Y,qn),ke(ee,Wr),ke(ee,fn))),M.ADD_TAGS&&(typeof M.ADD_TAGS=="function"?se.tagCheck=M.ADD_TAGS:(Y===$&&(Y=ns(Y)),ke(Y,M.ADD_TAGS,ye))),M.ADD_ATTR&&(typeof M.ADD_ATTR=="function"?se.attributeCheck=M.ADD_ATTR:(ee===ae&&(ee=ns(ee)),ke(ee,M.ADD_ATTR,ye))),M.ADD_URI_SAFE_ATTR&&ke(ve,M.ADD_URI_SAFE_ATTR,ye),M.FORBID_CONTENTS&&(Fe===Ct&&(Fe=ns(Fe)),ke(Fe,M.FORBID_CONTENTS,ye)),pe&&(Y["#text"]=!0),me&&ke(Y,["html","head","body"]),Y.table&&(ke(Y,["tbody"]),delete fe.tbody),M.TRUSTED_TYPES_POLICY){if(typeof M.TRUSTED_TYPES_POLICY.createHTML!="function")throw js('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof M.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw js('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');E=M.TRUSTED_TYPES_POLICY,T=E.createHTML("")}else E===void 0&&(E=Ic(g,r)),E!==null&&typeof T=="string"&&(T=E.createHTML(""));vt&&vt(M),je=M}},Mt=ke({},[...zn,...Vn,...vc]),ps=ke({},[...qn,..._c]),ln=function(M){let te=A(M);(!te||!te.tagName)&&(te={namespaceURI:Nt,tagName:"template"});const oe=yn(M.tagName),qe=yn(te.tagName);return It[M.namespaceURI]?M.namespaceURI===xt?te.namespaceURI===He?oe==="svg":te.namespaceURI===Rt?oe==="svg"&&(qe==="annotation-xml"||Dt[qe]):!!Mt[oe]:M.namespaceURI===Rt?te.namespaceURI===He?oe==="math":te.namespaceURI===xt?oe==="math"&&Qe[qe]:!!ps[oe]:M.namespaceURI===He?te.namespaceURI===xt&&!Qe[qe]||te.namespaceURI===Rt&&!Dt[qe]?!1:!ps[oe]&&(Jt[oe]||!Mt[oe]):!!(ze==="application/xhtml+xml"&&It[M.namespaceURI]):!1},ut=function(M){qs(e.removed,{element:M});try{A(M).removeChild(M)}catch{S(M)}},Wt=function(M,te){try{qs(e.removed,{attribute:te.getAttributeNode(M),from:te})}catch{qs(e.removed,{attribute:null,from:te})}if(te.removeAttribute(M),M==="is")if(Ue||Ie)try{ut(te)}catch{}else try{te.setAttribute(M,"")}catch{}},gs=function(M){let te=null,oe=null;if(tt)M="<remove></remove>"+M;else{const $e=Un(M,/^[\r\n\t ]+/);oe=$e&&$e[0]}ze==="application/xhtml+xml"&&Nt===He&&(M='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+M+"</body></html>");const qe=E?E.createHTML(M):M;if(Nt===He)try{te=new h().parseFromString(qe,ze)}catch{}if(!te||!te.documentElement){te=I.createDocument(Nt,"template",null);try{te.documentElement.innerHTML=Ot?T:qe}catch{}}const ot=te.body||te.documentElement;return M&&oe&&ot.insertBefore(t.createTextNode(oe),ot.childNodes[0]||null),Nt===He?N.call(te,me?"html":"body")[0]:me?te.documentElement:ot},Ms=function(M){return w.call(M.ownerDocument||M,M,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},ls=function(M){return M instanceof m&&(typeof M.nodeName!="string"||typeof M.textContent!="string"||typeof M.removeChild!="function"||!(M.attributes instanceof d)||typeof M.removeAttribute!="function"||typeof M.setAttribute!="function"||typeof M.namespaceURI!="string"||typeof M.insertBefore!="function"||typeof M.hasChildNodes!="function")},ms=function(M){return typeof l=="function"&&M instanceof l};function Pt(ue,M,te){un(ue,oe=>{oe.call(e,M,te,je)})}const vs=function(M){let te=null;if(Pt(D.beforeSanitizeElements,M,null),ls(M))return ut(M),!0;const oe=ye(M.nodeName);if(Pt(D.uponSanitizeElement,M,{tagName:oe,allowedTags:Y}),be&&M.hasChildNodes()&&!ms(M.firstElementChild)&&ft(/<[/\w!]/g,M.innerHTML)&&ft(/<[/\w!]/g,M.textContent)||M.nodeType===Ws.progressingInstruction||be&&M.nodeType===Ws.comment&&ft(/<[/\w]/g,M.data))return ut(M),!0;if(!(se.tagCheck instanceof Function&&se.tagCheck(oe))&&(!Y[oe]||fe[oe])){if(!fe[oe]&&Bs(oe)&&(ie.tagNameCheck instanceof RegExp&&ft(ie.tagNameCheck,oe)||ie.tagNameCheck instanceof Function&&ie.tagNameCheck(oe)))return!1;if(pe&&!Fe[oe]){const qe=A(M)||M.parentNode,ot=b(M)||M.childNodes;if(ot&&qe){const $e=ot.length;for(let Et=$e-1;Et>=0;--Et){const es=v(ot[Et],!0);es.__removalCount=(M.__removalCount||0)+1,qe.insertBefore(es,C(M))}}}return ut(M),!0}return M instanceof c&&!ln(M)||(oe==="noscript"||oe==="noembed"||oe==="noframes")&&ft(/<\/no(script|embed|frames)/i,M.innerHTML)?(ut(M),!0):(he&&M.nodeType===Ws.text&&(te=M.textContent,un([P,z,U],qe=>{te=Hs(te,qe," ")}),M.textContent!==te&&(qs(e.removed,{element:M.cloneNode()}),M.textContent=te)),Pt(D.afterSanitizeElements,M,null),!1)},_s=function(M,te,oe){if(Xe&&(te==="id"||te==="name")&&(oe in t||oe in Is))return!1;if(!(Ae&&!ce[te]&&ft(W,te))){if(!(de&&ft(j,te))){if(!(se.attributeCheck instanceof Function&&se.attributeCheck(te,M))){if(!ee[te]||ce[te]){if(!(Bs(M)&&(ie.tagNameCheck instanceof RegExp&&ft(ie.tagNameCheck,M)||ie.tagNameCheck instanceof Function&&ie.tagNameCheck(M))&&(ie.attributeNameCheck instanceof RegExp&&ft(ie.attributeNameCheck,te)||ie.attributeNameCheck instanceof Function&&ie.attributeNameCheck(te,M))||te==="is"&&ie.allowCustomizedBuiltInElements&&(ie.tagNameCheck instanceof RegExp&&ft(ie.tagNameCheck,oe)||ie.tagNameCheck instanceof Function&&ie.tagNameCheck(oe))))return!1}else if(!ve[te]){if(!ft(q,Hs(oe,H,""))){if(!((te==="src"||te==="xlink:href"||te==="href")&&M!=="script"&&hc(oe,"data:")===0&&jt[M])){if(!(ne&&!ft(B,Hs(oe,H,"")))){if(oe)return!1}}}}}}}return!0},Bs=function(M){return M!=="annotation-xml"&&Un(M,V)},bs=function(M){Pt(D.beforeSanitizeAttributes,M,null);const{attributes:te}=M;if(!te||ls(M))return;const oe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ee,forceKeepAttr:void 0};let qe=te.length;for(;qe--;){const ot=te[qe],{name:$e,namespaceURI:Et,value:es}=ot,Rs=ye($e),Pn=es;let rt=$e==="value"?Pn:pc(Pn);if(oe.attrName=Rs,oe.attrValue=rt,oe.keepAttr=!0,oe.forceKeepAttr=void 0,Pt(D.uponSanitizeAttribute,M,oe),rt=oe.attrValue,st&&(Rs==="id"||Rs==="name")&&(Wt($e,M),rt=J+rt),be&&ft(/((--!?|])>)|<\/(style|title|textarea)/i,rt)){Wt($e,M);continue}if(Rs==="attributename"&&Un(rt,"href")){Wt($e,M);continue}if(oe.forceKeepAttr)continue;if(!oe.keepAttr){Wt($e,M);continue}if(!ge&&ft(/\/>/i,rt)){Wt($e,M);continue}he&&un([P,z,U],Cr=>{rt=Hs(rt,Cr," ")});const Tr=ye(M.nodeName);if(!_s(Tr,Rs,rt)){Wt($e,M);continue}if(E&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!Et)switch(g.getAttributeType(Tr,Rs)){case"TrustedHTML":{rt=E.createHTML(rt);break}case"TrustedScriptURL":{rt=E.createScriptURL(rt);break}}if(rt!==Pn)try{Et?M.setAttributeNS(Et,$e,rt):M.setAttribute($e,rt),ls(M)?ut(M):qr(e.removed)}catch{Wt($e,M)}}Pt(D.afterSanitizeAttributes,M,null)},Ds=function ue(M){let te=null;const oe=Ms(M);for(Pt(D.beforeSanitizeShadowDOM,M,null);te=oe.nextNode();)Pt(D.uponSanitizeShadowNode,te,null),vs(te),bs(te),te.content instanceof i&&ue(te.content);Pt(D.afterSanitizeShadowDOM,M,null)};return e.sanitize=function(ue){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},te=null,oe=null,qe=null,ot=null;if(Ot=!ue,Ot&&(ue="<!-->"),typeof ue!="string"&&!ms(ue))if(typeof ue.toString=="function"){if(ue=ue.toString(),typeof ue!="string")throw js("dirty is not a string, aborting")}else throw js("toString is not a function");if(!e.isSupported)return ue;if(Ne||at(M),e.removed=[],typeof ue=="string"&&(nt=!1),nt){if(ue.nodeName){const es=ye(ue.nodeName);if(!Y[es]||fe[es])throw js("root node is forbidden and cannot be sanitized in-place")}}else if(ue instanceof l)te=gs("<!---->"),oe=te.ownerDocument.importNode(ue,!0),oe.nodeType===Ws.element&&oe.nodeName==="BODY"||oe.nodeName==="HTML"?te=oe:te.appendChild(oe);else{if(!Ue&&!he&&!me&&ue.indexOf("<")===-1)return E&&De?E.createHTML(ue):ue;if(te=gs(ue),!te)return Ue?null:De?T:""}te&&tt&&ut(te.firstChild);const $e=Ms(nt?ue:te);for(;qe=$e.nextNode();)vs(qe),bs(qe),qe.content instanceof i&&Ds(qe.content);if(nt)return ue;if(Ue){if(Ie)for(ot=O.call(te.ownerDocument);te.firstChild;)ot.appendChild(te.firstChild);else ot=te;return(ee.shadowroot||ee.shadowrootmode)&&(ot=x.call(n,ot,!0)),ot}let Et=me?te.outerHTML:te.innerHTML;return me&&Y["!doctype"]&&te.ownerDocument&&te.ownerDocument.doctype&&te.ownerDocument.doctype.name&&ft(sa,te.ownerDocument.doctype.name)&&(Et="<!DOCTYPE "+te.ownerDocument.doctype.name+`>
`+Et),he&&un([P,z,U],es=>{Et=Hs(Et,es," ")}),E&&De?E.createHTML(Et):Et},e.setConfig=function(){let ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};at(ue),Ne=!0},e.clearConfig=function(){je=null,Ne=!1},e.isValidAttribute=function(ue,M,te){je||at({});const oe=ye(ue),qe=ye(M);return _s(oe,qe,te)},e.addHook=function(ue,M){typeof M=="function"&&qs(D[ue],M)},e.removeHook=function(ue,M){if(M!==void 0){const te=fc(D[ue],M);return te===-1?void 0:dc(D[ue],te,1)[0]}return qr(D[ue])},e.removeHooks=function(ue){D[ue]=[]},e.removeAllHooks=function(){D=Yr()},e}var Dc=na();Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;(function(s){s.languages.typescript=s.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),s.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete s.languages.typescript.parameter,delete s.languages.typescript["literal-property"];var e=s.languages.extend("typescript",{});delete e["class-name"],s.languages.typescript["class-name"].inside=e,s.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e}}}}),s.languages.ts=s.languages.typescript})(Prism);Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/};Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python;Prism.languages.py=Prism.languages.python;(function(s){var e=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,t=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,n={pattern:RegExp(/(^|[^\w.])/.source+t+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};s.languages.java=s.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[n,{pattern:RegExp(/(^|[^\w.])/.source+t+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:n.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+t+/[A-Z]\w*\b/.source),lookbehind:!0,inside:n.inside}],keyword:e,function:[s.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),s.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),s.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":n,keyword:e,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+t+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:n.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+t+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:n.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0,inside:{punctuation:/\./}}})})(Prism);Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}});Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete Prism.languages.c.boolean;(function(s){var e=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,t=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return e.source});s.languages.cpp=s.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:e,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),s.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return t})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),s.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:s.languages.cpp}}}}),s.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),s.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:s.languages.extend("cpp",{})}}),s.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},s.languages.cpp["base-clause"])})(Prism);(function(s){function e(V,q){return V.replace(/<<(\d+)>>/g,function(Y,$){return"(?:"+q[+$]+")"})}function t(V,q,Y){return RegExp(e(V,q),"")}function n(V,q){for(var Y=0;Y<q;Y++)V=V.replace(/<<self>>/g,function(){return"(?:"+V+")"});return V.replace(/<<self>>/g,"[^\\s\\S]")}var r={type:"bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",typeDeclaration:"class enum interface record struct",contextual:"add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",other:"abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield"};function i(V){return"\\b(?:"+V.trim().replace(/ /g,"|")+")\\b"}var a=i(r.typeDeclaration),l=RegExp(i(r.type+" "+r.typeDeclaration+" "+r.contextual+" "+r.other)),c=i(r.typeDeclaration+" "+r.contextual+" "+r.other),u=i(r.type+" "+r.typeDeclaration+" "+r.other),d=n(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),m=n(/\((?:[^()]|<<self>>)*\)/.source,2),h=/@?\b[A-Za-z_]\w*\b/.source,g=e(/<<0>>(?:\s*<<1>>)?/.source,[h,d]),p=e(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[c,g]),v=/\[\s*(?:,\s*)*\]/.source,S=e(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[p,v]),C=e(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[d,m,v]),b=e(/\(<<0>>+(?:,<<0>>+)+\)/.source,[C]),A=e(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[b,p,v]),E={keyword:l,punctuation:/[<>()?,.:[\]]/},T=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,I=/"(?:\\.|[^\\"\r\n])*"/.source,w=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;s.languages.csharp=s.languages.extend("clike",{string:[{pattern:t(/(^|[^$\\])<<0>>/.source,[w]),lookbehind:!0,greedy:!0},{pattern:t(/(^|[^@$\\])<<0>>/.source,[I]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:t(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[p]),lookbehind:!0,inside:E},{pattern:t(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[h,A]),lookbehind:!0,inside:E},{pattern:t(/(\busing\s+)<<0>>(?=\s*=)/.source,[h]),lookbehind:!0},{pattern:t(/(\b<<0>>\s+)<<1>>/.source,[a,g]),lookbehind:!0,inside:E},{pattern:t(/(\bcatch\s*\(\s*)<<0>>/.source,[p]),lookbehind:!0,inside:E},{pattern:t(/(\bwhere\s+)<<0>>/.source,[h]),lookbehind:!0},{pattern:t(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[S]),lookbehind:!0,inside:E},{pattern:t(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[A,u,h]),inside:E}],keyword:l,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),s.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),s.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:t(/([(,]\s*)<<0>>(?=\s*:)/.source,[h]),lookbehind:!0,alias:"punctuation"}}),s.languages.insertBefore("csharp","class-name",{namespace:{pattern:t(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[h]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:t(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[m]),lookbehind:!0,alias:"class-name",inside:E},"return-type":{pattern:t(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[A,p]),inside:E,alias:"class-name"},"constructor-invocation":{pattern:t(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[A]),lookbehind:!0,inside:E,alias:"class-name"},"generic-method":{pattern:t(/<<0>>\s*<<1>>(?=\s*\()/.source,[h,d]),inside:{function:t(/^<<0>>/.source,[h]),generic:{pattern:RegExp(d),alias:"class-name",inside:E}}},"type-list":{pattern:t(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[a,g,h,A,l.source,m,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:t(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[g,m]),lookbehind:!0,greedy:!0,inside:s.languages.csharp},keyword:l,"class-name":{pattern:RegExp(A),greedy:!0,inside:E},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var O=I+"|"+T,N=e(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[O]),x=n(e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[N]),2),D=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,P=e(/<<0>>(?:\s*\(<<1>>*\))?/.source,[p,x]);s.languages.insertBefore("csharp","class-name",{attribute:{pattern:t(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[D,P]),lookbehind:!0,greedy:!0,inside:{target:{pattern:t(/^<<0>>(?=\s*:)/.source,[D]),alias:"keyword"},"attribute-arguments":{pattern:t(/\(<<0>>*\)/.source,[x]),inside:s.languages.csharp},"class-name":{pattern:RegExp(p),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var z=/:[^}\r\n]+/.source,U=n(e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[N]),2),W=e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[U,z]),j=n(e(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[O]),2),B=e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[j,z]);function H(V,q){return{interpolation:{pattern:t(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[V]),lookbehind:!0,inside:{"format-string":{pattern:t(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[q,z]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:s.languages.csharp}}},string:/[\s\S]+/}}s.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:t(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[W]),lookbehind:!0,greedy:!0,inside:H(W,U)},{pattern:t(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[B]),lookbehind:!0,greedy:!0,inside:H(B,j)}],char:{pattern:RegExp(T),greedy:!0}}),s.languages.dotnet=s.languages.cs=s.languages.csharp})(Prism);Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];(function(s){for(var e=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,t=0;t<2;t++)e=e.replace(/<self>/g,function(){return e});e=e.replace(/<self>/g,function(){return/[^\s\S]/.source}),s.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+e),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},s.languages.rust["closure-params"].inside.rest=s.languages.rust,s.languages.rust.attribute.inside.string=s.languages.rust.string})(Prism);(function(s){s.languages.ruby=s.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),s.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var e={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:s.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete s.languages.ruby.function;var t="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",n=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;s.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+t+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:e,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:e,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+n),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+n+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),s.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+t),greedy:!0,inside:{interpolation:e,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:e,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:e,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+t),greedy:!0,inside:{interpolation:e,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:e,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete s.languages.ruby.string,s.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),s.languages.rb=s.languages.ruby})(Prism);(function(s){var e="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",t={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},n={bash:t,environment:{pattern:RegExp("\\$"+e),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+e),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};s.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+e),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:n},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:t}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:n},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:n.entity}}],environment:{pattern:RegExp("\\$?"+e),alias:"constant"},variable:n.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},t.inside=s.languages.bash;for(var r=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=n.variable[1].inside,a=0;a<r.length;a++)i[r[a]]=s.languages.bash[r[a]];s.languages.sh=s.languages.bash,s.languages.shell=s.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(s){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;s.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+e.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},s.languages.css.atrule.inside.rest=s.languages.css;var t=s.languages.markup;t&&(t.tag.addInlined("style","css"),t.tag.addAttribute("style","css"))})(Prism);const Js=new Map;Re.setOptions({breaks:!0,gfm:!0});const Zr={js:"javascript",ts:"typescript",py:"python",rb:"ruby",sh:"bash",yml:"yaml",md:"markdown","c++":"cpp",csharp:"csharp","c#":"csharp",golang:"go",rs:"rust"},Rc={code(s){const e=s.text;let t=s.lang;if(t&&Zr[t.toLowerCase()]&&(t=Zr[t.toLowerCase()]),t&&Mn.languages[t])try{const r=Mn.highlight(e,Mn.languages[t],t);return`<pre class="language-${t}"><code class="language-${t}">${r}</code></pre>`}catch(r){console.error("Prism highlighting failed for",t,":",r);const i=e.replace(/</g,"&lt;").replace(/>/g,"&gt;");return`<pre class="language-${t}"><code class="language-${t}">${i}</code></pre>`}return`<pre><code>${e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</code></pre>`}};Re.use({renderer:Rc});function Sn(s){s=s.replace(/\|\|(.+?)\|\|/g,'<span class="spoiler" data-spoiler="true">$1</span>'),s=s.replace(/```(\w+)\n([\s\S]*?)```/g,(n,r,i)=>i.endsWith(`
`)?n:"```"+r+`
`+i+"\n```");let e;try{const n=Re.parse(s,{async:!1});e=typeof n=="string"?n:String(n)}catch(n){console.error("Markdown parse error:",n),e=s}return e=e.replace(/:([a-zA-Z0-9_]+):/g,(n,r)=>{const i=Js.get(r);return i?`<img src="${i.url}" alt=":${r}:" class="emote ${i.type==="animated"?"emote-animated":""}" title=":${r}:">`:n}),Dc.sanitize(e,{ALLOWED_TAGS:["p","br","strong","em","u","s","del","code","pre","a","img","blockquote","ul","ol","li","h1","h2","h3","h4","h5","h6","hr","span"],ALLOWED_ATTR:["href","src","alt","class","title","target","rel","data-spoiler"],FORBID_TAGS:["style","script"],FORBID_ATTR:["style","onerror","onload"]})}function Nc(s){Js.set(s.name,s)}function Oc(s){Js.delete(s)}function Pc(s){Js.clear(),s.forEach(e=>{Js.set(e.name,e)})}const Fc="wabi-chat-db",Lc=1,St="messages",Ns="settings";class xc{constructor(){Se(this,"db",null);Se(this,"initPromise",null)}async init(){if(!this.db)return this.initPromise?this.initPromise:(this.initPromise=new Promise((e,t)=>{const n=indexedDB.open(Fc,Lc);n.onerror=()=>t(n.error),n.onsuccess=()=>{this.db=n.result,e()},n.onupgradeneeded=r=>{const i=r.target.result;i.objectStoreNames.contains(St)||i.createObjectStore(St,{keyPath:"period"}),i.objectStoreNames.contains(Ns)||i.createObjectStore(Ns,{keyPath:"key"})}}),this.initPromise)}async getSetting(e){return this.db?new Promise((t,n)=>{const a=this.db.transaction([Ns],"readonly").objectStore(Ns).get(e);a.onsuccess=()=>{var l;return t((l=a.result)==null?void 0:l.value)},a.onerror=()=>n(a.error)}):null}async setSetting(e,t){if(this.db)return new Promise((n,r)=>{const l=this.db.transaction([Ns],"readwrite").objectStore(Ns).put({key:e,value:t});l.onsuccess=()=>n(),l.onerror=()=>r(l.error)})}async getArchive(e){return this.db?new Promise((t,n)=>{const a=this.db.transaction([St],"readonly").objectStore(St).get(e);a.onsuccess=()=>{var l;return t((l=a.result)==null?void 0:l.data)},a.onerror=()=>n(a.error)}):null}async setArchive(e,t){if(this.db)return new Promise((n,r)=>{const l=this.db.transaction([St],"readwrite").objectStore(St).put({period:e,data:t});l.onsuccess=()=>n(),l.onerror=()=>r(l.error)})}async deleteArchive(e){if(this.db)return new Promise((t,n)=>{const a=this.db.transaction([St],"readwrite").objectStore(St).delete(e);a.onsuccess=()=>t(),a.onerror=()=>n(a.error)})}async getAllArchiveKeys(){return this.db?new Promise((e,t)=>{const i=this.db.transaction([St],"readonly").objectStore(St).getAllKeys();i.onsuccess=()=>e(i.result),i.onerror=()=>t(i.error)}):[]}async getAllArchives(){return this.db?new Promise((e,t)=>{const i=this.db.transaction([St],"readonly").objectStore(St).getAll();i.onsuccess=()=>e(i.result),i.onerror=()=>t(i.error)}):[]}async clearAllArchives(){if(this.db)return new Promise((e,t)=>{const i=this.db.transaction([St],"readwrite").objectStore(St).clear();i.onsuccess=()=>e(),i.onerror=()=>t(i.error)})}}class Mc{constructor(){Se(this,"rotationPeriod","month");Se(this,"maxArchives",4);Se(this,"db");Se(this,"initPromise",null);this.db=new xc,this.initPromise=this.init()}async init(){await this.db.init(),await this.loadSettings()}async ensureInit(){this.initPromise&&await this.initPromise}async loadSettings(){const e=await this.db.getSetting("rotationPeriod");e&&(this.rotationPeriod=e);const t=await this.db.getSetting("maxArchives");t&&(this.maxArchives=parseInt(t))}async setRotationPeriod(e){await this.ensureInit(),this.rotationPeriod=e,await this.db.setSetting("rotationPeriod",e)}async setMaxArchives(e){await this.ensureInit(),this.maxArchives=e,await this.db.setSetting("maxArchives",e.toString()),await this.rotateArchives()}getRotationPeriod(){return this.rotationPeriod}getMaxArchives(){return this.maxArchives}getPeriodKey(){const e=new Date,t=e.getFullYear();switch(this.rotationPeriod){case"week":{const n=this.getWeekNumber(e);return`${t}-W${String(n).padStart(2,"0")}`}case"month":{const n=e.getMonth()+1;return`${t}-${String(n).padStart(2,"0")}`}case"half-year":{const n=e.getMonth()<6?"H1":"H2";return`${t}-${n}`}case"year":return`${t}`}}getWeekNumber(e){const t=new Date(e.getFullYear(),0,1),n=Math.floor((e.getTime()-t.getTime())/(24*60*60*1e3));return Math.ceil((n+t.getDay()+1)/7)}async isEnabled(){await this.ensureInit();const e=await this.db.getSetting("saveHistory");return e==="true"||e===!0}async setEnabled(e){await this.ensureInit(),await this.db.setSetting("saveHistory",e.toString())}async saveMessage(e,t){if(await this.ensureInit(),!await this.isEnabled())return;const r=this.getPeriodKey(),i=await this.db.getArchive(r)||{};i[e]||(i[e]=[]),i[e].push(t);try{await this.db.setArchive(r,i),await this.rotateArchives()}catch(a){console.error("Failed to save message to IndexedDB:",a),await this.rotateArchives()}}async rotateArchives(){await this.ensureInit();const e=(await this.db.getAllArchiveKeys()).sort().reverse();if(e.length>this.maxArchives){const t=e.slice(this.maxArchives);for(const n of t)console.log(`ðŸ—‘ï¸ Auto-deleting old archive: ${n}`),await this.db.deleteArchive(n)}}async loadAllMessages(){if(await this.ensureInit(),!await this.isEnabled())return{};const t={},n=await this.db.getAllArchives();for(const r of n){const i=r.data||{};Object.entries(i).forEach(([a,l])=>{t[a]||(t[a]=[]),t[a].push(...l)})}return Object.keys(t).forEach(r=>{t[r].sort((i,a)=>i.timestamp-a.timestamp)}),t}async deleteArchive(e){await this.ensureInit(),await this.db.deleteArchive(e),console.log(`ðŸ—‘ï¸ Deleted archive: ${e}`)}async clearAllHistory(){await this.ensureInit(),await this.db.clearAllArchives(),console.log("ðŸ—‘ï¸ Cleared all chat history")}async exportArchives(){await this.ensureInit();const e=await this.db.getAllArchives();if(e.length===0){alert("No archives to export");return}e.forEach(t=>{const n=JSON.stringify(t.data),r=new Blob([n],{type:"application/json"}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=`wabi-chat-${t.period}.json`,a.click(),URL.revokeObjectURL(i)})}async exportArchive(e){await this.ensureInit();const t=await this.db.getArchive(e);if(!t){alert("Archive not found");return}const n=new Blob([JSON.stringify(t)],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`wabi-chat-${e}.json`,i.click(),URL.revokeObjectURL(r)}async getStats(){await this.ensureInit();const t=(await this.db.getAllArchives()).map(i=>{const a=JSON.stringify(i.data),l=new Blob([a]).size,c=i.data,u=Object.values(c).reduce((d,m)=>d+m.length,0);return{period:i.period,size:l,messageCount:u}}).sort((i,a)=>a.period.localeCompare(i.period)),n=t.reduce((i,a)=>i+a.size,0),r=t.reduce((i,a)=>i+a.messageCount,0);return{archives:t,totalSize:n,totalMessages:r}}}const Tt=new Mc,Ls=lt(null),Ks=lt([]),xs=lt("general"),Ut=lt({general:[]}),rs=lt([]),ra=lt([]),os=lt(null),Xr=lt(!1),ia=lt(0),kr=lt(null);let le=null;function Bc(s){let e="http://localhost:3000";return e="https://ungruff-subtarsal-libby.ngrok-free.dev",le=bn(e),Ls.set(le),Tt.loadAllMessages().then(t=>{Object.keys(t).length>0&&Ut.set(t)}),le.on("connect",()=>{console.log("Connected to server"),Xr.set(!0),le==null||le.emit("join",s)}),le.on("disconnect",()=>{console.log("Disconnected from server"),Xr.set(!1)}),le.on("init",t=>{Ks.set(t.channels),rs.set(t.users),t.emotes&&Pc(t.emotes);const n=t.users.find(r=>r.id===(le==null?void 0:le.id));n&&os.set(n),le==null||le.emit("join-channel","general")}),le.on("channel-messages",t=>{Ut.update(n=>({...n,[t.channelId]:t.messages}))}),le.on("message",t=>{Ut.update(r=>({...r,[t.channelId]:[...r[t.channelId]||[],t.message]})),Tt.saveMessage(t.channelId,t.message);const n=t.message.userId===(le==null?void 0:le.id);wo(t.message,n),!n&&document.hidden&&ia.update(r=>(r===0&&kr.set(t.message.id),r+1))}),le.on("user-joined",t=>{rs.update(n=>[...n,t])}),le.on("user-left",t=>{rs.update(n=>n.filter(r=>r.id!==t.id))}),le.on("typing",t=>{ra.set(t)}),le.on("profile-updated",t=>{rs.update(n=>n.map(r=>r.id===t.id?t:r)),os.update(n=>n&&n.id===t.id?t:n)}),le.on("message-edited",t=>{Ut.update(n=>({...n,[t.channelId]:(n[t.channelId]||[]).map(r=>r.id===t.messageId?{...r,text:t.newText,isEdited:!0}:r)}))}),le.on("message-deleted",t=>{Ut.update(n=>({...n,[t.channelId]:(n[t.channelId]||[]).filter(r=>r.id!==t.messageId)}))}),le.on("message-pin-toggled",t=>{Ut.update(n=>({...n,[t.channelId]:(n[t.channelId]||[]).map(r=>r.id===t.messageId?{...r,isPinned:t.isPinned}:r)}))}),le.on("channel-created",t=>{Ks.update(n=>[...n,t]),Ut.update(n=>({...n,[t.id]:[]}))}),le.on("channel-deleted",t=>{Ks.update(n=>n.filter(r=>r.id!==t)),Ut.update(n=>{const r={...n};return delete r[t],r}),xs.update(n=>n===t?"general":n)}),le.on("channel-error",t=>{console.error("Channel error:",t),alert(t)}),le.on("emote-added",t=>{Nc(t)}),le.on("emote-deleted",t=>{Oc(t)}),le.on("emote-error",t=>{console.error("Emote error:",t),alert(t)}),le}function Uc(s){le==null||le.emit("join-channel",s),xs.set(s)}function zc(s){le==null||le.emit("create-channel",s)}function Vc(s){le==null||le.emit("delete-channel",s)}function dn(s,e,t="text",n){le==null||le.emit("message",{channelId:s,text:e,type:t,...n})}function la(s,e,t){le==null||le.emit("edit-message",{channelId:s,messageId:e,newText:t})}function qc(s,e){le==null||le.emit("delete-message",{channelId:s,messageId:e})}function aa(s,e){le==null||le.emit("toggle-pin-message",{channelId:s,messageId:e})}function jn(s){le==null||le.emit("typing",s)}function Kr(s,e){le==null||le.emit("update-profile",{status:s,profilePicture:e})}function Hc(){le==null||le.disconnect(),Ls.set(null),le=null}function jc(){ia.set(0),kr.set(null)}let hn;const Gc=new Uint8Array(16);function Wc(){if(!hn&&(hn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!hn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return hn(Gc)}const it=[];for(let s=0;s<256;++s)it.push((s+256).toString(16).slice(1));function $c(s,e=0){return it[s[e+0]]+it[s[e+1]]+it[s[e+2]]+it[s[e+3]]+"-"+it[s[e+4]]+it[s[e+5]]+"-"+it[s[e+6]]+it[s[e+7]]+"-"+it[s[e+8]]+it[s[e+9]]+"-"+it[s[e+10]]+it[s[e+11]]+it[s[e+12]]+it[s[e+13]]+it[s[e+14]]+it[s[e+15]]}const Yc=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Qr={randomUUID:Yc};function Zc(s,e,t){if(Qr.randomUUID&&!s)return Qr.randomUUID();s=s||{};const n=s.random||(s.rng||Wc)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,$c(n)}typeof window<"u"&&typeof location<"u"&&location.search.indexOf("giphy-debug");var ys="",oa=16,Xc=()=>{let s="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=e.length;for(let n=0;n<oa;n++)s+=e.charAt(Math.floor(Math.random()*t));return s},Kc=()=>{if(!ys){try{ys=sessionStorage.getItem("giphyPingbackId")}catch{}if(!ys){const s=new Date().getTime().toString(16);try{ys=`${s}${Zc().replace(/-/g,"")}`.substring(0,oa)}catch{ys=Xc()}try{sessionStorage.setItem("giphyPingbackId",ys)}catch{}}}return ys},Qc=Kc,pn=null;new Promise(s=>{typeof Image>"u"&&s(!1);const e=new Image;e.onload=()=>{pn=!0,s(pn)},e.onerror=()=>{pn=!1,s(pn)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"});var Zs=(typeof window<"u"?window:global)||{};Zs._GIPHY_SDK_HEADERS_=Zs._GIPHY_SDK_HEADERS_||(Zs.Headers?new Zs.Headers({"X-GIPHY-SDK-PLATFORM":"web"}):void 0);var ca=()=>Zs._GIPHY_SDK_HEADERS_,Jr=(s,e)=>{var t;return(t=ca())==null?void 0:t.set(s,e)},Jc=Object.defineProperty,eu=Object.defineProperties,tu=Object.getOwnPropertyDescriptors,su=Object.getOwnPropertyNames,ei=Object.getOwnPropertySymbols,nu=Object.prototype.hasOwnProperty,ru=Object.prototype.propertyIsEnumerable,ti=(s,e,t)=>e in s?Jc(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,Yt=(s,e)=>{for(var t in e||(e={}))nu.call(e,t)&&ti(s,t,e[t]);if(ei)for(var t of ei(e))ru.call(e,t)&&ti(s,t,e[t]);return s},Gn=(s,e)=>eu(s,tu(e)),iu=(s=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(s,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):s)(function(s){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+s+'" is not supported')}),lu=(s,e)=>function(){return e||(0,s[su(s)[0]])((e={exports:{}}).exports,e),e.exports},au=(s,e,t)=>new Promise((n,r)=>{var i=c=>{try{l(t.next(c))}catch(u){r(u)}},a=c=>{try{l(t.throw(c))}catch(u){r(u)}},l=c=>c.done?n(c.value):Promise.resolve(c.value).then(i,a);l((t=t.apply(s,e)).next())}),ou=lu({"package.json"(s,e){e.exports={scripts:{lint:"run -T eslint . --ext .ts,.tsx",clean:"rm -rf ./dist",dev:"parcel public/test.html",docs:"typedoc src/index.ts",build:"run -T tsup src/index.ts --format cjs,esm --dts && run -T publint",prepublish:"npm run clean && npm run build",test:"run -T jest --config ./jestconfig.js","test:watch":"run -T jest --config ./jestconfig.js --watchAll"},name:"@giphy/js-fetch-api",version:"5.7.0",description:"Javascript API to fetch gifs and stickers from the GIPHY API.",homepage:"https://github.com/Giphy/giphy-js/tree/master/packages/fetch-api",main:"dist/index.cjs",types:"dist/index.d.ts",module:"dist/index.js",type:"module",sideEffects:!1,exports:{".":{types:"./dist/index.d.ts",import:"./dist/index.js",require:"./dist/index.cjs"},"./package.json":"./package.json"},files:["dist/","src/**/*"],license:"MIT",publishConfig:{access:"public"},dependencies:{"@giphy/js-types":"*","@giphy/js-util":"*"},devDependencies:{"jest-fetch-mock":"^3.0.3","parcel-bundler":"latest",typedoc:"^0.20.37","typedoc-thunder-theme":"^0.0.3",typescript:"^5.0.4"}}}}),cu=["is_anonymous","is_community","is_featured","is_hidden","is_indexable","is_preserve_size","is_realtime","is_removed","is_sticker","is_dynamic"],uu=["suppress_chrome","is_public","is_verified"],si=s=>e=>s[e]=!!s[e],fu=s=>typeof s=="string"?s:s.text,ua=(s,e="")=>{const t=Yt({},s);t.id=String(t.id),t.tags=(t.tags||[]).map(fu),t.bottle_data||(t.bottle_data={}),t.response_id=e,cu.forEach(si(t)),Object.keys(t.images||{}).forEach(r=>{const i=t.images[r];i.width=parseInt(i.width),i.height=parseInt(i.height)});const{user:n}=t;if(n){const r=Yt({},n);uu.forEach(si(r)),t.user=r}return t},ni=s=>{const{response_id:e}=s.meta;return s.data=ua(s.data,e),s},ts=s=>{const{response_id:e}=s.meta;return s.data=s.data.map(t=>ua(t,e)),s},du=(typeof window<"u"?window:global)||{},hu=du.GIPHY_API_URL||"https://api.giphy.com/v1/",fa=class extends Error{constructor(s,e,t=0,n=""){super(s),this.url=e,this.status=t,this.statusText=n}},pu=class extends fa{},ri=fa,gu="@giphy/js-fetch-api: ",mu="Error fetching",vu=s=>s,Vt={},_u=6e4,bu=6e3,yu=()=>{const s=Date.now();Object.keys(Vt).forEach(e=>{const t=Vt[e].isError?bu:_u;s-Vt[e].ts>=t&&delete Vt[e]})};function ku(s,e={}){const{apiVersion:t=1,noCache:n=!1,normalizer:r=vu}=e,i=hu.replace(/\/v\d+\/$/,`/v${t}/`);if(yu(),!Vt[s]||n){const a=`${i}${s}`,l=()=>au(this,null,function*(){var c,u;let d;try{const m=yield fetch(a,{method:"get"});if(m.ok){const h=yield m.json();if((c=h.meta)!=null&&c.response_id)return r(h);throw{message:"synthetic response"}}else{let h=mu;try{const p=yield m.json();p.message&&(h=p.message),(u=p.meta)!=null&&u.msg&&(h=p.meta.msg)}catch{}Vt[s]&&(Vt[s].isError=!0);let g=ri;h==="This content is not available in your location"&&(g=pu),d=new g(`${gu}${h}`,a,m.status,m.statusText)}}catch(m){d=new ri(m.message,a),Vt[s]&&(Vt[s].isError=!0)}throw d});Vt[s]={request:l(),ts:Date.now()}}return Vt[s].request}var At=ku,Wn=s=>s&&s.type?s.type:"gifs",wu=class{constructor(s,e={}){this.getQS=(t={})=>new URLSearchParams(Yt(Gn(Yt({},t),{api_key:this.apiKey,pingback_id:Qc()}),this.qsParams)).toString(),this.apiKey=s,this.qsParams=e}categories(s){return At(`gifs/categories?${this.getQS(s)}`)}gif(s,e){const t=e!=null&&e.internal?"internal/":"";return At(`${t}gifs/${s}?${this.getQS()}`,{normalizer:ni})}gifs(s,e){return Array.isArray(s)?At(`gifs?${this.getQS({ids:s.join(",")})}`,{normalizer:ts}):At(`gifs/categories/${s}/${e}?${this.getQS()}`,{normalizer:ts})}emoji(s){return At(`emoji?${this.getQS(s)}`,{normalizer:ts})}emojiDefaultVariations(s){return At(`emoji?${this.getQS(s)}`,{apiVersion:2,normalizer:ts})}emojiVariations(s){return At(`emoji/${s}/variations?${this.getQS()}`,{apiVersion:2,normalizer:ts})}animate(s,e={}){const t=this.getQS(Gn(Yt({},e),{m:s}));return At(`text/animate?${t}`,{normalizer:ts})}search(s,e={}){const t=e.channel?`@${e.channel} ${s}`:s;let n;e.type==="text"&&(n=!0);const r=this.getQS(Gn(Yt({rating:"pg-13"},e),{q:t,excludeDynamicResults:n}));return At(`${Wn(e)}/search?${r}`,{normalizer:ts})}subcategories(s,e){return At(`gifs/categories/${s}?${this.getQS(e)}`)}trending(s={}){return At(`${Wn(s)}/trending?${this.getQS(Yt({rating:"pg-13"},s))}`,{normalizer:ts})}random(s){return At(`${Wn(s)}/random?${this.getQS(Yt({rating:"pg-13"},s))}`,{noCache:!0,normalizer:ni})}related(s,e={}){const{type:t="gifs"}=e;return At(`${t}/related?${this.getQS(Yt({gif_id:s,rating:"pg-13"},e))}`,{normalizer:ts})}channels(s,e={}){return At(`channels/search?${this.getQS(Yt({q:s,rating:"pg-13"},e))}`)}},Eu=wu,ii;if(typeof iu<"u"){const{version:s}=ou();(ii=ca())!=null&&ii.get("X-GIPHY-SDK-NAME")||(Jr("X-GIPHY-SDK-NAME","FetchAPI"),Jr("X-GIPHY-SDK-VERSION",s))}function li(s,e,t){const n=s.slice();return n[11]=e[t],n}function Su(s){let e=[],t=new Map,n,r=We(s[1]);const i=a=>a[11].id;for(let a=0;a<r.length;a+=1){let l=li(s,r,a),c=i(l);t.set(c,e[a]=ai(c,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();n=xe()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);n=xe()},m(a,l){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(a,l);G(a,n,l)},p(a,l){l&34&&(r=We(a[1]),e=Ts(e,l,i,1,a,r,t,n.parentNode,As,ai,n,li))},d(a){a&&_(n);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function Au(s){let e,t="No GIFs found";return{c(){e=k("div"),e.textContent=t,this.h()},l(n){e=y(n,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1db6zr7"&&(e.textContent=t),this.h()},h(){f(e,"class","no-results svelte-1t262zs")},m(n,r){G(n,e,r)},p:Pe,d(n){n&&_(e)}}}function Tu(s){let e,t="Loading...";return{c(){e=k("div"),e.textContent=t,this.h()},l(n){e=y(n,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1f5y80z"&&(e.textContent=t),this.h()},h(){f(e,"class","loading svelte-1t262zs")},m(n,r){G(n,e,r)},p:Pe,d(n){n&&_(e)}}}function ai(s,e){let t,n,r,i,a,l,c;function u(){return e[8](e[11])}return{key:s,first:null,c(){t=k("button"),n=k("img"),a=L(),this.h()},l(d){t=y(d,"BUTTON",{class:!0});var m=R(t);n=y(m,"IMG",{src:!0,alt:!0,class:!0}),a=F(m),m.forEach(_),this.h()},h(){Be(n.src,r=e[11].images.fixed_height_small.url)||f(n,"src",r),f(n,"alt",i=e[11].title),f(n,"class","svelte-1t262zs"),f(t,"class","gif-item svelte-1t262zs"),this.first=t},m(d,m){G(d,t,m),o(t,n),o(t,a),l||(c=K(t,"click",u),l=!0)},p(d,m){e=d,m&2&&!Be(n.src,r=e[11].images.fixed_height_small.url)&&f(n,"src",r),m&2&&i!==(i=e[11].title)&&f(n,"alt",i)},d(d){d&&_(t),l=!1,c()}}}function Cu(s){let e,t,n,r,i,a="âœ•",l,c,u,d;function m(p,v){return p[2]?Tu:p[1].length===0?Au:Su}let h=m(s),g=h(s);return{c(){e=k("div"),t=k("div"),n=k("input"),r=L(),i=k("button"),i.textContent=a,l=L(),c=k("div"),g.c(),this.h()},l(p){e=y(p,"DIV",{class:!0});var v=R(e);t=y(v,"DIV",{class:!0});var S=R(t);n=y(S,"INPUT",{type:!0,placeholder:!0,class:!0}),r=F(S),i=y(S,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(i)!=="svelte-xkwxcu"&&(i.textContent=a),S.forEach(_),l=F(v),c=y(v,"DIV",{class:!0});var C=R(c);g.l(C),C.forEach(_),v.forEach(_),this.h()},h(){f(n,"type","text"),f(n,"placeholder","Search GIFs..."),f(n,"class","svelte-1t262zs"),f(i,"class","close-btn svelte-1t262zs"),f(t,"class","giphy-header svelte-1t262zs"),f(c,"class","gif-grid svelte-1t262zs"),f(e,"class","giphy-picker svelte-1t262zs")},m(p,v){G(p,e,v),o(e,t),o(t,n),Je(n,s[0]),o(t,r),o(t,i),o(e,l),o(e,c),g.m(c,null),u||(d=[K(n,"input",s[6]),K(n,"input",s[4]),K(i,"click",s[7])],u=!0)},p(p,[v]){v&1&&n.value!==p[0]&&Je(n,p[0]),h===(h=m(p))&&g?g.p(p,v):(g.d(1),g=h(p),g&&(g.c(),g.m(c,null)))},i:Pe,o:Pe,d(p){p&&_(e),g.d(),u=!1,Me(d)}}}function Iu(s,e,t){const n=El();let r="",i=[],a=!1;const l=new Eu("sXpGFDGZs0Dv1mmNFvYaGUvYwKX0PWIh");async function c(){if(!r.trim()){u();return}t(2,a=!0);try{const{data:p}=await l.search(r,{limit:20});t(1,i=p)}catch(p){console.error("Error fetching GIFs:",p)}t(2,a=!1)}async function u(){t(2,a=!0);try{const{data:p}=await l.trending({limit:20});t(1,i=p)}catch(p){console.error("Error fetching trending GIFs:",p)}t(2,a=!1)}function d(p){n("select",p.images.fixed_height.url)}Es(()=>{u()});function m(){r=this.value,t(0,r)}return[r,i,a,n,c,d,m,()=>n("close"),p=>d(p)]}class Du extends yt{constructor(e){super(),kt(this,e,Iu,Cu,bt,{})}}function oi(s){let e,t,n,r,i=(s[2]?"Your Profile":s[1].username)+"",a,l,c,u="Ã—",d,m,h,g,p,v,S,C,b,A="Username:",E,T,I=s[1].username+"",w,O,N,x,D,P;function z($,ee){return $[4]||$[1].profilePicture?Nu:Ru}let U=z(s),W=U(s),j=s[2]&&ci(s),B=!s[2]&&ui(s);function H($,ee){return $[2]?xu:Lu}let V=H(s),q=V(s),Y=s[2]&&di(s);return{c(){e=k("div"),t=k("div"),n=k("div"),r=k("h2"),a=X(i),l=L(),c=k("button"),c.textContent=u,d=L(),m=k("div"),h=k("div"),g=k("div"),W.c(),p=L(),j&&j.c(),v=L(),S=k("div"),C=k("div"),b=k("span"),b.textContent=A,E=L(),T=k("span"),w=X(I),O=L(),B&&B.c(),N=L(),q.c(),x=L(),Y&&Y.c(),this.h()},l($){e=y($,"DIV",{class:!0});var ee=R(e);t=y(ee,"DIV",{class:!0});var ae=R(t);n=y(ae,"DIV",{class:!0});var ie=R(n);r=y(ie,"H2",{class:!0});var fe=R(r);a=Z(fe,i),fe.forEach(_),l=F(ie),c=y(ie,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(c)!=="svelte-12zniqk"&&(c.textContent=u),ie.forEach(_),d=F(ae),m=y(ae,"DIV",{class:!0});var ce=R(m);h=y(ce,"DIV",{class:!0});var se=R(h);g=y(se,"DIV",{class:!0});var de=R(g);W.l(de),de.forEach(_),p=F(se),j&&j.l(se),se.forEach(_),v=F(ce),S=y(ce,"DIV",{class:!0});var Ae=R(S);C=y(Ae,"DIV",{class:!0});var ne=R(C);b=y(ne,"SPAN",{class:!0,"data-svelte-h":!0}),Q(b)!=="svelte-1fffgfa"&&(b.textContent=A),E=F(ne),T=y(ne,"SPAN",{class:!0});var ge=R(T);w=Z(ge,I),ge.forEach(_),ne.forEach(_),Ae.forEach(_),O=F(ce),B&&B.l(ce),N=F(ce),q.l(ce),ce.forEach(_),x=F(ae),Y&&Y.l(ae),ae.forEach(_),ee.forEach(_),this.h()},h(){f(r,"class","svelte-1gfq969"),f(c,"class","close-btn svelte-1gfq969"),f(n,"class","modal-header svelte-1gfq969"),f(g,"class","profile-picture-container svelte-1gfq969"),f(h,"class","profile-picture-section svelte-1gfq969"),f(b,"class","info-label svelte-1gfq969"),f(T,"class","info-value svelte-1gfq969"),f(C,"class","info-row svelte-1gfq969"),f(S,"class","user-info svelte-1gfq969"),f(m,"class","modal-body svelte-1gfq969"),f(t,"class","modal-content svelte-1gfq969"),f(e,"class","modal-overlay svelte-1gfq969")},m($,ee){G($,e,ee),o(e,t),o(t,n),o(n,r),o(r,a),o(n,l),o(n,c),o(t,d),o(t,m),o(m,h),o(h,g),W.m(g,null),o(h,p),j&&j.m(h,null),o(m,v),o(m,S),o(S,C),o(C,b),o(C,E),o(C,T),o(T,w),o(m,O),B&&B.m(m,null),o(m,N),q.m(m,null),o(t,x),Y&&Y.m(t,null),D||(P=[K(c,"click",s[9]),K(t,"click",Ss(s[12])),K(e,"click",s[9])],D=!0)},p($,ee){ee&6&&i!==(i=($[2]?"Your Profile":$[1].username)+"")&&re(a,i),U===(U=z($))&&W?W.p($,ee):(W.d(1),W=U($),W&&(W.c(),W.m(g,null))),$[2]?j?j.p($,ee):(j=ci($),j.c(),j.m(h,null)):j&&(j.d(1),j=null),ee&2&&I!==(I=$[1].username+"")&&re(w,I),$[2]?B&&(B.d(1),B=null):B?B.p($,ee):(B=ui($),B.c(),B.m(m,N)),V===(V=H($))&&q?q.p($,ee):(q.d(1),q=V($),q&&(q.c(),q.m(m,null))),$[2]?Y?Y.p($,ee):(Y=di($),Y.c(),Y.m(t,null)):Y&&(Y.d(1),Y=null)},d($){$&&_(e),W.d(),j&&j.d(),B&&B.d(),q.d(),Y&&Y.d(),D=!1,Me(P)}}}function Ru(s){let e,t=s[1].username.charAt(0).toUpperCase()+"",n;return{c(){e=k("div"),n=X(t),this.h()},l(r){e=y(r,"DIV",{class:!0,style:!0});var i=R(e);n=Z(i,t),i.forEach(_),this.h()},h(){f(e,"class","profile-picture-placeholder svelte-1gfq969"),Le(e,"background-color",s[1].color)},m(r,i){G(r,e,i),o(e,n)},p(r,i){i&2&&t!==(t=r[1].username.charAt(0).toUpperCase()+"")&&re(n,t),i&2&&Le(e,"background-color",r[1].color)},d(r){r&&_(e)}}}function Nu(s){let e,t,n;return{c(){e=k("img"),this.h()},l(r){e=y(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Be(e.src,t=s[4]||s[1].profilePicture)||f(e,"src",t),f(e,"alt",n=s[1].username),f(e,"class","profile-picture svelte-1gfq969")},m(r,i){G(r,e,i)},p(r,i){i&18&&!Be(e.src,t=r[4]||r[1].profilePicture)&&f(e,"src",t),i&2&&n!==(n=r[1].username)&&f(e,"alt",n)},d(r){r&&_(e)}}}function ci(s){let e,t,n=s[4]||s[1].profilePicture?"Change Picture":"Upload Picture",r,i,a,l,c;return{c(){e=k("div"),t=k("label"),r=X(n),i=L(),a=k("input"),this.h()},l(u){e=y(u,"DIV",{class:!0});var d=R(e);t=y(d,"LABEL",{for:!0,class:!0});var m=R(t);r=Z(m,n),m.forEach(_),i=F(d),a=y(d,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),d.forEach(_),this.h()},h(){f(t,"for","profile-picture"),f(t,"class","upload-label svelte-1gfq969"),f(a,"id","profile-picture"),f(a,"type","file"),f(a,"accept","image/*"),f(a,"class","file-input svelte-1gfq969"),f(e,"class","upload-section svelte-1gfq969")},m(u,d){G(u,e,d),o(e,t),o(t,r),o(e,i),o(e,a),l||(c=K(a,"change",s[10]),l=!0)},p(u,d){d&18&&n!==(n=u[4]||u[1].profilePicture?"Change Picture":"Upload Picture")&&re(r,n)},d(u){u&&_(e),l=!1,c()}}}function ui(s){let e,t,n,r="Personal Notes:",i,a,l=!s[6]&&fi(s);function c(m,h){return m[6]?Fu:m[5]?Pu:Ou}let u=c(s),d=u(s);return{c(){e=k("div"),t=k("div"),n=k("label"),n.textContent=r,i=L(),l&&l.c(),a=L(),d.c(),this.h()},l(m){e=y(m,"DIV",{class:!0});var h=R(e);t=y(h,"DIV",{class:!0});var g=R(t);n=y(g,"LABEL",{class:!0,"data-svelte-h":!0}),Q(n)!=="svelte-1vz1uda"&&(n.textContent=r),i=F(g),l&&l.l(g),g.forEach(_),a=F(h),d.l(h),h.forEach(_),this.h()},h(){f(n,"class","notes-label svelte-1gfq969"),f(t,"class","notes-header svelte-1gfq969"),f(e,"class","notes-section svelte-1gfq969")},m(m,h){G(m,e,h),o(e,t),o(t,n),o(t,i),l&&l.m(t,null),o(e,a),d.m(e,null)},p(m,h){m[6]?l&&(l.d(1),l=null):l?l.p(m,h):(l=fi(m),l.c(),l.m(t,null)),u===(u=c(m))&&d?d.p(m,h):(d.d(1),d=u(m),d&&(d.c(),d.m(e,null)))},d(m){m&&_(e),l&&l.d(),d.d()}}}function fi(s){let e,t=s[5]?"Edit":"Add Note",n,r,i;return{c(){e=k("button"),n=X(t),this.h()},l(a){e=y(a,"BUTTON",{class:!0});var l=R(e);n=Z(l,t),l.forEach(_),this.h()},h(){f(e,"class","edit-note-btn svelte-1gfq969")},m(a,l){G(a,e,l),o(e,n),r||(i=K(e,"click",s[13]),r=!0)},p(a,l){l&32&&t!==(t=a[5]?"Edit":"Add Note")&&re(n,t)},d(a){a&&_(e),r=!1,i()}}}function Ou(s){let e,t='No notes yet. Click "Add Note" to remember details about this user.';return{c(){e=k("div"),e.textContent=t,this.h()},l(n){e=y(n,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-t39qdr"&&(e.textContent=t),this.h()},h(){f(e,"class","note-placeholder svelte-1gfq969")},m(n,r){G(n,e,r)},p:Pe,d(n){n&&_(e)}}}function Pu(s){let e,t;return{c(){e=k("div"),t=X(s[5]),this.h()},l(n){e=y(n,"DIV",{class:!0});var r=R(e);t=Z(r,s[5]),r.forEach(_),this.h()},h(){f(e,"class","note-display svelte-1gfq969")},m(n,r){G(n,e,r),o(e,t)},p(n,r){r&32&&re(t,n[5])},d(n){n&&_(e)}}}function Fu(s){let e,t,n,r,i="Cancel",a,l,c="Save Note",u,d;return{c(){e=k("textarea"),t=L(),n=k("div"),r=k("button"),r.textContent=i,a=L(),l=k("button"),l.textContent=c,this.h()},l(m){e=y(m,"TEXTAREA",{placeholder:!0,class:!0,rows:!0}),R(e).forEach(_),t=F(m),n=y(m,"DIV",{class:!0});var h=R(n);r=y(h,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(r)!=="svelte-hulrz8"&&(r.textContent=i),a=F(h),l=y(h,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(l)!=="svelte-9d2dbm"&&(l.textContent=c),h.forEach(_),this.h()},h(){f(e,"placeholder","Add personal notes (e.g., nickname, birthday, interests...)"),f(e,"class","note-textarea svelte-1gfq969"),f(e,"rows","3"),f(r,"class","cancel-note-btn svelte-1gfq969"),f(l,"class","save-note-btn svelte-1gfq969"),f(n,"class","note-actions svelte-1gfq969")},m(m,h){G(m,e,h),Je(e,s[5]),G(m,t,h),G(m,n,h),o(n,r),o(n,a),o(n,l),u||(d=[K(e,"input",s[14]),K(r,"click",s[15]),K(l,"click",s[8])],u=!0)},p(m,h){h&32&&Je(e,m[5])},d(m){m&&(_(e),_(t),_(n)),u=!1,Me(d)}}}function Lu(s){let e,t,n,r,i=s[1].status.charAt(0).toUpperCase()+s[1].status.slice(1)+"",a;return{c(){e=k("div"),t=k("span"),n=L(),r=k("span"),a=X(i),this.h()},l(l){e=y(l,"DIV",{class:!0});var c=R(e);t=y(c,"SPAN",{class:!0,style:!0}),R(t).forEach(_),n=F(c),r=y(c,"SPAN",{class:!0});var u=R(r);a=Z(u,i),u.forEach(_),c.forEach(_),this.h()},h(){f(t,"class","status-dot svelte-1gfq969"),Le(t,"background-color",Qs(s[1].status)),f(r,"class","status-text svelte-1gfq969"),f(e,"class","status-display svelte-1gfq969")},m(l,c){G(l,e,c),o(e,t),o(e,n),o(e,r),o(r,a)},p(l,c){c&2&&Le(t,"background-color",Qs(l[1].status)),c&2&&i!==(i=l[1].status.charAt(0).toUpperCase()+l[1].status.slice(1)+"")&&re(a,i)},d(l){l&&_(e)}}}function xu(s){let e,t,n="Status:",r,i,a,l,c,u,d,m,h,g,p,v,S,C,b,A,E,T;return{c(){e=k("div"),t=k("label"),t.textContent=n,r=L(),i=k("div"),a=k("button"),l=k("span"),c=X(`\r
								Active`),d=L(),m=k("button"),h=k("span"),g=X(`\r
								Away`),v=L(),S=k("button"),C=k("span"),b=X(`\r
								Busy`),this.h()},l(I){e=y(I,"DIV",{class:!0});var w=R(e);t=y(w,"LABEL",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-138t5u0"&&(t.textContent=n),r=F(w),i=y(w,"DIV",{class:!0});var O=R(i);a=y(O,"BUTTON",{class:!0});var N=R(a);l=y(N,"SPAN",{class:!0,style:!0}),R(l).forEach(_),c=Z(N,`\r
								Active`),N.forEach(_),d=F(O),m=y(O,"BUTTON",{class:!0});var x=R(m);h=y(x,"SPAN",{class:!0,style:!0}),R(h).forEach(_),g=Z(x,`\r
								Away`),x.forEach(_),v=F(O),S=y(O,"BUTTON",{class:!0});var D=R(S);C=y(D,"SPAN",{class:!0,style:!0}),R(C).forEach(_),b=Z(D,`\r
								Busy`),D.forEach(_),O.forEach(_),w.forEach(_),this.h()},h(){f(t,"class","status-label svelte-1gfq969"),f(l,"class","status-dot svelte-1gfq969"),Le(l,"background-color",Qs("active")),f(a,"class",u="status-btn "+(s[3]==="active"?"selected":"")+" svelte-1gfq969"),f(h,"class","status-dot svelte-1gfq969"),Le(h,"background-color",Qs("away")),f(m,"class",p="status-btn "+(s[3]==="away"?"selected":"")+" svelte-1gfq969"),f(C,"class","status-dot svelte-1gfq969"),Le(C,"background-color",Qs("busy")),f(S,"class",A="status-btn "+(s[3]==="busy"?"selected":"")+" svelte-1gfq969"),f(i,"class","status-options svelte-1gfq969"),f(e,"class","status-section svelte-1gfq969")},m(I,w){G(I,e,w),o(e,t),o(e,r),o(e,i),o(i,a),o(a,l),o(a,c),o(i,d),o(i,m),o(m,h),o(m,g),o(i,v),o(i,S),o(S,C),o(S,b),E||(T=[K(a,"click",s[16]),K(m,"click",s[17]),K(S,"click",s[18])],E=!0)},p(I,w){w&8&&u!==(u="status-btn "+(I[3]==="active"?"selected":"")+" svelte-1gfq969")&&f(a,"class",u),w&8&&p!==(p="status-btn "+(I[3]==="away"?"selected":"")+" svelte-1gfq969")&&f(m,"class",p),w&8&&A!==(A="status-btn "+(I[3]==="busy"?"selected":"")+" svelte-1gfq969")&&f(S,"class",A)},d(I){I&&_(e),E=!1,Me(T)}}}function di(s){let e,t,n="Cancel",r,i,a="Save Changes",l,c;return{c(){e=k("div"),t=k("button"),t.textContent=n,r=L(),i=k("button"),i.textContent=a,this.h()},l(u){e=y(u,"DIV",{class:!0});var d=R(e);t=y(d,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-2pqgi7"&&(t.textContent=n),r=F(d),i=y(d,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(i)!=="svelte-2yi6cr"&&(i.textContent=a),d.forEach(_),this.h()},h(){f(t,"class","cancel-btn svelte-1gfq969"),f(i,"class","save-btn svelte-1gfq969"),f(e,"class","modal-footer svelte-1gfq969")},m(u,d){G(u,e,d),o(e,t),o(e,r),o(e,i),l||(c=[K(t,"click",s[9]),K(i,"click",s[11])],l=!0)},p:Pe,d(u){u&&_(e),l=!1,Me(c)}}}function Mu(s){let e,t=s[0]&&s[1]&&oi(s);return{c(){t&&t.c(),e=xe()},l(n){t&&t.l(n),e=xe()},m(n,r){t&&t.m(n,r),G(n,e,r)},p(n,[r]){n[0]&&n[1]?t?t.p(n,r):(t=oi(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Pe,o:Pe,d(n){n&&_(e),t&&t.d(n)}}}function Qs(s){switch(s){case"active":return"#10b981";case"away":return"#f59e0b";case"busy":return"#ef4444";default:return"#6b7280"}}function Bu(s,e,t){let{isOpen:n=!1}=e,{user:r=null}=e,{isOwnProfile:i=!1}=e,a=(r==null?void 0:r.status)||"active";r!=null&&r.profilePicture;let l=null,c=null,u="",d=!1;function m(){if(!r)return;const w=JSON.parse(localStorage.getItem("userNotes")||"{}");t(5,u=w[r.id]||"")}function h(){if(!r)return;const w=JSON.parse(localStorage.getItem("userNotes")||"{}");u.trim()?w[r.id]=u:delete w[r.id],localStorage.setItem("userNotes",JSON.stringify(w)),t(6,d=!1)}function g(){t(0,n=!1),l=null,t(4,c=null),t(6,d=!1)}function p(w){var x;const N=(x=w.target.files)==null?void 0:x[0];if(N&&N.type.startsWith("image/")){l=N;const D=new FileReader;D.onload=P=>{var z;t(4,c=(z=P.target)==null?void 0:z.result)},D.readAsDataURL(N)}}function v(){i&&(l&&c?Kr(a,c):a!==(r==null?void 0:r.status)&&Kr(a,void 0),g())}function S(w){Os.call(this,s,w)}const C=()=>t(6,d=!0);function b(){u=this.value,t(5,u)}const A=()=>{t(6,d=!1),m()},E=()=>t(3,a="active"),T=()=>t(3,a="away"),I=()=>t(3,a="busy");return s.$$set=w=>{"isOpen"in w&&t(0,n=w.isOpen),"user"in w&&t(1,r=w.user),"isOwnProfile"in w&&t(2,i=w.isOwnProfile)},s.$$.update=()=>{s.$$.dirty&2&&r&&(t(3,a=r.status),r.profilePicture,m())},[n,r,i,a,c,u,d,m,h,g,p,v,S,C,b,A,E,T,I]}class da extends yt{constructor(e){super(),kt(this,e,Bu,Mu,bt,{isOpen:0,user:1,isOwnProfile:2})}}function hi(s){let e,t,n,r=`<span class="menu-icon svelte-1tp94fk">ðŸ’¬</span>
				Reply`,i,a,l,c,u,d,m=s[1].isPinned?"ðŸ“Œ":"ðŸ“",h,g,p=s[1].isPinned?"Unpin":"Pin",v,S,C,b,A=`<span class="menu-icon svelte-1tp94fk">ðŸ“‹</span>
				Copy Text`,E,T,I,w=s[11]&&s[6]&&pi(s),O=s[7]&&gi(s),N=s[12]&&mi(s),x=s[12]&&vi(s);return{c(){e=k("div"),t=k("div"),n=k("button"),n.innerHTML=r,i=L(),w&&w.c(),a=L(),O&&O.c(),l=L(),N&&N.c(),c=L(),u=k("button"),d=k("span"),h=X(m),g=L(),v=X(p),S=X(" Message"),C=L(),b=k("button"),b.innerHTML=A,E=L(),x&&x.c(),this.h()},l(D){e=y(D,"DIV",{class:!0});var P=R(e);t=y(P,"DIV",{class:!0,style:!0});var z=R(t);n=y(z,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(n)!=="svelte-1bhlhgs"&&(n.innerHTML=r),i=F(z),w&&w.l(z),a=F(z),O&&O.l(z),l=F(z),N&&N.l(z),c=F(z),u=y(z,"BUTTON",{class:!0});var U=R(u);d=y(U,"SPAN",{class:!0});var W=R(d);h=Z(W,m),W.forEach(_),g=F(U),v=Z(U,p),S=Z(U," Message"),U.forEach(_),C=F(z),b=y(z,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(b)!=="svelte-pkfnng"&&(b.innerHTML=A),E=F(z),x&&x.l(z),z.forEach(_),P.forEach(_),this.h()},h(){f(n,"class","menu-item svelte-1tp94fk"),f(d,"class","menu-icon svelte-1tp94fk"),f(u,"class","menu-item svelte-1tp94fk"),f(b,"class","menu-item copy svelte-1tp94fk"),f(t,"class","context-menu svelte-1tp94fk"),Le(t,"top",s[9]+"px"),Le(t,"left",s[10]+"px"),f(e,"class","context-menu-overlay svelte-1tp94fk")},m(D,P){G(D,e,P),o(e,t),o(t,n),o(t,i),w&&w.m(t,null),o(t,a),O&&O.m(t,null),o(t,l),N&&N.m(t,null),o(t,c),o(t,u),o(u,d),o(d,h),o(u,g),o(u,v),o(u,S),o(t,C),o(t,b),o(t,E),x&&x.m(t,null),s[18](t),T||(I=[K(n,"click",function(){ks(s[5])&&s[5].apply(this,arguments)}),K(u,"click",function(){ks(s[4])&&s[4].apply(this,arguments)}),K(b,"click",s[17]),K(t,"click",Ss(s[16])),K(e,"click",s[19])],T=!0)},p(D,P){s=D,s[11]&&s[6]?w?w.p(s,P):(w=pi(s),w.c(),w.m(t,a)):w&&(w.d(1),w=null),s[7]?O?O.p(s,P):(O=gi(s),O.c(),O.m(t,l)):O&&(O.d(1),O=null),s[12]?N?N.p(s,P):(N=mi(s),N.c(),N.m(t,c)):N&&(N.d(1),N=null),P&2&&m!==(m=s[1].isPinned?"ðŸ“Œ":"ðŸ“")&&re(h,m),P&2&&p!==(p=s[1].isPinned?"Unpin":"Pin")&&re(v,p),s[12]?x?x.p(s,P):(x=vi(s),x.c(),x.m(t,null)):x&&(x.d(1),x=null),P&512&&Le(t,"top",s[9]+"px"),P&1024&&Le(t,"left",s[10]+"px")},d(D){D&&_(e),w&&w.d(),O&&O.d(),N&&N.d(),x&&x.d(),s[18](null),T=!1,Me(I)}}}function pi(s){let e,t=`<span class="menu-icon svelte-1tp94fk">â¬‡ï¸</span>
					Download`,n,r;return{c(){e=k("button"),e.innerHTML=t,this.h()},l(i){e=y(i,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-7q5p9o"&&(e.innerHTML=t),this.h()},h(){f(e,"class","menu-item svelte-1tp94fk")},m(i,a){G(i,e,a),n||(r=K(e,"click",function(){ks(s[6])&&s[6].apply(this,arguments)}),n=!0)},p(i,a){s=i},d(i){i&&_(e),n=!1,r()}}}function gi(s){let e,t=`<span class="menu-icon svelte-1tp94fk">â†—ï¸</span>
					Forward`,n,r;return{c(){e=k("button"),e.innerHTML=t,this.h()},l(i){e=y(i,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1d631nw"&&(e.innerHTML=t),this.h()},h(){f(e,"class","menu-item svelte-1tp94fk")},m(i,a){G(i,e,a),n||(r=K(e,"click",function(){ks(s[7])&&s[7].apply(this,arguments)}),n=!0)},p(i,a){s=i},d(i){i&&_(e),n=!1,r()}}}function mi(s){let e,t=`<span class="menu-icon svelte-1tp94fk">âœï¸</span>
					Edit Message`,n,r;return{c(){e=k("button"),e.innerHTML=t,this.h()},l(i){e=y(i,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-8fvj6d"&&(e.innerHTML=t),this.h()},h(){f(e,"class","menu-item svelte-1tp94fk")},m(i,a){G(i,e,a),n||(r=K(e,"click",function(){ks(s[2])&&s[2].apply(this,arguments)}),n=!0)},p(i,a){s=i},d(i){i&&_(e),n=!1,r()}}}function vi(s){let e,t,n,r=`<span class="menu-icon svelte-1tp94fk">ðŸ—‘ï¸</span>
					Delete Message`,i,a;return{c(){e=k("div"),t=L(),n=k("button"),n.innerHTML=r,this.h()},l(l){e=y(l,"DIV",{class:!0}),R(e).forEach(_),t=F(l),n=y(l,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(n)!=="svelte-g8outl"&&(n.innerHTML=r),this.h()},h(){f(e,"class","menu-divider svelte-1tp94fk"),f(n,"class","menu-item delete svelte-1tp94fk")},m(l,c){G(l,e,c),G(l,t,c),G(l,n,c),i||(a=K(n,"click",function(){ks(s[3])&&s[3].apply(this,arguments)}),i=!0)},p(l,c){s=l},d(l){l&&(_(e),_(t),_(n)),i=!1,a()}}}function Uu(s){let e,t=s[0]&&hi(s);return{c(){t&&t.c(),e=xe()},l(n){t&&t.l(n),e=xe()},m(n,r){t&&t.m(n,r),G(n,e,r)},p(n,[r]){n[0]?t?t.p(n,r):(t=hi(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Pe,o:Pe,d(n){n&&_(e),t&&t.d(n)}}}function zu(s,e,t){let n,r,i,a,l;Te(s,os,w=>t(15,l=w));let{message:c}=e,{x:u=0}=e,{y:d=0}=e,{visible:m=!1}=e,{onEdit:h}=e,{onDelete:g}=e,{onPin:p}=e,{onReply:v}=e,{onDownload:S=void 0}=e,{onForward:C=void 0}=e,b;function A(w){Os.call(this,s,w)}const E=()=>{navigator.clipboard.writeText(c.text),t(0,m=!1)};function T(w){ct[w?"unshift":"push"](()=>{b=w,t(8,b)})}const I=()=>t(0,m=!1);return s.$$set=w=>{"message"in w&&t(1,c=w.message),"x"in w&&t(13,u=w.x),"y"in w&&t(14,d=w.y),"visible"in w&&t(0,m=w.visible),"onEdit"in w&&t(2,h=w.onEdit),"onDelete"in w&&t(3,g=w.onDelete),"onPin"in w&&t(4,p=w.onPin),"onReply"in w&&t(5,v=w.onReply),"onDownload"in w&&t(6,S=w.onDownload),"onForward"in w&&t(7,C=w.onForward)},s.$$.update=()=>{s.$$.dirty&32770&&t(12,n=c.userId===(l==null?void 0:l.id)),s.$$.dirty&2&&t(11,r=c.type==="file"&&c.fileUrl),s.$$.dirty&8448&&t(10,i=(()=>{if(!b)return u;const w=b.offsetWidth||200,O=window.innerWidth;return u+w>O?u-w:u})()),s.$$.dirty&16640&&t(9,a=(()=>{if(!b)return d;const w=b.offsetHeight||300,O=window.innerHeight;return d+w>O?d-w:d})())},[m,c,h,g,p,v,S,C,b,a,i,r,n,u,d,l,A,E,T,I]}class Vu extends yt{constructor(e){super(),kt(this,e,zu,Uu,bt,{message:1,x:13,y:14,visible:0,onEdit:2,onDelete:3,onPin:4,onReply:5,onDownload:6,onForward:7})}}function _i(s,e,t){const n=s.slice();return n[9]=e[t],n}function bi(s){let e,t,n,r,i="Forward Message",a,l,c="âœ•",u,d,m,h="Choose a channel to forward this message to:",g,p,v,S,C=We(s[2]),b=[];for(let A=0;A<C.length;A+=1)b[A]=ki(_i(s,C,A));return{c(){e=k("div"),t=k("div"),n=k("div"),r=k("h3"),r.textContent=i,a=L(),l=k("button"),l.textContent=c,u=L(),d=k("div"),m=k("p"),m.textContent=h,g=L(),p=k("div");for(let A=0;A<b.length;A+=1)b[A].c();this.h()},l(A){e=y(A,"DIV",{class:!0});var E=R(e);t=y(E,"DIV",{class:!0});var T=R(t);n=y(T,"DIV",{class:!0});var I=R(n);r=y(I,"H3",{class:!0,"data-svelte-h":!0}),Q(r)!=="svelte-1xq5ns4"&&(r.textContent=i),a=F(I),l=y(I,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(l)!=="svelte-19jqbg1"&&(l.textContent=c),I.forEach(_),u=F(T),d=y(T,"DIV",{class:!0});var w=R(d);m=y(w,"P",{class:!0,"data-svelte-h":!0}),Q(m)!=="svelte-alvqmp"&&(m.textContent=h),g=F(w),p=y(w,"DIV",{class:!0});var O=R(p);for(let N=0;N<b.length;N+=1)b[N].l(O);O.forEach(_),w.forEach(_),T.forEach(_),E.forEach(_),this.h()},h(){f(r,"class","svelte-feor7p"),f(l,"class","close-button svelte-feor7p"),f(n,"class","dialog-header svelte-feor7p"),f(m,"class","dialog-description svelte-feor7p"),f(p,"class","channel-list svelte-feor7p"),f(d,"class","dialog-content svelte-feor7p"),f(t,"class","dialog svelte-feor7p"),f(e,"class","dialog-overlay svelte-feor7p")},m(A,E){G(A,e,E),o(e,t),o(t,n),o(n,r),o(n,a),o(n,l),o(t,u),o(t,d),o(d,m),o(d,g),o(d,p);for(let T=0;T<b.length;T+=1)b[T]&&b[T].m(p,null);v||(S=[K(l,"click",s[5]),K(t,"click",Ss(s[6])),K(e,"click",s[5])],v=!0)},p(A,E){if(E&28){C=We(A[2]);let T;for(T=0;T<C.length;T+=1){const I=_i(A,C,T);b[T]?b[T].p(I,E):(b[T]=ki(I),b[T].c(),b[T].m(p,null))}for(;T<b.length;T+=1)b[T].d(1);b.length=C.length}},d(A){A&&_(e),Cn(b,A),v=!1,Me(S)}}}function yi(s){let e,t,n,r,i=s[9].name+"",a,l,c,u;function d(p,v){return p[9].type==="dm"?Hu:qu}let m=d(s),h=m(s);function g(){return s[7](s[9])}return{c(){e=k("button"),t=k("span"),h.c(),n=L(),r=k("span"),a=X(i),l=L(),this.h()},l(p){e=y(p,"BUTTON",{class:!0});var v=R(e);t=y(v,"SPAN",{class:!0});var S=R(t);h.l(S),S.forEach(_),n=F(v),r=y(v,"SPAN",{class:!0});var C=R(r);a=Z(C,i),C.forEach(_),l=F(v),v.forEach(_),this.h()},h(){f(t,"class","channel-icon svelte-feor7p"),f(r,"class","channel-name svelte-feor7p"),f(e,"class","channel-item svelte-feor7p")},m(p,v){G(p,e,v),o(e,t),h.m(t,null),o(e,n),o(e,r),o(r,a),o(e,l),c||(u=K(e,"click",g),c=!0)},p(p,v){s=p,m!==(m=d(s))&&(h.d(1),h=m(s),h&&(h.c(),h.m(t,null))),v&4&&i!==(i=s[9].name+"")&&re(a,i)},d(p){p&&_(e),h.d(),c=!1,u()}}}function qu(s){let e;return{c(){e=X("#")},l(t){e=Z(t,"#")},m(t,n){G(t,e,n)},d(t){t&&_(e)}}}function Hu(s){let e;return{c(){e=X("ðŸ’¬")},l(t){e=Z(t,"ðŸ’¬")},m(t,n){G(t,e,n)},d(t){t&&_(e)}}}function ki(s){let e,t=s[9].id!==s[3]&&yi(s);return{c(){t&&t.c(),e=xe()},l(n){t&&t.l(n),e=xe()},m(n,r){t&&t.m(n,r),G(n,e,r)},p(n,r){n[9].id!==n[3]?t?t.p(n,r):(t=yi(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&_(e),t&&t.d(n)}}}function ju(s){let e,t=s[0]&&s[1]&&bi(s);return{c(){t&&t.c(),e=xe()},l(n){t&&t.l(n),e=xe()},m(n,r){t&&t.m(n,r),G(n,e,r)},p(n,[r]){n[0]&&n[1]?t?t.p(n,r):(t=bi(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Pe,o:Pe,d(n){n&&_(e),t&&t.d(n)}}}function Gu(s,e,t){let n,r,i;Te(s,Ls,h=>t(8,n=h)),Te(s,Ks,h=>t(2,r=h)),Te(s,xs,h=>t(3,i=h));let{visible:a=!1}=e,{message:l=null}=e;function c(h){!l||!n||(n.emit("message",{channelId:h,text:l.text,type:l.type,gifUrl:l.gifUrl,fileUrl:l.fileUrl,fileName:l.fileName,fileSize:l.fileSize,files:l.files}),t(0,a=!1))}function u(){t(0,a=!1)}function d(h){Os.call(this,s,h)}const m=h=>c(h.id);return s.$$set=h=>{"visible"in h&&t(0,a=h.visible),"message"in h&&t(1,l=h.message)},[a,l,r,i,c,u,d,m]}class Wu extends yt{constructor(e){super(),kt(this,e,Gu,ju,bt,{visible:0,message:1})}}function wi(s,e,t){const n=s.slice();n[59]=e[t];const r=n[15](n[59].user);n[60]=r;const i=n[28](n[59].replyTo);return n[61]=i,n}function Ei(s,e,t){const n=s.slice();return n[64]=e[t],n[66]=t,n}function Si(s){let e,t="<span>New Messages</span>";return{c(){e=k("div"),e.innerHTML=t,this.h()},l(n){e=y(n,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1uzyipm"&&(e.innerHTML=t),this.h()},h(){f(e,"class","new-messages-divider svelte-wyhhsa")},m(n,r){G(n,e,r)},d(n){n&&_(e)}}}function $u(s){let e,t=s[59].user.charAt(0).toUpperCase()+"",n;return{c(){e=k("div"),n=X(t),this.h()},l(r){e=y(r,"DIV",{class:!0,style:!0});var i=R(e);n=Z(i,t),i.forEach(_),this.h()},h(){f(e,"class","avatar-placeholder svelte-wyhhsa"),Le(e,"background-color",s[16](s[59].user))},m(r,i){G(r,e,i),o(e,n)},p(r,i){i[0]&1&&t!==(t=r[59].user.charAt(0).toUpperCase()+"")&&re(n,t),i[0]&1&&Le(e,"background-color",r[16](r[59].user))},d(r){r&&_(e)}}}function Yu(s){let e,t,n;return{c(){e=k("img"),this.h()},l(r){e=y(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Be(e.src,t=s[60].profilePicture)||f(e,"src",t),f(e,"alt",n=s[59].user),f(e,"class","avatar svelte-wyhhsa")},m(r,i){G(r,e,i)},p(r,i){i[0]&1&&!Be(e.src,t=r[60].profilePicture)&&f(e,"src",t),i[0]&1&&n!==(n=r[59].user)&&f(e,"alt",n)},d(r){r&&_(e)}}}function Zu(s){let e,t=s[59].user+"",n;return{c(){e=k("span"),n=X(t),this.h()},l(r){e=y(r,"SPAN",{class:!0});var i=R(e);n=Z(i,t),i.forEach(_),this.h()},h(){f(e,"class","username svelte-wyhhsa")},m(r,i){G(r,e,i),o(e,n)},p(r,i){i[0]&1&&t!==(t=r[59].user+"")&&re(n,t)},d(r){r&&_(e)}}}function Xu(s){let e,t=s[59].user+"",n,r,i;function a(){return s[36](s[60])}return{c(){e=k("button"),n=X(t),this.h()},l(l){e=y(l,"BUTTON",{class:!0});var c=R(e);n=Z(c,t),c.forEach(_),this.h()},h(){f(e,"class","username svelte-wyhhsa")},m(l,c){G(l,e,c),o(e,n),r||(i=K(e,"click",a),r=!0)},p(l,c){s=l,c[0]&1&&t!==(t=s[59].user+"")&&re(n,t)},d(l){l&&_(e),r=!1,i()}}}function Ai(s){let e,t="ðŸ“Œ";return{c(){e=k("span"),e.textContent=t,this.h()},l(n){e=y(n,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),Q(e)!=="svelte-cawwa1"&&(e.textContent=t),this.h()},h(){f(e,"class","pin-badge svelte-wyhhsa"),f(e,"title","Pinned message")},m(n,r){G(n,e,r)},d(n){n&&_(e)}}}function Ti(s){let e,t="(edited)";return{c(){e=k("span"),e.textContent=t,this.h()},l(n){e=y(n,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),Q(e)!=="svelte-13y41lm"&&(e.textContent=t),this.h()},h(){f(e,"class","edited-badge svelte-wyhhsa"),f(e,"title","Edited")},m(n,r){G(n,e,r)},d(n){n&&_(e)}}}function Ci(s){let e,t,n,r,i,a=s[61].user+"",l,c,u,d=s[61].text.substring(0,100)+"",m,h=s[61].text.length>100?"...":"",g;return{c(){e=k("div"),t=k("div"),n=L(),r=k("div"),i=k("span"),l=X(a),c=L(),u=k("span"),m=X(d),g=X(h),this.h()},l(p){e=y(p,"DIV",{class:!0});var v=R(e);t=y(v,"DIV",{class:!0}),R(t).forEach(_),n=F(v),r=y(v,"DIV",{class:!0});var S=R(r);i=y(S,"SPAN",{class:!0});var C=R(i);l=Z(C,a),C.forEach(_),c=F(S),u=y(S,"SPAN",{class:!0});var b=R(u);m=Z(b,d),g=Z(b,h),b.forEach(_),S.forEach(_),v.forEach(_),this.h()},h(){f(t,"class","reply-line svelte-wyhhsa"),f(i,"class","reply-username svelte-wyhhsa"),f(u,"class","reply-text svelte-wyhhsa"),f(r,"class","reply-content svelte-wyhhsa"),f(e,"class","reply-preview svelte-wyhhsa")},m(p,v){G(p,e,v),o(e,t),o(e,n),o(e,r),o(r,i),o(i,l),o(r,c),o(r,u),o(u,m),o(u,g)},p(p,v){v[0]&1&&a!==(a=p[61].user+"")&&re(l,a),v[0]&1&&d!==(d=p[61].text.substring(0,100)+"")&&re(m,d),v[0]&1&&h!==(h=p[61].text.length>100?"...":"")&&re(g,h)},d(p){p&&_(e)}}}function Ku(s){let e;function t(i,a){return i[59].type==="gif"&&i[59].gifUrl?tf:i[59].type==="file"&&(i[59].fileUrl||i[59].files)?ef:Ju}let n=t(s),r=n(s);return{c(){e=k("div"),r.c(),this.h()},l(i){e=y(i,"DIV",{class:!0});var a=R(e);r.l(a),a.forEach(_),this.h()},h(){f(e,"class","message-content")},m(i,a){G(i,e,a),r.m(e,null)},p(i,a){n===(n=t(i))&&r?r.p(i,a):(r.d(1),r=n(i),r&&(r.c(),r.m(e,null)))},d(i){i&&_(e),r.d()}}}function Qu(s){let e,t,n,r,i,a="Cancel",l,c,u="Save",d,m;function h(...p){return s[38](s[59],...p)}function g(){return s[39](s[59])}return{c(){e=k("div"),t=k("textarea"),n=L(),r=k("div"),i=k("button"),i.textContent=a,l=L(),c=k("button"),c.textContent=u,this.h()},l(p){e=y(p,"DIV",{class:!0});var v=R(e);t=y(v,"TEXTAREA",{class:!0,rows:!0}),R(t).forEach(_),n=F(v),r=y(v,"DIV",{class:!0});var S=R(r);i=y(S,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(i)!=="svelte-1czerce"&&(i.textContent=a),l=F(S),c=y(S,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(c)!=="svelte-w3glyi"&&(c.textContent=u),S.forEach(_),v.forEach(_),this.h()},h(){f(t,"class","edit-textarea svelte-wyhhsa"),f(t,"rows","3"),f(i,"class","edit-cancel svelte-wyhhsa"),f(c,"class","edit-save svelte-wyhhsa"),f(r,"class","edit-actions svelte-wyhhsa"),f(e,"class","edit-mode svelte-wyhhsa")},m(p,v){G(p,e,v),o(e,t),Je(t,s[10]),o(e,n),o(e,r),o(r,i),o(r,l),o(r,c),d||(m=[K(t,"input",s[37]),K(t,"keydown",h),K(i,"click",s[21]),K(c,"click",g)],d=!0)},p(p,v){s=p,v[0]&1024&&Je(t,s[10])},d(p){p&&_(e),d=!1,Me(m)}}}function Ju(s){let e,t,n=Sn(s[59].text)+"";return{c(){e=k("div"),t=new Al(!1),this.h()},l(r){e=y(r,"DIV",{class:!0});var i=R(e);t=Sl(i,!1),i.forEach(_),this.h()},h(){t.a=null,f(e,"class","markdown-content svelte-wyhhsa")},m(r,i){G(r,e,i),t.m(n,e)},p(r,i){i[0]&1&&n!==(n=Sn(r[59].text)+"")&&t.p(n)},d(r){r&&_(e)}}}function ef(s){let e,t;function n(l,c){if(l[59].files&&l[59].files.length>1)return nf;if(l[59].fileUrl)return sf}let r=n(s),i=r&&r(s),a=s[59].text&&(s[59].files?s[59].text!==`Shared ${s[59].files.length} files`:s[59].text!==`Shared: ${s[59].fileName}`)&&Ni(s);return{c(){i&&i.c(),e=L(),a&&a.c(),t=xe()},l(l){i&&i.l(l),e=F(l),a&&a.l(l),t=xe()},m(l,c){i&&i.m(l,c),G(l,e,c),a&&a.m(l,c),G(l,t,c)},p(l,c){r===(r=n(l))&&i?i.p(l,c):(i&&i.d(1),i=r&&r(l),i&&(i.c(),i.m(e.parentNode,e))),l[59].text&&(l[59].files?l[59].text!==`Shared ${l[59].files.length} files`:l[59].text!==`Shared: ${l[59].fileName}`)?a?a.p(l,c):(a=Ni(l),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null)},d(l){l&&(_(e),_(t)),i&&i.d(l),a&&a.d(l)}}}function tf(s){let e,t,n,r;return{c(){e=k("img"),this.h()},l(i){e=y(i,"IMG",{src:!0,alt:!0,class:!0,"data-spoiler":!0}),this.h()},h(){Be(e.src,t=s[59].gifUrl)||f(e,"src",t),f(e,"alt","GIF"),f(e,"class",n="gif "+(s[59].isSpoiler?"spoiler":"")+" svelte-wyhhsa"),f(e,"data-spoiler",r=s[59].isSpoiler?"true":"false")},m(i,a){G(i,e,a)},p(i,a){a[0]&1&&!Be(e.src,t=i[59].gifUrl)&&f(e,"src",t),a[0]&1&&n!==(n="gif "+(i[59].isSpoiler?"spoiler":"")+" svelte-wyhhsa")&&f(e,"class",n),a[0]&1&&r!==(r=i[59].isSpoiler?"true":"false")&&f(e,"data-spoiler",r)},d(i){i&&_(e)}}}function sf(s){let e,t,n;function r(l,c){return c[0]&1&&(e=null),c[0]&1&&(t=null),e==null&&(e=!!wr(l[59].fileName)),e?af:(t==null&&(t=!!ha(l[59].fileName)),t?lf:rf)}let i=r(s,[-1,-1,-1]),a=i(s);return{c(){a.c(),n=xe()},l(l){a.l(l),n=xe()},m(l,c){a.m(l,c),G(l,n,c)},p(l,c){i===(i=r(l,c))&&a?a.p(l,c):(a.d(1),a=i(l),a&&(a.c(),a.m(n.parentNode,n)))},d(l){l&&_(n),a.d(l)}}}function nf(s){let e,t=We(s[59].files.slice(0,4)),n=[];for(let r=0;r<t.length;r+=1)n[r]=Ri(Ei(s,t,r));return{c(){e=k("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=y(r,"DIV",{class:!0});var i=R(e);for(let a=0;a<n.length;a+=1)n[a].l(i);i.forEach(_),this.h()},h(){f(e,"class","files-gallery svelte-wyhhsa"),_e(e,"has-more",s[59].files.length>4)},m(r,i){G(r,e,i);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null)},p(r,i){if(i[0]&536870913|i[1]&1){t=We(r[59].files.slice(0,4));let a;for(a=0;a<t.length;a+=1){const l=Ei(r,t,a);n[a]?n[a].p(l,i):(n[a]=Ri(l),n[a].c(),n[a].m(e,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}i[0]&1&&_e(e,"has-more",r[59].files.length>4)},d(r){r&&_(e),Cn(n,r)}}}function rf(s){let e,t,n=us(s[59].fileName)+"",r,i,a,l,c=s[59].fileName+"",u,d,m,h=cs(s[59].fileSize)+"",g,p,v;return{c(){e=k("a"),t=k("span"),r=X(n),i=L(),a=k("div"),l=k("span"),u=X(c),d=L(),m=k("span"),g=X(h),this.h()},l(S){e=y(S,"A",{href:!0,download:!0,class:!0});var C=R(e);t=y(C,"SPAN",{class:!0});var b=R(t);r=Z(b,n),b.forEach(_),i=F(C),a=y(C,"DIV",{class:!0});var A=R(a);l=y(A,"SPAN",{class:!0});var E=R(l);u=Z(E,c),E.forEach(_),d=F(A),m=y(A,"SPAN",{class:!0});var T=R(m);g=Z(T,h),T.forEach(_),A.forEach(_),C.forEach(_),this.h()},h(){f(t,"class","file-icon svelte-wyhhsa"),f(l,"class","file-name svelte-wyhhsa"),f(m,"class","file-size svelte-wyhhsa"),f(a,"class","file-info svelte-wyhhsa"),f(e,"href",p=Ge(s[59].fileUrl)),f(e,"download",v=s[59].fileName),f(e,"class","file-attachment svelte-wyhhsa")},m(S,C){G(S,e,C),o(e,t),o(t,r),o(e,i),o(e,a),o(a,l),o(l,u),o(a,d),o(a,m),o(m,g)},p(S,C){C[0]&1&&n!==(n=us(S[59].fileName)+"")&&re(r,n),C[0]&1&&c!==(c=S[59].fileName+"")&&re(u,c),C[0]&1&&h!==(h=cs(S[59].fileSize)+"")&&re(g,h),C[0]&1&&p!==(p=Ge(S[59].fileUrl))&&f(e,"href",p),C[0]&1&&v!==(v=S[59].fileName)&&f(e,"download",v)},d(S){S&&_(e)}}}function lf(s){let e,t,n,r,i,a,l,c,u,d,m,h=us(s[59].fileName)+"",g,p,v=s[59].fileName+"",S,C,b,A,E=cs(s[59].fileSize)+"",T,I,w,O,N,x;function D(...z){return s[44](s[59],...z)}function P(...z){return s[45](s[59],...z)}return{c(){e=k("div"),t=k("video"),n=k("source"),a=X(`\r
									Your browser does not support the video tag.`),u=L(),d=k("a"),m=k("span"),g=X(h),p=L(),S=X(v),C=L(),b=k("span"),A=X("("),T=X(E),I=X(")"),this.h()},l(z){e=y(z,"DIV",{class:!0});var U=R(e);t=y(U,"VIDEO",{class:!0,"data-spoiler":!0,title:!0});var W=R(t);n=y(W,"SOURCE",{src:!0,type:!0}),a=Z(W,`\r
									Your browser does not support the video tag.`),W.forEach(_),u=F(U),d=y(U,"A",{href:!0,download:!0,class:!0});var j=R(d);m=y(j,"SPAN",{class:!0});var B=R(m);g=Z(B,h),B.forEach(_),p=F(j),S=Z(j,v),C=F(j),b=y(j,"SPAN",{class:!0});var H=R(b);A=Z(H,"("),T=Z(H,E),I=Z(H,")"),H.forEach(_),j.forEach(_),U.forEach(_),this.h()},h(){var z;Be(n.src,r=Ge(s[59].fileUrl))||f(n,"src",r),f(n,"type",i="video/"+((z=s[59].fileName)==null?void 0:z.split(".").pop())),t.controls=!0,f(t,"class",l="inline-video "+(s[59].isSpoiler?"spoiler":"")+" svelte-wyhhsa"),f(t,"data-spoiler",c=s[59].isSpoiler?"true":"false"),f(t,"title","Click to enlarge, right-click for options"),f(m,"class","file-icon svelte-wyhhsa"),f(b,"class","file-size svelte-wyhhsa"),f(d,"href",w=Ge(s[59].fileUrl)),f(d,"download",O=s[59].fileName),f(d,"class","video-download-link svelte-wyhhsa"),f(e,"class","video-container svelte-wyhhsa")},m(z,U){G(z,e,U),o(e,t),o(t,n),o(t,a),o(e,u),o(e,d),o(d,m),o(m,g),o(d,p),o(d,S),o(d,C),o(d,b),o(b,A),o(b,T),o(b,I),N||(x=[K(t,"click",D),K(t,"contextmenu",P)],N=!0)},p(z,U){var W;s=z,U[0]&1&&!Be(n.src,r=Ge(s[59].fileUrl))&&f(n,"src",r),U[0]&1&&i!==(i="video/"+((W=s[59].fileName)==null?void 0:W.split(".").pop()))&&f(n,"type",i),U[0]&1&&l!==(l="inline-video "+(s[59].isSpoiler?"spoiler":"")+" svelte-wyhhsa")&&f(t,"class",l),U[0]&1&&c!==(c=s[59].isSpoiler?"true":"false")&&f(t,"data-spoiler",c),U[0]&1&&h!==(h=us(s[59].fileName)+"")&&re(g,h),U[0]&1&&v!==(v=s[59].fileName+"")&&re(S,v),U[0]&1&&E!==(E=cs(s[59].fileSize)+"")&&re(T,E),U[0]&1&&w!==(w=Ge(s[59].fileUrl))&&f(d,"href",w),U[0]&1&&O!==(O=s[59].fileName)&&f(d,"download",O)},d(z){z&&_(e),N=!1,Me(x)}}}function af(s){let e,t,n,r,i,a,l,c,u,d=us(s[59].fileName)+"",m,h,g=s[59].fileName+"",p,v,S,C,b=cs(s[59].fileSize)+"",A,E,T,I,w,O;function N(...D){return s[42](s[59],...D)}function x(...D){return s[43](s[59],...D)}return{c(){e=k("div"),t=k("img"),l=L(),c=k("a"),u=k("span"),m=X(d),h=L(),p=X(g),v=L(),S=k("span"),C=X("("),A=X(b),E=X(")"),this.h()},l(D){e=y(D,"DIV",{class:!0});var P=R(e);t=y(P,"IMG",{src:!0,alt:!0,class:!0,"data-spoiler":!0,title:!0}),l=F(P),c=y(P,"A",{href:!0,download:!0,class:!0});var z=R(c);u=y(z,"SPAN",{class:!0});var U=R(u);m=Z(U,d),U.forEach(_),h=F(z),p=Z(z,g),v=F(z),S=y(z,"SPAN",{class:!0});var W=R(S);C=Z(W,"("),A=Z(W,b),E=Z(W,")"),W.forEach(_),z.forEach(_),P.forEach(_),this.h()},h(){Be(t.src,n=Ge(s[59].fileUrl))||f(t,"src",n),f(t,"alt",r=s[59].fileName),f(t,"class",i="inline-image "+(s[59].isSpoiler?"spoiler":"")+" svelte-wyhhsa"),f(t,"data-spoiler",a=s[59].isSpoiler?"true":"false"),f(t,"title","Click to enlarge, right-click for options"),f(u,"class","file-icon svelte-wyhhsa"),f(S,"class","file-size svelte-wyhhsa"),f(c,"href",T=Ge(s[59].fileUrl)),f(c,"download",I=s[59].fileName),f(c,"class","image-download-link svelte-wyhhsa"),f(e,"class","image-container svelte-wyhhsa")},m(D,P){G(D,e,P),o(e,t),o(e,l),o(e,c),o(c,u),o(u,m),o(c,h),o(c,p),o(c,v),o(c,S),o(S,C),o(S,A),o(S,E),w||(O=[K(t,"click",N),K(t,"contextmenu",x)],w=!0)},p(D,P){s=D,P[0]&1&&!Be(t.src,n=Ge(s[59].fileUrl))&&f(t,"src",n),P[0]&1&&r!==(r=s[59].fileName)&&f(t,"alt",r),P[0]&1&&i!==(i="inline-image "+(s[59].isSpoiler?"spoiler":"")+" svelte-wyhhsa")&&f(t,"class",i),P[0]&1&&a!==(a=s[59].isSpoiler?"true":"false")&&f(t,"data-spoiler",a),P[0]&1&&d!==(d=us(s[59].fileName)+"")&&re(m,d),P[0]&1&&g!==(g=s[59].fileName+"")&&re(p,g),P[0]&1&&b!==(b=cs(s[59].fileSize)+"")&&re(A,b),P[0]&1&&T!==(T=Ge(s[59].fileUrl))&&f(c,"href",T),P[0]&1&&I!==(I=s[59].fileName)&&f(c,"download",I)},d(D){D&&_(e),w=!1,Me(O)}}}function of(s){let e,t,n=us(s[64].fileName)+"",r,i,a,l,c=s[64].fileName+"",u,d,m,h,g=cs(s[64].fileSize)+"",p,v,S,C,b;return{c(){e=k("a"),t=k("div"),r=X(n),i=L(),a=k("div"),l=k("span"),u=X(c),d=L(),m=k("span"),h=X("("),p=X(g),v=X(")"),S=L(),this.h()},l(A){e=y(A,"A",{href:!0,download:!0,class:!0});var E=R(e);t=y(E,"DIV",{class:!0});var T=R(t);r=Z(T,n),T.forEach(_),i=F(E),a=y(E,"DIV",{class:!0});var I=R(a);l=y(I,"SPAN",{class:!0});var w=R(l);u=Z(w,c),w.forEach(_),d=F(I),m=y(I,"SPAN",{class:!0});var O=R(m);h=Z(O,"("),p=Z(O,g),v=Z(O,")"),O.forEach(_),I.forEach(_),S=F(E),E.forEach(_),this.h()},h(){f(t,"class","gallery-file-icon-large svelte-wyhhsa"),f(l,"class","file-name-truncate svelte-wyhhsa"),f(m,"class","file-size-small svelte-wyhhsa"),f(a,"class","gallery-file-overlay svelte-wyhhsa"),f(e,"href",C=Ge(s[64].fileUrl)),f(e,"download",b=s[64].fileName),f(e,"class","gallery-file-item file-link svelte-wyhhsa")},m(A,E){G(A,e,E),o(e,t),o(t,r),o(e,i),o(e,a),o(a,l),o(l,u),o(a,d),o(a,m),o(m,h),o(m,p),o(m,v),o(e,S)},p(A,E){E[0]&1&&n!==(n=us(A[64].fileName)+"")&&re(r,n),E[0]&1&&c!==(c=A[64].fileName+"")&&re(u,c),E[0]&1&&g!==(g=cs(A[64].fileSize)+"")&&re(p,g),E[0]&1&&C!==(C=Ge(A[64].fileUrl))&&f(e,"href",C),E[0]&1&&b!==(b=A[64].fileName)&&f(e,"download",b)},d(A){A&&_(e)}}}function cf(s){let e,t,n,r,i,a,l,c,u,d;function m(...g){return s[41](s[64],...g)}let h=s[66]===3&&s[59].files.length>4&&Ii(s);return{c(){e=k("div"),t=k("video"),n=k("source"),l=L(),h&&h.c(),c=L(),this.h()},l(g){e=y(g,"DIV",{class:!0});var p=R(e);t=y(p,"VIDEO",{class:!0,"data-spoiler":!0,title:!0});var v=R(t);n=y(v,"SOURCE",{src:!0}),v.forEach(_),l=F(p),h&&h.l(p),c=F(p),p.forEach(_),this.h()},h(){Be(n.src,r=Ge(s[64].fileUrl))||f(n,"src",r),f(t,"class",i="gallery-file-video "+(s[59].isSpoiler?"spoiler":"")+" svelte-wyhhsa"),f(t,"data-spoiler",a=s[59].isSpoiler?"true":"false"),f(t,"title","Click to enlarge"),f(e,"class","gallery-file-item svelte-wyhhsa"),_e(e,"last-item",s[66]===3&&s[59].files.length>4)},m(g,p){G(g,e,p),o(e,t),o(t,n),o(e,l),h&&h.m(e,null),o(e,c),u||(d=K(t,"click",m),u=!0)},p(g,p){s=g,p[0]&1&&!Be(n.src,r=Ge(s[64].fileUrl))&&f(n,"src",r),p[0]&1&&i!==(i="gallery-file-video "+(s[59].isSpoiler?"spoiler":"")+" svelte-wyhhsa")&&f(t,"class",i),p[0]&1&&a!==(a=s[59].isSpoiler?"true":"false")&&f(t,"data-spoiler",a),s[66]===3&&s[59].files.length>4?h?h.p(s,p):(h=Ii(s),h.c(),h.m(e,c)):h&&(h.d(1),h=null),p[0]&1&&_e(e,"last-item",s[66]===3&&s[59].files.length>4)},d(g){g&&_(e),h&&h.d(),u=!1,d()}}}function uf(s){let e,t,n,r,i,a,l,c,u,d;function m(...g){return s[40](s[59],s[64],...g)}let h=s[66]===3&&s[59].files.length>4&&Di(s);return{c(){e=k("div"),t=k("img"),l=L(),h&&h.c(),c=L(),this.h()},l(g){e=y(g,"DIV",{class:!0});var p=R(e);t=y(p,"IMG",{src:!0,alt:!0,class:!0,"data-spoiler":!0,title:!0}),l=F(p),h&&h.l(p),c=F(p),p.forEach(_),this.h()},h(){Be(t.src,n=Ge(s[64].fileUrl))||f(t,"src",n),f(t,"alt",r=s[64].fileName),f(t,"class",i="gallery-file-image "+(s[59].isSpoiler?"spoiler":"")+" svelte-wyhhsa"),f(t,"data-spoiler",a=s[59].isSpoiler?"true":"false"),f(t,"title","Click to enlarge"),f(e,"class","gallery-file-item svelte-wyhhsa"),_e(e,"last-item",s[66]===3&&s[59].files.length>4)},m(g,p){G(g,e,p),o(e,t),o(e,l),h&&h.m(e,null),o(e,c),u||(d=K(t,"click",m),u=!0)},p(g,p){s=g,p[0]&1&&!Be(t.src,n=Ge(s[64].fileUrl))&&f(t,"src",n),p[0]&1&&r!==(r=s[64].fileName)&&f(t,"alt",r),p[0]&1&&i!==(i="gallery-file-image "+(s[59].isSpoiler?"spoiler":"")+" svelte-wyhhsa")&&f(t,"class",i),p[0]&1&&a!==(a=s[59].isSpoiler?"true":"false")&&f(t,"data-spoiler",a),s[66]===3&&s[59].files.length>4?h?h.p(s,p):(h=Di(s),h.c(),h.m(e,c)):h&&(h.d(1),h=null),p[0]&1&&_e(e,"last-item",s[66]===3&&s[59].files.length>4)},d(g){g&&_(e),h&&h.d(),u=!1,d()}}}function Ii(s){let e,t,n,r=s[59].files.length-4+"",i;return{c(){e=k("div"),t=k("span"),n=X("+"),i=X(r),this.h()},l(a){e=y(a,"DIV",{class:!0});var l=R(e);t=y(l,"SPAN",{class:!0});var c=R(t);n=Z(c,"+"),i=Z(c,r),c.forEach(_),l.forEach(_),this.h()},h(){f(t,"class","more-count svelte-wyhhsa"),f(e,"class","more-overlay svelte-wyhhsa")},m(a,l){G(a,e,l),o(e,t),o(t,n),o(t,i)},p(a,l){l[0]&1&&r!==(r=a[59].files.length-4+"")&&re(i,r)},d(a){a&&_(e)}}}function Di(s){let e,t,n,r=s[59].files.length-4+"",i;return{c(){e=k("div"),t=k("span"),n=X("+"),i=X(r),this.h()},l(a){e=y(a,"DIV",{class:!0});var l=R(e);t=y(l,"SPAN",{class:!0});var c=R(t);n=Z(c,"+"),i=Z(c,r),c.forEach(_),l.forEach(_),this.h()},h(){f(t,"class","more-count svelte-wyhhsa"),f(e,"class","more-overlay svelte-wyhhsa")},m(a,l){G(a,e,l),o(e,t),o(t,n),o(t,i)},p(a,l){l[0]&1&&r!==(r=a[59].files.length-4+"")&&re(i,r)},d(a){a&&_(e)}}}function Ri(s){let e,t,n;function r(l,c){return c[0]&1&&(e=null),c[0]&1&&(t=null),e==null&&(e=!!wr(l[64].fileName)),e?uf:(t==null&&(t=!!ha(l[64].fileName)),t?cf:of)}let i=r(s,[-1,-1,-1]),a=i(s);return{c(){a.c(),n=xe()},l(l){a.l(l),n=xe()},m(l,c){a.m(l,c),G(l,n,c)},p(l,c){i===(i=r(l,c))&&a?a.p(l,c):(a.d(1),a=i(l),a&&(a.c(),a.m(n.parentNode,n)))},d(l){l&&_(n),a.d(l)}}}function Ni(s){let e,t,n=Sn(s[59].text)+"";return{c(){e=k("div"),t=new Al(!1),this.h()},l(r){e=y(r,"DIV",{class:!0});var i=R(e);t=Sl(i,!1),i.forEach(_),this.h()},h(){t.a=null,f(e,"class","markdown-content svelte-wyhhsa")},m(r,i){G(r,e,i),t.m(n,e)},p(r,i){i[0]&1&&n!==(n=Sn(r[59].text)+"")&&t.p(n)},d(r){r&&_(e)}}}function Oi(s,e){let t,n,r,i,a,l,c,u,d,m,h,g,p=xi(e[59].timestamp)+"",v,S,C,b,A,E,T=e[1]===e[59].id&&Si();function I(V,q){var Y;return(Y=V[60])!=null&&Y.profilePicture?Yu:$u}let w=I(e),O=w(e);function N(V,q){return V[60]?Xu:Zu}let x=N(e),D=x(e),P=e[59].isPinned&&Ai(),z=e[59].isEdited&&Ti(),U=e[61]&&Ci(e);function W(V,q){return V[9]===V[59].id?Qu:Ku}let j=W(e),B=j(e);function H(...V){return e[46](e[59],...V)}return{key:s,first:null,c(){t=xe(),T&&T.c(),n=L(),r=k("div"),i=k("div"),O.c(),a=L(),l=k("div"),c=k("div"),u=k("div"),D.c(),d=L(),P&&P.c(),m=L(),z&&z.c(),h=L(),g=k("span"),v=X(p),S=L(),U&&U.c(),C=L(),B.c(),this.h()},l(V){t=xe(),T&&T.l(V),n=F(V),r=y(V,"DIV",{class:!0});var q=R(r);i=y(q,"DIV",{class:!0});var Y=R(i);O.l(Y),Y.forEach(_),a=F(q),l=y(q,"DIV",{class:!0});var $=R(l);c=y($,"DIV",{class:!0});var ee=R(c);u=y(ee,"DIV",{class:!0});var ae=R(u);D.l(ae),d=F(ae),P&&P.l(ae),m=F(ae),z&&z.l(ae),ae.forEach(_),h=F(ee),g=y(ee,"SPAN",{class:!0});var ie=R(g);v=Z(ie,p),ie.forEach(_),ee.forEach(_),S=F($),U&&U.l($),C=F($),B.l($),$.forEach(_),q.forEach(_),this.h()},h(){f(i,"class","message-avatar svelte-wyhhsa"),f(u,"class","header-left svelte-wyhhsa"),f(g,"class","timestamp svelte-wyhhsa"),f(c,"class","message-header svelte-wyhhsa"),f(l,"class","message-body svelte-wyhhsa"),f(r,"class",b="message "+(e[59].isPinned?"pinned":"")+" svelte-wyhhsa"),this.first=t},m(V,q){G(V,t,q),T&&T.m(V,q),G(V,n,q),G(V,r,q),o(r,i),O.m(i,null),o(r,a),o(r,l),o(l,c),o(c,u),D.m(u,null),o(u,d),P&&P.m(u,null),o(u,m),z&&z.m(u,null),o(c,h),o(c,g),o(g,v),o(l,S),U&&U.m(l,null),o(l,C),B.m(l,null),A||(E=K(r,"contextmenu",H),A=!0)},p(V,q){e=V,e[1]===e[59].id?T||(T=Si(),T.c(),T.m(n.parentNode,n)):T&&(T.d(1),T=null),w===(w=I(e))&&O?O.p(e,q):(O.d(1),O=w(e),O&&(O.c(),O.m(i,null))),x===(x=N(e))&&D?D.p(e,q):(D.d(1),D=x(e),D&&(D.c(),D.m(u,d))),e[59].isPinned?P||(P=Ai(),P.c(),P.m(u,m)):P&&(P.d(1),P=null),e[59].isEdited?z||(z=Ti(),z.c(),z.m(u,null)):z&&(z.d(1),z=null),q[0]&1&&p!==(p=xi(e[59].timestamp)+"")&&re(v,p),e[61]?U?U.p(e,q):(U=Ci(e),U.c(),U.m(l,C)):U&&(U.d(1),U=null),j===(j=W(e))&&B?B.p(e,q):(B.d(1),B=j(e),B&&(B.c(),B.m(l,null))),q[0]&1&&b!==(b="message "+(e[59].isPinned?"pinned":"")+" svelte-wyhhsa")&&f(r,"class",b)},d(V){V&&(_(t),_(n),_(r)),T&&T.d(V),O.d(),D.d(),P&&P.d(),z&&z.d(),U&&U.d(),B.d(),A=!1,E()}}}function Pi(s){let e,t,n;function r(a){s[49](a)}let i={message:s[8],x:s[6],y:s[7],onEdit:s[19],onDelete:s[22],onPin:s[23],onReply:s[24],onDownload:s[25],onForward:s[26]};return s[5]!==void 0&&(i.visible=s[5]),e=new Vu({props:i}),ct.push(()=>Xt(e,"visible",r)),{c(){gt(e.$$.fragment)},l(a){pt(e.$$.fragment,a)},m(a,l){ht(e,a,l),n=!0},p(a,l){const c={};l[0]&256&&(c.message=a[8]),l[0]&64&&(c.x=a[6]),l[0]&128&&(c.y=a[7]),!t&&l[0]&32&&(t=!0,c.visible=a[5],Zt(()=>t=!1)),e.$set(c)},i(a){n||(Oe(e.$$.fragment,a),n=!0)},o(a){Ve(e.$$.fragment,a),n=!1},d(a){dt(e,a)}}}function Fi(s){let e,t,n,r,i,a="âœ•",l,c,u,d,m;return{c(){e=k("div"),t=k("img"),r=L(),i=k("button"),i.textContent=a,l=L(),c=k("a"),u=X("Open in new tab"),this.h()},l(h){e=y(h,"DIV",{class:!0});var g=R(e);t=y(g,"IMG",{src:!0,alt:!0,class:!0}),r=F(g),i=y(g,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(i)!=="svelte-cyanf1"&&(i.textContent=a),l=F(g),c=y(g,"A",{href:!0,target:!0,rel:!0,class:!0});var p=R(c);u=Z(p,"Open in new tab"),p.forEach(_),g.forEach(_),this.h()},h(){Be(t.src,n=s[13])||f(t,"src",n),f(t,"alt","Enlarged"),f(t,"class","enlarged-image svelte-wyhhsa"),f(i,"class","close-modal svelte-wyhhsa"),f(c,"href",s[13]),f(c,"target","_blank"),f(c,"rel","noopener noreferrer"),f(c,"class","open-new-tab svelte-wyhhsa"),f(e,"class","image-modal svelte-wyhhsa")},m(h,g){G(h,e,g),o(e,t),o(e,r),o(e,i),o(e,l),o(e,c),o(c,u),d||(m=[K(t,"click",Ss(s[35])),K(i,"click",s[30]),K(e,"click",s[30])],d=!0)},p(h,g){g[0]&8192&&!Be(t.src,n=h[13])&&f(t,"src",n),g[0]&8192&&f(c,"href",h[13])},d(h){h&&_(e),d=!1,Me(m)}}}function Li(s){let e,t,n,r,i,a,l,c="âœ•",u,d,m,h,g;return{c(){e=k("div"),t=k("video"),n=k("source"),i=X(`\r
			Your browser does not support the video tag.`),a=L(),l=k("button"),l.textContent=c,u=L(),d=k("a"),m=X("Open in new tab"),this.h()},l(p){e=y(p,"DIV",{class:!0});var v=R(e);t=y(v,"VIDEO",{class:!0});var S=R(t);n=y(S,"SOURCE",{src:!0}),i=Z(S,`\r
			Your browser does not support the video tag.`),S.forEach(_),a=F(v),l=y(v,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(l)!=="svelte-yc21b"&&(l.textContent=c),u=F(v),d=y(v,"A",{href:!0,target:!0,rel:!0,class:!0});var C=R(d);m=Z(C,"Open in new tab"),C.forEach(_),v.forEach(_),this.h()},h(){Be(n.src,r=s[14])||f(n,"src",r),t.controls=!0,t.autoplay=!0,f(t,"class","enlarged-video svelte-wyhhsa"),f(l,"class","close-modal svelte-wyhhsa"),f(d,"href",s[14]),f(d,"target","_blank"),f(d,"rel","noopener noreferrer"),f(d,"class","open-new-tab svelte-wyhhsa"),f(e,"class","video-modal svelte-wyhhsa")},m(p,v){G(p,e,v),o(e,t),o(t,n),o(t,i),o(e,a),o(e,l),o(e,u),o(e,d),o(d,m),h||(g=[K(t,"click",Ss(s[34])),K(l,"click",s[32]),K(e,"click",s[32])],h=!0)},p(p,v){v[0]&16384&&!Be(n.src,r=p[14])&&f(n,"src",r),v[0]&16384&&f(d,"href",p[14])},d(p){p&&_(e),h=!1,Me(g)}}}function ff(s){let e=[],t=new Map,n,r,i,a,l,c,u,d,m,h,g,p,v,S=We(s[0]);const C=D=>D[59].id;for(let D=0;D<S.length;D+=1){let P=wi(s,S,D),z=C(P);t.set(z,e[D]=Oi(z,P))}function b(D){s[47](D)}function A(D){s[48](D)}let E={isOwnProfile:s[4]};s[2]!==void 0&&(E.isOpen=s[2]),s[3]!==void 0&&(E.user=s[3]),r=new da({props:E}),ct.push(()=>Xt(r,"isOpen",b)),ct.push(()=>Xt(r,"user",A));let T=s[8]&&Pi(s);function I(D){s[50](D)}function w(D){s[51](D)}let O={};s[11]!==void 0&&(O.visible=s[11]),s[12]!==void 0&&(O.message=s[12]),u=new Wu({props:O}),ct.push(()=>Xt(u,"visible",I)),ct.push(()=>Xt(u,"message",w));let N=s[13]&&Fi(s),x=s[14]&&Li(s);return{c(){for(let D=0;D<e.length;D+=1)e[D].c();n=L(),gt(r.$$.fragment),l=L(),T&&T.c(),c=L(),gt(u.$$.fragment),h=L(),N&&N.c(),g=L(),x&&x.c(),p=xe()},l(D){for(let P=0;P<e.length;P+=1)e[P].l(D);n=F(D),pt(r.$$.fragment,D),l=F(D),T&&T.l(D),c=F(D),pt(u.$$.fragment,D),h=F(D),N&&N.l(D),g=F(D),x&&x.l(D),p=xe()},m(D,P){for(let z=0;z<e.length;z+=1)e[z]&&e[z].m(D,P);G(D,n,P),ht(r,D,P),G(D,l,P),T&&T.m(D,P),G(D,c,P),ht(u,D,P),G(D,h,P),N&&N.m(D,P),G(D,g,P),x&&x.m(D,P),G(D,p,P),v=!0},p(D,P){P[0]&943162883|P[1]&1&&(S=We(D[0]),e=Ts(e,P,C,1,D,S,t,n.parentNode,As,Oi,n,wi));const z={};P[0]&16&&(z.isOwnProfile=D[4]),!i&&P[0]&4&&(i=!0,z.isOpen=D[2],Zt(()=>i=!1)),!a&&P[0]&8&&(a=!0,z.user=D[3],Zt(()=>a=!1)),r.$set(z),D[8]?T?(T.p(D,P),P[0]&256&&Oe(T,1)):(T=Pi(D),T.c(),Oe(T,1),T.m(c.parentNode,c)):T&&(en(),Ve(T,1,1,()=>{T=null}),tn());const U={};!d&&P[0]&2048&&(d=!0,U.visible=D[11],Zt(()=>d=!1)),!m&&P[0]&4096&&(m=!0,U.message=D[12],Zt(()=>m=!1)),u.$set(U),D[13]?N?N.p(D,P):(N=Fi(D),N.c(),N.m(g.parentNode,g)):N&&(N.d(1),N=null),D[14]?x?x.p(D,P):(x=Li(D),x.c(),x.m(p.parentNode,p)):x&&(x.d(1),x=null)},i(D){v||(Oe(r.$$.fragment,D),Oe(T),Oe(u.$$.fragment,D),v=!0)},o(D){Ve(r.$$.fragment,D),Ve(T),Ve(u.$$.fragment,D),v=!1},d(D){D&&(_(n),_(l),_(c),_(h),_(g),_(p));for(let P=0;P<e.length;P+=1)e[P].d(D);dt(r,D),T&&T.d(D),dt(u,D),N&&N.d(D),x&&x.d(D)}}}function xi(s){return new Date(s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}function cs(s){return s?s<1024?s+" B":s<1024*1024?(s/1024).toFixed(1)+" KB":(s/(1024*1024)).toFixed(1)+" MB":""}function Ge(s){return s?s.startsWith("data:")||s.startsWith("http:")||s.startsWith("https:")?s:`${window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin}${s}`:""}function us(s){if(!s)return"ðŸ“Ž";const e=s.toLowerCase().split(".").pop()||"";return{jpg:"ðŸ–¼ï¸",jpeg:"ðŸ–¼ï¸",png:"ðŸ–¼ï¸",gif:"ðŸ–¼ï¸",bmp:"ðŸ–¼ï¸",svg:"ðŸ–¼ï¸",webp:"ðŸ–¼ï¸",mp4:"ðŸŽ¬",mov:"ðŸŽ¬",avi:"ðŸŽ¬",mkv:"ðŸŽ¬",webm:"ðŸŽ¬",flv:"ðŸŽ¬",mp3:"ðŸŽµ",wav:"ðŸŽµ",ogg:"ðŸŽµ",flac:"ðŸŽµ",pdf:"ðŸ“„",doc:"ðŸ“",docx:"ðŸ“",txt:"ðŸ“",rtf:"ðŸ“",xls:"ðŸ“Š",xlsx:"ðŸ“Š",csv:"ðŸ“Š",ppt:"ðŸ“½ï¸",pptx:"ðŸ“½ï¸",zip:"ðŸ“¦",rar:"ðŸ“¦","7z":"ðŸ“¦",tar:"ðŸ“¦",gz:"ðŸ“¦",js:"ðŸ’»",ts:"ðŸ’»",py:"ðŸ’»",java:"ðŸ’»",cpp:"ðŸ’»",c:"ðŸ’»",cs:"ðŸ’»",html:"ðŸ’»",css:"ðŸ’»",json:"ðŸ’»",blend:"ðŸŽ¨",fbx:"ðŸŽ¨",obj:"ðŸŽ¨",stl:"ðŸŽ¨",psd:"ðŸŽ¨",ai:"ðŸŽ¨",sketch:"ðŸŽ¨"}[e]||"ðŸ“Ž"}function wr(s){if(!s)return!1;const e=s.toLowerCase().split(".").pop()||"";return["jpg","jpeg","png","gif","bmp","svg","webp"].includes(e)}function ha(s){if(!s)return!1;const e=s.toLowerCase().split(".").pop()||"";return["mp4","mov","avi","mkv","webm","flv"].includes(e)}function Mi(){document.querySelectorAll('.spoiler[data-spoiler="true"]').forEach(e=>{e.hasAttribute("data-listener-attached")||(e.addEventListener("click",function(){this.classList.toggle("revealed")}),e.setAttribute("data-listener-attached","true"))})}function df(s,e,t){let n,r,i;Te(s,xs,J=>t(54,n=J)),Te(s,os,J=>t(55,r=J)),Te(s,rs,J=>t(56,i=J));let{messages:a}=e,{onReply:l=()=>{}}=e,{firstUnreadMessageId:c=null}=e,u=!1,d=null,m=!1,h=!1,g=0,p=0,v=null,S=null,C="";function b(J){return i.find(pe=>pe.username===J)}function A(J){const pe=b(J);return(pe==null?void 0:pe.color)||"#6b7280"}function E(J){t(3,d=J),t(4,m=J.id===(r==null?void 0:r.id)),t(2,u=!0)}function T(J,pe){J.preventDefault(),t(8,v=pe),t(6,g=J.clientX),t(7,p=J.clientY),t(5,h=!0)}function I(){v&&(t(9,S=v.id),t(10,C=v.text),t(5,h=!1))}function w(J){C.trim()&&la(n,J,C.trim()),t(9,S=null),t(10,C="")}function O(){t(9,S=null),t(10,C="")}function N(){v&&(confirm("Are you sure you want to delete this message?")&&qc(n,v.id),t(5,h=!1))}function x(){v&&(aa(n,v.id),t(5,h=!1))}function D(){v&&(l(v),t(5,h=!1))}async function P(){if(!(!(v!=null&&v.fileUrl)||!(v!=null&&v.fileName))){try{const J=Ge(v.fileUrl),nt=await(await fetch(J)).blob(),Ze=window.URL.createObjectURL(nt),Fe=document.createElement("a");Fe.href=Ze,Fe.download=v.fileName,document.body.appendChild(Fe),Fe.click(),document.body.removeChild(Fe),window.URL.revokeObjectURL(Ze)}catch(J){console.error("Download failed:",J)}t(5,h=!1)}}let z=!1,U=null;function W(){v&&(t(12,U=v),t(11,z=!0),t(5,h=!1))}function j(J,pe){J.preventDefault(),t(8,v=pe),t(6,g=J.clientX),t(7,p=J.clientY),t(5,h=!0)}function B(J){if(J)return a.find(pe=>pe.id===J)}let H=null,V=null,q=[];function Y(J,pe=[]){t(13,H=J),q=pe.length>0?pe:[J],q.indexOf(J)}function $(){t(13,H=null),q=[]}function ee(J){t(14,V=J)}function ae(){t(14,V=null)}Es(Mi),ya(Mi);function ie(J){Os.call(this,s,J)}function fe(J){Os.call(this,s,J)}const ce=J=>E(J);function se(){C=this.value,t(10,C)}const de=(J,pe)=>{pe.key==="Enter"&&!pe.shiftKey?(pe.preventDefault(),w(J.id)):pe.key==="Escape"&&(pe.preventDefault(),O())},Ae=J=>w(J.id),ne=(J,pe,nt)=>{if(nt.button===0){const Ze=J.files.filter(Fe=>wr(Fe.fileName)).map(Fe=>Ge(Fe.fileUrl));Y(Ge(pe.fileUrl),Ze)}},ge=(J,pe)=>pe.button===0&&ee(Ge(J.fileUrl)),he=(J,pe)=>pe.button===0&&J.fileUrl&&Y(Ge(J.fileUrl)),be=(J,pe)=>j(pe,J),me=(J,pe)=>{pe.button===0&&J.fileUrl&&ee(Ge(J.fileUrl))},Ne=(J,pe)=>j(pe,J),tt=(J,pe)=>T(pe,J);function Ue(J){u=J,t(2,u)}function Ie(J){d=J,t(3,d)}function De(J){h=J,t(5,h)}function Xe(J){z=J,t(11,z)}function st(J){U=J,t(12,U)}return s.$$set=J=>{"messages"in J&&t(0,a=J.messages),"onReply"in J&&t(33,l=J.onReply),"firstUnreadMessageId"in J&&t(1,c=J.firstUnreadMessageId)},[a,c,u,d,m,h,g,p,v,S,C,z,U,H,V,b,A,E,T,I,w,O,N,x,D,P,W,j,B,Y,$,ee,ae,l,ie,fe,ce,se,de,Ae,ne,ge,he,be,me,Ne,tt,Ue,Ie,De,Xe,st]}class hf extends yt{constructor(e){super(),kt(this,e,df,ff,bt,{messages:0,onReply:33,firstUnreadMessageId:1},null,[-1,-1,-1])}}function Bi(s,e,t){const n=s.slice();return n[6]=e[t],n}function Ui(s){let e,t,n,r="ðŸ“Œ",i,a,l="Pinned Messages",c,u,d,m=s[0].length+"",h,g,p,v,S=[],C=new Map,b=We(s[0]);const A=E=>E[6].id;for(let E=0;E<b.length;E+=1){let T=Bi(s,b,E),I=A(T);C.set(I,S[E]=zi(I,T))}return{c(){e=k("div"),t=k("div"),n=k("span"),n.textContent=r,i=L(),a=k("span"),a.textContent=l,c=L(),u=k("span"),d=X("("),h=X(m),g=X(")"),p=L(),v=k("div");for(let E=0;E<S.length;E+=1)S[E].c();this.h()},l(E){e=y(E,"DIV",{class:!0});var T=R(e);t=y(T,"DIV",{class:!0});var I=R(t);n=y(I,"SPAN",{class:!0,"data-svelte-h":!0}),Q(n)!=="svelte-73xtmc"&&(n.textContent=r),i=F(I),a=y(I,"SPAN",{class:!0,"data-svelte-h":!0}),Q(a)!=="svelte-123zvdk"&&(a.textContent=l),c=F(I),u=y(I,"SPAN",{class:!0});var w=R(u);d=Z(w,"("),h=Z(w,m),g=Z(w,")"),w.forEach(_),I.forEach(_),p=F(T),v=y(T,"DIV",{class:!0});var O=R(v);for(let N=0;N<S.length;N+=1)S[N].l(O);O.forEach(_),T.forEach(_),this.h()},h(){f(n,"class","pinned-icon svelte-1ivhp56"),f(a,"class","pinned-title svelte-1ivhp56"),f(u,"class","pinned-count svelte-1ivhp56"),f(t,"class","pinned-header svelte-1ivhp56"),f(v,"class","pinned-messages svelte-1ivhp56"),f(e,"class","pinned-container svelte-1ivhp56")},m(E,T){G(E,e,T),o(e,t),o(t,n),o(t,i),o(t,a),o(t,c),o(t,u),o(u,d),o(u,h),o(u,g),o(e,p),o(e,v);for(let I=0;I<S.length;I+=1)S[I]&&S[I].m(v,null)},p(E,T){T&1&&m!==(m=E[0].length+"")&&re(h,m),T&7&&(b=We(E[0]),S=Ts(S,T,A,1,E,b,C,v,As,zi,null,Bi))},d(E){E&&_(e);for(let T=0;T<S.length;T+=1)S[T].d()}}}function zi(s,e){let t,n,r,i=e[6].user+"",a,l,c,u=e[6].text.substring(0,100)+"",d,m=e[6].text.length>100?"...":"",h,g,p,v=Vi(e[6].timestamp)+"",S,C,b,A="Ã—",E,T,I;function w(){return e[3](e[6])}return{key:s,first:null,c(){t=k("div"),n=k("div"),r=k("span"),a=X(i),l=L(),c=k("span"),d=X(u),h=X(m),g=L(),p=k("span"),S=X(v),C=L(),b=k("button"),b.textContent=A,E=L(),this.h()},l(O){t=y(O,"DIV",{class:!0});var N=R(t);n=y(N,"DIV",{class:!0});var x=R(n);r=y(x,"SPAN",{class:!0,style:!0});var D=R(r);a=Z(D,i),D.forEach(_),l=F(x),c=y(x,"SPAN",{class:!0});var P=R(c);d=Z(P,u),h=Z(P,m),P.forEach(_),g=F(x),p=y(x,"SPAN",{class:!0});var z=R(p);S=Z(z,v),z.forEach(_),x.forEach(_),C=F(N),b=y(N,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(b)!=="svelte-87szfn"&&(b.textContent=A),E=F(N),N.forEach(_),this.h()},h(){f(r,"class","pinned-user svelte-1ivhp56"),Le(r,"color",e[1](e[6].user)),f(c,"class","pinned-text svelte-1ivhp56"),f(p,"class","pinned-time svelte-1ivhp56"),f(n,"class","pinned-message-content svelte-1ivhp56"),f(b,"class","unpin-btn svelte-1ivhp56"),f(b,"title","Unpin message"),f(t,"class","pinned-message svelte-1ivhp56"),this.first=t},m(O,N){G(O,t,N),o(t,n),o(n,r),o(r,a),o(n,l),o(n,c),o(c,d),o(c,h),o(n,g),o(n,p),o(p,S),o(t,C),o(t,b),o(t,E),T||(I=K(b,"click",w),T=!0)},p(O,N){e=O,N&1&&i!==(i=e[6].user+"")&&re(a,i),N&1&&Le(r,"color",e[1](e[6].user)),N&1&&u!==(u=e[6].text.substring(0,100)+"")&&re(d,u),N&1&&m!==(m=e[6].text.length>100?"...":"")&&re(h,m),N&1&&v!==(v=Vi(e[6].timestamp)+"")&&re(S,v)},d(O){O&&_(t),T=!1,I()}}}function pf(s){let e,t=s[0].length>0&&Ui(s);return{c(){t&&t.c(),e=xe()},l(n){t&&t.l(n),e=xe()},m(n,r){t&&t.m(n,r),G(n,e,r)},p(n,[r]){n[0].length>0?t?t.p(n,r):(t=Ui(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Pe,o:Pe,d(n){n&&_(e),t&&t.d(n)}}}function Vi(s){return new Date(s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}function gf(s,e,t){let n;Te(s,rs,u=>t(4,n=u));let{pinnedMessages:r}=e;function i(u){return n.find(d=>d.username===u)}function a(u){const d=i(u);return(d==null?void 0:d.color)||"#6b7280"}function l(u){aa(u)}const c=u=>l(u.id);return s.$$set=u=>{"pinnedMessages"in u&&t(0,r=u.pinnedMessages)},[r,a,l,c]}class mf extends yt{constructor(e){super(),kt(this,e,gf,pf,bt,{pinnedMessages:0})}}function qi(s,e,t){const n=s.slice();return n[44]=e[t].file,n[45]=e[t].preview,n[47]=t,n}function Hi(s){let e,t='<div class="drag-overlay-content svelte-m4gddv"><div class="drag-icon svelte-m4gddv">ðŸ“</div> <div class="drag-text svelte-m4gddv">Drop files here to upload</div></div>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(n){e=y(n,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1patjf9"&&(e.innerHTML=t),this.h()},h(){f(e,"class","drag-overlay svelte-m4gddv")},m(n,r){G(n,e,r)},d(n){n&&_(e)}}}function ji(s){let e,t,n,r,i=s[15].join(", ")+"",a,l,c=s[15].length===1?"is":"are",u,d;return{c(){e=k("div"),t=k("span"),n=L(),r=k("span"),a=X(i),l=L(),u=X(c),d=X(" typing..."),this.h()},l(m){e=y(m,"DIV",{class:!0});var h=R(e);t=y(h,"SPAN",{class:!0}),R(t).forEach(_),n=F(h),r=y(h,"SPAN",{});var g=R(r);a=Z(g,i),l=F(g),u=Z(g,c),d=Z(g," typing..."),g.forEach(_),h.forEach(_),this.h()},h(){f(t,"class","typing-dots svelte-m4gddv"),f(e,"class","typing-indicator svelte-m4gddv")},m(m,h){G(m,e,h),o(e,t),o(e,n),o(e,r),o(r,a),o(r,l),o(r,u),o(r,d)},p(m,h){h[0]&32768&&i!==(i=m[15].join(", ")+"")&&re(a,i),h[0]&32768&&c!==(c=m[15].length===1?"is":"are")&&re(u,c)},d(m){m&&_(e)}}}function Gi(s){let e,t;return e=new Du({}),e.$on("select",s[20]),e.$on("close",s[32]),{c(){gt(e.$$.fragment)},l(n){pt(e.$$.fragment,n)},m(n,r){ht(e,n,r),t=!0},p:Pe,i(n){t||(Oe(e.$$.fragment,n),t=!0)},o(n){Ve(e.$$.fragment,n),t=!1},d(n){dt(e,n)}}}function vf(s){let e,t,n,r,i=s[5].user+"",a,l,c,u,d=s[5].text.substring(0,50)+"",m,h=s[5].text.length>50?"...":"",g,p,v,S="âœ•",C,b;return{c(){e=k("div"),t=k("div"),n=k("span"),r=X("Replying to "),a=X(i),l=X(":"),c=L(),u=k("span"),m=X(d),g=X(h),p=L(),v=k("button"),v.textContent=S,this.h()},l(A){e=y(A,"DIV",{class:!0});var E=R(e);t=y(E,"DIV",{class:!0});var T=R(t);n=y(T,"SPAN",{class:!0});var I=R(n);r=Z(I,"Replying to "),a=Z(I,i),l=Z(I,":"),I.forEach(_),c=F(T),u=y(T,"SPAN",{class:!0});var w=R(u);m=Z(w,d),g=Z(w,h),w.forEach(_),T.forEach(_),p=F(E),v=y(E,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(v)!=="svelte-1av190j"&&(v.textContent=S),E.forEach(_),this.h()},h(){f(n,"class","reply-label svelte-m4gddv"),f(u,"class","reply-preview svelte-m4gddv"),f(t,"class","reply-info svelte-m4gddv"),f(v,"class","cancel-reply svelte-m4gddv"),f(e,"class","reply-bar svelte-m4gddv")},m(A,E){G(A,e,E),o(e,t),o(t,n),o(n,r),o(n,a),o(n,l),o(t,c),o(t,u),o(u,m),o(u,g),o(e,p),o(e,v),C||(b=K(v,"click",s[22]),C=!0)},p(A,E){E[0]&32&&i!==(i=A[5].user+"")&&re(a,i),E[0]&32&&d!==(d=A[5].text.substring(0,50)+"")&&re(m,d),E[0]&32&&h!==(h=A[5].text.length>50?"...":"")&&re(g,h)},d(A){A&&_(e),C=!1,b()}}}function _f(s){let e,t,n='<span class="edit-label svelte-m4gddv">Editing message</span> <span class="edit-hint svelte-m4gddv">Press Escape to cancel</span>',r,i,a="âœ•",l,c;return{c(){e=k("div"),t=k("div"),t.innerHTML=n,r=L(),i=k("button"),i.textContent=a,this.h()},l(u){e=y(u,"DIV",{class:!0});var d=R(e);t=y(d,"DIV",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-1kwfa7y"&&(t.innerHTML=n),r=F(d),i=y(d,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(i)!=="svelte-1anw7a5"&&(i.textContent=a),d.forEach(_),this.h()},h(){f(t,"class","edit-info svelte-m4gddv"),f(i,"class","cancel-edit svelte-m4gddv"),f(e,"class","edit-bar svelte-m4gddv")},m(u,d){G(u,e,d),o(e,t),o(e,r),o(e,i),l||(c=K(i,"click",s[19]),l=!0)},p:Pe,d(u){u&&_(e),l=!1,c()}}}function Wi(s){let e,t,n,r=s[10].length+"",i,a,l=s[10].length>1?"s":"",c,u,d,m,h="âœ•",g,p,v,S,C,b,A,E,T="Mark as spoiler",I,w,O="âš ï¸",N,x,D,P=s[10].length+"",z,U,W=s[10].length>1?"s":"",j,B,H,V=We(s[10]),q=[];for(let Y=0;Y<V.length;Y+=1)q[Y]=$i(qi(s,V,Y));return{c(){e=k("div"),t=k("div"),n=k("span"),i=X(r),a=X(" file"),c=X(l),u=X(" selected"),d=L(),m=k("button"),m.textContent=h,g=L(),p=k("div");for(let Y=0;Y<q.length;Y+=1)q[Y].c();v=L(),S=k("div"),C=k("label"),b=k("input"),A=L(),E=k("span"),E.textContent=T,I=L(),w=k("span"),w.textContent=O,N=L(),x=k("button"),D=X("Upload "),z=X(P),U=X(" file"),j=X(W),this.h()},l(Y){e=y(Y,"DIV",{class:!0});var $=R(e);t=y($,"DIV",{class:!0});var ee=R(t);n=y(ee,"SPAN",{});var ae=R(n);i=Z(ae,r),a=Z(ae," file"),c=Z(ae,l),u=Z(ae," selected"),ae.forEach(_),d=F(ee),m=y(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(m)!=="svelte-pcsk7y"&&(m.textContent=h),ee.forEach(_),g=F($),p=y($,"DIV",{class:!0});var ie=R(p);for(let de=0;de<q.length;de+=1)q[de].l(ie);ie.forEach(_),v=F($),S=y($,"DIV",{class:!0});var fe=R(S);C=y(fe,"LABEL",{class:!0});var ce=R(C);b=y(ce,"INPUT",{type:!0,class:!0}),A=F(ce),E=y(ce,"SPAN",{"data-svelte-h":!0}),Q(E)!=="svelte-6s6emx"&&(E.textContent=T),ce.forEach(_),I=F(fe),w=y(fe,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),Q(w)!=="svelte-6jzi8y"&&(w.textContent=O),fe.forEach(_),N=F($),x=y($,"BUTTON",{class:!0});var se=R(x);D=Z(se,"Upload "),z=Z(se,P),U=Z(se," file"),j=Z(se,W),se.forEach(_),$.forEach(_),this.h()},h(){f(m,"class","cancel-gallery svelte-m4gddv"),f(t,"class","gallery-header svelte-m4gddv"),f(p,"class","gallery-grid svelte-m4gddv"),f(b,"type","checkbox"),f(b,"class","spoiler-checkbox svelte-m4gddv"),f(C,"class","spoiler-checkbox-label svelte-m4gddv"),f(w,"class","spoiler-hint svelte-m4gddv"),f(w,"title","Sensitive content will be hidden until clicked"),f(S,"class","spoiler-checkbox-container svelte-m4gddv"),f(x,"class","upload-files-btn svelte-m4gddv"),f(e,"class","file-gallery svelte-m4gddv")},m(Y,$){G(Y,e,$),o(e,t),o(t,n),o(n,i),o(n,a),o(n,c),o(n,u),o(t,d),o(t,m),o(e,g),o(e,p);for(let ee=0;ee<q.length;ee+=1)q[ee]&&q[ee].m(p,null);o(e,v),o(e,S),o(S,C),o(C,b),b.checked=s[11],o(C,A),o(C,E),o(S,I),o(S,w),o(e,N),o(e,x),o(x,D),o(x,z),o(x,U),o(x,j),B||(H=[K(m,"click",s[25]),K(b,"change",s[34]),K(x,"click",s[29])],B=!0)},p(Y,$){if($[0]&1024&&r!==(r=Y[10].length+"")&&re(i,r),$[0]&1024&&l!==(l=Y[10].length>1?"s":"")&&re(c,l),$[0]&16778240){V=We(Y[10]);let ee;for(ee=0;ee<V.length;ee+=1){const ae=qi(Y,V,ee);q[ee]?q[ee].p(ae,$):(q[ee]=$i(ae),q[ee].c(),q[ee].m(p,null))}for(;ee<q.length;ee+=1)q[ee].d(1);q.length=V.length}$[0]&2048&&(b.checked=Y[11]),$[0]&1024&&P!==(P=Y[10].length+"")&&re(z,P),$[0]&1024&&W!==(W=Y[10].length>1?"s":"")&&re(j,W)},d(Y){Y&&_(e),Cn(q,Y),B=!1,Me(H)}}}function bf(s){let e,t,n;function r(l,c){return c[0]&1024&&(t=null),c[0]&1024&&(n=null),t==null&&(t=!!l[44].type.startsWith("video/")),t?Ef:(n==null&&(n=!!l[44].type.startsWith("audio/")),n?wf:kf)}let i=r(s,[-1,-1]),a=i(s);return{c(){e=k("div"),a.c(),this.h()},l(l){e=y(l,"DIV",{class:!0});var c=R(e);a.l(c),c.forEach(_),this.h()},h(){f(e,"class","gallery-file-icon svelte-m4gddv")},m(l,c){G(l,e,c),a.m(e,null)},p(l,c){i!==(i=r(l,c))&&(a.d(1),a=i(l),a&&(a.c(),a.m(e,null)))},d(l){l&&_(e),a.d()}}}function yf(s){let e,t,n;return{c(){e=k("img"),this.h()},l(r){e=y(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Be(e.src,t=s[45])||f(e,"src",t),f(e,"alt",n=s[44].name),f(e,"class","gallery-preview svelte-m4gddv")},m(r,i){G(r,e,i)},p(r,i){i[0]&1024&&!Be(e.src,t=r[45])&&f(e,"src",t),i[0]&1024&&n!==(n=r[44].name)&&f(e,"alt",n)},d(r){r&&_(e)}}}function kf(s){let e;return{c(){e=X("ðŸ“„")},l(t){e=Z(t,"ðŸ“„")},m(t,n){G(t,e,n)},d(t){t&&_(e)}}}function wf(s){let e;return{c(){e=X("ðŸŽµ")},l(t){e=Z(t,"ðŸŽµ")},m(t,n){G(t,e,n)},d(t){t&&_(e)}}}function Ef(s){let e;return{c(){e=X("ðŸŽ¬")},l(t){e=Z(t,"ðŸŽ¬")},m(t,n){G(t,e,n)},d(t){t&&_(e)}}}function $i(s){let e,t,n,r,i=s[44].name+"",a,l,c,u=(s[44].size/1024/1024).toFixed(2)+"",d,m,h,g,p="âœ•",v,S,C;function b(I,w){return I[45]?yf:bf}let A=b(s),E=A(s);function T(){return s[33](s[47])}return{c(){e=k("div"),E.c(),t=L(),n=k("div"),r=k("div"),a=X(i),l=L(),c=k("div"),d=X(u),m=X(" MB"),h=L(),g=k("button"),g.textContent=p,v=L(),this.h()},l(I){e=y(I,"DIV",{class:!0});var w=R(e);E.l(w),t=F(w),n=y(w,"DIV",{class:!0});var O=R(n);r=y(O,"DIV",{class:!0});var N=R(r);a=Z(N,i),N.forEach(_),l=F(O),c=y(O,"DIV",{class:!0});var x=R(c);d=Z(x,u),m=Z(x," MB"),x.forEach(_),O.forEach(_),h=F(w),g=y(w,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(g)!=="svelte-17gof1i"&&(g.textContent=p),v=F(w),w.forEach(_),this.h()},h(){f(r,"class","gallery-file-name svelte-m4gddv"),f(c,"class","gallery-file-size svelte-m4gddv"),f(n,"class","gallery-file-info svelte-m4gddv"),f(g,"class","remove-file svelte-m4gddv"),f(e,"class","gallery-item svelte-m4gddv")},m(I,w){G(I,e,w),E.m(e,null),o(e,t),o(e,n),o(n,r),o(r,a),o(n,l),o(n,c),o(c,d),o(c,m),o(e,h),o(e,g),o(e,v),S||(C=K(g,"click",T),S=!0)},p(I,w){s=I,A===(A=b(s))&&E?E.p(s,w):(E.d(1),E=A(s),E&&(E.c(),E.m(e,t))),w[0]&1024&&i!==(i=s[44].name+"")&&re(a,i),w[0]&1024&&u!==(u=(s[44].size/1024/1024).toFixed(2)+"")&&re(d,u)},d(I){I&&_(e),E.d(),S=!1,C()}}}function Yi(s){let e,t,n,r="Uploading files...",i,a,l,c,u,d,m;return{c(){e=k("div"),t=k("div"),n=k("span"),n.textContent=r,i=L(),a=k("span"),l=X(s[8]),c=X("%"),u=L(),d=k("div"),m=k("div"),this.h()},l(h){e=y(h,"DIV",{class:!0});var g=R(e);t=y(g,"DIV",{class:!0});var p=R(t);n=y(p,"SPAN",{"data-svelte-h":!0}),Q(n)!=="svelte-10wvq4k"&&(n.textContent=r),i=F(p),a=y(p,"SPAN",{});var v=R(a);l=Z(v,s[8]),c=Z(v,"%"),v.forEach(_),p.forEach(_),u=F(g),d=y(g,"DIV",{class:!0});var S=R(d);m=y(S,"DIV",{class:!0,style:!0}),R(m).forEach(_),S.forEach(_),g.forEach(_),this.h()},h(){f(t,"class","upload-progress-info svelte-m4gddv"),f(m,"class","progress-fill svelte-m4gddv"),Le(m,"width",s[8]+"%"),f(d,"class","progress-bar svelte-m4gddv"),f(e,"class","upload-progress-bar svelte-m4gddv")},m(h,g){G(h,e,g),o(e,t),o(t,n),o(t,i),o(t,a),o(a,l),o(a,c),o(e,u),o(e,d),o(d,m)},p(h,g){g[0]&256&&re(l,h[8]),g[0]&256&&Le(m,"width",h[8]+"%")},d(h){h&&_(e)}}}function Sf(s){let e,t,n,r,i,a,l,c,u,d,m,h,g,p,v,S,C,b,A,E,T,I,w="ðŸ“Ž",O,N,x="GIF",D,P,z,U,W,j,B,H,V,q=s[12]&&Hi();c=new mf({props:{pinnedMessages:s[13]}}),d=new hf({props:{messages:s[0],onReply:s[21],firstUnreadMessageId:s[14]}});let Y=s[15].length>0&&ji(s),$=s[4]&&Gi(s);function ee(se,de){if(se[7])return _f;if(se[5])return vf}let ae=ee(s),ie=ae&&ae(s),fe=s[10].length>0&&!s[9]&&Wi(s),ce=s[9]&&Yi(s);return{c(){e=k("div"),q&&q.c(),t=L(),n=k("div"),r=k("h2"),i=X(s[1]),a=L(),l=k("div"),gt(c.$$.fragment),u=L(),gt(d.$$.fragment),m=L(),Y&&Y.c(),h=L(),$&&$.c(),g=L(),ie&&ie.c(),p=L(),v=k("div"),fe&&fe.c(),S=L(),ce&&ce.c(),C=L(),b=k("input"),A=L(),E=k("div"),T=k("div"),I=k("button"),I.textContent=w,O=L(),N=k("button"),N.textContent=x,D=L(),P=k("textarea"),z=L(),U=k("button"),W=X("Send"),this.h()},l(se){e=y(se,"DIV",{class:!0});var de=R(e);q&&q.l(de),t=F(de),n=y(de,"DIV",{class:!0});var Ae=R(n);r=y(Ae,"H2",{class:!0});var ne=R(r);i=Z(ne,s[1]),ne.forEach(_),Ae.forEach(_),a=F(de),l=y(de,"DIV",{class:!0});var ge=R(l);pt(c.$$.fragment,ge),u=F(ge),pt(d.$$.fragment,ge),m=F(ge),Y&&Y.l(ge),ge.forEach(_),h=F(de),$&&$.l(de),g=F(de),ie&&ie.l(de),p=F(de),v=y(de,"DIV",{class:!0});var he=R(v);fe&&fe.l(he),S=F(he),ce&&ce.l(he),C=F(he),b=y(he,"INPUT",{type:!0,style:!0}),A=F(he),E=y(he,"DIV",{class:!0});var be=R(E);T=y(be,"DIV",{class:!0});var me=R(T);I=y(me,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(I)!=="svelte-1fiys3t"&&(I.textContent=w),O=F(me),N=y(me,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(N)!=="svelte-1i50t7a"&&(N.textContent=x),me.forEach(_),D=F(be),P=y(be,"TEXTAREA",{placeholder:!0,maxlength:!0,rows:!0,class:!0}),R(P).forEach(_),z=F(be),U=y(be,"BUTTON",{class:!0});var Ne=R(U);W=Z(Ne,"Send"),Ne.forEach(_),be.forEach(_),he.forEach(_),de.forEach(_),this.h()},h(){f(r,"class","svelte-m4gddv"),f(n,"class","chat-header svelte-m4gddv"),f(l,"class","messages svelte-m4gddv"),f(b,"type","file"),b.multiple=!0,Le(b,"display","none"),f(I,"class","input-icon-button svelte-m4gddv"),f(I,"title","Attach file"),f(N,"class","input-icon-button svelte-m4gddv"),f(N,"title","Add GIF"),f(T,"class","input-buttons-left svelte-m4gddv"),f(P,"placeholder","Type a message... (Shift+Enter for new line)"),f(P,"maxlength","2000"),f(P,"rows","1"),f(P,"class","svelte-m4gddv"),f(U,"class","send-button svelte-m4gddv"),U.disabled=j=!s[2].trim(),f(E,"class","input-container svelte-m4gddv"),f(v,"class","input-wrapper svelte-m4gddv"),f(e,"class","chat-container svelte-m4gddv")},m(se,de){G(se,e,de),q&&q.m(e,null),o(e,t),o(e,n),o(n,r),o(r,i),o(e,a),o(e,l),ht(c,l,null),o(l,u),ht(d,l,null),o(l,m),Y&&Y.m(l,null),s[31](l),o(e,h),$&&$.m(e,null),o(e,g),ie&&ie.m(e,null),o(e,p),o(e,v),fe&&fe.m(v,null),o(v,S),ce&&ce.m(v,null),o(v,C),o(v,b),s[35](b),o(v,A),o(v,E),o(E,T),o(T,I),o(T,O),o(T,N),o(E,D),o(E,P),Je(P,s[2]),o(E,z),o(E,U),o(U,W),B=!0,H||(V=[K(b,"change",s[23]),K(I,"click",s[36]),K(N,"click",s[37]),K(P,"input",s[38]),K(P,"input",s[16]),K(P,"keydown",s[17]),K(U,"click",s[18]),K(e,"dragenter",s[26]),K(e,"dragleave",s[27]),K(e,"dragover",Af),K(e,"drop",s[28])],H=!0)},p(se,de){se[12]?q||(q=Hi(),q.c(),q.m(e,t)):q&&(q.d(1),q=null),(!B||de[0]&2)&&re(i,se[1]);const Ae={};de[0]&8192&&(Ae.pinnedMessages=se[13]),c.$set(Ae);const ne={};de[0]&1&&(ne.messages=se[0]),de[0]&16384&&(ne.firstUnreadMessageId=se[14]),d.$set(ne),se[15].length>0?Y?Y.p(se,de):(Y=ji(se),Y.c(),Y.m(l,null)):Y&&(Y.d(1),Y=null),se[4]?$?($.p(se,de),de[0]&16&&Oe($,1)):($=Gi(se),$.c(),Oe($,1),$.m(e,g)):$&&(en(),Ve($,1,1,()=>{$=null}),tn()),ae===(ae=ee(se))&&ie?ie.p(se,de):(ie&&ie.d(1),ie=ae&&ae(se),ie&&(ie.c(),ie.m(e,p))),se[10].length>0&&!se[9]?fe?fe.p(se,de):(fe=Wi(se),fe.c(),fe.m(v,S)):fe&&(fe.d(1),fe=null),se[9]?ce?ce.p(se,de):(ce=Yi(se),ce.c(),ce.m(v,C)):ce&&(ce.d(1),ce=null),de[0]&4&&Je(P,se[2]),(!B||de[0]&4&&j!==(j=!se[2].trim()))&&(U.disabled=j)},i(se){B||(Oe(c.$$.fragment,se),Oe(d.$$.fragment,se),Oe($),B=!0)},o(se){Ve(c.$$.fragment,se),Ve(d.$$.fragment,se),Ve($),B=!1},d(se){se&&_(e),q&&q.d(),dt(c),dt(d),Y&&Y.d(),s[31](null),$&&$.d(),ie&&ie.d(),fe&&fe.d(),ce&&ce.d(),s[35](null),H=!1,Me(V)}}}function Af(s){s.preventDefault(),s.stopPropagation()}function Tf(s,e,t){let n,r,i,a,l,c,u;Te(s,xs,ne=>t(1,i=ne)),Te(s,os,ne=>t(42,a=ne)),Te(s,Ut,ne=>t(30,l=ne)),Te(s,kr,ne=>t(14,c=ne)),Te(s,ra,ne=>t(15,u=ne));let d="",m,h,g=!1,p=null,v,S=null,C=0,b=!1,A=[],E=[],T=!1,I=!1,w=0;async function O(){await ka(),m&&t(3,m.scrollTop=m.scrollHeight,m)}function N(){jn(!0),h&&clearTimeout(h),h=setTimeout(()=>{jn(!1)},1e3)}function x(ne){if(ne.key==="ArrowUp"&&!d.trim()&&!S){ne.preventDefault();const ge=n.filter(he=>he.userId===(a==null?void 0:a.id));if(ge.length>0){const he=ge[ge.length-1];t(7,S=he),t(2,d=he.text)}}else ne.key==="Escape"&&S?(ne.preventDefault(),P()):ne.key==="Enter"&&!ne.shiftKey&&(ne.preventDefault(),D())}function D(){d.trim()&&(S?(la(i,S.id,d.trim()),t(7,S=null)):(dn(i,d.trim(),"text",{replyTo:p==null?void 0:p.id,isSpoiler:T}),t(5,p=null)),t(2,d=""),jn(!1),h&&clearTimeout(h))}function P(){t(7,S=null),t(2,d="")}function z(ne){dn(i,"","gif",{gifUrl:ne.detail,replyTo:p==null?void 0:p.id,isSpoiler:T}),t(5,p=null),t(4,g=!1)}function U(ne){t(5,p=ne);const ge=document.querySelector('input[type="text"]');ge==null||ge.focus()}function W(){t(5,p=null)}async function j(ne){const ge=ne.target,he=Array.from(ge.files||[]);if(he.length===0){console.log("No files selected");return}console.log("Files selected:",he.length);const be=1024*1024*1024;for(const me of he)if(me.size>be){alert(`File too large! Maximum size is 1GB per file. "${me.name}" is ${(me.size/1024/1024).toFixed(2)}MB`),ge.value="";return}A=he,t(10,E=await Promise.all(he.map(async me=>{if(me.type.startsWith("image/")){const Ne=await new Promise(tt=>{const Ue=new FileReader;Ue.onload=Ie=>{var De;return tt((De=Ie.target)==null?void 0:De.result)},Ue.readAsDataURL(me)});return{file:me,preview:Ne}}return{file:me}}))),ge.value=""}function B(ne){A=A.filter((ge,he)=>he!==ne),t(10,E=E.filter((ge,he)=>he!==ne))}function H(){A=[],t(10,E=[])}function V(ne){var ge;ne.preventDefault(),ne.stopPropagation(),w++,(ge=ne.dataTransfer)!=null&&ge.types.includes("Files")&&t(12,I=!0)}function q(ne){ne.preventDefault(),ne.stopPropagation(),w--,w===0&&t(12,I=!1)}async function Y(ne){var be;ne.preventDefault(),ne.stopPropagation(),t(12,I=!1),w=0;const ge=Array.from(((be=ne.dataTransfer)==null?void 0:be.files)||[]);if(ge.length===0)return;const he=1024*1024*1024;for(const me of ge)if(me.size>he){alert(`File too large! Maximum size is 1GB per file. "${me.name}" is ${(me.size/1024/1024).toFixed(2)}MB`);return}A=ge,t(10,E=await Promise.all(ge.map(async me=>{if(me.type.startsWith("image/")){const Ne=await new Promise(tt=>{const Ue=new FileReader;Ue.onload=Ie=>{var De;return tt((De=Ie.target)==null?void 0:De.result)},Ue.readAsDataURL(me)});return{file:me,preview:Ne}}return{file:me}})))}async function $(){if(A.length===0)return;t(9,b=!0);const ne=A.length;let ge=0;try{const he=window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin,be=[];for(const me of A){const Ne=await new Promise((tt,Ue)=>{const Ie=new FormData;Ie.append("file",me),Ie.append("channelId",i);const De=new XMLHttpRequest;De.upload.addEventListener("progress",Xe=>{if(Xe.lengthComputable){const st=Xe.loaded/Xe.total*100,J=(ge+st/100)/ne*100;t(8,C=Math.round(J))}}),De.addEventListener("load",()=>{if(De.status===200){const Xe=JSON.parse(De.responseText);ge++,tt({fileUrl:Xe.fileUrl,fileName:me.name,fileSize:me.size})}else Ue(new Error("Upload failed"))}),De.addEventListener("error",()=>{Ue(new Error("Upload failed"))}),De.open("POST",`${he}/api/upload`),De.send(Ie)});be.push(Ne)}be.length===1?dn(i,d.trim()||`Shared: ${be[0].fileName}`,"file",{fileUrl:be[0].fileUrl,fileName:be[0].fileName,fileSize:be[0].fileSize,replyTo:p==null?void 0:p.id,isSpoiler:T}):dn(i,d.trim()||`Shared ${be.length} files`,"file",{files:be,replyTo:p==null?void 0:p.id,isSpoiler:T}),console.log("All files uploaded"),t(2,d=""),t(5,p=null),A=[],t(10,E=[]),t(9,b=!1),t(8,C=0)}catch(he){console.error("Upload error:",he),alert("Failed to upload files. Please try again."),t(9,b=!1),t(8,C=0)}}Es(()=>{O()});function ee(ne){ct[ne?"unshift":"push"](()=>{m=ne,t(3,m)})}const ae=()=>t(4,g=!1),ie=ne=>B(ne);function fe(){T=this.checked,t(11,T)}function ce(ne){ct[ne?"unshift":"push"](()=>{v=ne,t(6,v)})}const se=()=>v==null?void 0:v.click(),de=()=>t(4,g=!g);function Ae(){d=this.value,t(2,d)}return s.$$.update=()=>{s.$$.dirty[0]&1073741826&&t(0,n=l[i]||[]),s.$$.dirty[0]&1&&t(13,r=n.filter(ne=>ne.isPinned)),s.$$.dirty[0]&1&&n.length&&O()},[n,i,d,m,g,p,v,S,C,b,E,T,I,r,c,u,N,x,D,P,z,U,W,j,B,H,V,q,Y,$,l,ee,ae,ie,fe,ce,se,de,Ae]}class Cf extends yt{constructor(e){super(),kt(this,e,Tf,Sf,bt,{},null,[-1,-1])}}function If(s){let e,t,n,r,i,a,l,c,u,d="Join Chat",m,h;return{c(){e=k("div"),t=k("div"),n=k("img"),i=L(),a=k("form"),l=k("input"),c=L(),u=k("button"),u.textContent=d,this.h()},l(g){e=y(g,"DIV",{class:!0});var p=R(e);t=y(p,"DIV",{class:!0});var v=R(t);n=y(v,"IMG",{src:!0,alt:!0,class:!0}),i=F(v),a=y(v,"FORM",{class:!0});var S=R(a);l=y(S,"INPUT",{type:!0,placeholder:!0,maxlength:!0,class:!0}),c=F(S),u=y(S,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Q(u)!=="svelte-1oym1t5"&&(u.textContent=d),S.forEach(_),v.forEach(_),p.forEach(_),this.h()},h(){Be(n.src,r="/wabi-logo.png")||f(n,"src",r),f(n,"alt","Wabi"),f(n,"class","logo svelte-1icgi6p"),f(l,"type","text"),f(l,"placeholder","Enter your username"),f(l,"maxlength","20"),l.required=!0,l.autofocus=!0,f(l,"class","svelte-1icgi6p"),f(u,"type","submit"),f(u,"class","svelte-1icgi6p"),f(a,"class","svelte-1icgi6p"),f(t,"class","login-box svelte-1icgi6p"),f(e,"class","login-container svelte-1icgi6p")},m(g,p){G(g,e,p),o(e,t),o(t,n),o(t,i),o(t,a),o(a,l),Je(l,s[0]),o(a,c),o(a,u),l.focus(),m||(h=[K(l,"input",s[2]),K(a,"submit",wa(s[1]))],m=!0)},p(g,[p]){p&1&&l.value!==g[0]&&Je(l,g[0])},i:Pe,o:Pe,d(g){g&&_(e),m=!1,Me(h)}}}function Df(s,e,t){const n=El();let r="";function i(){r.trim()&&n("login",r.trim())}function a(){r=this.value,t(0,r)}return[r,i,a]}class Rf extends yt{constructor(e){super(),kt(this,e,Df,If,bt,{})}}function Zi(s,e,t){const n=s.slice();return n[17]=e[t],n}function Xi(s){let e,t,n,r="Total Messages",i,a,l=s[3].totalMessages.toLocaleString()+"",c,u,d,m,h="Storage Used",g,p,v=An(s[3].totalSize)+"",S,C,b,A,E="Archives",T,I,w=s[3].archives.length+"",O,N,x,D,P,z="Rotation Period",U,W,j,B="Weekly",H,V="Monthly",q,Y="Every 6 Months",$,ee="Yearly",ae,ie,fe="How often to create a new archive file (like changing batteries)",ce,se,de,Ae,ne="Keep Last",ge,he,be,me,Ne,tt="archives",Ue,Ie,De="Older archives are automatically deleted to save space",Xe,st,J,pe,nt="ðŸ—‘ï¸ Clear All History",Ze,Fe;function Ct(ve,we){return ve[3].archives.length>0?Of:Nf}let jt=Ct(s),Ke=jt(s);return{c(){e=k("div"),t=k("div"),n=k("div"),n.textContent=r,i=L(),a=k("div"),c=X(l),u=L(),d=k("div"),m=k("div"),m.textContent=h,g=L(),p=k("div"),S=X(v),C=L(),b=k("div"),A=k("div"),A.textContent=E,T=L(),I=k("div"),O=X(w),N=L(),x=k("div"),D=k("label"),P=k("span"),P.textContent=z,U=L(),W=k("select"),j=k("option"),j.textContent=B,H=k("option"),H.textContent=V,q=k("option"),q.textContent=Y,$=k("option"),$.textContent=ee,ae=L(),ie=k("p"),ie.textContent=fe,ce=L(),se=k("div"),de=k("label"),Ae=k("span"),Ae.textContent=ne,ge=L(),he=k("div"),be=k("input"),me=L(),Ne=k("span"),Ne.textContent=tt,Ue=L(),Ie=k("p"),Ie.textContent=De,Xe=L(),Ke.c(),st=L(),J=k("div"),pe=k("button"),pe.textContent=nt,this.h()},l(ve){e=y(ve,"DIV",{class:!0});var we=R(e);t=y(we,"DIV",{class:!0});var Rt=R(t);n=y(Rt,"DIV",{class:!0,"data-svelte-h":!0}),Q(n)!=="svelte-akn32o"&&(n.textContent=r),i=F(Rt),a=y(Rt,"DIV",{class:!0});var xt=R(a);c=Z(xt,l),xt.forEach(_),Rt.forEach(_),u=F(we),d=y(we,"DIV",{class:!0});var He=R(d);m=y(He,"DIV",{class:!0,"data-svelte-h":!0}),Q(m)!=="svelte-5vlbe4"&&(m.textContent=h),g=F(He),p=y(He,"DIV",{class:!0});var Nt=R(p);S=Z(Nt,v),Nt.forEach(_),He.forEach(_),C=F(we),b=y(we,"DIV",{class:!0});var Ot=R(b);A=y(Ot,"DIV",{class:!0,"data-svelte-h":!0}),Q(A)!=="svelte-1e1df45"&&(A.textContent=E),T=F(Ot),I=y(Ot,"DIV",{class:!0});var It=R(I);O=Z(It,w),It.forEach(_),Ot.forEach(_),we.forEach(_),N=F(ve),x=y(ve,"DIV",{class:!0});var wt=R(x);D=y(wt,"LABEL",{class:!0});var Dt=R(D);P=y(Dt,"SPAN",{class:!0,"data-svelte-h":!0}),Q(P)!=="svelte-608xyy"&&(P.textContent=z),U=F(Dt),W=y(Dt,"SELECT",{class:!0});var Qe=R(W);j=y(Qe,"OPTION",{"data-svelte-h":!0}),Q(j)!=="svelte-crm6lv"&&(j.textContent=B),H=y(Qe,"OPTION",{"data-svelte-h":!0}),Q(H)!=="svelte-hva46z"&&(H.textContent=V),q=y(Qe,"OPTION",{"data-svelte-h":!0}),Q(q)!=="svelte-1s0lvql"&&(q.textContent=Y),$=y(Qe,"OPTION",{"data-svelte-h":!0}),Q($)!=="svelte-jp5v27"&&($.textContent=ee),Qe.forEach(_),Dt.forEach(_),ae=F(wt),ie=y(wt,"P",{class:!0,"data-svelte-h":!0}),Q(ie)!=="svelte-qu5pay"&&(ie.textContent=fe),wt.forEach(_),ce=F(ve),se=y(ve,"DIV",{class:!0});var Jt=R(se);de=y(Jt,"LABEL",{class:!0});var ze=R(de);Ae=y(ze,"SPAN",{class:!0,"data-svelte-h":!0}),Q(Ae)!=="svelte-1im50qe"&&(Ae.textContent=ne),ge=F(ze),he=y(ze,"DIV",{class:!0});var Gt=R(he);be=y(Gt,"INPUT",{type:!0,min:!0,max:!0,class:!0}),me=F(Gt),Ne=y(Gt,"SPAN",{class:!0,"data-svelte-h":!0}),Q(Ne)!=="svelte-nj3imy"&&(Ne.textContent=tt),Gt.forEach(_),ze.forEach(_),Ue=F(Jt),Ie=y(Jt,"P",{class:!0,"data-svelte-h":!0}),Q(Ie)!=="svelte-he359b"&&(Ie.textContent=De),Jt.forEach(_),Xe=F(ve),Ke.l(ve),st=F(ve),J=y(ve,"DIV",{class:!0});var ds=R(J);pe=y(ds,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(pe)!=="svelte-1u0bcm7"&&(pe.textContent=nt),ds.forEach(_),this.h()},h(){f(n,"class","stat-label svelte-qkrj18"),f(a,"class","stat-value svelte-qkrj18"),f(t,"class","stat svelte-qkrj18"),f(m,"class","stat-label svelte-qkrj18"),f(p,"class","stat-value svelte-qkrj18"),f(d,"class","stat svelte-qkrj18"),f(A,"class","stat-label svelte-qkrj18"),f(I,"class","stat-value svelte-qkrj18"),f(b,"class","stat svelte-qkrj18"),f(e,"class","stats-panel svelte-qkrj18"),f(P,"class","label svelte-qkrj18"),j.__value="week",Je(j,j.__value),H.__value="month",Je(H,H.__value),q.__value="half-year",Je(q,q.__value),$.__value="year",Je($,$.__value),f(W,"class","svelte-qkrj18"),s[1]===void 0&&Ea(()=>s[12].call(W)),f(D,"class","svelte-qkrj18"),f(ie,"class","hint svelte-qkrj18"),f(x,"class","setting-group svelte-qkrj18"),f(Ae,"class","label svelte-qkrj18"),f(be,"type","number"),f(be,"min","1"),f(be,"max","52"),f(be,"class","svelte-qkrj18"),f(Ne,"class","unit svelte-qkrj18"),f(he,"class","number-input-group svelte-qkrj18"),f(de,"class","svelte-qkrj18"),f(Ie,"class","hint svelte-qkrj18"),f(se,"class","setting-group svelte-qkrj18"),f(pe,"class","btn-danger svelte-qkrj18"),f(J,"class","actions svelte-qkrj18")},m(ve,we){G(ve,e,we),o(e,t),o(t,n),o(t,i),o(t,a),o(a,c),o(e,u),o(e,d),o(d,m),o(d,g),o(d,p),o(p,S),o(e,C),o(e,b),o(b,A),o(b,T),o(b,I),o(I,O),G(ve,N,we),G(ve,x,we),o(x,D),o(D,P),o(D,U),o(D,W),o(W,j),o(W,H),o(W,q),o(W,$),Ir(W,s[1],!0),o(x,ae),o(x,ie),G(ve,ce,we),G(ve,se,we),o(se,de),o(de,Ae),o(de,ge),o(de,he),o(he,be),Je(be,s[2]),o(he,me),o(he,Ne),o(se,Ue),o(se,Ie),G(ve,Xe,we),Ke.m(ve,we),G(ve,st,we),G(ve,J,we),o(J,pe),Ze||(Fe=[K(W,"change",s[12]),K(W,"change",s[5]),K(be,"input",s[13]),K(be,"change",s[6]),K(pe,"click",s[10])],Ze=!0)},p(ve,we){we&8&&l!==(l=ve[3].totalMessages.toLocaleString()+"")&&re(c,l),we&8&&v!==(v=An(ve[3].totalSize)+"")&&re(S,v),we&8&&w!==(w=ve[3].archives.length+"")&&re(O,w),we&2&&Ir(W,ve[1]),we&4&&Tl(be.value)!==ve[2]&&Je(be,ve[2]),jt===(jt=Ct(ve))&&Ke?Ke.p(ve,we):(Ke.d(1),Ke=jt(ve),Ke&&(Ke.c(),Ke.m(st.parentNode,st)))},d(ve){ve&&(_(e),_(N),_(x),_(ce),_(se),_(Xe),_(st),_(J)),Ke.d(ve),Ze=!1,Me(Fe)}}}function Nf(s){let e,t="<p>No archives yet. Messages will be saved as you chat.</p>";return{c(){e=k("div"),e.innerHTML=t,this.h()},l(n){e=y(n,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-kqcvlb"&&(e.innerHTML=t),this.h()},h(){f(e,"class","empty-state svelte-qkrj18")},m(n,r){G(n,e,r)},p:Pe,d(n){n&&_(e)}}}function Of(s){let e,t,n,r="Archive History",i,a,l="ðŸ“¦ Export All",c,u,d,m,h=We(s[3].archives),g=[];for(let p=0;p<h.length;p+=1)g[p]=Ki(Zi(s,h,p));return{c(){e=k("div"),t=k("div"),n=k("h4"),n.textContent=r,i=L(),a=k("button"),a.textContent=l,c=L(),u=k("div");for(let p=0;p<g.length;p+=1)g[p].c();this.h()},l(p){e=y(p,"DIV",{class:!0});var v=R(e);t=y(v,"DIV",{class:!0});var S=R(t);n=y(S,"H4",{class:!0,"data-svelte-h":!0}),Q(n)!=="svelte-1i91zrs"&&(n.textContent=r),i=F(S),a=y(S,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(a)!=="svelte-197zvis"&&(a.textContent=l),S.forEach(_),c=F(v),u=y(v,"DIV",{class:!0});var C=R(u);for(let b=0;b<g.length;b+=1)g[b].l(C);C.forEach(_),v.forEach(_),this.h()},h(){f(n,"class","svelte-qkrj18"),f(a,"class","btn-small svelte-qkrj18"),f(t,"class","section-header svelte-qkrj18"),f(u,"class","archive-list svelte-qkrj18"),f(e,"class","archives-section svelte-qkrj18")},m(p,v){G(p,e,v),o(e,t),o(t,n),o(t,i),o(t,a),o(e,c),o(e,u);for(let S=0;S<g.length;S+=1)g[S]&&g[S].m(u,null);d||(m=K(a,"click",s[9]),d=!0)},p(p,v){if(v&392){h=We(p[3].archives);let S;for(S=0;S<h.length;S+=1){const C=Zi(p,h,S);g[S]?g[S].p(C,v):(g[S]=Ki(C),g[S].c(),g[S].m(u,null))}for(;S<g.length;S+=1)g[S].d(1);g.length=h.length}},d(p){p&&_(e),Cn(g,p),d=!1,m()}}}function Ki(s){let e,t,n,r=lr(s[17].period)+"",i,a,l,c=An(s[17].size)+"",u,d,m=s[17].messageCount.toLocaleString()+"",h,g,p,v,S,C="ðŸ’¾",b,A,E="ðŸ—‘ï¸",T,I,w;function O(){return s[14](s[17])}function N(){return s[15](s[17])}return{c(){e=k("div"),t=k("div"),n=k("span"),i=X(r),a=L(),l=k("span"),u=X(c),d=X(" â€¢ "),h=X(m),g=X(" messages"),p=L(),v=k("div"),S=k("button"),S.textContent=C,b=L(),A=k("button"),A.textContent=E,T=L(),this.h()},l(x){e=y(x,"DIV",{class:!0});var D=R(e);t=y(D,"DIV",{class:!0});var P=R(t);n=y(P,"SPAN",{class:!0});var z=R(n);i=Z(z,r),z.forEach(_),a=F(P),l=y(P,"SPAN",{class:!0});var U=R(l);u=Z(U,c),d=Z(U," â€¢ "),h=Z(U,m),g=Z(U," messages"),U.forEach(_),P.forEach(_),p=F(D),v=y(D,"DIV",{class:!0});var W=R(v);S=y(W,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(S)!=="svelte-13e8aja"&&(S.textContent=C),b=F(W),A=y(W,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(A)!=="svelte-1br206h"&&(A.textContent=E),W.forEach(_),T=F(D),D.forEach(_),this.h()},h(){f(n,"class","archive-period svelte-qkrj18"),f(l,"class","archive-meta svelte-qkrj18"),f(t,"class","archive-info svelte-qkrj18"),f(S,"class","btn-icon svelte-qkrj18"),f(S,"title","Export"),f(A,"class","btn-icon danger svelte-qkrj18"),f(A,"title","Delete"),f(v,"class","archive-actions svelte-qkrj18"),f(e,"class","archive-item svelte-qkrj18")},m(x,D){G(x,e,D),o(e,t),o(t,n),o(n,i),o(t,a),o(t,l),o(l,u),o(l,d),o(l,h),o(l,g),o(e,p),o(e,v),o(v,S),o(v,b),o(v,A),o(e,T),I||(w=[K(S,"click",O),K(A,"click",N)],I=!0)},p(x,D){s=x,D&8&&r!==(r=lr(s[17].period)+"")&&re(i,r),D&8&&c!==(c=An(s[17].size)+"")&&re(u,c),D&8&&m!==(m=s[17].messageCount.toLocaleString()+"")&&re(h,m)},d(x){x&&_(e),I=!1,Me(w)}}}function Pf(s){let e,t,n='<h3 class="svelte-qkrj18">ðŸ’¾ Local Storage</h3> <p class="subtitle svelte-qkrj18">Your chat history is saved only on your device. The server stores nothing permanently.</p>',r,i,a,l,c,u,d="Save chat history locally",m,h,g="When enabled, messages are stored in your browser. You control your data.",p,v,S,C=s[0]&&Xi(s);return{c(){e=k("div"),t=k("div"),t.innerHTML=n,r=L(),i=k("div"),a=k("label"),l=k("input"),c=L(),u=k("span"),u.textContent=d,m=L(),h=k("p"),h.textContent=g,p=L(),C&&C.c(),this.h()},l(b){e=y(b,"DIV",{class:!0});var A=R(e);t=y(A,"DIV",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-s9o5r3"&&(t.innerHTML=n),r=F(A),i=y(A,"DIV",{class:!0});var E=R(i);a=y(E,"LABEL",{class:!0});var T=R(a);l=y(T,"INPUT",{type:!0,class:!0}),c=F(T),u=y(T,"SPAN",{class:!0,"data-svelte-h":!0}),Q(u)!=="svelte-1ssgcs1"&&(u.textContent=d),T.forEach(_),m=F(E),h=y(E,"P",{class:!0,"data-svelte-h":!0}),Q(h)!=="svelte-1hbmqvb"&&(h.textContent=g),E.forEach(_),p=F(A),C&&C.l(A),A.forEach(_),this.h()},h(){f(t,"class","header svelte-qkrj18"),f(l,"type","checkbox"),f(l,"class","svelte-qkrj18"),f(u,"class","toggle-label"),f(a,"class","toggle-setting svelte-qkrj18"),f(h,"class","hint svelte-qkrj18"),f(i,"class","setting-group svelte-qkrj18"),f(e,"class","storage-settings svelte-qkrj18")},m(b,A){G(b,e,A),o(e,t),o(e,r),o(e,i),o(i,a),o(a,l),l.checked=s[0],o(a,c),o(a,u),o(i,m),o(i,h),o(e,p),C&&C.m(e,null),v||(S=[K(l,"change",s[11]),K(l,"change",s[4])],v=!0)},p(b,[A]){A&1&&(l.checked=b[0]),b[0]?C?C.p(b,A):(C=Xi(b),C.c(),C.m(e,null)):C&&(C.d(1),C=null)},i:Pe,o:Pe,d(b){b&&_(e),C&&C.d(),v=!1,Me(S)}}}function An(s){if(s===0)return"0 B";const e=s/(1024*1024);return e>=.01?`${e.toFixed(2)} MB`:`${(s/1024).toFixed(2)} KB`}function lr(s){if(s.includes("-W")){const[e,t]=s.split("-W");return`Week ${t}, ${e}`}else if(s.includes("-H")){const[e,t]=s.split("-");return`${t==="H1"?"First":"Second"} Half ${e}`}else if(s.match(/^\d{4}-\d{2}$/)){const[e,t]=s.split("-");return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(t)-1]} ${e}`}else return`Year ${s}`}function Ff(s,e,t){let n=!1,r=Tt.getRotationPeriod(),i=Tt.getMaxArchives(),a={archives:[],totalSize:0,totalMessages:0};async function l(){t(0,n=!n),await Tt.setEnabled(n),n||confirm("Disable local storage? Your saved history will remain until you clear it manually.")||(t(0,n=!0),await Tt.setEnabled(!0)),await p()}async function c(){await Tt.setRotationPeriod(r),await p()}async function u(){await Tt.setMaxArchives(i),await p()}async function d(E){confirm(`Delete archive "${lr(E)}"?`)&&(await Tt.deleteArchive(E),await p())}async function m(E){await Tt.exportArchive(E)}async function h(){await Tt.exportArchives()}async function g(){confirm("Delete ALL saved chat history? This cannot be undone!")&&(await Tt.clearAllHistory(),await p())}async function p(){t(3,a=await Tt.getStats())}Es(async()=>{t(0,n=await Tt.isEnabled()),await p()});function v(){n=this.checked,t(0,n)}function S(){r=Sa(this),t(1,r)}function C(){i=Tl(this.value),t(2,i)}return[n,r,i,a,l,c,u,d,m,h,g,v,S,C,E=>m(E.period),E=>d(E.period)]}class Lf extends yt{constructor(e){super(),kt(this,e,Ff,Pf,bt,{})}}function Qi(s){let e,t,n,r,i="âš™ï¸ Settings",a,l,c="âœ•",u,d,m,h,g="ðŸŽ¤ Audio & Video",p,v,S,C='<span class="setting-label svelte-9y3hbf">Sound Effects</span> <span class="setting-description svelte-9y3hbf">Play sounds for messages and notifications</span>',b,A,E=s[1]?"ðŸ”Š":"ðŸ”‡",T,I,w,O,N='<span class="setting-label svelte-9y3hbf">Microphone</span> <span class="setting-description svelte-9y3hbf">Enable microphone for voice calls</span>',x,D,P=s[3]?"ðŸŽ¤":"ðŸ”‡",z,U,W,j,B='<span class="setting-label svelte-9y3hbf">Camera</span> <span class="setting-description svelte-9y3hbf">Enable camera for video calls</span>',H,V,q=s[4]?"ðŸ“¹":"ðŸ“·",Y,$,ee,ae,ie="ðŸ”” Notifications",fe,ce,se,de='<span class="setting-label svelte-9y3hbf">Desktop Notifications</span> <span class="setting-description svelte-9y3hbf">Get notified when you receive new messages</span>',Ae,ne,ge=s[2]?"âœ… Enabled":"ðŸ”” Enable",he,be,me,Ne,tt="ðŸŽ¨ Appearance",Ue,Ie,De,Xe='<span class="setting-label svelte-9y3hbf">Theme</span> <span class="setting-description svelte-9y3hbf">Switch between light and dark mode</span>',st,J,pe=s[5]==="dark"?"ðŸŒ™":"â˜€ï¸",nt,Ze,Fe,Ct,jt="ðŸ–¥ï¸ Server Management",Ke,ve,we,Rt='<span class="setting-label svelte-9y3hbf">Clear All Server Messages</span> <span class="setting-description svelte-9y3hbf">Delete all messages from the server for all users (cannot be undone)</span>',xt,He,Nt="ðŸ—‘ï¸ Clear Server",Ot,It,wt,Dt,Qe,Jt='<h3 class="svelte-9y3hbf">â„¹ï¸ About</h3> <div class="about-info svelte-9y3hbf"><p class="svelte-9y3hbf"><strong class="svelte-9y3hbf">Wabi Chat</strong></p> <p class="svelte-9y3hbf">Privacy-first ephemeral chat. No tracking. No data collection.</p> <p class="svelte-9y3hbf">Server stores nothing permanently. You control your data.</p> <p class="version svelte-9y3hbf">Version 1.0.0</p></div>',ze,Gt,ds;return wt=new Lf({}),{c(){e=k("div"),t=k("div"),n=k("div"),r=k("h2"),r.textContent=i,a=L(),l=k("button"),l.textContent=c,u=L(),d=k("div"),m=k("div"),h=k("h3"),h.textContent=g,p=L(),v=k("div"),S=k("div"),S.innerHTML=C,b=L(),A=k("button"),T=X(E),I=L(),w=k("div"),O=k("div"),O.innerHTML=N,x=L(),D=k("button"),z=X(P),U=L(),W=k("div"),j=k("div"),j.innerHTML=B,H=L(),V=k("button"),Y=X(q),$=L(),ee=k("div"),ae=k("h3"),ae.textContent=ie,fe=L(),ce=k("div"),se=k("div"),se.innerHTML=de,Ae=L(),ne=k("button"),he=X(ge),be=L(),me=k("div"),Ne=k("h3"),Ne.textContent=tt,Ue=L(),Ie=k("div"),De=k("div"),De.innerHTML=Xe,st=L(),J=k("button"),nt=X(pe),Ze=L(),Fe=k("div"),Ct=k("h3"),Ct.textContent=jt,Ke=L(),ve=k("div"),we=k("div"),we.innerHTML=Rt,xt=L(),He=k("button"),He.textContent=Nt,Ot=L(),It=k("div"),gt(wt.$$.fragment),Dt=L(),Qe=k("div"),Qe.innerHTML=Jt,this.h()},l(ye){e=y(ye,"DIV",{class:!0});var je=R(e);t=y(je,"DIV",{class:!0});var Is=R(t);n=y(Is,"DIV",{class:!0});var hs=R(n);r=y(hs,"H2",{class:!0,"data-svelte-h":!0}),Q(r)!=="svelte-15bbpfh"&&(r.textContent=i),a=F(hs),l=y(hs,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(l)!=="svelte-3o141q"&&(l.textContent=c),hs.forEach(_),u=F(Is),d=y(Is,"DIV",{class:!0});var at=R(d);m=y(at,"DIV",{class:!0});var Mt=R(m);h=y(Mt,"H3",{class:!0,"data-svelte-h":!0}),Q(h)!=="svelte-1tdb4hv"&&(h.textContent=g),p=F(Mt),v=y(Mt,"DIV",{class:!0});var ps=R(v);S=y(ps,"DIV",{class:!0,"data-svelte-h":!0}),Q(S)!=="svelte-5e193f"&&(S.innerHTML=C),b=F(ps),A=y(ps,"BUTTON",{class:!0});var ln=R(A);T=Z(ln,E),ln.forEach(_),ps.forEach(_),I=F(Mt),w=y(Mt,"DIV",{class:!0});var ut=R(w);O=y(ut,"DIV",{class:!0,"data-svelte-h":!0}),Q(O)!=="svelte-ql0oob"&&(O.innerHTML=N),x=F(ut),D=y(ut,"BUTTON",{class:!0});var Wt=R(D);z=Z(Wt,P),Wt.forEach(_),ut.forEach(_),U=F(Mt),W=y(Mt,"DIV",{class:!0});var gs=R(W);j=y(gs,"DIV",{class:!0,"data-svelte-h":!0}),Q(j)!=="svelte-fu2kxq"&&(j.innerHTML=B),H=F(gs),V=y(gs,"BUTTON",{class:!0});var Ms=R(V);Y=Z(Ms,q),Ms.forEach(_),gs.forEach(_),Mt.forEach(_),$=F(at),ee=y(at,"DIV",{class:!0});var ls=R(ee);ae=y(ls,"H3",{class:!0,"data-svelte-h":!0}),Q(ae)!=="svelte-yb4801"&&(ae.textContent=ie),fe=F(ls),ce=y(ls,"DIV",{class:!0});var ms=R(ce);se=y(ms,"DIV",{class:!0,"data-svelte-h":!0}),Q(se)!=="svelte-11j8eba"&&(se.innerHTML=de),Ae=F(ms),ne=y(ms,"BUTTON",{class:!0});var Pt=R(ne);he=Z(Pt,ge),Pt.forEach(_),ms.forEach(_),ls.forEach(_),be=F(at),me=y(at,"DIV",{class:!0});var vs=R(me);Ne=y(vs,"H3",{class:!0,"data-svelte-h":!0}),Q(Ne)!=="svelte-bdq4j0"&&(Ne.textContent=tt),Ue=F(vs),Ie=y(vs,"DIV",{class:!0});var _s=R(Ie);De=y(_s,"DIV",{class:!0,"data-svelte-h":!0}),Q(De)!=="svelte-1expsbb"&&(De.innerHTML=Xe),st=F(_s),J=y(_s,"BUTTON",{class:!0});var Bs=R(J);nt=Z(Bs,pe),Bs.forEach(_),_s.forEach(_),vs.forEach(_),Ze=F(at),Fe=y(at,"DIV",{class:!0});var bs=R(Fe);Ct=y(bs,"H3",{class:!0,"data-svelte-h":!0}),Q(Ct)!=="svelte-13bxj89"&&(Ct.textContent=jt),Ke=F(bs),ve=y(bs,"DIV",{class:!0});var Ds=R(ve);we=y(Ds,"DIV",{class:!0,"data-svelte-h":!0}),Q(we)!=="svelte-1kywvm7"&&(we.innerHTML=Rt),xt=F(Ds),He=y(Ds,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(He)!=="svelte-uzfcg3"&&(He.textContent=Nt),Ds.forEach(_),bs.forEach(_),Ot=F(at),It=y(at,"DIV",{class:!0});var ue=R(It);pt(wt.$$.fragment,ue),ue.forEach(_),Dt=F(at),Qe=y(at,"DIV",{class:!0,"data-svelte-h":!0}),Q(Qe)!=="svelte-137zy12"&&(Qe.innerHTML=Jt),at.forEach(_),Is.forEach(_),je.forEach(_),this.h()},h(){f(r,"class","svelte-9y3hbf"),f(l,"class","close-btn svelte-9y3hbf"),f(n,"class","modal-header svelte-9y3hbf"),f(h,"class","svelte-9y3hbf"),f(S,"class","setting-info svelte-9y3hbf"),f(A,"class","toggle-btn svelte-9y3hbf"),_e(A,"active",s[1]),f(v,"class","setting-item svelte-9y3hbf"),f(O,"class","setting-info svelte-9y3hbf"),f(D,"class","toggle-btn svelte-9y3hbf"),_e(D,"active",s[3]),f(w,"class","setting-item svelte-9y3hbf"),f(j,"class","setting-info svelte-9y3hbf"),f(V,"class","toggle-btn svelte-9y3hbf"),_e(V,"active",s[4]),f(W,"class","setting-item svelte-9y3hbf"),f(m,"class","settings-section svelte-9y3hbf"),f(ae,"class","svelte-9y3hbf"),f(se,"class","setting-info svelte-9y3hbf"),f(ne,"class","action-btn svelte-9y3hbf"),_e(ne,"active",s[2]),f(ce,"class","setting-item svelte-9y3hbf"),f(ee,"class","settings-section svelte-9y3hbf"),f(Ne,"class","svelte-9y3hbf"),f(De,"class","setting-info svelte-9y3hbf"),f(J,"class","toggle-btn svelte-9y3hbf"),_e(J,"active",s[5]==="light"),f(Ie,"class","setting-item svelte-9y3hbf"),f(me,"class","settings-section svelte-9y3hbf"),f(Ct,"class","svelte-9y3hbf"),f(we,"class","setting-info svelte-9y3hbf"),f(He,"class","action-btn danger svelte-9y3hbf"),f(ve,"class","setting-item svelte-9y3hbf"),f(Fe,"class","settings-section svelte-9y3hbf"),f(It,"class","settings-section svelte-9y3hbf"),f(Qe,"class","settings-section svelte-9y3hbf"),f(d,"class","settings-sections svelte-9y3hbf"),f(t,"class","modal-content svelte-9y3hbf"),f(e,"class","modal-overlay svelte-9y3hbf")},m(ye,je){G(ye,e,je),o(e,t),o(t,n),o(n,r),o(n,a),o(n,l),o(t,u),o(t,d),o(d,m),o(m,h),o(m,p),o(m,v),o(v,S),o(v,b),o(v,A),o(A,T),o(m,I),o(m,w),o(w,O),o(w,x),o(w,D),o(D,z),o(m,U),o(m,W),o(W,j),o(W,H),o(W,V),o(V,Y),o(d,$),o(d,ee),o(ee,ae),o(ee,fe),o(ee,ce),o(ce,se),o(ce,Ae),o(ce,ne),o(ne,he),o(d,be),o(d,me),o(me,Ne),o(me,Ue),o(me,Ie),o(Ie,De),o(Ie,st),o(Ie,J),o(J,nt),o(d,Ze),o(d,Fe),o(Fe,Ct),o(Fe,Ke),o(Fe,ve),o(ve,we),o(ve,xt),o(ve,He),o(d,Ot),o(d,It),ht(wt,It,null),o(d,Dt),o(d,Qe),ze=!0,Gt||(ds=[K(l,"click",s[12]),K(A,"click",s[6]),K(D,"click",s[7]),K(V,"click",s[8]),K(ne,"click",s[10]),K(J,"click",s[9]),K(He,"click",s[11]),K(t,"click",Ss(s[13])),K(e,"click",s[12])],Gt=!0)},p(ye,je){(!ze||je&2)&&E!==(E=ye[1]?"ðŸ”Š":"ðŸ”‡")&&re(T,E),(!ze||je&2)&&_e(A,"active",ye[1]),(!ze||je&8)&&P!==(P=ye[3]?"ðŸŽ¤":"ðŸ”‡")&&re(z,P),(!ze||je&8)&&_e(D,"active",ye[3]),(!ze||je&16)&&q!==(q=ye[4]?"ðŸ“¹":"ðŸ“·")&&re(Y,q),(!ze||je&16)&&_e(V,"active",ye[4]),(!ze||je&4)&&ge!==(ge=ye[2]?"âœ… Enabled":"ðŸ”” Enable")&&re(he,ge),(!ze||je&4)&&_e(ne,"active",ye[2]),(!ze||je&32)&&pe!==(pe=ye[5]==="dark"?"ðŸŒ™":"â˜€ï¸")&&re(nt,pe),(!ze||je&32)&&_e(J,"active",ye[5]==="light")},i(ye){ze||(Oe(wt.$$.fragment,ye),ze=!0)},o(ye){Ve(wt.$$.fragment,ye),ze=!1},d(ye){ye&&_(e),dt(wt),Gt=!1,Me(ds)}}}function xf(s){let e,t,n=s[0]&&Qi(s);return{c(){n&&n.c(),e=xe()},l(r){n&&n.l(r),e=xe()},m(r,i){n&&n.m(r,i),G(r,e,i),t=!0},p(r,[i]){r[0]?n?(n.p(r,i),i&1&&Oe(n,1)):(n=Qi(r),n.c(),Oe(n,1),n.m(e.parentNode,e)):n&&(en(),Ve(n,1,1,()=>{n=null}),tn())},i(r){t||(Oe(n),t=!0)},o(r){Ve(n),t=!1},d(r){r&&_(e),n&&n.d(r)}}}function Mf(s,e,t){Te(s,os,C=>t(14,C)),Te(s,rs,C=>t(15,C)),Te(s,Ut,C=>t(16,C));let{isOpen:n=!1}=e,r=!0,i=!0,a=!0,l=!0,c="dark";Es(()=>{t(1,r=localStorage.getItem("soundEnabled")!=="false"),t(2,i=localStorage.getItem("notificationsEnabled")!=="false"),t(3,a=localStorage.getItem("micEnabled")!=="false"),t(4,l=localStorage.getItem("cameraEnabled")!=="false"),t(5,c=localStorage.getItem("theme")||"dark")});function u(){t(1,r=!r),localStorage.setItem("soundEnabled",r.toString())}function d(){t(3,a=!a),localStorage.setItem("micEnabled",a.toString())}function m(){t(4,l=!l),localStorage.setItem("cameraEnabled",l.toString())}function h(){t(5,c=c==="dark"?"light":"dark"),localStorage.setItem("theme",c),document.documentElement.setAttribute("data-theme",c)}async function g(){if(!("Notification"in window)){alert("This browser does not support notifications");return}if(Notification.permission==="granted"){alert("Notifications are already enabled!");return}await Notification.requestPermission()==="granted"?(t(2,i=!0),localStorage.setItem("notificationsEnabled","true"),new Notification("Community Chat",{body:"Notifications enabled! You'll be notified of new messages.",icon:"/icon-192.png"})):(t(2,i=!1),localStorage.setItem("notificationsEnabled","false"))}async function p(){if(confirm("Are you sure you want to delete ALL messages from the server? This will clear messages for all users and cannot be undone!"))try{const C=window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin,A=await(await fetch(`${C}/api/clear-messages`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();A.success?(Ut.set({general:[]}),alert("All server messages have been deleted successfully!")):alert("Failed to clear server messages: "+(A.error||"Unknown error"))}catch(C){console.error("Error clearing server messages:",C),alert("Failed to clear server messages. Check console for details.")}}function v(){t(0,n=!1)}function S(C){Os.call(this,s,C)}return s.$$set=C=>{"isOpen"in C&&t(0,n=C.isOpen)},[n,r,i,a,l,c,u,d,m,h,g,p,v,S]}class Bf extends yt{constructor(e){super(),kt(this,e,Mf,xf,bt,{isOpen:0})}}function Ji(s,e,t){const n=s.slice();return n[22]=e[t],n}function el(s){let e,t,n,r,i="Create",a,l;return{c(){e=k("div"),t=k("input"),n=L(),r=k("button"),r.textContent=i,this.h()},l(c){e=y(c,"DIV",{class:!0});var u=R(e);t=y(u,"INPUT",{type:!0,placeholder:!0,class:!0}),n=F(u),r=y(u,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(r)!=="svelte-1ih09o9"&&(r.textContent=i),u.forEach(_),this.h()},h(){f(t,"type","text"),f(t,"placeholder","channel-name"),t.autofocus=!0,f(t,"class","svelte-zlybbr"),f(r,"class","svelte-zlybbr"),f(e,"class","create-channel svelte-zlybbr")},m(c,u){G(c,e,u),o(e,t),Je(t,s[1]),o(e,n),o(e,r),t.focus(),a||(l=[K(t,"input",s[14]),K(t,"keydown",s[15]),K(r,"click",s[10])],a=!0)},p(c,u){u&2&&t.value!==c[1]&&Je(t,c[1])},d(c){c&&_(e),a=!1,Me(l)}}}function tl(s){let e,t="Ã—",n,r;function i(){return s[17](s[22])}return{c(){e=k("button"),e.textContent=t,this.h()},l(a){e=y(a,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-12rgdhl"&&(e.textContent=t),this.h()},h(){f(e,"class","delete-btn svelte-zlybbr")},m(a,l){G(a,e,l),n||(r=K(e,"click",Ss(i)),n=!0)},p(a,l){s=a},d(a){a&&_(e),n=!1,r()}}}function sl(s,e){let t,n,r,i="#",a,l=e[22].name+"",c,u,d,m,h;function g(){return e[16](e[22])}let p=e[22].id!=="general"&&tl(e);return{key:s,first:null,c(){t=k("div"),n=k("button"),r=k("span"),r.textContent=i,a=L(),c=X(l),u=L(),p&&p.c(),d=L(),this.h()},l(v){t=y(v,"DIV",{class:!0});var S=R(t);n=y(S,"BUTTON",{class:!0});var C=R(n);r=y(C,"SPAN",{class:!0,"data-svelte-h":!0}),Q(r)!=="svelte-16vlh54"&&(r.textContent=i),a=F(C),c=Z(C,l),C.forEach(_),u=F(S),p&&p.l(S),d=F(S),S.forEach(_),this.h()},h(){f(r,"class","hash svelte-zlybbr"),f(n,"class","channel-btn svelte-zlybbr"),f(t,"class","channel-item svelte-zlybbr"),_e(t,"active",e[7]===e[22].id),this.first=t},m(v,S){G(v,t,S),o(t,n),o(n,r),o(n,a),o(n,c),o(t,u),p&&p.m(t,null),o(t,d),m||(h=K(n,"click",g),m=!0)},p(v,S){e=v,S&64&&l!==(l=e[22].name+"")&&re(c,l),e[22].id!=="general"?p?p.p(e,S):(p=tl(e),p.c(),p.m(t,d)):p&&(p.d(1),p=null),S&192&&_e(t,"active",e[7]===e[22].id)},d(v){v&&_(t),p&&p.d(),m=!1,h()}}}function nl(s){let e,t,n,r,i,a,l,c,u=s[8].username+"",d,m,h,g,p=s[8].id.slice(0,4)+"",v,S,C,b,A=s[4]?"ðŸ”‡":"ðŸŽ¤",E,T,I,w,O=s[5]?"ðŸ”‡":"ðŸŽ§",N,x,D,P,z="âš™ï¸",U,W;function j(V,q){return V[8].profilePicture?zf:Uf}let B=j(s),H=B(s);return{c(){e=k("div"),t=k("div"),n=k("div"),H.c(),r=L(),i=k("div"),a=L(),l=k("div"),c=k("div"),d=X(u),m=L(),h=k("div"),g=X("#"),v=X(p),S=L(),C=k("div"),b=k("button"),E=X(A),I=L(),w=k("button"),N=X(O),D=L(),P=k("button"),P.textContent=z,this.h()},l(V){e=y(V,"DIV",{class:!0});var q=R(e);t=y(q,"DIV",{class:!0});var Y=R(t);n=y(Y,"DIV",{class:!0});var $=R(n);H.l($),r=F($),i=y($,"DIV",{class:!0}),R(i).forEach(_),$.forEach(_),a=F(Y),l=y(Y,"DIV",{class:!0});var ee=R(l);c=y(ee,"DIV",{class:!0});var ae=R(c);d=Z(ae,u),ae.forEach(_),m=F(ee),h=y(ee,"DIV",{class:!0});var ie=R(h);g=Z(ie,"#"),v=Z(ie,p),ie.forEach(_),ee.forEach(_),Y.forEach(_),S=F(q),C=y(q,"DIV",{class:!0});var fe=R(C);b=y(fe,"BUTTON",{class:!0,title:!0});var ce=R(b);E=Z(ce,A),ce.forEach(_),I=F(fe),w=y(fe,"BUTTON",{class:!0,title:!0});var se=R(w);N=Z(se,O),se.forEach(_),D=F(fe),P=y(fe,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(P)!=="svelte-18txcln"&&(P.textContent=z),fe.forEach(_),q.forEach(_),this.h()},h(){f(i,"class","status-indicator svelte-zlybbr"),_e(i,"online",s[8].status==="active"),_e(i,"away",s[8].status==="away"),_e(i,"busy",s[8].status==="busy"),f(n,"class","avatar-container svelte-zlybbr"),f(c,"class","username svelte-zlybbr"),f(h,"class","user-tag svelte-zlybbr"),f(l,"class","user-details svelte-zlybbr"),f(t,"class","profile-info svelte-zlybbr"),f(b,"class","control-btn svelte-zlybbr"),f(b,"title",T=s[4]?"Unmute":"Mute"),_e(b,"active",s[4]),f(w,"class","control-btn svelte-zlybbr"),f(w,"title",x=s[5]?"Undeafen":"Deafen"),_e(w,"active",s[5]),f(P,"class","control-btn svelte-zlybbr"),f(P,"title","User Settings"),f(C,"class","profile-controls svelte-zlybbr"),f(e,"class","profile-card svelte-zlybbr")},m(V,q){G(V,e,q),o(e,t),o(t,n),H.m(n,null),o(n,r),o(n,i),o(t,a),o(t,l),o(l,c),o(c,d),o(l,m),o(l,h),o(h,g),o(h,v),o(e,S),o(e,C),o(C,b),o(b,E),o(C,I),o(C,w),o(w,N),o(C,D),o(C,P),U||(W=[K(b,"click",s[18]),K(w,"click",s[19]),K(P,"click",s[20])],U=!0)},p(V,q){B===(B=j(V))&&H?H.p(V,q):(H.d(1),H=B(V),H&&(H.c(),H.m(n,r))),q&256&&_e(i,"online",V[8].status==="active"),q&256&&_e(i,"away",V[8].status==="away"),q&256&&_e(i,"busy",V[8].status==="busy"),q&256&&u!==(u=V[8].username+"")&&re(d,u),q&256&&p!==(p=V[8].id.slice(0,4)+"")&&re(v,p),q&16&&A!==(A=V[4]?"ðŸ”‡":"ðŸŽ¤")&&re(E,A),q&16&&T!==(T=V[4]?"Unmute":"Mute")&&f(b,"title",T),q&16&&_e(b,"active",V[4]),q&32&&O!==(O=V[5]?"ðŸ”‡":"ðŸŽ§")&&re(N,O),q&32&&x!==(x=V[5]?"Undeafen":"Deafen")&&f(w,"title",x),q&32&&_e(w,"active",V[5])},d(V){V&&_(e),H.d(),U=!1,Me(W)}}}function Uf(s){let e,t=s[8].username.charAt(0).toUpperCase()+"",n;return{c(){e=k("div"),n=X(t),this.h()},l(r){e=y(r,"DIV",{class:!0,style:!0});var i=R(e);n=Z(i,t),i.forEach(_),this.h()},h(){f(e,"class","avatar-placeholder svelte-zlybbr"),Le(e,"background-color",s[8].color)},m(r,i){G(r,e,i),o(e,n)},p(r,i){i&256&&t!==(t=r[8].username.charAt(0).toUpperCase()+"")&&re(n,t),i&256&&Le(e,"background-color",r[8].color)},d(r){r&&_(e)}}}function zf(s){let e,t,n;return{c(){e=k("img"),this.h()},l(r){e=y(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Be(e.src,t=s[8].profilePicture)||f(e,"src",t),f(e,"alt",n=s[8].username),f(e,"class","avatar svelte-zlybbr")},m(r,i){G(r,e,i)},p(r,i){i&256&&!Be(e.src,t=r[8].profilePicture)&&f(e,"src",t),i&256&&n!==(n=r[8].username)&&f(e,"alt",n)},d(r){r&&_(e)}}}function Vf(s){let e,t,n='<div class="logo svelte-zlybbr"><img src="/wabi-logo.png" alt="Wabi" class="logo-img svelte-zlybbr"/></div>',r,i,a,l="Text Channels",c,u,d,m="ðŸ“º",h,g,p="+",v,S,C,b=[],A=new Map,E,T,I,w,O,N,x,D=s[2]&&el(s),P=We(s[6]);const z=B=>B[22].id;for(let B=0;B<P.length;B+=1){let H=Ji(s,P,B),V=z(H);A.set(V,b[B]=sl(V,H))}let U=s[8]&&nl(s);function W(B){s[21](B)}let j={};return s[3]!==void 0&&(j.isOpen=s[3]),I=new Bf({props:j}),ct.push(()=>Xt(I,"isOpen",W)),{c(){e=k("div"),t=k("div"),t.innerHTML=n,r=L(),i=k("div"),a=k("h3"),a.textContent=l,c=L(),u=k("div"),d=k("button"),d.textContent=m,h=L(),g=k("button"),g.textContent=p,v=L(),D&&D.c(),S=L(),C=k("div");for(let B=0;B<b.length;B+=1)b[B].c();E=L(),U&&U.c(),T=L(),gt(I.$$.fragment),this.h()},l(B){e=y(B,"DIV",{class:!0});var H=R(e);t=y(H,"DIV",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-18mdtge"&&(t.innerHTML=n),r=F(H),i=y(H,"DIV",{class:!0});var V=R(i);a=y(V,"H3",{class:!0,"data-svelte-h":!0}),Q(a)!=="svelte-cahn79"&&(a.textContent=l),c=F(V),u=y(V,"DIV",{class:!0});var q=R(u);d=y(q,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(d)!=="svelte-5el016"&&(d.textContent=m),h=F(q),g=y(q,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(g)!=="svelte-ou792o"&&(g.textContent=p),q.forEach(_),V.forEach(_),v=F(H),D&&D.l(H),S=F(H),C=y(H,"DIV",{class:!0});var Y=R(C);for(let $=0;$<b.length;$+=1)b[$].l(Y);Y.forEach(_),E=F(H),U&&U.l(H),H.forEach(_),T=F(B),pt(I.$$.fragment,B),this.h()},h(){f(t,"class","top-section svelte-zlybbr"),f(a,"class","svelte-zlybbr"),f(d,"class","screen-share-icon-btn svelte-zlybbr"),f(d,"title","Screen Share"),_e(d,"active",s[0]==="screen"),f(g,"class","add-btn svelte-zlybbr"),f(g,"title","Create channel"),f(u,"class","header-buttons svelte-zlybbr"),f(i,"class","sidebar-header svelte-zlybbr"),f(C,"class","channel-list svelte-zlybbr"),f(e,"class","channel-sidebar svelte-zlybbr")},m(B,H){G(B,e,H),o(e,t),o(e,r),o(e,i),o(i,a),o(i,c),o(i,u),o(u,d),o(u,h),o(u,g),o(e,v),D&&D.m(e,null),o(e,S),o(e,C);for(let V=0;V<b.length;V+=1)b[V]&&b[V].m(C,null);o(e,E),U&&U.m(e,null),G(B,T,H),ht(I,B,H),O=!0,N||(x=[K(d,"click",s[12]),K(g,"click",s[13])],N=!0)},p(B,[H]){(!O||H&1)&&_e(d,"active",B[0]==="screen"),B[2]?D?D.p(B,H):(D=el(B),D.c(),D.m(e,S)):D&&(D.d(1),D=null),H&2752&&(P=We(B[6]),b=Ts(b,H,z,1,B,P,A,C,As,sl,null,Ji)),B[8]?U?U.p(B,H):(U=nl(B),U.c(),U.m(e,null)):U&&(U.d(1),U=null);const V={};!w&&H&8&&(w=!0,V.isOpen=B[3],Zt(()=>w=!1)),I.$set(V)},i(B){O||(Oe(I.$$.fragment,B),O=!0)},o(B){Ve(I.$$.fragment,B),O=!1},d(B){B&&(_(e),_(T)),D&&D.d();for(let H=0;H<b.length;H+=1)b[H].d();U&&U.d(),dt(I,B),N=!1,Me(x)}}}function qf(s,e,t){let n,r,i;Te(s,Ks,N=>t(6,n=N)),Te(s,xs,N=>t(7,r=N)),Te(s,os,N=>t(8,i=N));let{activeView:a="chat"}=e,l="",c=!1,u=!1,d=!1,m=!1;function h(N){Uc(N)}function g(){l.trim()&&(zc(l.trim()),t(1,l=""),t(2,c=!1))}function p(N){confirm(`Delete channel #${N}?`)&&Vc(N)}const v=()=>t(0,a="screen"),S=()=>t(2,c=!c);function C(){l=this.value,t(1,l)}const b=N=>N.key==="Enter"&&g(),A=N=>h(N.id),E=N=>p(N.id),T=()=>t(4,d=!d),I=()=>t(5,m=!m),w=()=>t(3,u=!0);function O(N){u=N,t(3,u)}return s.$$set=N=>{"activeView"in N&&t(0,a=N.activeView)},s.$$.update=()=>{s.$$.dirty&1&&a==="chat"&&jc()},[a,l,c,u,d,m,n,r,i,h,g,p,v,S,C,b,A,E,T,I,w,O]}class Hf extends yt{constructor(e){super(),kt(this,e,qf,Vf,bt,{activeView:0})}}const Er=lt([]),Tn=lt(null),On=lt(!1),nn=lt(!1),rn=lt(!1),Ps=new Map;let et=null;const pa={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]};async function rl(s,e,t=!1){try{return et=await navigator.mediaDevices.getUserMedia({video:t,audio:!0}),On.set(!0),nn.set(!1),rn.set(!t),s.emit("call-initiate",{targetUserId:e,isVideoCall:t}),et}catch(n){throw console.error("Error starting call:",n),n}}async function jf(s,e,t=!1){try{return et=await navigator.mediaDevices.getUserMedia({video:t,audio:!0}),On.set(!0),nn.set(!1),rn.set(!t),s.emit("call-answer",{callerId:e,isVideoCall:t}),Tn.set(null),et}catch(n){throw console.error("Error answering call:",n),n}}function Gf(s,e){s.emit("call-reject",{callerId:e}),Tn.set(null)}function $n(s){et&&(et.getTracks().forEach(e=>e.stop()),et=null),On.set(!1),nn.set(!1),rn.set(!1),s.emit("call-end"),Ps.forEach(e=>e.close()),Ps.clear(),Er.set([])}function Wf(){if(et){const s=et.getAudioTracks()[0];s&&(s.enabled=!s.enabled,nn.set(!s.enabled))}}function $f(){if(et){const s=et.getVideoTracks()[0];s&&(s.enabled=!s.enabled,rn.set(!s.enabled))}}async function Yf(s,e){const t=new RTCPeerConnection(pa);Ps.set(e,t),et&&et.getTracks().forEach(r=>{t.addTrack(r,et)}),t.onicecandidate=r=>{r.candidate&&s.emit("call-ice-candidate",{candidate:r.candidate,targetId:e})},t.ontrack=r=>{ga(e,r.streams[0])};const n=await t.createOffer();await t.setLocalDescription(n),s.emit("call-offer",{offer:n,targetId:e})}async function Zf(s,e,t,n){const r=new RTCPeerConnection(pa);Ps.set(e,r),et&&et.getTracks().forEach(a=>{r.addTrack(a,et)}),r.ontrack=a=>{ga(e,a.streams[0])},r.onicecandidate=a=>{a.candidate&&s.emit("call-ice-candidate",{candidate:a.candidate,targetId:e})},await r.setRemoteDescription(n);const i=await r.createAnswer();await r.setLocalDescription(i),s.emit("call-answer-sdp",{answer:i,targetId:e})}async function Xf(s,e){const t=Ps.get(s);t&&await t.setRemoteDescription(e)}async function Kf(s,e){const t=Ps.get(s);t&&await t.addIceCandidate(e)}function ga(s,e){Er.update(t=>{const n=t.findIndex(i=>i.userId===s),r={userId:s,username:"",stream:e,isVideoEnabled:e.getVideoTracks().length>0,isAudioEnabled:e.getAudioTracks().length>0};return n>=0?(t[n]=r,t):[...t,r]})}function Qf(){return et}function il(s,e,t){const n=s.slice();return n[14]=e[t],n}function Jf(s){let e,t=s[14].username.charAt(0).toUpperCase()+"",n;return{c(){e=k("div"),n=X(t),this.h()},l(r){e=y(r,"DIV",{class:!0,style:!0});var i=R(e);n=Z(i,t),i.forEach(_),this.h()},h(){f(e,"class","user-avatar-placeholder svelte-15lp6hy"),Le(e,"background-color",s[14].color)},m(r,i){G(r,e,i),o(e,n)},p(r,i){i&16&&t!==(t=r[14].username.charAt(0).toUpperCase()+"")&&re(n,t),i&16&&Le(e,"background-color",r[14].color)},d(r){r&&_(e)}}}function ed(s){let e,t,n;return{c(){e=k("img"),this.h()},l(r){e=y(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Be(e.src,t=s[14].profilePicture)||f(e,"src",t),f(e,"alt",n=s[14].username),f(e,"class","user-avatar svelte-15lp6hy")},m(r,i){G(r,e,i)},p(r,i){i&16&&!Be(e.src,t=r[14].profilePicture)&&f(e,"src",t),i&16&&n!==(n=r[14].username)&&f(e,"alt",n)},d(r){r&&_(e)}}}function ll(s){let e,t="(you)";return{c(){e=k("span"),e.textContent=t,this.h()},l(n){e=y(n,"SPAN",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-2b4nly"&&(e.textContent=t),this.h()},h(){f(e,"class","you-badge svelte-15lp6hy")},m(n,r){G(n,e,r)},d(n){n&&_(e)}}}function al(s){let e,t,n="ðŸ“ž",r,i,a="ðŸ“¹",l,c;function u(...m){return s[9](s[14],...m)}function d(...m){return s[10](s[14],...m)}return{c(){e=k("div"),t=k("button"),t.textContent=n,r=L(),i=k("button"),i.textContent=a,this.h()},l(m){e=y(m,"DIV",{class:!0});var h=R(e);t=y(h,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(t)!=="svelte-jmuv4z"&&(t.textContent=n),r=F(h),i=y(h,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(i)!=="svelte-1whn4df"&&(i.textContent=a),h.forEach(_),this.h()},h(){f(t,"class","call-btn voice-call svelte-15lp6hy"),f(t,"title","Voice call"),f(i,"class","call-btn video-call svelte-15lp6hy"),f(i,"title","Video call"),f(e,"class","call-buttons svelte-15lp6hy")},m(m,h){G(m,e,h),o(e,t),o(e,r),o(e,i),l||(c=[K(t,"click",u),K(i,"click",d)],l=!0)},p(m,h){s=m},d(m){m&&_(e),l=!1,Me(c)}}}function ol(s,e){var D,P;let t,n,r,i,a,l=e[14].username+"",c,u,d,m,h,g,p,v=e[14].status+"",S,C,b,A,E;function T(z,U){return z[14].profilePicture?ed:Jf}let I=T(e),w=I(e),O=e[14].id===((D=e[3])==null?void 0:D.id)&&ll();function N(){return e[8](e[14])}let x=e[14].id!==((P=e[3])==null?void 0:P.id)&&al(e);return{key:s,first:null,c(){t=k("div"),n=k("button"),w.c(),r=L(),i=k("div"),a=k("span"),c=X(l),u=L(),O&&O.c(),d=L(),m=k("div"),h=k("span"),g=L(),p=k("span"),S=X(v),C=L(),x&&x.c(),b=L(),this.h()},l(z){t=y(z,"DIV",{class:!0});var U=R(t);n=y(U,"BUTTON",{class:!0});var W=R(n);w.l(W),r=F(W),i=y(W,"DIV",{class:!0});var j=R(i);a=y(j,"SPAN",{class:!0});var B=R(a);c=Z(B,l),u=F(B),O&&O.l(B),B.forEach(_),d=F(j),m=y(j,"DIV",{class:!0});var H=R(m);h=y(H,"SPAN",{class:!0,style:!0}),R(h).forEach(_),g=F(H),p=y(H,"SPAN",{class:!0});var V=R(p);S=Z(V,v),V.forEach(_),H.forEach(_),j.forEach(_),W.forEach(_),C=F(U),x&&x.l(U),b=F(U),U.forEach(_),this.h()},h(){f(a,"class","user-name svelte-15lp6hy"),f(h,"class","status-dot svelte-15lp6hy"),Le(h,"background-color",cl(e[14].status)),f(p,"class","status-text svelte-15lp6hy"),f(m,"class","user-status svelte-15lp6hy"),f(i,"class","user-info svelte-15lp6hy"),f(n,"class","user svelte-15lp6hy"),f(t,"class","user-container svelte-15lp6hy"),this.first=t},m(z,U){G(z,t,U),o(t,n),w.m(n,null),o(n,r),o(n,i),o(i,a),o(a,c),o(a,u),O&&O.m(a,null),o(i,d),o(i,m),o(m,h),o(m,g),o(m,p),o(p,S),o(t,C),x&&x.m(t,null),o(t,b),A||(E=K(n,"click",N),A=!0)},p(z,U){var W,j;e=z,I===(I=T(e))&&w?w.p(e,U):(w.d(1),w=I(e),w&&(w.c(),w.m(n,r))),U&16&&l!==(l=e[14].username+"")&&re(c,l),e[14].id===((W=e[3])==null?void 0:W.id)?O||(O=ll(),O.c(),O.m(a,null)):O&&(O.d(1),O=null),U&16&&Le(h,"background-color",cl(e[14].status)),U&16&&v!==(v=e[14].status+"")&&re(S,v),e[14].id!==((j=e[3])==null?void 0:j.id)?x?x.p(e,U):(x=al(e),x.c(),x.m(t,b)):x&&(x.d(1),x=null)},d(z){z&&_(t),w.d(),O&&O.d(),x&&x.d(),A=!1,E()}}}function td(s){let e,t,n,r,i=s[4].length+"",a,l,c,u,d=[],m=new Map,h,g,p,v,S,C=We(s[4]);const b=I=>I[14].id;for(let I=0;I<C.length;I+=1){let w=il(s,C,I),O=b(w);m.set(O,d[I]=ol(O,w))}function A(I){s[11](I)}function E(I){s[12](I)}let T={isOwnProfile:s[2]};return s[0]!==void 0&&(T.isOpen=s[0]),s[1]!==void 0&&(T.user=s[1]),g=new da({props:T}),ct.push(()=>Xt(g,"isOpen",A)),ct.push(()=>Xt(g,"user",E)),{c(){e=k("aside"),t=k("div"),n=k("h3"),r=X("Online ("),a=X(i),l=X(")"),c=L(),u=k("div");for(let I=0;I<d.length;I+=1)d[I].c();h=L(),gt(g.$$.fragment),this.h()},l(I){e=y(I,"ASIDE",{class:!0});var w=R(e);t=y(w,"DIV",{class:!0});var O=R(t);n=y(O,"H3",{class:!0});var N=R(n);r=Z(N,"Online ("),a=Z(N,i),l=Z(N,")"),N.forEach(_),O.forEach(_),c=F(w),u=y(w,"DIV",{class:!0});var x=R(u);for(let D=0;D<d.length;D+=1)d[D].l(x);x.forEach(_),w.forEach(_),h=F(I),pt(g.$$.fragment,I),this.h()},h(){f(n,"class","svelte-15lp6hy"),f(t,"class","panel-header svelte-15lp6hy"),f(u,"class","user-list svelte-15lp6hy"),f(e,"class","user-panel svelte-15lp6hy")},m(I,w){G(I,e,w),o(e,t),o(t,n),o(n,r),o(n,a),o(n,l),o(e,c),o(e,u);for(let O=0;O<d.length;O+=1)d[O]&&d[O].m(u,null);G(I,h,w),ht(g,I,w),S=!0},p(I,[w]){(!S||w&16)&&i!==(i=I[4].length+"")&&re(a,i),w&248&&(C=We(I[4]),d=Ts(d,w,b,1,I,C,m,u,As,ol,null,il));const O={};w&4&&(O.isOwnProfile=I[2]),!p&&w&1&&(p=!0,O.isOpen=I[0],Zt(()=>p=!1)),!v&&w&2&&(v=!0,O.user=I[1],Zt(()=>v=!1)),g.$set(O)},i(I){S||(Oe(g.$$.fragment,I),S=!0)},o(I){Ve(g.$$.fragment,I),S=!1},d(I){I&&(_(e),_(h));for(let w=0;w<d.length;w+=1)d[w].d();dt(g,I)}}}function cl(s){switch(s){case"active":return"#10b981";case"away":return"#f59e0b";case"busy":return"#ef4444";default:return"#6b7280"}}function sd(s,e,t){let n,r,i;Te(s,Ls,C=>t(13,n=C)),Te(s,os,C=>t(3,r=C)),Te(s,rs,C=>t(4,i=C));let a=!1,l=null,c=!1;function u(C){t(1,l=C),t(2,c=C.id===(r==null?void 0:r.id)),t(0,a=!0)}async function d(C,b){if(C.stopPropagation(),!(!n||b.id===(r==null?void 0:r.id)))try{await rl(n,b.id,!1)}catch{alert("Failed to start voice call. Please check microphone permissions.")}}async function m(C,b){if(C.stopPropagation(),!(!n||b.id===(r==null?void 0:r.id)))try{await rl(n,b.id,!0)}catch{alert("Failed to start video call. Please check camera and microphone permissions.")}}const h=C=>u(C),g=(C,b)=>d(b,C),p=(C,b)=>m(b,C);function v(C){a=C,t(0,a)}function S(C){l=C,t(1,l)}return[a,l,c,r,i,u,d,m,h,g,p,v,S]}class nd extends yt{constructor(e){super(),kt(this,e,sd,td,bt,{})}}const Sr=lt([]),Ar=lt(!1),fs=new Map;let is=null;const ma={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]};async function rd(s){try{return is=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1}),Ar.set(!0),s.emit("start-screen-share"),is.getVideoTracks()[0].onended=()=>{va(s)},is}catch(e){throw console.error("Error starting screen share:",e),e}}function va(s){is&&(is.getTracks().forEach(e=>e.stop()),is=null),Ar.set(!1),s.emit("stop-screen-share"),fs.forEach(e=>e.close()),fs.clear()}async function id(s,e){const t=new RTCPeerConnection(ma);fs.set(e,t),is&&is.getTracks().forEach(r=>{t.addTrack(r,is)}),t.onicecandidate=r=>{r.candidate&&s.emit("webrtc-ice-candidate",{candidate:r.candidate,targetId:e})};const n=await t.createOffer();await t.setLocalDescription(n),s.emit("webrtc-offer",{offer:n,targetId:e})}async function ld(s,e,t,n){const r=new RTCPeerConnection(ma);fs.set(e,r),r.ontrack=a=>{Sr.update(l=>{const c=l.findIndex(d=>d.userId===e),u={userId:e,username:t,stream:a.streams[0]};return c>=0?(l[c]=u,l):[...l,u]})},r.onicecandidate=a=>{a.candidate&&s.emit("webrtc-ice-candidate",{candidate:a.candidate,targetId:e})},await r.setRemoteDescription(n);const i=await r.createAnswer();await r.setLocalDescription(i),s.emit("webrtc-answer",{answer:i,targetId:e})}async function ad(s,e){const t=fs.get(s);t&&await t.setRemoteDescription(e)}async function od(s,e){const t=fs.get(s);t&&await t.addIceCandidate(e)}function cd(s){Sr.update(t=>t.filter(n=>n.userId!==s));const e=fs.get(s);e&&(e.close(),fs.delete(s))}function ul(s,e,t){const n=s.slice();return n[12]=e[t],n}function ud(s){let e,t="Start Sharing",n,r;return{c(){e=k("button"),e.textContent=t},l(i){e=y(i,"BUTTON",{"data-svelte-h":!0}),Q(e)!=="svelte-1ms5zeg"&&(e.textContent=t)},m(i,a){G(i,e,a),n||(r=K(e,"click",s[6]),n=!0)},p:Pe,d(i){i&&_(e),n=!1,r()}}}function fd(s){let e,t="Stop Sharing",n,r;return{c(){e=k("button"),e.textContent=t,this.h()},l(i){e=y(i,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1urv00m"&&(e.textContent=t),this.h()},h(){f(e,"class","stop-btn svelte-bu6z9u")},m(i,a){G(i,e,a),n||(r=K(e,"click",s[7]),n=!0)},p:Pe,d(i){i&&_(e),n=!1,r()}}}function fl(s){let e,t;return{c(){e=k("div"),t=X(s[2]),this.h()},l(n){e=y(n,"DIV",{class:!0});var r=R(e);t=Z(r,s[2]),r.forEach(_),this.h()},h(){f(e,"class","error svelte-bu6z9u")},m(n,r){G(n,e,r),o(e,t)},p(n,r){r&4&&re(t,n[2])},d(n){n&&_(e)}}}function dl(s){let e,t,n='<span class="badge svelte-bu6z9u">Your Screen</span>',r,i;return{c(){e=k("div"),t=k("div"),t.innerHTML=n,r=L(),i=k("video"),this.h()},l(a){e=y(a,"DIV",{class:!0});var l=R(e);t=y(l,"DIV",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-16dlolc"&&(t.innerHTML=n),r=F(l),i=y(l,"VIDEO",{class:!0}),R(i).forEach(_),l.forEach(_),this.h()},h(){f(t,"class","screen-header svelte-bu6z9u"),i.autoplay=!0,i.muted=!0,i.playsInline=!0,f(i,"class","svelte-bu6z9u"),f(e,"class","screen-item svelte-bu6z9u")},m(a,l){G(a,e,l),o(e,t),o(e,r),o(e,i),s[9](i)},p:Pe,d(a){a&&_(e),s[9](null)}}}function hl(s,e){let t,n,r,i=e[12].username+"",a,l,c,u,d,m,h;return{key:s,first:null,c(){t=k("div"),n=k("div"),r=k("span"),a=X(i),l=X("'s Screen"),c=L(),u=k("video"),this.h()},l(g){t=y(g,"DIV",{class:!0});var p=R(t);n=y(p,"DIV",{class:!0});var v=R(n);r=y(v,"SPAN",{class:!0});var S=R(r);a=Z(S,i),l=Z(S,"'s Screen"),S.forEach(_),v.forEach(_),c=F(p),u=y(p,"VIDEO",{class:!0}),R(u).forEach(_),p.forEach(_),this.h()},h(){f(r,"class","username svelte-bu6z9u"),f(n,"class","screen-header svelte-bu6z9u"),u.autoplay=!0,u.playsInline=!0,f(u,"class","svelte-bu6z9u"),f(t,"class","screen-item svelte-bu6z9u"),this.first=t},m(g,p){G(g,t,p),o(t,n),o(n,r),o(r,a),o(r,l),o(t,c),o(t,u),m||(h=Aa(d=hd.call(null,u,e[12].stream)),m=!0)},p(g,p){e=g,p&16&&i!==(i=e[12].username+"")&&re(a,i),d&&ks(d.update)&&p&16&&d.update.call(null,e[12].stream)},d(g){g&&_(t),m=!1,h()}}}function pl(s){let e,t='<p class="svelte-bu6z9u">No active screen shares</p> <p class="hint svelte-bu6z9u">Click &quot;Start Sharing&quot; to share your screen</p>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(n){e=y(n,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-reuplr"&&(e.innerHTML=t),this.h()},h(){f(e,"class","empty-state svelte-bu6z9u")},m(n,r){G(n,e,r)},d(n){n&&_(e)}}}function dd(s){let e,t,n,r,i="â† Back",a,l,c="ðŸ–¥ï¸ Screen Sharing",u,d,m,h,g,p=[],v=new Map,S,C,b;function A(D,P){return D[3]?fd:ud}let E=A(s),T=E(s),I=s[2]&&fl(s),w=s[3]&&s[0]&&dl(s),O=We(s[4]);const N=D=>D[12].userId;for(let D=0;D<O.length;D+=1){let P=ul(s,O,D),z=N(P);v.set(z,p[D]=hl(z,P))}let x=!s[3]&&s[4].length===0&&pl();return{c(){e=k("div"),t=k("div"),n=k("div"),r=k("button"),r.textContent=i,a=L(),l=k("h2"),l.textContent=c,u=L(),T.c(),d=L(),I&&I.c(),m=L(),h=k("div"),w&&w.c(),g=L();for(let D=0;D<p.length;D+=1)p[D].c();S=L(),x&&x.c(),this.h()},l(D){e=y(D,"DIV",{class:!0});var P=R(e);t=y(P,"DIV",{class:!0});var z=R(t);n=y(z,"DIV",{class:!0});var U=R(n);r=y(U,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(r)!=="svelte-ts724a"&&(r.textContent=i),a=F(U),l=y(U,"H2",{class:!0,"data-svelte-h":!0}),Q(l)!=="svelte-1el2fdv"&&(l.textContent=c),U.forEach(_),u=F(z),T.l(z),z.forEach(_),d=F(P),I&&I.l(P),m=F(P),h=y(P,"DIV",{class:!0});var W=R(h);w&&w.l(W),g=F(W);for(let j=0;j<p.length;j+=1)p[j].l(W);S=F(W),x&&x.l(W),W.forEach(_),P.forEach(_),this.h()},h(){f(r,"class","back-btn svelte-bu6z9u"),f(r,"title","Back to chat"),f(l,"class","svelte-bu6z9u"),f(n,"class","header-left svelte-bu6z9u"),f(t,"class","header svelte-bu6z9u"),f(h,"class","screens svelte-bu6z9u"),f(e,"class","screen-share-container svelte-bu6z9u")},m(D,P){G(D,e,P),o(e,t),o(t,n),o(n,r),o(n,a),o(n,l),o(t,u),T.m(t,null),o(e,d),I&&I.m(e,null),o(e,m),o(e,h),w&&w.m(h,null),o(h,g);for(let z=0;z<p.length;z+=1)p[z]&&p[z].m(h,null);o(h,S),x&&x.m(h,null),C||(b=K(r,"click",s[5]),C=!0)},p(D,[P]){E===(E=A(D))&&T?T.p(D,P):(T.d(1),T=E(D),T&&(T.c(),T.m(t,null))),D[2]?I?I.p(D,P):(I=fl(D),I.c(),I.m(e,m)):I&&(I.d(1),I=null),D[3]&&D[0]?w?w.p(D,P):(w=dl(D),w.c(),w.m(h,g)):w&&(w.d(1),w=null),P&16&&(O=We(D[4]),p=Ts(p,P,N,1,D,O,v,h,As,hl,S,ul)),!D[3]&&D[4].length===0?x||(x=pl(),x.c(),x.m(h,null)):x&&(x.d(1),x=null)},i:Pe,o:Pe,d(D){D&&_(e),T.d(),I&&I.d(),w&&w.d();for(let P=0;P<p.length;P+=1)p[P].d();x&&x.d(),C=!1,b()}}}function hd(s,e){return console.log("Setting remote video srcObject",e,"tracks:",e.getTracks()),s.srcObject=e,s.play().catch(t=>console.error("Error playing remote video:",t)),{update(t){console.log("Updating remote video srcObject",t,"tracks:",t.getTracks()),s.srcObject=t,s.play().catch(n=>console.error("Error playing updated remote video:",n))}}}function pd(s,e,t){let n,r,i,a;Te(s,Ls,v=>t(10,n=v)),Te(s,Ar,v=>t(3,r=v)),Te(s,rs,v=>t(11,i=v)),Te(s,Sr,v=>t(4,a=v));let{activeView:l="screen"}=e,c=null,u="",d;function m(){t(8,l="chat")}async function h(){try{if(!n)return;t(0,c=await rd(n)),console.log("Screen share started, stream:",c),console.log("Stream tracks:",c==null?void 0:c.getTracks()),console.log("Video tracks:",c==null?void 0:c.getVideoTracks()),t(2,u="")}catch(v){t(2,u="Failed to start screen sharing. Please grant permissions."),console.error("Screen share error:",v)}}function g(){n&&(va(n),t(0,c=null))}Es(()=>{n&&(n.on("screen-share-started",async v=>{n&&(console.log(`${v.username} started screen sharing`),Vl(),t(8,l="screen"),document.hidden&&"Notification"in window&&Notification.permission==="granted"&&new Notification("Screen Share Started",{body:`${v.username} is sharing their screen`,icon:"/icon-192.png"}))}),n.on("screen-share-stopped",v=>{cd(v)}),n.on("webrtc-offer",async v=>{if(!n)return;const S=i.find(C=>C.id===v.senderId);S&&await ld(n,v.senderId,S.username,v.offer)}),n.on("webrtc-answer",async v=>{await ad(v.senderId,v.answer)}),n.on("webrtc-ice-candidate",async v=>{await od(v.senderId,v.candidate)}),n.on("user-joined",async v=>{r&&n&&setTimeout(()=>{n&&id(n,v.id)},1e3)}))});function p(v){ct[v?"unshift":"push"](()=>{d=v,t(1,d),t(0,c)})}return s.$$set=v=>{"activeView"in v&&t(8,l=v.activeView)},s.$$.update=()=>{s.$$.dirty&3&&d&&c&&(console.log("Setting local video srcObject",c),t(1,d.srcObject=c,d),d.play().catch(v=>console.error("Error playing local video:",v)))},[c,d,u,r,a,m,h,g,l,p]}class gd extends yt{constructor(e){super(),kt(this,e,pd,dd,bt,{activeView:8})}}function gl(s,e,t){const n=s.slice();return n[15]=e[t],n[16]=e,n[17]=t,n}function ml(s){let e,t,n,r,i=s[2].username.charAt(0).toUpperCase()+"",a,l,c,u=s[2].username+"",d,m,h,g=s[2].isVideoCall?"ðŸ“¹ Video":"ðŸ“ž Voice",p,v,S,C,b,A=`<span class="btn-icon svelte-1e217ta">ðŸ“ž</span>
					Answer`,E,T,I=`<span class="btn-icon svelte-1e217ta">âœ–ï¸</span>
					Decline`,w,O;return{c(){e=k("div"),t=k("div"),n=k("div"),r=k("div"),a=X(i),l=L(),c=k("h2"),d=X(u),m=L(),h=k("p"),p=X(g),v=X(" Call"),S=L(),C=k("div"),b=k("button"),b.innerHTML=A,E=L(),T=k("button"),T.innerHTML=I,this.h()},l(N){e=y(N,"DIV",{class:!0});var x=R(e);t=y(x,"DIV",{class:!0});var D=R(t);n=y(D,"DIV",{class:!0});var P=R(n);r=y(P,"DIV",{class:!0});var z=R(r);a=Z(z,i),z.forEach(_),l=F(P),c=y(P,"H2",{class:!0});var U=R(c);d=Z(U,u),U.forEach(_),m=F(P),h=y(P,"P",{class:!0});var W=R(h);p=Z(W,g),v=Z(W," Call"),W.forEach(_),P.forEach(_),S=F(D),C=y(D,"DIV",{class:!0});var j=R(C);b=y(j,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(b)!=="svelte-u3s2jz"&&(b.innerHTML=A),E=F(j),T=y(j,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(T)!=="svelte-om1ns7"&&(T.innerHTML=I),j.forEach(_),D.forEach(_),x.forEach(_),this.h()},h(){f(r,"class","caller-avatar svelte-1e217ta"),f(c,"class","svelte-1e217ta"),f(h,"class","call-type svelte-1e217ta"),f(n,"class","caller-info svelte-1e217ta"),f(b,"class","answer-btn svelte-1e217ta"),f(T,"class","reject-btn svelte-1e217ta"),f(C,"class","call-actions svelte-1e217ta"),f(t,"class","incoming-call-modal svelte-1e217ta"),f(e,"class","call-modal-overlay svelte-1e217ta")},m(N,x){G(N,e,x),o(e,t),o(t,n),o(n,r),o(r,a),o(n,l),o(n,c),o(c,d),o(n,m),o(n,h),o(h,p),o(h,v),o(t,S),o(t,C),o(C,b),o(C,E),o(C,T),w||(O=[K(b,"click",s[7]),K(T,"click",s[8])],w=!0)},p(N,x){x&4&&i!==(i=N[2].username.charAt(0).toUpperCase()+"")&&re(a,i),x&4&&u!==(u=N[2].username+"")&&re(d,u),x&4&&g!==(g=N[2].isVideoCall?"ðŸ“¹ Video":"ðŸ“ž Voice")&&re(p,g)},d(N){N&&_(e),w=!1,Me(O)}}}function vl(s){let e,t,n,r,i,a,l,c="You",u,d=[],m=new Map,h,g,p,v,S=s[6]?"ðŸ”‡":"ðŸŽ¤",C,b,A,E,T,I=s[5]?"ðŸ“¹":"ðŸ“·",w,O,N,x,D='<span class="control-icon svelte-1e217ta">ðŸ“ž</span>',P,z,U=s[5]&&_l(),W=We(s[3]);const j=B=>B[15].userId;for(let B=0;B<W.length;B+=1){let H=gl(s,W,B),V=j(H);m.set(V,d[B]=yl(V,H))}return{c(){e=k("div"),t=k("div"),n=k("div"),r=k("video"),i=L(),U&&U.c(),a=L(),l=k("div"),l.textContent=c,u=L();for(let B=0;B<d.length;B+=1)d[B].c();h=L(),g=k("div"),p=k("button"),v=k("span"),C=X(S),A=L(),E=k("button"),T=k("span"),w=X(I),N=L(),x=k("button"),x.innerHTML=D,this.h()},l(B){e=y(B,"DIV",{class:!0});var H=R(e);t=y(H,"DIV",{class:!0});var V=R(t);n=y(V,"DIV",{class:!0});var q=R(n);r=y(q,"VIDEO",{class:!0}),R(r).forEach(_),i=F(q),U&&U.l(q),a=F(q),l=y(q,"DIV",{class:!0,"data-svelte-h":!0}),Q(l)!=="svelte-1l6ztyc"&&(l.textContent=c),q.forEach(_),u=F(V);for(let fe=0;fe<d.length;fe+=1)d[fe].l(V);V.forEach(_),h=F(H),g=y(H,"DIV",{class:!0});var Y=R(g);p=y(Y,"BUTTON",{class:!0,title:!0});var $=R(p);v=y($,"SPAN",{class:!0});var ee=R(v);C=Z(ee,S),ee.forEach(_),$.forEach(_),A=F(Y),E=y(Y,"BUTTON",{class:!0,title:!0});var ae=R(E);T=y(ae,"SPAN",{class:!0});var ie=R(T);w=Z(ie,I),ie.forEach(_),ae.forEach(_),N=F(Y),x=y(Y,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(x)!=="svelte-1rszrze"&&(x.innerHTML=D),Y.forEach(_),H.forEach(_),this.h()},h(){r.autoplay=!0,r.muted=!0,r.playsInline=!0,f(r,"class","video-element svelte-1e217ta"),_e(r,"video-hidden",s[5]),f(l,"class","video-label svelte-1e217ta"),f(n,"class","video-wrapper local-video svelte-1e217ta"),f(t,"class","video-grid svelte-1e217ta"),f(v,"class","control-icon svelte-1e217ta"),f(p,"class","control-btn svelte-1e217ta"),f(p,"title",b=s[6]?"Unmute":"Mute"),_e(p,"active",s[6]),f(T,"class","control-icon svelte-1e217ta"),f(E,"class","control-btn svelte-1e217ta"),f(E,"title",O=s[5]?"Turn on camera":"Turn off camera"),_e(E,"active",s[5]),f(x,"class","control-btn end-call-btn svelte-1e217ta"),f(x,"title","End call"),f(g,"class","call-controls svelte-1e217ta"),f(e,"class","active-call-container svelte-1e217ta")},m(B,H){G(B,e,H),o(e,t),o(t,n),o(n,r),s[12](r),o(n,i),U&&U.m(n,null),o(n,a),o(n,l),o(t,u);for(let V=0;V<d.length;V+=1)d[V]&&d[V].m(t,null);o(e,h),o(e,g),o(g,p),o(p,v),o(v,C),o(g,A),o(g,E),o(E,T),o(T,w),o(g,N),o(g,x),P||(z=[K(p,"click",s[10]),K(E,"click",s[11]),K(x,"click",s[9])],P=!0)},p(B,H){H&32&&_e(r,"video-hidden",B[5]),B[5]?U||(U=_l(),U.c(),U.m(n,a)):U&&(U.d(1),U=null),H&10&&(W=We(B[3]),d=Ts(d,H,j,1,B,W,m,t,As,yl,null,gl)),H&64&&S!==(S=B[6]?"ðŸ”‡":"ðŸŽ¤")&&re(C,S),H&64&&b!==(b=B[6]?"Unmute":"Mute")&&f(p,"title",b),H&64&&_e(p,"active",B[6]),H&32&&I!==(I=B[5]?"ðŸ“¹":"ðŸ“·")&&re(w,I),H&32&&O!==(O=B[5]?"Turn on camera":"Turn off camera")&&f(E,"title",O),H&32&&_e(E,"active",B[5])},d(B){B&&_(e),s[12](null),U&&U.d();for(let H=0;H<d.length;H+=1)d[H].d();P=!1,Me(z)}}}function _l(s){let e,t='<span class="placeholder-icon svelte-1e217ta">ðŸ“¹</span> <span>Camera Off</span>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(n){e=y(n,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-57tuav"&&(e.innerHTML=t),this.h()},h(){f(e,"class","video-placeholder svelte-1e217ta")},m(n,r){G(n,e,r)},d(n){n&&_(e)}}}function bl(s){let e,t,n="ðŸ‘¤",r,i,a=(s[15].username||"User")+"",l;return{c(){e=k("div"),t=k("span"),t.textContent=n,r=L(),i=k("span"),l=X(a),this.h()},l(c){e=y(c,"DIV",{class:!0});var u=R(e);t=y(u,"SPAN",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-18bpbb5"&&(t.textContent=n),r=F(u),i=y(u,"SPAN",{});var d=R(i);l=Z(d,a),d.forEach(_),u.forEach(_),this.h()},h(){f(t,"class","placeholder-icon svelte-1e217ta"),f(e,"class","video-placeholder svelte-1e217ta")},m(c,u){G(c,e,u),o(e,t),o(e,r),o(e,i),o(i,l)},p(c,u){u&8&&a!==(a=(c[15].username||"User")+"")&&re(l,a)},d(c){c&&_(e)}}}function yl(s,e){let t,n,r=e[15],i,a,l,c=(e[15].username||"User")+"",u,d;const m=()=>e[13](n,r),h=()=>e[13](null,r);let g=!e[15].isVideoEnabled&&bl(e);return{key:s,first:null,c(){t=k("div"),n=k("video"),i=L(),g&&g.c(),a=L(),l=k("div"),u=X(c),d=L(),this.h()},l(p){t=y(p,"DIV",{class:!0});var v=R(t);n=y(v,"VIDEO",{class:!0}),R(n).forEach(_),i=F(v),g&&g.l(v),a=F(v),l=y(v,"DIV",{class:!0});var S=R(l);u=Z(S,c),S.forEach(_),d=F(v),v.forEach(_),this.h()},h(){n.autoplay=!0,n.playsInline=!0,f(n,"class","video-element svelte-1e217ta"),_e(n,"video-hidden",!e[15].isVideoEnabled),f(l,"class","video-label svelte-1e217ta"),f(t,"class","video-wrapper remote-video svelte-1e217ta"),this.first=t},m(p,v){G(p,t,v),o(t,n),m(),o(t,i),g&&g.m(t,null),o(t,a),o(t,l),o(l,u),o(t,d)},p(p,v){e=p,r!==e[15]&&(h(),r=e[15],m()),v&8&&_e(n,"video-hidden",!e[15].isVideoEnabled),e[15].isVideoEnabled?g&&(g.d(1),g=null):g?g.p(e,v):(g=bl(e),g.c(),g.m(t,a)),v&8&&c!==(c=(e[15].username||"User")+"")&&re(u,c)},d(p){p&&_(t),h(),g&&g.d()}}}function md(s){let e,t,n=s[2]&&ml(s),r=s[4]&&vl(s);return{c(){n&&n.c(),e=L(),r&&r.c(),t=xe()},l(i){n&&n.l(i),e=F(i),r&&r.l(i),t=xe()},m(i,a){n&&n.m(i,a),G(i,e,a),r&&r.m(i,a),G(i,t,a)},p(i,[a]){i[2]?n?n.p(i,a):(n=ml(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),i[4]?r?r.p(i,a):(r=vl(i),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:Pe,o:Pe,d(i){i&&(_(e),_(t)),n&&n.d(i),r&&r.d(i)}}}function vd(){console.log("Incoming call ringtone")}function _d(s,e,t){let n,r,i,a,l,c;Te(s,Ls,b=>t(14,n=b)),Te(s,Tn,b=>t(2,r=b)),Te(s,Er,b=>t(3,i=b)),Te(s,On,b=>t(4,a=b)),Te(s,rn,b=>t(5,l=b)),Te(s,nn,b=>t(6,c=b));let u,d={};Es(()=>{n&&(n.on("call-incoming",b=>{Tn.set({userId:b.userId,username:b.username,isVideoCall:b.isVideoCall})}),n.on("call-accepted",async b=>{await Yf(n,b.userId)}),n.on("call-rejected",b=>{alert("Call was rejected"),$n(n)}),n.on("call-ended",b=>{$n(n)}),n.on("call-offer",async b=>{const A=i.find(T=>T.userId===b.senderId)||r,E=A?A.username:"Unknown";await Zf(n,b.senderId,E,b.offer)}),n.on("call-answer-sdp",async b=>{await Xf(b.senderId,b.answer)}),n.on("call-ice-candidate",async b=>{await Kf(b.senderId,b.candidate)}))}),Cl(()=>{n&&(n.off("call-incoming"),n.off("call-accepted"),n.off("call-rejected"),n.off("call-ended"),n.off("call-offer"),n.off("call-answer-sdp"),n.off("call-ice-candidate"))});async function m(){!r||!n||await jf(n,r.userId,r.isVideoCall)}function h(){!r||!n||Gf(n,r.userId)}function g(){n&&$n(n)}function p(){Wf()}function v(){$f()}function S(b){ct[b?"unshift":"push"](()=>{u=b,t(0,u),t(4,a)})}function C(b,A){ct[b?"unshift":"push"](()=>{d[A.userId]=b,t(1,d)})}return s.$$.update=()=>{if(s.$$.dirty&4&&r&&vd(),s.$$.dirty&17&&a&&u){const b=Qf();b&&t(0,u.srcObject=b,u)}s.$$.dirty&10&&i.length>0&&i.forEach(b=>{const A=d[b.userId];A&&b.stream&&(A.srcObject=b.stream)})},[u,d,r,i,a,l,c,m,h,g,p,v,S,C]}class bd extends yt{constructor(e){super(),kt(this,e,_d,md,bt,{})}}const{window:kl}=Ta;function yd(s){let e,t,n,r,i,a,l,c,u,d,m,h,g,p,v,S,C,b=s[2]?"â†’":"â†",A,E,T,I,w,O,N,x;function D(j){s[13](j)}let P={};s[1]!==void 0&&(P.activeView=s[1]),n=new Hf({props:P}),ct.push(()=>Xt(n,"activeView",D)),d=new Cf({});function z(j){s[14](j)}let U={};s[1]!==void 0&&(U.activeView=s[1]),g=new gd({props:U}),ct.push(()=>Xt(g,"activeView",z));let W=s[2]&&wl(s);return w=new bd({}),{c(){e=k("div"),t=k("div"),gt(n.$$.fragment),i=L(),a=k("div"),l=L(),c=k("div"),u=k("div"),gt(d.$$.fragment),m=L(),h=k("div"),gt(g.$$.fragment),v=L(),W&&W.c(),S=L(),C=k("button"),A=X(b),I=L(),gt(w.$$.fragment),this.h()},l(j){e=y(j,"DIV",{class:!0});var B=R(e);t=y(B,"DIV",{class:!0,style:!0});var H=R(t);pt(n.$$.fragment,H),i=F(H),a=y(H,"DIV",{class:!0}),R(a).forEach(_),H.forEach(_),l=F(B),c=y(B,"DIV",{class:!0});var V=R(c);u=y(V,"DIV",{class:!0});var q=R(u);pt(d.$$.fragment,q),q.forEach(_),m=F(V),h=y(V,"DIV",{class:!0});var Y=R(h);pt(g.$$.fragment,Y),Y.forEach(_),V.forEach(_),v=F(B),W&&W.l(B),S=F(B),C=y(B,"BUTTON",{class:!0,title:!0,style:!0});var $=R(C);A=Z($,b),$.forEach(_),B.forEach(_),I=F(j),pt(w.$$.fragment,j),this.h()},h(){f(a,"class","resize-handle resize-handle-channel svelte-u9tga7"),f(t,"class","channel-sidebar-container svelte-u9tga7"),Le(t,"width",s[3]+"px"),f(u,"class","svelte-u9tga7"),_e(u,"hidden",s[1]!=="chat"),f(h,"class","svelte-u9tga7"),_e(h,"hidden",s[1]!=="screen"),f(c,"class","main-content svelte-u9tga7"),f(C,"class","user-panel-toggle svelte-u9tga7"),f(C,"title",E=s[2]?"Hide user panel":"Show user panel"),f(C,"style",T=s[2]?`right: ${s[4]}px`:"right: 0"),_e(C,"open",s[2]),f(e,"class","app-container svelte-u9tga7"),_e(e,"resizing",s[5]||s[6])},m(j,B){G(j,e,B),o(e,t),ht(n,t,null),o(t,i),o(t,a),o(e,l),o(e,c),o(c,u),ht(d,u,null),o(c,m),o(c,h),ht(g,h,null),o(e,v),W&&W.m(e,null),o(e,S),o(e,C),o(C,A),G(j,I,B),ht(w,j,B),O=!0,N||(x=[K(a,"mousedown",s[8]),K(C,"click",s[15])],N=!0)},p(j,B){const H={};!r&&B&2&&(r=!0,H.activeView=j[1],Zt(()=>r=!1)),n.$set(H),(!O||B&8)&&Le(t,"width",j[3]+"px"),(!O||B&2)&&_e(u,"hidden",j[1]!=="chat");const V={};!p&&B&2&&(p=!0,V.activeView=j[1],Zt(()=>p=!1)),g.$set(V),(!O||B&2)&&_e(h,"hidden",j[1]!=="screen"),j[2]?W?(W.p(j,B),B&4&&Oe(W,1)):(W=wl(j),W.c(),Oe(W,1),W.m(e,S)):W&&(en(),Ve(W,1,1,()=>{W=null}),tn()),(!O||B&4)&&b!==(b=j[2]?"â†’":"â†")&&re(A,b),(!O||B&4&&E!==(E=j[2]?"Hide user panel":"Show user panel"))&&f(C,"title",E),(!O||B&20&&T!==(T=j[2]?`right: ${j[4]}px`:"right: 0"))&&f(C,"style",T),(!O||B&4)&&_e(C,"open",j[2]),(!O||B&96)&&_e(e,"resizing",j[5]||j[6])},i(j){O||(Oe(n.$$.fragment,j),Oe(d.$$.fragment,j),Oe(g.$$.fragment,j),Oe(W),Oe(w.$$.fragment,j),O=!0)},o(j){Ve(n.$$.fragment,j),Ve(d.$$.fragment,j),Ve(g.$$.fragment,j),Ve(W),Ve(w.$$.fragment,j),O=!1},d(j){j&&(_(e),_(I)),dt(n),dt(d),dt(g),W&&W.d(),dt(w,j),N=!1,Me(x)}}}function kd(s){let e,t;return e=new Rf({}),e.$on("login",s[7]),{c(){gt(e.$$.fragment)},l(n){pt(e.$$.fragment,n)},m(n,r){ht(e,n,r),t=!0},p:Pe,i(n){t||(Oe(e.$$.fragment,n),t=!0)},o(n){Ve(e.$$.fragment,n),t=!1},d(n){dt(e,n)}}}function wl(s){let e,t,n,r,i,a,l;return r=new nd({}),{c(){e=k("div"),t=k("div"),n=L(),gt(r.$$.fragment),this.h()},l(c){e=y(c,"DIV",{class:!0,style:!0});var u=R(e);t=y(u,"DIV",{class:!0}),R(t).forEach(_),n=F(u),pt(r.$$.fragment,u),u.forEach(_),this.h()},h(){f(t,"class","resize-handle resize-handle-user svelte-u9tga7"),f(e,"class","user-panel-container svelte-u9tga7"),Le(e,"width",s[4]+"px")},m(c,u){G(c,e,u),o(e,t),o(e,n),ht(r,e,null),i=!0,a||(l=K(t,"mousedown",s[9]),a=!0)},p(c,u){(!i||u&16)&&Le(e,"width",c[4]+"px")},i(c){i||(Oe(r.$$.fragment,c),i=!0)},o(c){Ve(r.$$.fragment,c),i=!1},d(c){c&&_(e),dt(r),a=!1,l()}}}function wd(s){let e,t,n,r,i,a;const l=[kd,yd],c=[];function u(d,m){return d[0]?1:0}return e=u(s),t=c[e]=l[e](s),{c(){t.c(),n=xe()},l(d){t.l(d),n=xe()},m(d,m){c[e].m(d,m),G(d,n,m),r=!0,i||(a=[K(kl,"mousemove",s[10]),K(kl,"mouseup",s[11])],i=!0)},p(d,[m]){let h=e;e=u(d),e===h?c[e].p(d,m):(en(),Ve(c[h],1,1,()=>{c[h]=null}),tn(),t=c[e],t?t.p(d,m):(t=c[e]=l[e](d),t.c()),Oe(t,1),t.m(n.parentNode,n))},i(d){r||(Oe(t),r=!0)},o(d){Ve(t),r=!1},d(d){d&&_(n),c[e].d(d),i=!1,Me(a)}}}function Ed(s,e,t){let{data:n}=e,r="",i=!1,a="chat",l=!1,c=240,u=250,d=!1,m=!1;function h(E){r=E.detail,Bc(r),t(0,i=!0)}function g(E){t(5,d=!0),E.preventDefault()}function p(E){t(6,m=!0),E.preventDefault()}function v(E){if(d){const T=E.clientX;T>=180&&T<=400&&t(3,c=T)}else if(m){const T=window.innerWidth-E.clientX;T>=200&&T<=500&&t(4,u=T)}}function S(){t(5,d=!1),t(6,m=!1)}Cl(()=>{Hc()});function C(E){a=E,t(1,a)}function b(E){a=E,t(1,a)}const A=()=>t(2,l=!l);return s.$$set=E=>{"data"in E&&t(12,n=E.data)},[i,a,l,c,u,d,m,h,g,p,v,S,n,C,b,A]}class Rd extends yt{constructor(e){super(),kt(this,e,Ed,wd,bt,{data:12})}}export{Rd as component};
