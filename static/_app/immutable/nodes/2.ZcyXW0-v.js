var va=Object.defineProperty;var _a=(s,e,t)=>e in s?va(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var Ae=(s,e,t)=>_a(s,typeof e!="symbol"?e+"":e,t);import{A as xe,s as _t,n as Pe,d as _,O as et,i as z,e as c,P as Y,x as h,f as b,h as D,k as L,Q,l as k,m as M,R as yl,r as Es,p as Fe,S as Ue,b as ne,T as As,j as $,t as W,U as Ns,y as Le,o as Ie,B as ks,z as ot,V as Cn,W as Zt,q as ba,X as wl,Y as El,Z as ye,v as ka,_ as ya,$ as Cr,a0 as Al,I as wa,a1 as Ea,a2 as Aa,a3 as Sl}from"../chunks/CdCOery0.js";import{a as Oe,S as bt,i as kt,f as Xt,d as ft,t as Be,g as en,c as tn,m as ht,e as dt,b as pt}from"../chunks/CqCFC2cg.js";import{w as rt}from"../chunks/BHhKbfRM.js";/* empty css                */const Sa=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Ve(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function Ss(s,e){s.d(1),e.delete(s.key)}function Ts(s,e,t,n,r,i,a,l,o,u,f,p){let d=s.length,m=i.length,g=d;const v={};for(;g--;)v[s[g].key]=g;const A=[],I=new Map,y=new Map,E=[];for(g=m;g--;){const S=p(r,i,g),P=t(S);let O=a.get(P);O?E.push(()=>O.p(S,e)):(O=u(P,S),O.c()),I.set(P,A[g]=O),P in v&&y.set(P,Math.abs(g-v[P]))}const w=new Set,T=new Set;function C(S){Oe(S,1),S.m(l,f),a.set(S.key,S),f=S.first,m--}for(;d&&m;){const S=A[m-1],P=s[d-1],O=S.key,N=P.key;S===P?(f=S.first,d--,m--):I.has(N)?!a.has(O)||w.has(O)?C(S):T.has(N)?d--:y.get(O)>y.get(N)?(T.add(O),C(S)):(w.add(N),d--):(o(P,a),d--)}for(;d--;){const S=s[d];I.has(S.key)||o(S,a)}for(;m;)C(A[m-1]);return xe(E),A}const Qt=Object.create(null);Qt.open="0";Qt.close="1";Qt.ping="2";Qt.pong="3";Qt.message="4";Qt.upgrade="5";Qt.noop="6";const mn=Object.create(null);Object.keys(Qt).forEach(s=>{mn[Qt[s]]=s});const Yn={type:"error",data:"parser error"},Tl=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Cl=typeof ArrayBuffer=="function",Il=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,ar=({type:s,data:e},t,n)=>Tl&&e instanceof Blob?t?n(e):Ir(e,n):Cl&&(e instanceof ArrayBuffer||Il(e))?t?n(e):Ir(new Blob([e]),n):n(Qt[s]+(e||"")),Ir=(s,e)=>{const t=new FileReader;return t.onload=function(){const n=t.result.split(",")[1];e("b"+(n||""))},t.readAsDataURL(s)};function Rr(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let Fn;function Ta(s,e){if(Tl&&s.data instanceof Blob)return s.data.arrayBuffer().then(Rr).then(e);if(Cl&&(s.data instanceof ArrayBuffer||Il(s.data)))return e(Rr(s.data));ar(s,!1,t=>{Fn||(Fn=new TextEncoder),e(Fn.encode(t))})}const Dr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ws=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<Dr.length;s++)Ws[Dr.charCodeAt(s)]=s;const Ca=s=>{let e=s.length*.75,t=s.length,n,r=0,i,a,l,o;s[s.length-1]==="="&&(e--,s[s.length-2]==="="&&e--);const u=new ArrayBuffer(e),f=new Uint8Array(u);for(n=0;n<t;n+=4)i=Ws[s.charCodeAt(n)],a=Ws[s.charCodeAt(n+1)],l=Ws[s.charCodeAt(n+2)],o=Ws[s.charCodeAt(n+3)],f[r++]=i<<2|a>>4,f[r++]=(a&15)<<4|l>>2,f[r++]=(l&3)<<6|o&63;return u},Ia=typeof ArrayBuffer=="function",or=(s,e)=>{if(typeof s!="string")return{type:"message",data:Rl(s,e)};const t=s.charAt(0);return t==="b"?{type:"message",data:Ra(s.substring(1),e)}:mn[t]?s.length>1?{type:mn[t],data:s.substring(1)}:{type:mn[t]}:Yn},Ra=(s,e)=>{if(Ia){const t=Ca(s);return Rl(t,e)}else return{base64:!0,data:s}},Rl=(s,e)=>{switch(e){case"blob":return s instanceof Blob?s:new Blob([s]);case"arraybuffer":default:return s instanceof ArrayBuffer?s:s.buffer}},Dl="",Da=(s,e)=>{const t=s.length,n=new Array(t);let r=0;s.forEach((i,a)=>{ar(i,!1,l=>{n[a]=l,++r===t&&e(n.join(Dl))})})},Oa=(s,e)=>{const t=s.split(Dl),n=[];for(let r=0;r<t.length;r++){const i=or(t[r],e);if(n.push(i),i.type==="error")break}return n};function Na(){return new TransformStream({transform(s,e){Ta(s,t=>{const n=t.length;let r;if(n<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,n);else if(n<65536){r=new Uint8Array(3);const i=new DataView(r.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{r=new Uint8Array(9);const i=new DataView(r.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}s.data&&typeof s.data!="string"&&(r[0]|=128),e.enqueue(r),e.enqueue(t)})}})}let xn;function an(s){return s.reduce((e,t)=>e+t.length,0)}function on(s,e){if(s[0].length===e)return s.shift();const t=new Uint8Array(e);let n=0;for(let r=0;r<e;r++)t[r]=s[0][n++],n===s[0].length&&(s.shift(),n=0);return s.length&&n<s[0].length&&(s[0]=s[0].slice(n)),t}function Pa(s,e){xn||(xn=new TextDecoder);const t=[];let n=0,r=-1,i=!1;return new TransformStream({transform(a,l){for(t.push(a);;){if(n===0){if(an(t)<1)break;const o=on(t,1);i=(o[0]&128)===128,r=o[0]&127,r<126?n=3:r===126?n=1:n=2}else if(n===1){if(an(t)<2)break;const o=on(t,2);r=new DataView(o.buffer,o.byteOffset,o.length).getUint16(0),n=3}else if(n===2){if(an(t)<8)break;const o=on(t,8),u=new DataView(o.buffer,o.byteOffset,o.length),f=u.getUint32(0);if(f>Math.pow(2,21)-1){l.enqueue(Yn);break}r=f*Math.pow(2,32)+u.getUint32(4),n=3}else{if(an(t)<r)break;const o=on(t,r);l.enqueue(or(i?o:xn.decode(o),e)),n=0}if(r===0||r>s){l.enqueue(Yn);break}}}})}const Ol=4;function Ye(s){if(s)return Fa(s)}function Fa(s){for(var e in Ye.prototype)s[e]=Ye.prototype[e];return s}Ye.prototype.on=Ye.prototype.addEventListener=function(s,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(e),this};Ye.prototype.once=function(s,e){function t(){this.off(s,t),e.apply(this,arguments)}return t.fn=e,this.on(s,t),this};Ye.prototype.off=Ye.prototype.removeListener=Ye.prototype.removeAllListeners=Ye.prototype.removeEventListener=function(s,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+s];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var n,r=0;r<t.length;r++)if(n=t[r],n===e||n.fn===e){t.splice(r,1);break}return t.length===0&&delete this._callbacks["$"+s],this};Ye.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+s],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t){t=t.slice(0);for(var n=0,r=t.length;n<r;++n)t[n].apply(this,e)}return this};Ye.prototype.emitReserved=Ye.prototype.emit;Ye.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};Ye.prototype.hasListeners=function(s){return!!this.listeners(s).length};const In=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Ft=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),xa="arraybuffer";function Nl(s,...e){return e.reduce((t,n)=>(s.hasOwnProperty(n)&&(t[n]=s[n]),t),{})}const La=Ft.setTimeout,Ma=Ft.clearTimeout;function Rn(s,e){e.useNativeTimers?(s.setTimeoutFn=La.bind(Ft),s.clearTimeoutFn=Ma.bind(Ft)):(s.setTimeoutFn=Ft.setTimeout.bind(Ft),s.clearTimeoutFn=Ft.clearTimeout.bind(Ft))}const Ba=1.33;function Ua(s){return typeof s=="string"?ja(s):Math.ceil((s.byteLength||s.size)*Ba)}function ja(s){let e=0,t=0;for(let n=0,r=s.length;n<r;n++)e=s.charCodeAt(n),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(n++,t+=4);return t}function Pl(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function qa(s){let e="";for(let t in s)s.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(s[t]));return e}function za(s){let e={},t=s.split("&");for(let n=0,r=t.length;n<r;n++){let i=t[n].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class Va extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class cr extends Ye{constructor(e){super(),this.writable=!1,Rn(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new Va(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=or(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=qa(e);return t.length?"?"+t:""}}class Ha extends cr{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||t()})),this.writable||(n++,this.once("drain",function(){--n||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};Oa(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Da(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=Pl()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let Fl=!1;try{Fl=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Ga=Fl;function $a(){}class Wa extends Ha{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let n=location.port;n||(n=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(r,i)=>{this.onError("xhr post error",r,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,n)=>{this.onError("xhr poll error",t,n)}),this.pollXhr=e}}class Kt extends Ye{constructor(e,t,n){super(),this.createRequest=e,Rn(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const t=Nl(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let r in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(r)&&n.setRequestHeader(r,this._opts.extraHeaders[r])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var r;n.readyState===3&&((r=this._opts.cookieJar)===null||r===void 0||r.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(r){this.setTimeoutFn(()=>{this._onError(r)},0);return}typeof document<"u"&&(this._index=Kt.requestsCount++,Kt.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=$a,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Kt.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Kt.requestsCount=0;Kt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Or);else if(typeof addEventListener=="function"){const s="onpagehide"in Ft?"pagehide":"unload";addEventListener(s,Or,!1)}}function Or(){for(let s in Kt.requests)Kt.requests.hasOwnProperty(s)&&Kt.requests[s].abort()}const Ya=function(){const s=xl({xdomain:!1});return s&&s.responseType!==null}();class Za extends Wa{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Ya&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Kt(xl,this.uri(),e)}}function xl(s){const e=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Ga))return new XMLHttpRequest}catch{}if(!e)try{return new Ft[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Ll=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Xa extends cr{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=Ll?{}:Nl(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;ar(n,this.supportsBinary,i=>{try{this.doWrite(n,i)}catch{}r&&In(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Pl()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const Ln=Ft.WebSocket||Ft.MozWebSocket;class Ka extends Xa{createSocket(e,t,n){return Ll?new Ln(e,t,n):t?new Ln(e,t):new Ln(e)}doWrite(e,t){this.ws.send(t)}}class Qa extends cr{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=Pa(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),r=Na();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const i=()=>{n.read().then(({done:l,value:o})=>{l||(this.onPacket(o),i())}).catch(l=>{})};i();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;this._writer.write(n).then(()=>{r&&In(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Ja={websocket:Ka,webtransport:Qa,polling:Za},eo=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,to=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Zn(s){if(s.length>8e3)throw"URI too long";const e=s,t=s.indexOf("["),n=s.indexOf("]");t!=-1&&n!=-1&&(s=s.substring(0,t)+s.substring(t,n).replace(/:/g,";")+s.substring(n,s.length));let r=eo.exec(s||""),i={},a=14;for(;a--;)i[to[a]]=r[a]||"";return t!=-1&&n!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=so(i,i.path),i.queryKey=no(i,i.query),i}function so(s,e){const t=/\/{2,9}/g,n=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function no(s,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,r,i){r&&(t[r]=i)}),t}const Xn=typeof addEventListener=="function"&&typeof removeEventListener=="function",vn=[];Xn&&addEventListener("offline",()=>{vn.forEach(s=>s())},!1);class as extends Ye{constructor(e,t){if(super(),this.binaryType=xa,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const n=Zn(e);t.hostname=n.host,t.secure=n.protocol==="https"||n.protocol==="wss",t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=Zn(t.host).host);Rn(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(n=>{const r=n.prototype.name;this.transports.push(r),this._transportsByName[r]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=za(this.opts.query)),Xn&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},vn.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=Ol,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&as.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",as.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let n=0;n<this.writeBuffer.length;n++){const r=this.writeBuffer[n].data;if(r&&(t+=Ua(r)),n>0&&t>this._maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,In(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,r){if(typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(as.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Xn&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=vn.indexOf(this._offlineEventListener);n!==-1&&vn.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}as.protocol=Ol;class ro extends as{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;as.priorWebsocketSuccess=!1;const r=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",p=>{if(!n)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;as.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(f(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=t.name,this.emitReserved("upgradeError",d)}}))};function i(){n||(n=!0,f(),t.close(),t=null)}const a=p=>{const d=new Error("probe error: "+p);d.transport=t.name,i(),this.emitReserved("upgradeError",d)};function l(){a("transport closed")}function o(){a("socket closed")}function u(p){t&&p.name!==t.name&&i()}const f=()=>{t.removeListener("open",r),t.removeListener("error",a),t.removeListener("close",l),this.off("close",o),this.off("upgrading",u)};t.once("open",r),t.once("error",a),t.once("close",l),this.once("close",o),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}let io=class extends ro{constructor(e,t={}){const n=typeof e=="object"?e:t;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(r=>Ja[r]).filter(r=>!!r)),super(e,n)}};function lo(s,e="",t){let n=s;t=t||typeof location<"u"&&location,s==null&&(s=t.protocol+"//"+t.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=t.protocol+s:s=t.host+s),/^(https?|wss?):\/\//.test(s)||(typeof t<"u"?s=t.protocol+"//"+s:s="https://"+s),n=Zn(s)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+e,n.href=n.protocol+"://"+i+(t&&t.port===n.port?"":":"+n.port),n}const ao=typeof ArrayBuffer=="function",oo=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,Ml=Object.prototype.toString,co=typeof Blob=="function"||typeof Blob<"u"&&Ml.call(Blob)==="[object BlobConstructor]",uo=typeof File=="function"||typeof File<"u"&&Ml.call(File)==="[object FileConstructor]";function ur(s){return ao&&(s instanceof ArrayBuffer||oo(s))||co&&s instanceof Blob||uo&&s instanceof File}function _n(s,e){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let t=0,n=s.length;t<n;t++)if(_n(s[t]))return!0;return!1}if(ur(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return _n(s.toJSON(),!0);for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&_n(s[t]))return!0;return!1}function fo(s){const e=[],t=s.data,n=s;return n.data=Kn(t,e),n.attachments=e.length,{packet:n,buffers:e}}function Kn(s,e){if(!s)return s;if(ur(s)){const t={_placeholder:!0,num:e.length};return e.push(s),t}else if(Array.isArray(s)){const t=new Array(s.length);for(let n=0;n<s.length;n++)t[n]=Kn(s[n],e);return t}else if(typeof s=="object"&&!(s instanceof Date)){const t={};for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=Kn(s[n],e));return t}return s}function ho(s,e){return s.data=Qn(s.data,e),delete s.attachments,s}function Qn(s,e){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<e.length)return e[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let t=0;t<s.length;t++)s[t]=Qn(s[t],e);else if(typeof s=="object")for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&(s[t]=Qn(s[t],e));return s}const po=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],go=5;var Ee;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(Ee||(Ee={}));class mo{constructor(e){this.replacer=e}encode(e){return(e.type===Ee.EVENT||e.type===Ee.ACK)&&_n(e)?this.encodeAsBinary({type:e.type===Ee.EVENT?Ee.BINARY_EVENT:Ee.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===Ee.BINARY_EVENT||e.type===Ee.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=fo(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}function Nr(s){return Object.prototype.toString.call(s)==="[object Object]"}class fr extends Ye{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===Ee.BINARY_EVENT;n||t.type===Ee.BINARY_ACK?(t.type=n?Ee.EVENT:Ee.ACK,this.reconstructor=new vo(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(ur(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(Ee[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Ee.BINARY_EVENT||n.type===Ee.BINARY_ACK){const i=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const a=e.substring(i,t);if(a!=Number(a)||e.charAt(t)!=="-")throw new Error("Illegal attachments");n.attachments=Number(a)}if(e.charAt(t+1)==="/"){const i=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););n.nsp=e.substring(i,t)}else n.nsp="/";const r=e.charAt(t+1);if(r!==""&&Number(r)==r){const i=t+1;for(;++t;){const a=e.charAt(t);if(a==null||Number(a)!=a){--t;break}if(t===e.length)break}n.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=this.tryParse(e.substr(t));if(fr.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case Ee.CONNECT:return Nr(t);case Ee.DISCONNECT:return t===void 0;case Ee.CONNECT_ERROR:return typeof t=="string"||Nr(t);case Ee.EVENT:case Ee.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&po.indexOf(t[0])===-1);case Ee.ACK:case Ee.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class vo{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=ho(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const _o=Object.freeze(Object.defineProperty({__proto__:null,Decoder:fr,Encoder:mo,get PacketType(){return Ee},protocol:go},Symbol.toStringTag,{value:"Module"}));function jt(s,e,t){return s.on(e,t),function(){s.off(e,t)}}const bo=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Bl extends Ye{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[jt(e,"open",this.onopen.bind(this)),jt(e,"packet",this.onpacket.bind(this)),jt(e,"error",this.onerror.bind(this)),jt(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,r,i;if(bo.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const a={type:Ee.EVENT,data:t};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const f=this.ids++,p=t.pop();this._registerAckCallback(f,p),a.id=f}const l=(r=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||r===void 0?void 0:r.writable,o=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(o?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var n;const r=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(r===void 0){this.acks[e]=t;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===e&&this.sendBuffer.splice(l,1);t.call(this,new Error("operation has timed out"))},r),a=(...l)=>{this.io.clearTimeoutFn(i),t.apply(this,l)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...t){return new Promise((n,r)=>{const i=(a,l)=>a?r(a):n(l);i.withError=!0,t.push(i),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((r,...i)=>n!==this._queue[0]?void 0:(r!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(r)):(this._queue.shift(),t&&t(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Ee.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Ee.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ee.EVENT:case Ee.BINARY_EVENT:this.onevent(e);break;case Ee.ACK:case Ee.BINARY_ACK:this.onack(e);break;case Ee.DISCONNECT:this.ondisconnect();break;case Ee.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...r){n||(n=!0,t.packet({type:Ee.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ee.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function Fs(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}Fs.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*s);s=Math.floor(e*10)&1?s+t:s-t}return Math.min(s,this.max)|0};Fs.prototype.reset=function(){this.attempts=0};Fs.prototype.setMin=function(s){this.ms=s};Fs.prototype.setMax=function(s){this.max=s};Fs.prototype.setJitter=function(s){this.jitter=s};class Jn extends Ye{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Rn(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((n=t.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Fs({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||_o;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new io(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=jt(t,"open",function(){n.onopen(),e&&e()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),e?e(l):this.maybeReconnectOnOpen()},a=jt(t,"error",i);if(this._timeout!==!1){const l=this._timeout,o=this.setTimeoutFn(()=>{r(),i(new Error("timeout")),t.close()},l);this.opts.autoUnref&&o.unref(),this.subs.push(()=>{this.clearTimeoutFn(o)})}return this.subs.push(r),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(jt(e,"ping",this.onping.bind(this)),jt(e,"data",this.ondata.bind(this)),jt(e,"error",this.onerror.bind(this)),jt(e,"close",this.onclose.bind(this)),jt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){In(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Bl(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t)if(this.nsps[n].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(r=>{r?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",r)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Us={};function bn(s,e){typeof s=="object"&&(e=s,s=void 0),e=e||{};const t=lo(s,e.path||"/socket.io"),n=t.source,r=t.id,i=t.path,a=Us[r]&&i in Us[r].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let o;return l?o=new Jn(n,e):(Us[r]||(Us[r]=new Jn(n,e)),o=Us[r]),t.query&&!e.query&&(e.query=t.queryKey),o.socket(t.path,e)}Object.assign(bn,{Manager:Jn,Socket:Bl,io:bn,connect:bn});let Wt=null;function ko(){Wt||(Wt=new(window.AudioContext||window.webkitAudioContext))}function Ul(){if(ko(),!Wt)return;const s=Wt.createOscillator(),e=Wt.createGain();s.connect(e),e.connect(Wt.destination),s.frequency.value=800,s.type="sine",e.gain.setValueAtTime(.1,Wt.currentTime),e.gain.exponentialRampToValueAtTime(.01,Wt.currentTime+.1),s.start(Wt.currentTime),s.stop(Wt.currentTime+.1)}function yo(s,e){if(e)return;if(!(localStorage.getItem("notificationsEnabled")==="true")){console.log("Notifications disabled in settings");return}if(Notification.permission!=="granted"){console.log("Notification permission not granted:",Notification.permission);return}if(Ul(),!document.hidden){console.log("Page is visible, skipping desktop notification");return}let n="",r="",i="/icon-192.png";switch(s.type){case"text":n=s.user,r=s.text;break;case"gif":n=s.user,r="ðŸŽ¬ Sent a GIF";break;case"file":n=s.user,r=`ðŸ“Ž Sent a file: ${s.fileName}`;break}const a=new Notification(n,{body:r,icon:i,badge:i,tag:`message-${s.id}`,requireInteraction:!1,silent:!1});a.onclick=()=>{window.focus(),a.close()},setTimeout(()=>{a.close()},5e3)}function hr(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Cs=hr();function jl(s){Cs=s}var Xs={exec:()=>null};function Ce(s,e=""){let t=typeof s=="string"?s:s.source,n={replace:(r,i)=>{let a=typeof i=="string"?i:i.source;return a=a.replace(gt.caret,"$1"),t=t.replace(r,a),n},getRegex:()=>new RegExp(t,e)};return n}var wo=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),gt={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:s=>new RegExp(`^( {0,3}${s})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}#`),htmlBeginRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}<(?:[a-z].*>|!--)`,"i")},Eo=/^(?:[ \t]*(?:\n|$))+/,Ao=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,So=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,sn=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,To=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,dr=/(?:[*+-]|\d{1,9}[.)])/,ql=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,zl=Ce(ql).replace(/bull/g,dr).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Co=Ce(ql).replace(/bull/g,dr).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),pr=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Io=/^[^\n]+/,gr=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,Ro=Ce(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",gr).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Do=Ce(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,dr).getRegex(),Dn="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",mr=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Oo=Ce("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",mr).replace("tag",Dn).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Vl=Ce(pr).replace("hr",sn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Dn).getRegex(),No=Ce(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Vl).getRegex(),vr={blockquote:No,code:Ao,def:Ro,fences:So,heading:To,hr:sn,html:Oo,lheading:zl,list:Do,newline:Eo,paragraph:Vl,table:Xs,text:Io},Pr=Ce("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",sn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Dn).getRegex(),Po={...vr,lheading:Co,table:Pr,paragraph:Ce(pr).replace("hr",sn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Pr).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Dn).getRegex()},Fo={...vr,html:Ce(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",mr).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Xs,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ce(pr).replace("hr",sn).replace("heading",` *#{1,6} *[^
]`).replace("lheading",zl).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},xo=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Lo=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Hl=/^( {2,}|\\)\n(?!\s*$)/,Mo=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,On=/[\p{P}\p{S}]/u,_r=/[\s\p{P}\p{S}]/u,Gl=/[^\s\p{P}\p{S}]/u,Bo=Ce(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,_r).getRegex(),$l=/(?!~)[\p{P}\p{S}]/u,Uo=/(?!~)[\s\p{P}\p{S}]/u,jo=/(?:[^\s\p{P}\p{S}]|~)/u,qo=Ce(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",wo?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Wl=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,zo=Ce(Wl,"u").replace(/punct/g,On).getRegex(),Vo=Ce(Wl,"u").replace(/punct/g,$l).getRegex(),Yl="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Ho=Ce(Yl,"gu").replace(/notPunctSpace/g,Gl).replace(/punctSpace/g,_r).replace(/punct/g,On).getRegex(),Go=Ce(Yl,"gu").replace(/notPunctSpace/g,jo).replace(/punctSpace/g,Uo).replace(/punct/g,$l).getRegex(),$o=Ce("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Gl).replace(/punctSpace/g,_r).replace(/punct/g,On).getRegex(),Wo=Ce(/\\(punct)/,"gu").replace(/punct/g,On).getRegex(),Yo=Ce(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Zo=Ce(mr).replace("(?:-->|$)","-->").getRegex(),Xo=Ce("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Zo).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),yn=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Ko=Ce(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",yn).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Zl=Ce(/^!?\[(label)\]\[(ref)\]/).replace("label",yn).replace("ref",gr).getRegex(),Xl=Ce(/^!?\[(ref)\](?:\[\])?/).replace("ref",gr).getRegex(),Qo=Ce("reflink|nolink(?!\\()","g").replace("reflink",Zl).replace("nolink",Xl).getRegex(),Fr=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,br={_backpedal:Xs,anyPunctuation:Wo,autolink:Yo,blockSkip:qo,br:Hl,code:Lo,del:Xs,emStrongLDelim:zo,emStrongRDelimAst:Ho,emStrongRDelimUnd:$o,escape:xo,link:Ko,nolink:Xl,punctuation:Bo,reflink:Zl,reflinkSearch:Qo,tag:Xo,text:Mo,url:Xs},Jo={...br,link:Ce(/^!?\[(label)\]\((.*?)\)/).replace("label",yn).getRegex(),reflink:Ce(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",yn).getRegex()},er={...br,emStrongRDelimAst:Go,emStrongLDelim:Vo,url:Ce(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",Fr).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Ce(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",Fr).getRegex()},ec={...er,br:Ce(Hl).replace("{2,}","*").getRegex(),text:Ce(er.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},cn={normal:vr,gfm:Po,pedantic:Fo},js={normal:br,gfm:er,breaks:ec,pedantic:Jo},tc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},xr=s=>tc[s];function ss(s,e){if(e){if(gt.escapeTest.test(s))return s.replace(gt.escapeReplace,xr)}else if(gt.escapeTestNoEncode.test(s))return s.replace(gt.escapeReplaceNoEncode,xr);return s}function Lr(s){try{s=encodeURI(s).replace(gt.percentDecode,"%")}catch{return null}return s}function Mr(s,e){var i;let t=s.replace(gt.findPipe,(a,l,o)=>{let u=!1,f=l;for(;--f>=0&&o[f]==="\\";)u=!u;return u?"|":" |"}),n=t.split(gt.splitPipe),r=0;if(n[0].trim()||n.shift(),n.length>0&&!((i=n.at(-1))!=null&&i.trim())&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(gt.slashPipe,"|");return n}function qs(s,e,t){let n=s.length;if(n===0)return"";let r=0;for(;r<n&&s.charAt(n-r-1)===e;)r++;return s.slice(0,n-r)}function sc(s,e){if(s.indexOf(e[1])===-1)return-1;let t=0;for(let n=0;n<s.length;n++)if(s[n]==="\\")n++;else if(s[n]===e[0])t++;else if(s[n]===e[1]&&(t--,t<0))return n;return t>0?-2:-1}function Br(s,e,t,n,r){let i=e.href,a=e.title||null,l=s[1].replace(r.other.outputLinkReplace,"$1");n.state.inLink=!0;let o={type:s[0].charAt(0)==="!"?"image":"link",raw:t,href:i,title:a,text:l,tokens:n.inlineTokens(l)};return n.state.inLink=!1,o}function nc(s,e,t){let n=s.match(t.other.indentCodeCompensation);if(n===null)return e;let r=n[1];return e.split(`
`).map(i=>{let a=i.match(t.other.beginningSpace);if(a===null)return i;let[l]=a;return l.length>=r.length?i.slice(r.length):i}).join(`
`)}var wn=class{constructor(s){Ae(this,"options");Ae(this,"rules");Ae(this,"lexer");this.options=s||Cs}space(s){let e=this.rules.block.newline.exec(s);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(s){let e=this.rules.block.code.exec(s);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:qs(t,`
`)}}}fences(s){let e=this.rules.block.fences.exec(s);if(e){let t=e[0],n=nc(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:n}}}heading(s){let e=this.rules.block.heading.exec(s);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let n=qs(t,"#");(this.options.pedantic||!n||this.rules.other.endingSpaceChar.test(n))&&(t=n.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(s){let e=this.rules.block.hr.exec(s);if(e)return{type:"hr",raw:qs(e[0],`
`)}}blockquote(s){let e=this.rules.block.blockquote.exec(s);if(e){let t=qs(e[0],`
`).split(`
`),n="",r="",i=[];for(;t.length>0;){let a=!1,l=[],o;for(o=0;o<t.length;o++)if(this.rules.other.blockquoteStart.test(t[o]))l.push(t[o]),a=!0;else if(!a)l.push(t[o]);else break;t=t.slice(o);let u=l.join(`
`),f=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}
${u}`:u,r=r?`${r}
${f}`:f;let p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(f,i,!0),this.lexer.state.top=p,t.length===0)break;let d=i.at(-1);if((d==null?void 0:d.type)==="code")break;if((d==null?void 0:d.type)==="blockquote"){let m=d,g=m.raw+`
`+t.join(`
`),v=this.blockquote(g);i[i.length-1]=v,n=n.substring(0,n.length-m.raw.length)+v.raw,r=r.substring(0,r.length-m.text.length)+v.text;break}else if((d==null?void 0:d.type)==="list"){let m=d,g=m.raw+`
`+t.join(`
`),v=this.list(g);i[i.length-1]=v,n=n.substring(0,n.length-d.raw.length)+v.raw,r=r.substring(0,r.length-m.raw.length)+v.raw,t=g.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:n,tokens:i,text:r}}}list(s){var t,n;let e=this.rules.block.list.exec(s);if(e){let r=e[1].trim(),i=r.length>1,a={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");let l=this.rules.other.listItemRegex(r),o=!1;for(;s;){let f=!1,p="",d="";if(!(e=l.exec(s))||this.rules.block.hr.test(s))break;p=e[0],s=s.substring(p.length);let m=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,I=>" ".repeat(3*I.length)),g=s.split(`
`,1)[0],v=!m.trim(),A=0;if(this.options.pedantic?(A=2,d=m.trimStart()):v?A=e[1].length+1:(A=e[2].search(this.rules.other.nonSpaceChar),A=A>4?1:A,d=m.slice(A),A+=e[1].length),v&&this.rules.other.blankLine.test(g)&&(p+=g+`
`,s=s.substring(g.length+1),f=!0),!f){let I=this.rules.other.nextBulletRegex(A),y=this.rules.other.hrRegex(A),E=this.rules.other.fencesBeginRegex(A),w=this.rules.other.headingBeginRegex(A),T=this.rules.other.htmlBeginRegex(A);for(;s;){let C=s.split(`
`,1)[0],S;if(g=C,this.options.pedantic?(g=g.replace(this.rules.other.listReplaceNesting,"  "),S=g):S=g.replace(this.rules.other.tabCharGlobal,"    "),E.test(g)||w.test(g)||T.test(g)||I.test(g)||y.test(g))break;if(S.search(this.rules.other.nonSpaceChar)>=A||!g.trim())d+=`
`+S.slice(A);else{if(v||m.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||E.test(m)||w.test(m)||y.test(m))break;d+=`
`+g}!v&&!g.trim()&&(v=!0),p+=C+`
`,s=s.substring(C.length+1),m=S.slice(A)}}a.loose||(o?a.loose=!0:this.rules.other.doubleBlankLine.test(p)&&(o=!0)),a.items.push({type:"list_item",raw:p,task:!!this.options.gfm&&this.rules.other.listIsTask.test(d),loose:!1,text:d,tokens:[]}),a.raw+=p}let u=a.items.at(-1);if(u)u.raw=u.raw.trimEnd(),u.text=u.text.trimEnd();else return;a.raw=a.raw.trimEnd();for(let f of a.items){if(this.lexer.state.top=!1,f.tokens=this.lexer.blockTokens(f.text,[]),f.task){if(f.text=f.text.replace(this.rules.other.listReplaceTask,""),((t=f.tokens[0])==null?void 0:t.type)==="text"||((n=f.tokens[0])==null?void 0:n.type)==="paragraph"){f.tokens[0].raw=f.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),f.tokens[0].text=f.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let d=this.lexer.inlineQueue.length-1;d>=0;d--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[d].src)){this.lexer.inlineQueue[d].src=this.lexer.inlineQueue[d].src.replace(this.rules.other.listReplaceTask,"");break}}let p=this.rules.other.listTaskCheckbox.exec(f.raw);if(p){let d={type:"checkbox",raw:p[0]+" ",checked:p[0]!=="[ ]"};f.checked=d.checked,a.loose?f.tokens[0]&&["paragraph","text"].includes(f.tokens[0].type)&&"tokens"in f.tokens[0]&&f.tokens[0].tokens?(f.tokens[0].raw=d.raw+f.tokens[0].raw,f.tokens[0].text=d.raw+f.tokens[0].text,f.tokens[0].tokens.unshift(d)):f.tokens.unshift({type:"paragraph",raw:d.raw,text:d.raw,tokens:[d]}):f.tokens.unshift(d)}}if(!a.loose){let p=f.tokens.filter(m=>m.type==="space"),d=p.length>0&&p.some(m=>this.rules.other.anyLine.test(m.raw));a.loose=d}}if(a.loose)for(let f of a.items){f.loose=!0;for(let p of f.tokens)p.type==="text"&&(p.type="paragraph")}return a}}html(s){let e=this.rules.block.html.exec(s);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(s){let e=this.rules.block.def.exec(s);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:n,title:r}}}table(s){var a;let e=this.rules.block.table.exec(s);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let t=Mr(e[1]),n=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=(a=e[3])!=null&&a.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===n.length){for(let l of n)this.rules.other.tableAlignRight.test(l)?i.align.push("right"):this.rules.other.tableAlignCenter.test(l)?i.align.push("center"):this.rules.other.tableAlignLeft.test(l)?i.align.push("left"):i.align.push(null);for(let l=0;l<t.length;l++)i.header.push({text:t[l],tokens:this.lexer.inline(t[l]),header:!0,align:i.align[l]});for(let l of r)i.rows.push(Mr(l,i.header.length).map((o,u)=>({text:o,tokens:this.lexer.inline(o),header:!1,align:i.align[u]})));return i}}lheading(s){let e=this.rules.block.lheading.exec(s);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(s){let e=this.rules.block.paragraph.exec(s);if(e){let t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(s){let e=this.rules.block.text.exec(s);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(s){let e=this.rules.inline.escape.exec(s);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(s){let e=this.rules.inline.tag.exec(s);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(s){let e=this.rules.inline.link.exec(s);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let i=qs(t.slice(0,-1),"\\");if((t.length-i.length)%2===0)return}else{let i=sc(e[2],"()");if(i===-2)return;if(i>-1){let a=(e[0].indexOf("!")===0?5:4)+e[1].length+i;e[2]=e[2].substring(0,i),e[0]=e[0].substring(0,a).trim(),e[3]=""}}let n=e[2],r="";if(this.options.pedantic){let i=this.rules.other.pedanticHrefTitle.exec(n);i&&(n=i[1],r=i[3])}else r=e[3]?e[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?n=n.slice(1):n=n.slice(1,-1)),Br(e,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(s,e){let t;if((t=this.rules.inline.reflink.exec(s))||(t=this.rules.inline.nolink.exec(s))){let n=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=e[n.toLowerCase()];if(!r){let i=t[0].charAt(0);return{type:"text",raw:i,text:i}}return Br(t,r,t[0],this.lexer,this.rules)}}emStrong(s,e,t=""){let n=this.rules.inline.emStrongLDelim.exec(s);if(!(!n||n[3]&&t.match(this.rules.other.unicodeAlphaNumeric))&&(!(n[1]||n[2])||!t||this.rules.inline.punctuation.exec(t))){let r=[...n[0]].length-1,i,a,l=r,o=0,u=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,e=e.slice(-1*s.length+r);(n=u.exec(e))!=null;){if(i=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!i)continue;if(a=[...i].length,n[3]||n[4]){l+=a;continue}else if((n[5]||n[6])&&r%3&&!((r+a)%3)){o+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+o);let f=[...n[0]][0].length,p=s.slice(0,r+n.index+f+a);if(Math.min(r,a)%2){let m=p.slice(1,-1);return{type:"em",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}let d=p.slice(2,-2);return{type:"strong",raw:p,text:d,tokens:this.lexer.inlineTokens(d)}}}}codespan(s){let e=this.rules.inline.code.exec(s);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),n=this.rules.other.nonSpaceChar.test(t),r=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return n&&r&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(s){let e=this.rules.inline.br.exec(s);if(e)return{type:"br",raw:e[0]}}del(s){let e=this.rules.inline.del.exec(s);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(s){let e=this.rules.inline.autolink.exec(s);if(e){let t,n;return e[2]==="@"?(t=e[1],n="mailto:"+t):(t=e[1],n=t),{type:"link",raw:e[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}url(s){var t;let e;if(e=this.rules.inline.url.exec(s)){let n,r;if(e[2]==="@")n=e[0],r="mailto:"+n;else{let i;do i=e[0],e[0]=((t=this.rules.inline._backpedal.exec(e[0]))==null?void 0:t[0])??"";while(i!==e[0]);n=e[0],e[1]==="www."?r="http://"+e[0]:r=e[0]}return{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(s){let e=this.rules.inline.text.exec(s);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},zt=class tr{constructor(e){Ae(this,"tokens");Ae(this,"options");Ae(this,"state");Ae(this,"inlineQueue");Ae(this,"tokenizer");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Cs,this.options.tokenizer=this.options.tokenizer||new wn,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:gt,block:cn.normal,inline:js.normal};this.options.pedantic?(t.block=cn.pedantic,t.inline=js.pedantic):this.options.gfm&&(t.block=cn.gfm,this.options.breaks?t.inline=js.breaks:t.inline=js.gfm),this.tokenizer.rules=t}static get rules(){return{block:cn,inline:js}}static lex(e,t){return new tr(t).lex(e)}static lexInline(e,t){return new tr(t).inlineTokens(e)}lex(e){e=e.replace(gt.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){var r,i,a;for(this.options.pedantic&&(e=e.replace(gt.tabCharGlobal,"    ").replace(gt.spaceLine,""));e;){let l;if((i=(r=this.options.extensions)==null?void 0:r.block)!=null&&i.some(u=>(l=u.call({lexer:this},e,t))?(e=e.substring(l.raw.length),t.push(l),!0):!1))continue;if(l=this.tokenizer.space(e)){e=e.substring(l.raw.length);let u=t.at(-1);l.raw.length===1&&u!==void 0?u.raw+=`
`:t.push(l);continue}if(l=this.tokenizer.code(e)){e=e.substring(l.raw.length);let u=t.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+l.raw,u.text+=`
`+l.text,this.inlineQueue.at(-1).src=u.text):t.push(l);continue}if(l=this.tokenizer.fences(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.heading(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.hr(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.blockquote(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.list(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.html(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.def(e)){e=e.substring(l.raw.length);let u=t.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+l.raw,u.text+=`
`+l.raw,this.inlineQueue.at(-1).src=u.text):this.tokens.links[l.tag]||(this.tokens.links[l.tag]={href:l.href,title:l.title},t.push(l));continue}if(l=this.tokenizer.table(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.lheading(e)){e=e.substring(l.raw.length),t.push(l);continue}let o=e;if((a=this.options.extensions)!=null&&a.startBlock){let u=1/0,f=e.slice(1),p;this.options.extensions.startBlock.forEach(d=>{p=d.call({lexer:this},f),typeof p=="number"&&p>=0&&(u=Math.min(u,p))}),u<1/0&&u>=0&&(o=e.substring(0,u+1))}if(this.state.top&&(l=this.tokenizer.paragraph(o))){let u=t.at(-1);n&&(u==null?void 0:u.type)==="paragraph"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+l.raw,u.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):t.push(l),n=o.length!==e.length,e=e.substring(l.raw.length);continue}if(l=this.tokenizer.text(e)){e=e.substring(l.raw.length);let u=t.at(-1);(u==null?void 0:u.type)==="text"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+l.raw,u.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):t.push(l);continue}if(e){let u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var o,u,f,p,d;let n=e,r=null;if(this.tokens.links){let m=Object.keys(this.tokens.links);if(m.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)m.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,r.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let i;for(;(r=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)i=r[2]?r[2].length:0,n=n.slice(0,r.index+i)+"["+"a".repeat(r[0].length-i-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);n=((u=(o=this.options.hooks)==null?void 0:o.emStrongMask)==null?void 0:u.call({lexer:this},n))??n;let a=!1,l="";for(;e;){a||(l=""),a=!1;let m;if((p=(f=this.options.extensions)==null?void 0:f.inline)!=null&&p.some(v=>(m=v.call({lexer:this},e,t))?(e=e.substring(m.raw.length),t.push(m),!0):!1))continue;if(m=this.tokenizer.escape(e)){e=e.substring(m.raw.length),t.push(m);continue}if(m=this.tokenizer.tag(e)){e=e.substring(m.raw.length),t.push(m);continue}if(m=this.tokenizer.link(e)){e=e.substring(m.raw.length),t.push(m);continue}if(m=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(m.raw.length);let v=t.at(-1);m.type==="text"&&(v==null?void 0:v.type)==="text"?(v.raw+=m.raw,v.text+=m.text):t.push(m);continue}if(m=this.tokenizer.emStrong(e,n,l)){e=e.substring(m.raw.length),t.push(m);continue}if(m=this.tokenizer.codespan(e)){e=e.substring(m.raw.length),t.push(m);continue}if(m=this.tokenizer.br(e)){e=e.substring(m.raw.length),t.push(m);continue}if(m=this.tokenizer.del(e)){e=e.substring(m.raw.length),t.push(m);continue}if(m=this.tokenizer.autolink(e)){e=e.substring(m.raw.length),t.push(m);continue}if(!this.state.inLink&&(m=this.tokenizer.url(e))){e=e.substring(m.raw.length),t.push(m);continue}let g=e;if((d=this.options.extensions)!=null&&d.startInline){let v=1/0,A=e.slice(1),I;this.options.extensions.startInline.forEach(y=>{I=y.call({lexer:this},A),typeof I=="number"&&I>=0&&(v=Math.min(v,I))}),v<1/0&&v>=0&&(g=e.substring(0,v+1))}if(m=this.tokenizer.inlineText(g)){e=e.substring(m.raw.length),m.raw.slice(-1)!=="_"&&(l=m.raw.slice(-1)),a=!0;let v=t.at(-1);(v==null?void 0:v.type)==="text"?(v.raw+=m.raw,v.text+=m.text):t.push(m);continue}if(e){let v="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(v);break}else throw new Error(v)}}return t}},En=class{constructor(s){Ae(this,"options");Ae(this,"parser");this.options=s||Cs}space(s){return""}code({text:s,lang:e,escaped:t}){var i;let n=(i=(e||"").match(gt.notSpaceStart))==null?void 0:i[0],r=s.replace(gt.endingNewline,"")+`
`;return n?'<pre><code class="language-'+ss(n)+'">'+(t?r:ss(r,!0))+`</code></pre>
`:"<pre><code>"+(t?r:ss(r,!0))+`</code></pre>
`}blockquote({tokens:s}){return`<blockquote>
${this.parser.parse(s)}</blockquote>
`}html({text:s}){return s}def(s){return""}heading({tokens:s,depth:e}){return`<h${e}>${this.parser.parseInline(s)}</h${e}>
`}hr(s){return`<hr>
`}list(s){let e=s.ordered,t=s.start,n="";for(let a=0;a<s.items.length;a++){let l=s.items[a];n+=this.listitem(l)}let r=e?"ol":"ul",i=e&&t!==1?' start="'+t+'"':"";return"<"+r+i+`>
`+n+"</"+r+`>
`}listitem(s){return`<li>${this.parser.parse(s.tokens)}</li>
`}checkbox({checked:s}){return"<input "+(s?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:s}){return`<p>${this.parser.parseInline(s)}</p>
`}table(s){let e="",t="";for(let r=0;r<s.header.length;r++)t+=this.tablecell(s.header[r]);e+=this.tablerow({text:t});let n="";for(let r=0;r<s.rows.length;r++){let i=s.rows[r];t="";for(let a=0;a<i.length;a++)t+=this.tablecell(i[a]);n+=this.tablerow({text:t})}return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+n+`</table>
`}tablerow({text:s}){return`<tr>
${s}</tr>
`}tablecell(s){let e=this.parser.parseInline(s.tokens),t=s.header?"th":"td";return(s.align?`<${t} align="${s.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:s}){return`<strong>${this.parser.parseInline(s)}</strong>`}em({tokens:s}){return`<em>${this.parser.parseInline(s)}</em>`}codespan({text:s}){return`<code>${ss(s,!0)}</code>`}br(s){return"<br>"}del({tokens:s}){return`<del>${this.parser.parseInline(s)}</del>`}link({href:s,title:e,tokens:t}){let n=this.parser.parseInline(t),r=Lr(s);if(r===null)return n;s=r;let i='<a href="'+s+'"';return e&&(i+=' title="'+ss(e)+'"'),i+=">"+n+"</a>",i}image({href:s,title:e,text:t,tokens:n}){n&&(t=this.parser.parseInline(n,this.parser.textRenderer));let r=Lr(s);if(r===null)return ss(t);s=r;let i=`<img src="${s}" alt="${t}"`;return e&&(i+=` title="${ss(e)}"`),i+=">",i}text(s){return"tokens"in s&&s.tokens?this.parser.parseInline(s.tokens):"escaped"in s&&s.escaped?s.text:ss(s.text)}},kr=class{strong({text:s}){return s}em({text:s}){return s}codespan({text:s}){return s}del({text:s}){return s}html({text:s}){return s}text({text:s}){return s}link({text:s}){return""+s}image({text:s}){return""+s}br(){return""}checkbox({raw:s}){return s}},Vt=class sr{constructor(e){Ae(this,"options");Ae(this,"renderer");Ae(this,"textRenderer");this.options=e||Cs,this.options.renderer=this.options.renderer||new En,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new kr}static parse(e,t){return new sr(t).parse(e)}static parseInline(e,t){return new sr(t).parseInline(e)}parse(e){var n,r;let t="";for(let i=0;i<e.length;i++){let a=e[i];if((r=(n=this.options.extensions)==null?void 0:n.renderers)!=null&&r[a.type]){let o=a,u=this.options.extensions.renderers[o.type].call({parser:this},o);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(o.type)){t+=u||"";continue}}let l=a;switch(l.type){case"space":{t+=this.renderer.space(l);break}case"hr":{t+=this.renderer.hr(l);break}case"heading":{t+=this.renderer.heading(l);break}case"code":{t+=this.renderer.code(l);break}case"table":{t+=this.renderer.table(l);break}case"blockquote":{t+=this.renderer.blockquote(l);break}case"list":{t+=this.renderer.list(l);break}case"checkbox":{t+=this.renderer.checkbox(l);break}case"html":{t+=this.renderer.html(l);break}case"def":{t+=this.renderer.def(l);break}case"paragraph":{t+=this.renderer.paragraph(l);break}case"text":{t+=this.renderer.text(l);break}default:{let o='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return t}parseInline(e,t=this.renderer){var r,i;let n="";for(let a=0;a<e.length;a++){let l=e[a];if((i=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&i[l.type]){let u=this.options.extensions.renderers[l.type].call({parser:this},l);if(u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(l.type)){n+=u||"";continue}}let o=l;switch(o.type){case"escape":{n+=t.text(o);break}case"html":{n+=t.html(o);break}case"link":{n+=t.link(o);break}case"image":{n+=t.image(o);break}case"checkbox":{n+=t.checkbox(o);break}case"strong":{n+=t.strong(o);break}case"em":{n+=t.em(o);break}case"codespan":{n+=t.codespan(o);break}case"br":{n+=t.br(o);break}case"del":{n+=t.del(o);break}case"text":{n+=t.text(o);break}default:{let u='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return n}},gn,Ys=(gn=class{constructor(s){Ae(this,"options");Ae(this,"block");this.options=s||Cs}preprocess(s){return s}postprocess(s){return s}processAllTokens(s){return s}emStrongMask(s){return s}provideLexer(){return this.block?zt.lex:zt.lexInline}provideParser(){return this.block?Vt.parse:Vt.parseInline}},Ae(gn,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),Ae(gn,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),gn),rc=class{constructor(...s){Ae(this,"defaults",hr());Ae(this,"options",this.setOptions);Ae(this,"parse",this.parseMarkdown(!0));Ae(this,"parseInline",this.parseMarkdown(!1));Ae(this,"Parser",Vt);Ae(this,"Renderer",En);Ae(this,"TextRenderer",kr);Ae(this,"Lexer",zt);Ae(this,"Tokenizer",wn);Ae(this,"Hooks",Ys);this.use(...s)}walkTokens(s,e){var n,r;let t=[];for(let i of s)switch(t=t.concat(e.call(this,i)),i.type){case"table":{let a=i;for(let l of a.header)t=t.concat(this.walkTokens(l.tokens,e));for(let l of a.rows)for(let o of l)t=t.concat(this.walkTokens(o.tokens,e));break}case"list":{let a=i;t=t.concat(this.walkTokens(a.items,e));break}default:{let a=i;(r=(n=this.defaults.extensions)==null?void 0:n.childTokens)!=null&&r[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{let o=a[l].flat(1/0);t=t.concat(this.walkTokens(o,e))}):a.tokens&&(t=t.concat(this.walkTokens(a.tokens,e)))}}return t}use(...s){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return s.forEach(t=>{let n={...t};if(n.async=this.defaults.async||n.async||!1,t.extensions&&(t.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){let i=e.renderers[r.name];i?e.renderers[r.name]=function(...a){let l=r.renderer.apply(this,a);return l===!1&&(l=i.apply(this,a)),l}:e.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let i=e[r.level];i?i.unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&(r.level==="block"?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:r.level==="inline"&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),n.extensions=e),t.renderer){let r=this.defaults.renderer||new En(this.defaults);for(let i in t.renderer){if(!(i in r))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;let a=i,l=t.renderer[a],o=r[a];r[a]=(...u)=>{let f=l.apply(r,u);return f===!1&&(f=o.apply(r,u)),f||""}}n.renderer=r}if(t.tokenizer){let r=this.defaults.tokenizer||new wn(this.defaults);for(let i in t.tokenizer){if(!(i in r))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;let a=i,l=t.tokenizer[a],o=r[a];r[a]=(...u)=>{let f=l.apply(r,u);return f===!1&&(f=o.apply(r,u)),f}}n.tokenizer=r}if(t.hooks){let r=this.defaults.hooks||new Ys;for(let i in t.hooks){if(!(i in r))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;let a=i,l=t.hooks[a],o=r[a];Ys.passThroughHooks.has(i)?r[a]=u=>{if(this.defaults.async&&Ys.passThroughHooksRespectAsync.has(i))return(async()=>{let p=await l.call(r,u);return o.call(r,p)})();let f=l.call(r,u);return o.call(r,f)}:r[a]=(...u)=>{if(this.defaults.async)return(async()=>{let p=await l.apply(r,u);return p===!1&&(p=await o.apply(r,u)),p})();let f=l.apply(r,u);return f===!1&&(f=o.apply(r,u)),f}}n.hooks=r}if(t.walkTokens){let r=this.defaults.walkTokens,i=t.walkTokens;n.walkTokens=function(a){let l=[];return l.push(i.call(this,a)),r&&(l=l.concat(r.call(this,a))),l}}this.defaults={...this.defaults,...n}}),this}setOptions(s){return this.defaults={...this.defaults,...s},this}lexer(s,e){return zt.lex(s,e??this.defaults)}parser(s,e){return Vt.parse(s,e??this.defaults)}parseMarkdown(s){return(e,t)=>{let n={...t},r={...this.defaults,...n},i=this.onError(!!r.silent,!!r.async);if(this.defaults.async===!0&&n.async===!1)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(r.hooks&&(r.hooks.options=r,r.hooks.block=s),r.async)return(async()=>{let a=r.hooks?await r.hooks.preprocess(e):e,l=await(r.hooks?await r.hooks.provideLexer():s?zt.lex:zt.lexInline)(a,r),o=r.hooks?await r.hooks.processAllTokens(l):l;r.walkTokens&&await Promise.all(this.walkTokens(o,r.walkTokens));let u=await(r.hooks?await r.hooks.provideParser():s?Vt.parse:Vt.parseInline)(o,r);return r.hooks?await r.hooks.postprocess(u):u})().catch(i);try{r.hooks&&(e=r.hooks.preprocess(e));let a=(r.hooks?r.hooks.provideLexer():s?zt.lex:zt.lexInline)(e,r);r.hooks&&(a=r.hooks.processAllTokens(a)),r.walkTokens&&this.walkTokens(a,r.walkTokens);let l=(r.hooks?r.hooks.provideParser():s?Vt.parse:Vt.parseInline)(a,r);return r.hooks&&(l=r.hooks.postprocess(l)),l}catch(a){return i(a)}}}onError(s,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,s){let n="<p>An error occurred:</p><pre>"+ss(t.message+"",!0)+"</pre>";return e?Promise.resolve(n):n}if(e)return Promise.reject(t);throw t}}},ys=new rc;function Re(s,e){return ys.parse(s,e)}Re.options=Re.setOptions=function(s){return ys.setOptions(s),Re.defaults=ys.defaults,jl(Re.defaults),Re};Re.getDefaults=hr;Re.defaults=Cs;Re.use=function(...s){return ys.use(...s),Re.defaults=ys.defaults,jl(Re.defaults),Re};Re.walkTokens=function(s,e){return ys.walkTokens(s,e)};Re.parseInline=ys.parseInline;Re.Parser=Vt;Re.parser=Vt.parse;Re.Renderer=En;Re.TextRenderer=kr;Re.Lexer=zt;Re.lexer=zt.lex;Re.Tokenizer=wn;Re.Hooks=Ys;Re.parse=Re;Re.options;Re.setOptions;Re.use;Re.walkTokens;Re.parseInline;Vt.parse;zt.lex;var Ur=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ic(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Kl={exports:{}};(function(s){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var t=function(n){var r=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,a={},l={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function y(E){return E instanceof o?new o(E.type,y(E.content),E.alias):Array.isArray(E)?E.map(y):E.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(y){return Object.prototype.toString.call(y).slice(8,-1)},objId:function(y){return y.__id||Object.defineProperty(y,"__id",{value:++i}),y.__id},clone:function y(E,w){w=w||{};var T,C;switch(l.util.type(E)){case"Object":if(C=l.util.objId(E),w[C])return w[C];T={},w[C]=T;for(var S in E)E.hasOwnProperty(S)&&(T[S]=y(E[S],w));return T;case"Array":return C=l.util.objId(E),w[C]?w[C]:(T=[],w[C]=T,E.forEach(function(P,O){T[O]=y(P,w)}),T);default:return E}},getLanguage:function(y){for(;y;){var E=r.exec(y.className);if(E)return E[1].toLowerCase();y=y.parentElement}return"none"},setLanguage:function(y,E){y.className=y.className.replace(RegExp(r,"gi"),""),y.classList.add("language-"+E)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(T){var y=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(T.stack)||[])[1];if(y){var E=document.getElementsByTagName("script");for(var w in E)if(E[w].src==y)return E[w]}return null}},isActive:function(y,E,w){for(var T="no-"+E;y;){var C=y.classList;if(C.contains(E))return!0;if(C.contains(T))return!1;y=y.parentElement}return!!w}},languages:{plain:a,plaintext:a,text:a,txt:a,extend:function(y,E){var w=l.util.clone(l.languages[y]);for(var T in E)w[T]=E[T];return w},insertBefore:function(y,E,w,T){T=T||l.languages;var C=T[y],S={};for(var P in C)if(C.hasOwnProperty(P)){if(P==E)for(var O in w)w.hasOwnProperty(O)&&(S[O]=w[O]);w.hasOwnProperty(P)||(S[P]=C[P])}var N=T[y];return T[y]=S,l.languages.DFS(l.languages,function(R,F){F===N&&R!=y&&(this[R]=S)}),S},DFS:function y(E,w,T,C){C=C||{};var S=l.util.objId;for(var P in E)if(E.hasOwnProperty(P)){w.call(E,P,E[P],T||P);var O=E[P],N=l.util.type(O);N==="Object"&&!C[S(O)]?(C[S(O)]=!0,y(O,w,null,C)):N==="Array"&&!C[S(O)]&&(C[S(O)]=!0,y(O,w,P,C))}}},plugins:{},highlightAll:function(y,E){l.highlightAllUnder(document,y,E)},highlightAllUnder:function(y,E,w){var T={callback:w,container:y,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};l.hooks.run("before-highlightall",T),T.elements=Array.prototype.slice.apply(T.container.querySelectorAll(T.selector)),l.hooks.run("before-all-elements-highlight",T);for(var C=0,S;S=T.elements[C++];)l.highlightElement(S,E===!0,T.callback)},highlightElement:function(y,E,w){var T=l.util.getLanguage(y),C=l.languages[T];l.util.setLanguage(y,T);var S=y.parentElement;S&&S.nodeName.toLowerCase()==="pre"&&l.util.setLanguage(S,T);var P=y.textContent,O={element:y,language:T,grammar:C,code:P};function N(F){O.highlightedCode=F,l.hooks.run("before-insert",O),O.element.innerHTML=O.highlightedCode,l.hooks.run("after-highlight",O),l.hooks.run("complete",O),w&&w.call(O.element)}if(l.hooks.run("before-sanity-check",O),S=O.element.parentElement,S&&S.nodeName.toLowerCase()==="pre"&&!S.hasAttribute("tabindex")&&S.setAttribute("tabindex","0"),!O.code){l.hooks.run("complete",O),w&&w.call(O.element);return}if(l.hooks.run("before-highlight",O),!O.grammar){N(l.util.encode(O.code));return}if(E&&n.Worker){var R=new Worker(l.filename);R.onmessage=function(F){N(F.data)},R.postMessage(JSON.stringify({language:O.language,code:O.code,immediateClose:!0}))}else N(l.highlight(O.code,O.grammar,O.language))},highlight:function(y,E,w){var T={code:y,grammar:E,language:w};if(l.hooks.run("before-tokenize",T),!T.grammar)throw new Error('The language "'+T.language+'" has no grammar.');return T.tokens=l.tokenize(T.code,T.grammar),l.hooks.run("after-tokenize",T),o.stringify(l.util.encode(T.tokens),T.language)},tokenize:function(y,E){var w=E.rest;if(w){for(var T in w)E[T]=w[T];delete E.rest}var C=new p;return d(C,C.head,y),f(y,C,E,C.head,0),g(C)},hooks:{all:{},add:function(y,E){var w=l.hooks.all;w[y]=w[y]||[],w[y].push(E)},run:function(y,E){var w=l.hooks.all[y];if(!(!w||!w.length))for(var T=0,C;C=w[T++];)C(E)}},Token:o};n.Prism=l;function o(y,E,w,T){this.type=y,this.content=E,this.alias=w,this.length=(T||"").length|0}o.stringify=function y(E,w){if(typeof E=="string")return E;if(Array.isArray(E)){var T="";return E.forEach(function(N){T+=y(N,w)}),T}var C={type:E.type,content:y(E.content,w),tag:"span",classes:["token",E.type],attributes:{},language:w},S=E.alias;S&&(Array.isArray(S)?Array.prototype.push.apply(C.classes,S):C.classes.push(S)),l.hooks.run("wrap",C);var P="";for(var O in C.attributes)P+=" "+O+'="'+(C.attributes[O]||"").replace(/"/g,"&quot;")+'"';return"<"+C.tag+' class="'+C.classes.join(" ")+'"'+P+">"+C.content+"</"+C.tag+">"};function u(y,E,w,T){y.lastIndex=E;var C=y.exec(w);if(C&&T&&C[1]){var S=C[1].length;C.index+=S,C[0]=C[0].slice(S)}return C}function f(y,E,w,T,C,S){for(var P in w)if(!(!w.hasOwnProperty(P)||!w[P])){var O=w[P];O=Array.isArray(O)?O:[O];for(var N=0;N<O.length;++N){if(S&&S.cause==P+","+N)return;var R=O[N],F=R.inside,B=!!R.lookbehind,U=!!R.greedy,G=R.alias;if(U&&!R.pattern.global){var q=R.pattern.toString().match(/[imsuy]*$/)[0];R.pattern=RegExp(R.pattern.source,q+"g")}for(var H=R.pattern||R,J=T.next,j=C;J!==E.tail&&!(S&&j>=S.reach);j+=J.value.length,J=J.next){var V=J.value;if(E.length>y.length)return;if(!(V instanceof o)){var Z=1,X;if(U){if(X=u(H,j,y,B),!X||X.index>=y.length)break;var me=X.index,ie=X.index+X[0].length,he=j;for(he+=J.value.length;me>=he;)J=J.next,he+=J.value.length;if(he-=J.value.length,j=he,J.value instanceof o)continue;for(var re=J;re!==E.tail&&(he<ie||typeof re.value=="string");re=re.next)Z++,he+=re.value.length;Z--,V=y.slice(j,he),X.index-=j}else if(X=u(H,0,V,B),!X)continue;var me=X.index,de=X[0],se=V.slice(0,me),K=V.slice(me+de.length),ue=j+V.length;S&&ue>S.reach&&(S.reach=ue);var fe=J.prev;se&&(fe=d(E,fe,se),j+=se.length),m(E,fe,Z);var ve=new o(P,F?l.tokenize(de,F):de,G,de);if(J=d(E,fe,ve),K&&d(E,J,K),Z>1){var ce={cause:P+","+N,reach:ue};f(y,E,w,J.prev,j,ce),S&&ce.reach>S.reach&&(S.reach=ce.reach)}}}}}}function p(){var y={value:null,prev:null,next:null},E={value:null,prev:y,next:null};y.next=E,this.head=y,this.tail=E,this.length=0}function d(y,E,w){var T=E.next,C={value:w,prev:E,next:T};return E.next=C,T.prev=C,y.length++,C}function m(y,E,w){for(var T=E.next,C=0;C<w&&T!==y.tail;C++)T=T.next;E.next=T,T.prev=E,y.length-=C}function g(y){for(var E=[],w=y.head.next;w!==y.tail;)E.push(w.value),w=w.next;return E}if(!n.document)return n.addEventListener&&(l.disableWorkerMessageHandler||n.addEventListener("message",function(y){var E=JSON.parse(y.data),w=E.language,T=E.code,C=E.immediateClose;n.postMessage(l.highlight(T,l.languages[w],w)),C&&n.close()},!1)),l;var v=l.util.currentScript();v&&(l.filename=v.src,v.hasAttribute("data-manual")&&(l.manual=!0));function A(){l.manual||l.highlightAll()}if(!l.manual){var I=document.readyState;I==="loading"||I==="interactive"&&v&&v.defer?document.addEventListener("DOMContentLoaded",A):window.requestAnimationFrame?window.requestAnimationFrame(A):window.setTimeout(A,16)}return l}(e);s.exports&&(s.exports=t),typeof Ur<"u"&&(Ur.Prism=t),t.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.languages.markup.doctype.inside["internal-subset"].inside=t.languages.markup,t.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(r,i){var a={};a["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[i]},a.cdata=/^<!\[CDATA\[|\]\]>$/i;var l={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:a}};l["language-"+i]={pattern:/[\s\S]+/,inside:t.languages[i]};var o={};o[r]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return r}),"i"),lookbehind:!0,greedy:!0,inside:l},t.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(t.languages.markup.tag,"addAttribute",{value:function(n,r){t.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[r,"language-"+r],inside:t.languages[r]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.xml=t.languages.extend("markup",{}),t.languages.ssml=t.languages.xml,t.languages.atom=t.languages.xml,t.languages.rss=t.languages.xml,function(n){var r=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+r.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+r.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+r.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+r.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:r,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var i=n.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:t.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),t.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),t.languages.markup&&(t.languages.markup.tag.addInlined("script","javascript"),t.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),t.languages.js=t.languages.javascript,function(){if(typeof t>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loadingâ€¦",r=function(v,A){return"âœ– Error "+v+" while fetching file: "+A},i="âœ– Error: File does not exist or is empty",a={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},l="data-src-status",o="loading",u="loaded",f="failed",p="pre[data-src]:not(["+l+'="'+u+'"]):not(['+l+'="'+o+'"])';function d(v,A,I){var y=new XMLHttpRequest;y.open("GET",v,!0),y.onreadystatechange=function(){y.readyState==4&&(y.status<400&&y.responseText?A(y.responseText):y.status>=400?I(r(y.status,y.statusText)):I(i))},y.send(null)}function m(v){var A=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(v||"");if(A){var I=Number(A[1]),y=A[2],E=A[3];return y?E?[I,Number(E)]:[I,void 0]:[I,I]}}t.hooks.add("before-highlightall",function(v){v.selector+=", "+p}),t.hooks.add("before-sanity-check",function(v){var A=v.element;if(A.matches(p)){v.code="",A.setAttribute(l,o);var I=A.appendChild(document.createElement("CODE"));I.textContent=n;var y=A.getAttribute("data-src"),E=v.language;if(E==="none"){var w=(/\.(\w+)$/.exec(y)||[,"none"])[1];E=a[w]||w}t.util.setLanguage(I,E),t.util.setLanguage(A,E);var T=t.plugins.autoloader;T&&T.loadLanguages(E),d(y,function(C){A.setAttribute(l,u);var S=m(A.getAttribute("data-range"));if(S){var P=C.split(/\r\n?|\n/g),O=S[0],N=S[1]==null?P.length:S[1];O<0&&(O+=P.length),O=Math.max(0,Math.min(O-1,P.length)),N<0&&(N+=P.length),N=Math.max(0,Math.min(N,P.length)),C=P.slice(O,N).join(`
`),A.hasAttribute("data-start")||A.setAttribute("data-start",String(O+1))}I.textContent=C,t.highlightElement(I)},function(C){A.setAttribute(l,f),I.textContent=C})}}),t.plugins.fileHighlight={highlight:function(A){for(var I=(A||document).querySelectorAll(p),y=0,E;E=I[y++];)t.highlightElement(E)}};var g=!1;t.fileHighlight=function(){g||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),g=!0),t.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(Kl);var lc=Kl.exports;const Mn=ic(lc);/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:Ql,setPrototypeOf:jr,isFrozen:ac,getPrototypeOf:oc,getOwnPropertyDescriptor:cc}=Object;let{freeze:mt,seal:xt,create:nr}=Object,{apply:rr,construct:ir}=typeof Reflect<"u"&&Reflect;mt||(mt=function(e){return e});xt||(xt=function(e){return e});rr||(rr=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return e.apply(t,r)});ir||(ir=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new e(...n)});const un=vt(Array.prototype.forEach),uc=vt(Array.prototype.lastIndexOf),qr=vt(Array.prototype.pop),zs=vt(Array.prototype.push),fc=vt(Array.prototype.splice),kn=vt(String.prototype.toLowerCase),Bn=vt(String.prototype.toString),Un=vt(String.prototype.match),Vs=vt(String.prototype.replace),hc=vt(String.prototype.indexOf),dc=vt(String.prototype.trim),Bt=vt(Object.prototype.hasOwnProperty),ut=vt(RegExp.prototype.test),Hs=pc(TypeError);function vt(s){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return rr(s,e,n)}}function pc(s){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ir(s,t)}}function be(s,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:kn;jr&&jr(s,null);let n=e.length;for(;n--;){let r=e[n];if(typeof r=="string"){const i=t(r);i!==r&&(ac(e)||(e[n]=i),r=i)}s[r]=!0}return s}function gc(s){for(let e=0;e<s.length;e++)Bt(s,e)||(s[e]=null);return s}function ns(s){const e=nr(null);for(const[t,n]of Ql(s))Bt(s,t)&&(Array.isArray(n)?e[t]=gc(n):n&&typeof n=="object"&&n.constructor===Object?e[t]=ns(n):e[t]=n);return e}function Gs(s,e){for(;s!==null;){const n=cc(s,e);if(n){if(n.get)return vt(n.get);if(typeof n.value=="function")return vt(n.value)}s=oc(s)}function t(){return null}return t}const zr=mt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),jn=mt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),qn=mt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),mc=mt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),zn=mt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),vc=mt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Vr=mt(["#text"]),Hr=mt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Vn=mt(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Gr=mt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),fn=mt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),_c=xt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),bc=xt(/<%[\w\W]*|[\w\W]*%>/gm),kc=xt(/\$\{[\w\W]*/gm),yc=xt(/^data-[\-\w.\u00B7-\uFFFF]+$/),wc=xt(/^aria-[\-\w]+$/),Jl=xt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ec=xt(/^(?:\w+script|data):/i),Ac=xt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ea=xt(/^html$/i),Sc=xt(/^[a-z][.\w]*(-[.\w]+)+$/i);var $r=Object.freeze({__proto__:null,ARIA_ATTR:wc,ATTR_WHITESPACE:Ac,CUSTOM_ELEMENT:Sc,DATA_ATTR:yc,DOCTYPE_NAME:ea,ERB_EXPR:bc,IS_ALLOWED_URI:Jl,IS_SCRIPT_OR_DATA:Ec,MUSTACHE_EXPR:_c,TMPLIT_EXPR:kc});const $s={element:1,text:3,progressingInstruction:7,comment:8,document:9},Tc=function(){return typeof window>"u"?null:window},Cc=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},Wr=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function ta(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Tc();const e=oe=>ta(oe);if(e.version="3.3.0",e.removed=[],!s||!s.document||s.document.nodeType!==$s.document||!s.Element)return e.isSupported=!1,e;let{document:t}=s;const n=t,r=n.currentScript,{DocumentFragment:i,HTMLTemplateElement:a,Node:l,Element:o,NodeFilter:u,NamedNodeMap:f=s.NamedNodeMap||s.MozNamedAttrMap,HTMLFormElement:p,DOMParser:d,trustedTypes:m}=s,g=o.prototype,v=Gs(g,"cloneNode"),A=Gs(g,"remove"),I=Gs(g,"nextSibling"),y=Gs(g,"childNodes"),E=Gs(g,"parentNode");if(typeof a=="function"){const oe=t.createElement("template");oe.content&&oe.content.ownerDocument&&(t=oe.content.ownerDocument)}let w,T="";const{implementation:C,createNodeIterator:S,createDocumentFragment:P,getElementsByTagName:O}=t,{importNode:N}=n;let R=Wr();e.isSupported=typeof Ql=="function"&&typeof E=="function"&&C&&C.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:F,ERB_EXPR:B,TMPLIT_EXPR:U,DATA_ATTR:G,ARIA_ATTR:q,IS_SCRIPT_OR_DATA:H,ATTR_WHITESPACE:J,CUSTOM_ELEMENT:j}=$r;let{IS_ALLOWED_URI:V}=$r,Z=null;const X=be({},[...zr,...jn,...qn,...zn,...Vr]);let ie=null;const he=be({},[...Hr,...Vn,...Gr,...fn]);let re=Object.seal(nr(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),me=null,de=null;const se=Object.seal(nr(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let K=!0,ue=!0,fe=!1,ve=!0,ce=!1,ke=!0,Se=!1,Te=!1,Ze=!1,De=!1,Ne=!1,Xe=!1,yt=!0,ee=!1;const pe="user-content-";let Ge=!0,it=!1,$e={},Ke=null;const Ct=be({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ht=null;const Qe=be({},["audio","video","img","source","image","track"]);let ge=null;const we=be({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Dt="http://www.w3.org/1998/Math/MathML",Lt="http://www.w3.org/2000/svg",qe="http://www.w3.org/1999/xhtml";let Ot=qe,Nt=!1,It=null;const wt=be({},[Dt,Lt,qe],Bn);let Rt=be({},["mi","mo","mn","ms","mtext"]),Je=be({},["annotation-xml"]);const Jt=be({},["title","style","font","a","script"]);let Me=null;const Gt=["application/xhtml+xml","text/html"],fs="text/html";let _e=null,ze=null;const Is=t.createElement("form"),hs=function(x){return x instanceof RegExp||x instanceof Function},lt=function(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ze&&ze===x)){if((!x||typeof x!="object")&&(x={}),x=ns(x),Me=Gt.indexOf(x.PARSER_MEDIA_TYPE)===-1?fs:x.PARSER_MEDIA_TYPE,_e=Me==="application/xhtml+xml"?Bn:kn,Z=Bt(x,"ALLOWED_TAGS")?be({},x.ALLOWED_TAGS,_e):X,ie=Bt(x,"ALLOWED_ATTR")?be({},x.ALLOWED_ATTR,_e):he,It=Bt(x,"ALLOWED_NAMESPACES")?be({},x.ALLOWED_NAMESPACES,Bn):wt,ge=Bt(x,"ADD_URI_SAFE_ATTR")?be(ns(we),x.ADD_URI_SAFE_ATTR,_e):we,Ht=Bt(x,"ADD_DATA_URI_TAGS")?be(ns(Qe),x.ADD_DATA_URI_TAGS,_e):Qe,Ke=Bt(x,"FORBID_CONTENTS")?be({},x.FORBID_CONTENTS,_e):Ct,me=Bt(x,"FORBID_TAGS")?be({},x.FORBID_TAGS,_e):ns({}),de=Bt(x,"FORBID_ATTR")?be({},x.FORBID_ATTR,_e):ns({}),$e=Bt(x,"USE_PROFILES")?x.USE_PROFILES:!1,K=x.ALLOW_ARIA_ATTR!==!1,ue=x.ALLOW_DATA_ATTR!==!1,fe=x.ALLOW_UNKNOWN_PROTOCOLS||!1,ve=x.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ce=x.SAFE_FOR_TEMPLATES||!1,ke=x.SAFE_FOR_XML!==!1,Se=x.WHOLE_DOCUMENT||!1,De=x.RETURN_DOM||!1,Ne=x.RETURN_DOM_FRAGMENT||!1,Xe=x.RETURN_TRUSTED_TYPE||!1,Ze=x.FORCE_BODY||!1,yt=x.SANITIZE_DOM!==!1,ee=x.SANITIZE_NAMED_PROPS||!1,Ge=x.KEEP_CONTENT!==!1,it=x.IN_PLACE||!1,V=x.ALLOWED_URI_REGEXP||Jl,Ot=x.NAMESPACE||qe,Rt=x.MATHML_TEXT_INTEGRATION_POINTS||Rt,Je=x.HTML_INTEGRATION_POINTS||Je,re=x.CUSTOM_ELEMENT_HANDLING||{},x.CUSTOM_ELEMENT_HANDLING&&hs(x.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(re.tagNameCheck=x.CUSTOM_ELEMENT_HANDLING.tagNameCheck),x.CUSTOM_ELEMENT_HANDLING&&hs(x.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(re.attributeNameCheck=x.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),x.CUSTOM_ELEMENT_HANDLING&&typeof x.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(re.allowCustomizedBuiltInElements=x.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ce&&(ue=!1),Ne&&(De=!0),$e&&(Z=be({},Vr),ie=[],$e.html===!0&&(be(Z,zr),be(ie,Hr)),$e.svg===!0&&(be(Z,jn),be(ie,Vn),be(ie,fn)),$e.svgFilters===!0&&(be(Z,qn),be(ie,Vn),be(ie,fn)),$e.mathMl===!0&&(be(Z,zn),be(ie,Gr),be(ie,fn))),x.ADD_TAGS&&(typeof x.ADD_TAGS=="function"?se.tagCheck=x.ADD_TAGS:(Z===X&&(Z=ns(Z)),be(Z,x.ADD_TAGS,_e))),x.ADD_ATTR&&(typeof x.ADD_ATTR=="function"?se.attributeCheck=x.ADD_ATTR:(ie===he&&(ie=ns(ie)),be(ie,x.ADD_ATTR,_e))),x.ADD_URI_SAFE_ATTR&&be(ge,x.ADD_URI_SAFE_ATTR,_e),x.FORBID_CONTENTS&&(Ke===Ct&&(Ke=ns(Ke)),be(Ke,x.FORBID_CONTENTS,_e)),Ge&&(Z["#text"]=!0),Se&&be(Z,["html","head","body"]),Z.table&&(be(Z,["tbody"]),delete me.tbody),x.TRUSTED_TYPES_POLICY){if(typeof x.TRUSTED_TYPES_POLICY.createHTML!="function")throw Hs('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof x.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Hs('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=x.TRUSTED_TYPES_POLICY,T=w.createHTML("")}else w===void 0&&(w=Cc(m,r)),w!==null&&typeof T=="string"&&(T=w.createHTML(""));mt&&mt(x),ze=x}},Mt=be({},[...jn,...qn,...mc]),ds=be({},[...zn,...vc]),ln=function(x){let te=E(x);(!te||!te.tagName)&&(te={namespaceURI:Ot,tagName:"template"});const ae=kn(x.tagName),je=kn(te.tagName);return It[x.namespaceURI]?x.namespaceURI===Lt?te.namespaceURI===qe?ae==="svg":te.namespaceURI===Dt?ae==="svg"&&(je==="annotation-xml"||Rt[je]):!!Mt[ae]:x.namespaceURI===Dt?te.namespaceURI===qe?ae==="math":te.namespaceURI===Lt?ae==="math"&&Je[je]:!!ds[ae]:x.namespaceURI===qe?te.namespaceURI===Lt&&!Je[je]||te.namespaceURI===Dt&&!Rt[je]?!1:!ds[ae]&&(Jt[ae]||!Mt[ae]):!!(Me==="application/xhtml+xml"&&It[x.namespaceURI]):!1},ct=function(x){zs(e.removed,{element:x});try{E(x).removeChild(x)}catch{A(x)}},$t=function(x,te){try{zs(e.removed,{attribute:te.getAttributeNode(x),from:te})}catch{zs(e.removed,{attribute:null,from:te})}if(te.removeAttribute(x),x==="is")if(De||Ne)try{ct(te)}catch{}else try{te.setAttribute(x,"")}catch{}},ps=function(x){let te=null,ae=null;if(Ze)x="<remove></remove>"+x;else{const We=Un(x,/^[\r\n\t ]+/);ae=We&&We[0]}Me==="application/xhtml+xml"&&Ot===qe&&(x='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+x+"</body></html>");const je=w?w.createHTML(x):x;if(Ot===qe)try{te=new d().parseFromString(je,Me)}catch{}if(!te||!te.documentElement){te=C.createDocument(Ot,"template",null);try{te.documentElement.innerHTML=Nt?T:je}catch{}}const at=te.body||te.documentElement;return x&&ae&&at.insertBefore(t.createTextNode(ae),at.childNodes[0]||null),Ot===qe?O.call(te,Se?"html":"body")[0]:Se?te.documentElement:at},Ms=function(x){return S.call(x.ownerDocument||x,x,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},ls=function(x){return x instanceof p&&(typeof x.nodeName!="string"||typeof x.textContent!="string"||typeof x.removeChild!="function"||!(x.attributes instanceof f)||typeof x.removeAttribute!="function"||typeof x.setAttribute!="function"||typeof x.namespaceURI!="string"||typeof x.insertBefore!="function"||typeof x.hasChildNodes!="function")},gs=function(x){return typeof l=="function"&&x instanceof l};function Pt(oe,x,te){un(oe,ae=>{ae.call(e,x,te,ze)})}const ms=function(x){let te=null;if(Pt(R.beforeSanitizeElements,x,null),ls(x))return ct(x),!0;const ae=_e(x.nodeName);if(Pt(R.uponSanitizeElement,x,{tagName:ae,allowedTags:Z}),ke&&x.hasChildNodes()&&!gs(x.firstElementChild)&&ut(/<[/\w!]/g,x.innerHTML)&&ut(/<[/\w!]/g,x.textContent)||x.nodeType===$s.progressingInstruction||ke&&x.nodeType===$s.comment&&ut(/<[/\w]/g,x.data))return ct(x),!0;if(!(se.tagCheck instanceof Function&&se.tagCheck(ae))&&(!Z[ae]||me[ae])){if(!me[ae]&&Bs(ae)&&(re.tagNameCheck instanceof RegExp&&ut(re.tagNameCheck,ae)||re.tagNameCheck instanceof Function&&re.tagNameCheck(ae)))return!1;if(Ge&&!Ke[ae]){const je=E(x)||x.parentNode,at=y(x)||x.childNodes;if(at&&je){const We=at.length;for(let Et=We-1;Et>=0;--Et){const es=v(at[Et],!0);es.__removalCount=(x.__removalCount||0)+1,je.insertBefore(es,I(x))}}}return ct(x),!0}return x instanceof o&&!ln(x)||(ae==="noscript"||ae==="noembed"||ae==="noframes")&&ut(/<\/no(script|embed|frames)/i,x.innerHTML)?(ct(x),!0):(ce&&x.nodeType===$s.text&&(te=x.textContent,un([F,B,U],je=>{te=Vs(te,je," ")}),x.textContent!==te&&(zs(e.removed,{element:x.cloneNode()}),x.textContent=te)),Pt(R.afterSanitizeElements,x,null),!1)},vs=function(x,te,ae){if(yt&&(te==="id"||te==="name")&&(ae in t||ae in Is))return!1;if(!(ue&&!de[te]&&ut(G,te))){if(!(K&&ut(q,te))){if(!(se.attributeCheck instanceof Function&&se.attributeCheck(te,x))){if(!ie[te]||de[te]){if(!(Bs(x)&&(re.tagNameCheck instanceof RegExp&&ut(re.tagNameCheck,x)||re.tagNameCheck instanceof Function&&re.tagNameCheck(x))&&(re.attributeNameCheck instanceof RegExp&&ut(re.attributeNameCheck,te)||re.attributeNameCheck instanceof Function&&re.attributeNameCheck(te,x))||te==="is"&&re.allowCustomizedBuiltInElements&&(re.tagNameCheck instanceof RegExp&&ut(re.tagNameCheck,ae)||re.tagNameCheck instanceof Function&&re.tagNameCheck(ae))))return!1}else if(!ge[te]){if(!ut(V,Vs(ae,J,""))){if(!((te==="src"||te==="xlink:href"||te==="href")&&x!=="script"&&hc(ae,"data:")===0&&Ht[x])){if(!(fe&&!ut(H,Vs(ae,J,"")))){if(ae)return!1}}}}}}}return!0},Bs=function(x){return x!=="annotation-xml"&&Un(x,j)},_s=function(x){Pt(R.beforeSanitizeAttributes,x,null);const{attributes:te}=x;if(!te||ls(x))return;const ae={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ie,forceKeepAttr:void 0};let je=te.length;for(;je--;){const at=te[je],{name:We,namespaceURI:Et,value:es}=at,Ds=_e(We),Pn=es;let st=We==="value"?Pn:dc(Pn);if(ae.attrName=Ds,ae.attrValue=st,ae.keepAttr=!0,ae.forceKeepAttr=void 0,Pt(R.uponSanitizeAttribute,x,ae),st=ae.attrValue,ee&&(Ds==="id"||Ds==="name")&&($t(We,x),st=pe+st),ke&&ut(/((--!?|])>)|<\/(style|title|textarea)/i,st)){$t(We,x);continue}if(Ds==="attributename"&&Un(st,"href")){$t(We,x);continue}if(ae.forceKeepAttr)continue;if(!ae.keepAttr){$t(We,x);continue}if(!ve&&ut(/\/>/i,st)){$t(We,x);continue}ce&&un([F,B,U],Tr=>{st=Vs(st,Tr," ")});const Sr=_e(x.nodeName);if(!vs(Sr,Ds,st)){$t(We,x);continue}if(w&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!Et)switch(m.getAttributeType(Sr,Ds)){case"TrustedHTML":{st=w.createHTML(st);break}case"TrustedScriptURL":{st=w.createScriptURL(st);break}}if(st!==Pn)try{Et?x.setAttributeNS(Et,We,st):x.setAttribute(We,st),ls(x)?ct(x):qr(e.removed)}catch{$t(We,x)}}Pt(R.afterSanitizeAttributes,x,null)},Rs=function oe(x){let te=null;const ae=Ms(x);for(Pt(R.beforeSanitizeShadowDOM,x,null);te=ae.nextNode();)Pt(R.uponSanitizeShadowNode,te,null),ms(te),_s(te),te.content instanceof i&&oe(te.content);Pt(R.afterSanitizeShadowDOM,x,null)};return e.sanitize=function(oe){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},te=null,ae=null,je=null,at=null;if(Nt=!oe,Nt&&(oe="<!-->"),typeof oe!="string"&&!gs(oe))if(typeof oe.toString=="function"){if(oe=oe.toString(),typeof oe!="string")throw Hs("dirty is not a string, aborting")}else throw Hs("toString is not a function");if(!e.isSupported)return oe;if(Te||lt(x),e.removed=[],typeof oe=="string"&&(it=!1),it){if(oe.nodeName){const es=_e(oe.nodeName);if(!Z[es]||me[es])throw Hs("root node is forbidden and cannot be sanitized in-place")}}else if(oe instanceof l)te=ps("<!---->"),ae=te.ownerDocument.importNode(oe,!0),ae.nodeType===$s.element&&ae.nodeName==="BODY"||ae.nodeName==="HTML"?te=ae:te.appendChild(ae);else{if(!De&&!ce&&!Se&&oe.indexOf("<")===-1)return w&&Xe?w.createHTML(oe):oe;if(te=ps(oe),!te)return De?null:Xe?T:""}te&&Ze&&ct(te.firstChild);const We=Ms(it?oe:te);for(;je=We.nextNode();)ms(je),_s(je),je.content instanceof i&&Rs(je.content);if(it)return oe;if(De){if(Ne)for(at=P.call(te.ownerDocument);te.firstChild;)at.appendChild(te.firstChild);else at=te;return(ie.shadowroot||ie.shadowrootmode)&&(at=N.call(n,at,!0)),at}let Et=Se?te.outerHTML:te.innerHTML;return Se&&Z["!doctype"]&&te.ownerDocument&&te.ownerDocument.doctype&&te.ownerDocument.doctype.name&&ut(ea,te.ownerDocument.doctype.name)&&(Et="<!DOCTYPE "+te.ownerDocument.doctype.name+`>
`+Et),ce&&un([F,B,U],es=>{Et=Vs(Et,es," ")}),w&&Xe?w.createHTML(Et):Et},e.setConfig=function(){let oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};lt(oe),Te=!0},e.clearConfig=function(){ze=null,Te=!1},e.isValidAttribute=function(oe,x,te){ze||lt({});const ae=_e(oe),je=_e(x);return vs(ae,je,te)},e.addHook=function(oe,x){typeof x=="function"&&zs(R[oe],x)},e.removeHook=function(oe,x){if(x!==void 0){const te=uc(R[oe],x);return te===-1?void 0:fc(R[oe],te,1)[0]}return qr(R[oe])},e.removeHooks=function(oe){R[oe]=[]},e.removeAllHooks=function(){R=Wr()},e}var Ic=ta();Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;(function(s){s.languages.typescript=s.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),s.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete s.languages.typescript.parameter,delete s.languages.typescript["literal-property"];var e=s.languages.extend("typescript",{});delete e["class-name"],s.languages.typescript["class-name"].inside=e,s.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e}}}}),s.languages.ts=s.languages.typescript})(Prism);Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/};Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python;Prism.languages.py=Prism.languages.python;(function(s){var e=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,t=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,n={pattern:RegExp(/(^|[^\w.])/.source+t+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};s.languages.java=s.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[n,{pattern:RegExp(/(^|[^\w.])/.source+t+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:n.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+t+/[A-Z]\w*\b/.source),lookbehind:!0,inside:n.inside}],keyword:e,function:[s.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),s.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),s.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":n,keyword:e,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+t+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:n.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+t+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:n.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0,inside:{punctuation:/\./}}})})(Prism);Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}});Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete Prism.languages.c.boolean;(function(s){var e=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,t=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return e.source});s.languages.cpp=s.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:e,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),s.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return t})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),s.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:s.languages.cpp}}}}),s.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),s.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:s.languages.extend("cpp",{})}}),s.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},s.languages.cpp["base-clause"])})(Prism);(function(s){function e(j,V){return j.replace(/<<(\d+)>>/g,function(Z,X){return"(?:"+V[+X]+")"})}function t(j,V,Z){return RegExp(e(j,V),"")}function n(j,V){for(var Z=0;Z<V;Z++)j=j.replace(/<<self>>/g,function(){return"(?:"+j+")"});return j.replace(/<<self>>/g,"[^\\s\\S]")}var r={type:"bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",typeDeclaration:"class enum interface record struct",contextual:"add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",other:"abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield"};function i(j){return"\\b(?:"+j.trim().replace(/ /g,"|")+")\\b"}var a=i(r.typeDeclaration),l=RegExp(i(r.type+" "+r.typeDeclaration+" "+r.contextual+" "+r.other)),o=i(r.typeDeclaration+" "+r.contextual+" "+r.other),u=i(r.type+" "+r.typeDeclaration+" "+r.other),f=n(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),p=n(/\((?:[^()]|<<self>>)*\)/.source,2),d=/@?\b[A-Za-z_]\w*\b/.source,m=e(/<<0>>(?:\s*<<1>>)?/.source,[d,f]),g=e(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[o,m]),v=/\[\s*(?:,\s*)*\]/.source,A=e(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[g,v]),I=e(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[f,p,v]),y=e(/\(<<0>>+(?:,<<0>>+)+\)/.source,[I]),E=e(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[y,g,v]),w={keyword:l,punctuation:/[<>()?,.:[\]]/},T=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,C=/"(?:\\.|[^\\"\r\n])*"/.source,S=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;s.languages.csharp=s.languages.extend("clike",{string:[{pattern:t(/(^|[^$\\])<<0>>/.source,[S]),lookbehind:!0,greedy:!0},{pattern:t(/(^|[^@$\\])<<0>>/.source,[C]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:t(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[g]),lookbehind:!0,inside:w},{pattern:t(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[d,E]),lookbehind:!0,inside:w},{pattern:t(/(\busing\s+)<<0>>(?=\s*=)/.source,[d]),lookbehind:!0},{pattern:t(/(\b<<0>>\s+)<<1>>/.source,[a,m]),lookbehind:!0,inside:w},{pattern:t(/(\bcatch\s*\(\s*)<<0>>/.source,[g]),lookbehind:!0,inside:w},{pattern:t(/(\bwhere\s+)<<0>>/.source,[d]),lookbehind:!0},{pattern:t(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[A]),lookbehind:!0,inside:w},{pattern:t(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[E,u,d]),inside:w}],keyword:l,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),s.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),s.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:t(/([(,]\s*)<<0>>(?=\s*:)/.source,[d]),lookbehind:!0,alias:"punctuation"}}),s.languages.insertBefore("csharp","class-name",{namespace:{pattern:t(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[d]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:t(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[p]),lookbehind:!0,alias:"class-name",inside:w},"return-type":{pattern:t(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[E,g]),inside:w,alias:"class-name"},"constructor-invocation":{pattern:t(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[E]),lookbehind:!0,inside:w,alias:"class-name"},"generic-method":{pattern:t(/<<0>>\s*<<1>>(?=\s*\()/.source,[d,f]),inside:{function:t(/^<<0>>/.source,[d]),generic:{pattern:RegExp(f),alias:"class-name",inside:w}}},"type-list":{pattern:t(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[a,m,d,E,l.source,p,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:t(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[m,p]),lookbehind:!0,greedy:!0,inside:s.languages.csharp},keyword:l,"class-name":{pattern:RegExp(E),greedy:!0,inside:w},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var P=C+"|"+T,O=e(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[P]),N=n(e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[O]),2),R=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,F=e(/<<0>>(?:\s*\(<<1>>*\))?/.source,[g,N]);s.languages.insertBefore("csharp","class-name",{attribute:{pattern:t(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[R,F]),lookbehind:!0,greedy:!0,inside:{target:{pattern:t(/^<<0>>(?=\s*:)/.source,[R]),alias:"keyword"},"attribute-arguments":{pattern:t(/\(<<0>>*\)/.source,[N]),inside:s.languages.csharp},"class-name":{pattern:RegExp(g),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var B=/:[^}\r\n]+/.source,U=n(e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[O]),2),G=e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[U,B]),q=n(e(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[P]),2),H=e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[q,B]);function J(j,V){return{interpolation:{pattern:t(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[j]),lookbehind:!0,inside:{"format-string":{pattern:t(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[V,B]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:s.languages.csharp}}},string:/[\s\S]+/}}s.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:t(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[G]),lookbehind:!0,greedy:!0,inside:J(G,U)},{pattern:t(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[H]),lookbehind:!0,greedy:!0,inside:J(H,q)}],char:{pattern:RegExp(T),greedy:!0}}),s.languages.dotnet=s.languages.cs=s.languages.csharp})(Prism);Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];(function(s){for(var e=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,t=0;t<2;t++)e=e.replace(/<self>/g,function(){return e});e=e.replace(/<self>/g,function(){return/[^\s\S]/.source}),s.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+e),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},s.languages.rust["closure-params"].inside.rest=s.languages.rust,s.languages.rust.attribute.inside.string=s.languages.rust.string})(Prism);(function(s){s.languages.ruby=s.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),s.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var e={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:s.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete s.languages.ruby.function;var t="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",n=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;s.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+t+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:e,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:e,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+n),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+n+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),s.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+t),greedy:!0,inside:{interpolation:e,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:e,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:e,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+t),greedy:!0,inside:{interpolation:e,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:e,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete s.languages.ruby.string,s.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),s.languages.rb=s.languages.ruby})(Prism);(function(s){var e="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",t={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},n={bash:t,environment:{pattern:RegExp("\\$"+e),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+e),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};s.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+e),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:n},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:t}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:n},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:n.entity}}],environment:{pattern:RegExp("\\$?"+e),alias:"constant"},variable:n.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},t.inside=s.languages.bash;for(var r=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=n.variable[1].inside,a=0;a<r.length;a++)i[r[a]]=s.languages.bash[r[a]];s.languages.sh=s.languages.bash,s.languages.shell=s.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(s){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;s.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+e.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},s.languages.css.atrule.inside.rest=s.languages.css;var t=s.languages.markup;t&&(t.tag.addInlined("style","css"),t.tag.addAttribute("style","css"))})(Prism);const Js=new Map;Re.setOptions({breaks:!0,gfm:!0});const Yr={js:"javascript",ts:"typescript",py:"python",rb:"ruby",sh:"bash",yml:"yaml",md:"markdown","c++":"cpp",csharp:"csharp","c#":"csharp",golang:"go",rs:"rust"},Rc={code(s){const e=s.text;let t=s.lang;if(t&&Yr[t.toLowerCase()]&&(t=Yr[t.toLowerCase()]),t&&Mn.languages[t])try{const r=Mn.highlight(e,Mn.languages[t],t);return`<pre class="language-${t}"><code class="language-${t}">${r}</code></pre>`}catch(r){console.error("Prism highlighting failed for",t,":",r);const i=e.replace(/</g,"&lt;").replace(/>/g,"&gt;");return`<pre class="language-${t}"><code class="language-${t}">${i}</code></pre>`}return`<pre><code>${e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</code></pre>`}};Re.use({renderer:Rc});function An(s){s=s.replace(/\|\|(.+?)\|\|/g,'<span class="spoiler" data-spoiler="true">$1</span>'),s=s.replace(/```(\w+)\n([\s\S]*?)```/g,(n,r,i)=>i.endsWith(`
`)?n:"```"+r+`
`+i+"\n```");let e;try{const n=Re.parse(s,{async:!1});e=typeof n=="string"?n:String(n)}catch(n){console.error("Markdown parse error:",n),e=s}return e=e.replace(/:([a-zA-Z0-9_]+):/g,(n,r)=>{const i=Js.get(r);return i?`<img src="${i.url}" alt=":${r}:" class="emote ${i.type==="animated"?"emote-animated":""}" title=":${r}:">`:n}),Ic.sanitize(e,{ALLOWED_TAGS:["p","br","strong","em","u","s","del","code","pre","a","img","blockquote","ul","ol","li","h1","h2","h3","h4","h5","h6","hr","span"],ALLOWED_ATTR:["href","src","alt","class","title","target","rel","data-spoiler"],FORBID_TAGS:["style","script"],FORBID_ATTR:["style","onerror","onload"]})}function Dc(s){Js.set(s.name,s)}function Oc(s){Js.delete(s)}function Nc(s){Js.clear(),s.forEach(e=>{Js.set(e.name,e)})}const Pc="wabi-chat-db",Fc=1,At="messages",Os="settings";class xc{constructor(){Ae(this,"db",null);Ae(this,"initPromise",null)}async init(){if(!this.db)return this.initPromise?this.initPromise:(this.initPromise=new Promise((e,t)=>{const n=indexedDB.open(Pc,Fc);n.onerror=()=>t(n.error),n.onsuccess=()=>{this.db=n.result,e()},n.onupgradeneeded=r=>{const i=r.target.result;i.objectStoreNames.contains(At)||i.createObjectStore(At,{keyPath:"period"}),i.objectStoreNames.contains(Os)||i.createObjectStore(Os,{keyPath:"key"})}}),this.initPromise)}async getSetting(e){return this.db?new Promise((t,n)=>{const a=this.db.transaction([Os],"readonly").objectStore(Os).get(e);a.onsuccess=()=>{var l;return t((l=a.result)==null?void 0:l.value)},a.onerror=()=>n(a.error)}):null}async setSetting(e,t){if(this.db)return new Promise((n,r)=>{const l=this.db.transaction([Os],"readwrite").objectStore(Os).put({key:e,value:t});l.onsuccess=()=>n(),l.onerror=()=>r(l.error)})}async getArchive(e){return this.db?new Promise((t,n)=>{const a=this.db.transaction([At],"readonly").objectStore(At).get(e);a.onsuccess=()=>{var l;return t((l=a.result)==null?void 0:l.data)},a.onerror=()=>n(a.error)}):null}async setArchive(e,t){if(this.db)return new Promise((n,r)=>{const l=this.db.transaction([At],"readwrite").objectStore(At).put({period:e,data:t});l.onsuccess=()=>n(),l.onerror=()=>r(l.error)})}async deleteArchive(e){if(this.db)return new Promise((t,n)=>{const a=this.db.transaction([At],"readwrite").objectStore(At).delete(e);a.onsuccess=()=>t(),a.onerror=()=>n(a.error)})}async getAllArchiveKeys(){return this.db?new Promise((e,t)=>{const i=this.db.transaction([At],"readonly").objectStore(At).getAllKeys();i.onsuccess=()=>e(i.result),i.onerror=()=>t(i.error)}):[]}async getAllArchives(){return this.db?new Promise((e,t)=>{const i=this.db.transaction([At],"readonly").objectStore(At).getAll();i.onsuccess=()=>e(i.result),i.onerror=()=>t(i.error)}):[]}async clearAllArchives(){if(this.db)return new Promise((e,t)=>{const i=this.db.transaction([At],"readwrite").objectStore(At).clear();i.onsuccess=()=>e(),i.onerror=()=>t(i.error)})}}class Lc{constructor(){Ae(this,"rotationPeriod","month");Ae(this,"maxArchives",4);Ae(this,"db");Ae(this,"initPromise",null);this.db=new xc,this.initPromise=this.init()}async init(){await this.db.init(),await this.loadSettings()}async ensureInit(){this.initPromise&&await this.initPromise}async loadSettings(){const e=await this.db.getSetting("rotationPeriod");e&&(this.rotationPeriod=e);const t=await this.db.getSetting("maxArchives");t&&(this.maxArchives=parseInt(t))}async setRotationPeriod(e){await this.ensureInit(),this.rotationPeriod=e,await this.db.setSetting("rotationPeriod",e)}async setMaxArchives(e){await this.ensureInit(),this.maxArchives=e,await this.db.setSetting("maxArchives",e.toString()),await this.rotateArchives()}getRotationPeriod(){return this.rotationPeriod}getMaxArchives(){return this.maxArchives}getPeriodKey(){const e=new Date,t=e.getFullYear();switch(this.rotationPeriod){case"week":{const n=this.getWeekNumber(e);return`${t}-W${String(n).padStart(2,"0")}`}case"month":{const n=e.getMonth()+1;return`${t}-${String(n).padStart(2,"0")}`}case"half-year":{const n=e.getMonth()<6?"H1":"H2";return`${t}-${n}`}case"year":return`${t}`}}getWeekNumber(e){const t=new Date(e.getFullYear(),0,1),n=Math.floor((e.getTime()-t.getTime())/(24*60*60*1e3));return Math.ceil((n+t.getDay()+1)/7)}async isEnabled(){await this.ensureInit();const e=await this.db.getSetting("saveHistory");return e==="true"||e===!0}async setEnabled(e){await this.ensureInit(),await this.db.setSetting("saveHistory",e.toString())}async saveMessage(e,t){if(await this.ensureInit(),!await this.isEnabled())return;const r=this.getPeriodKey(),i=await this.db.getArchive(r)||{};i[e]||(i[e]=[]),i[e].push(t);try{await this.db.setArchive(r,i),await this.rotateArchives()}catch(a){console.error("Failed to save message to IndexedDB:",a),await this.rotateArchives()}}async rotateArchives(){await this.ensureInit();const e=(await this.db.getAllArchiveKeys()).sort().reverse();if(e.length>this.maxArchives){const t=e.slice(this.maxArchives);for(const n of t)console.log(`ðŸ—‘ï¸ Auto-deleting old archive: ${n}`),await this.db.deleteArchive(n)}}async loadAllMessages(){if(await this.ensureInit(),!await this.isEnabled())return{};const t={},n=await this.db.getAllArchives();for(const r of n){const i=r.data||{};Object.entries(i).forEach(([a,l])=>{t[a]||(t[a]=[]),t[a].push(...l)})}return Object.keys(t).forEach(r=>{t[r].sort((i,a)=>i.timestamp-a.timestamp)}),t}async deleteArchive(e){await this.ensureInit(),await this.db.deleteArchive(e),console.log(`ðŸ—‘ï¸ Deleted archive: ${e}`)}async clearAllHistory(){await this.ensureInit(),await this.db.clearAllArchives(),console.log("ðŸ—‘ï¸ Cleared all chat history")}async exportArchives(){await this.ensureInit();const e=await this.db.getAllArchives();if(e.length===0){alert("No archives to export");return}e.forEach(t=>{const n=JSON.stringify(t.data),r=new Blob([n],{type:"application/json"}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=`wabi-chat-${t.period}.json`,a.click(),URL.revokeObjectURL(i)})}async exportArchive(e){await this.ensureInit();const t=await this.db.getArchive(e);if(!t){alert("Archive not found");return}const n=new Blob([JSON.stringify(t)],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`wabi-chat-${e}.json`,i.click(),URL.revokeObjectURL(r)}async getStats(){await this.ensureInit();const t=(await this.db.getAllArchives()).map(i=>{const a=JSON.stringify(i.data),l=new Blob([a]).size,o=i.data,u=Object.values(o).reduce((f,p)=>f+p.length,0);return{period:i.period,size:l,messageCount:u}}).sort((i,a)=>a.period.localeCompare(i.period)),n=t.reduce((i,a)=>i+a.size,0),r=t.reduce((i,a)=>i+a.messageCount,0);return{archives:t,totalSize:n,totalMessages:r}}}const Tt=new Lc,xs=rt(null),Ks=rt([]),Ls=rt("general"),Ut=rt({general:[]}),rs=rt([]),sa=rt([]),ws=rt(null),Zr=rt(!1),na=rt(0),yr=rt(null);let le=null;function Mc(s){let e="http://localhost:3000";return e="https://ungruff-subtarsal-libby.ngrok-free.dev",le=bn(e),xs.set(le),Tt.loadAllMessages().then(t=>{Object.keys(t).length>0&&Ut.set(t)}),le.on("connect",()=>{console.log("Connected to server"),Zr.set(!0),le==null||le.emit("join",s)}),le.on("disconnect",()=>{console.log("Disconnected from server"),Zr.set(!1)}),le.on("init",t=>{Ks.set(t.channels),rs.set(t.users),t.emotes&&Nc(t.emotes);const n=t.users.find(r=>r.id===(le==null?void 0:le.id));n&&ws.set(n),le==null||le.emit("join-channel","general")}),le.on("channel-messages",t=>{Ut.update(n=>({...n,[t.channelId]:t.messages}))}),le.on("message",t=>{Ut.update(r=>({...r,[t.channelId]:[...r[t.channelId]||[],t.message]})),Tt.saveMessage(t.channelId,t.message);const n=t.message.userId===(le==null?void 0:le.id);yo(t.message,n),!n&&document.hidden&&na.update(r=>(r===0&&yr.set(t.message.id),r+1))}),le.on("user-joined",t=>{rs.update(n=>[...n,t])}),le.on("user-left",t=>{rs.update(n=>n.filter(r=>r.id!==t.id))}),le.on("typing",t=>{sa.set(t)}),le.on("profile-updated",t=>{rs.update(n=>n.map(r=>r.id===t.id?t:r)),ws.update(n=>n&&n.id===t.id?t:n)}),le.on("message-edited",t=>{Ut.update(n=>({...n,[t.channelId]:(n[t.channelId]||[]).map(r=>r.id===t.messageId?{...r,text:t.newText,isEdited:!0}:r)}))}),le.on("message-deleted",t=>{Ut.update(n=>({...n,[t.channelId]:(n[t.channelId]||[]).filter(r=>r.id!==t.messageId)}))}),le.on("message-pin-toggled",t=>{Ut.update(n=>({...n,[t.channelId]:(n[t.channelId]||[]).map(r=>r.id===t.messageId?{...r,isPinned:t.isPinned}:r)}))}),le.on("channel-created",t=>{Ks.update(n=>[...n,t]),Ut.update(n=>({...n,[t.id]:[]}))}),le.on("channel-deleted",t=>{Ks.update(n=>n.filter(r=>r.id!==t)),Ut.update(n=>{const r={...n};return delete r[t],r}),Ls.update(n=>n===t?"general":n)}),le.on("channel-error",t=>{console.error("Channel error:",t),alert(t)}),le.on("emote-added",t=>{Dc(t)}),le.on("emote-deleted",t=>{Oc(t)}),le.on("emote-error",t=>{console.error("Emote error:",t),alert(t)}),le}function Bc(s){le==null||le.emit("join-channel",s),Ls.set(s)}function Uc(s){le==null||le.emit("create-channel",s)}function jc(s){le==null||le.emit("delete-channel",s)}function hn(s,e,t="text",n){le==null||le.emit("message",{channelId:s,text:e,type:t,...n})}function ra(s,e,t){le==null||le.emit("edit-message",{channelId:s,messageId:e,newText:t})}function qc(s,e){le==null||le.emit("delete-message",{channelId:s,messageId:e})}function ia(s,e){le==null||le.emit("toggle-pin-message",{channelId:s,messageId:e})}function Hn(s){le==null||le.emit("typing",s)}function Xr(s,e){le==null||le.emit("update-profile",{status:s,profilePicture:e})}function zc(){le==null||le.disconnect(),xs.set(null),le=null}function Vc(){na.set(0),yr.set(null)}let dn;const Hc=new Uint8Array(16);function Gc(){if(!dn&&(dn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!dn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return dn(Hc)}const nt=[];for(let s=0;s<256;++s)nt.push((s+256).toString(16).slice(1));function $c(s,e=0){return nt[s[e+0]]+nt[s[e+1]]+nt[s[e+2]]+nt[s[e+3]]+"-"+nt[s[e+4]]+nt[s[e+5]]+"-"+nt[s[e+6]]+nt[s[e+7]]+"-"+nt[s[e+8]]+nt[s[e+9]]+"-"+nt[s[e+10]]+nt[s[e+11]]+nt[s[e+12]]+nt[s[e+13]]+nt[s[e+14]]+nt[s[e+15]]}const Wc=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Kr={randomUUID:Wc};function Yc(s,e,t){if(Kr.randomUUID&&!s)return Kr.randomUUID();s=s||{};const n=s.random||(s.rng||Gc)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,$c(n)}typeof window<"u"&&typeof location<"u"&&location.search.indexOf("giphy-debug");var bs="",la=16,Zc=()=>{let s="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=e.length;for(let n=0;n<la;n++)s+=e.charAt(Math.floor(Math.random()*t));return s},Xc=()=>{if(!bs){try{bs=sessionStorage.getItem("giphyPingbackId")}catch{}if(!bs){const s=new Date().getTime().toString(16);try{bs=`${s}${Yc().replace(/-/g,"")}`.substring(0,la)}catch{bs=Zc()}try{sessionStorage.setItem("giphyPingbackId",bs)}catch{}}}return bs},Kc=Xc,pn=null;new Promise(s=>{typeof Image>"u"&&s(!1);const e=new Image;e.onload=()=>{pn=!0,s(pn)},e.onerror=()=>{pn=!1,s(pn)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"});var Zs=(typeof window<"u"?window:global)||{};Zs._GIPHY_SDK_HEADERS_=Zs._GIPHY_SDK_HEADERS_||(Zs.Headers?new Zs.Headers({"X-GIPHY-SDK-PLATFORM":"web"}):void 0);var aa=()=>Zs._GIPHY_SDK_HEADERS_,Qr=(s,e)=>{var t;return(t=aa())==null?void 0:t.set(s,e)},Qc=Object.defineProperty,Jc=Object.defineProperties,eu=Object.getOwnPropertyDescriptors,tu=Object.getOwnPropertyNames,Jr=Object.getOwnPropertySymbols,su=Object.prototype.hasOwnProperty,nu=Object.prototype.propertyIsEnumerable,ei=(s,e,t)=>e in s?Qc(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,Yt=(s,e)=>{for(var t in e||(e={}))su.call(e,t)&&ei(s,t,e[t]);if(Jr)for(var t of Jr(e))nu.call(e,t)&&ei(s,t,e[t]);return s},Gn=(s,e)=>Jc(s,eu(e)),ru=(s=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(s,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):s)(function(s){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+s+'" is not supported')}),iu=(s,e)=>function(){return e||(0,s[tu(s)[0]])((e={exports:{}}).exports,e),e.exports},lu=(s,e,t)=>new Promise((n,r)=>{var i=o=>{try{l(t.next(o))}catch(u){r(u)}},a=o=>{try{l(t.throw(o))}catch(u){r(u)}},l=o=>o.done?n(o.value):Promise.resolve(o.value).then(i,a);l((t=t.apply(s,e)).next())}),au=iu({"package.json"(s,e){e.exports={scripts:{lint:"run -T eslint . --ext .ts,.tsx",clean:"rm -rf ./dist",dev:"parcel public/test.html",docs:"typedoc src/index.ts",build:"run -T tsup src/index.ts --format cjs,esm --dts && run -T publint",prepublish:"npm run clean && npm run build",test:"run -T jest --config ./jestconfig.js","test:watch":"run -T jest --config ./jestconfig.js --watchAll"},name:"@giphy/js-fetch-api",version:"5.7.0",description:"Javascript API to fetch gifs and stickers from the GIPHY API.",homepage:"https://github.com/Giphy/giphy-js/tree/master/packages/fetch-api",main:"dist/index.cjs",types:"dist/index.d.ts",module:"dist/index.js",type:"module",sideEffects:!1,exports:{".":{types:"./dist/index.d.ts",import:"./dist/index.js",require:"./dist/index.cjs"},"./package.json":"./package.json"},files:["dist/","src/**/*"],license:"MIT",publishConfig:{access:"public"},dependencies:{"@giphy/js-types":"*","@giphy/js-util":"*"},devDependencies:{"jest-fetch-mock":"^3.0.3","parcel-bundler":"latest",typedoc:"^0.20.37","typedoc-thunder-theme":"^0.0.3",typescript:"^5.0.4"}}}}),ou=["is_anonymous","is_community","is_featured","is_hidden","is_indexable","is_preserve_size","is_realtime","is_removed","is_sticker","is_dynamic"],cu=["suppress_chrome","is_public","is_verified"],ti=s=>e=>s[e]=!!s[e],uu=s=>typeof s=="string"?s:s.text,oa=(s,e="")=>{const t=Yt({},s);t.id=String(t.id),t.tags=(t.tags||[]).map(uu),t.bottle_data||(t.bottle_data={}),t.response_id=e,ou.forEach(ti(t)),Object.keys(t.images||{}).forEach(r=>{const i=t.images[r];i.width=parseInt(i.width),i.height=parseInt(i.height)});const{user:n}=t;if(n){const r=Yt({},n);cu.forEach(ti(r)),t.user=r}return t},si=s=>{const{response_id:e}=s.meta;return s.data=oa(s.data,e),s},ts=s=>{const{response_id:e}=s.meta;return s.data=s.data.map(t=>oa(t,e)),s},fu=(typeof window<"u"?window:global)||{},hu=fu.GIPHY_API_URL||"https://api.giphy.com/v1/",ca=class extends Error{constructor(s,e,t=0,n=""){super(s),this.url=e,this.status=t,this.statusText=n}},du=class extends ca{},ni=ca,pu="@giphy/js-fetch-api: ",gu="Error fetching",mu=s=>s,qt={},vu=6e4,_u=6e3,bu=()=>{const s=Date.now();Object.keys(qt).forEach(e=>{const t=qt[e].isError?_u:vu;s-qt[e].ts>=t&&delete qt[e]})};function ku(s,e={}){const{apiVersion:t=1,noCache:n=!1,normalizer:r=mu}=e,i=hu.replace(/\/v\d+\/$/,`/v${t}/`);if(bu(),!qt[s]||n){const a=`${i}${s}`,l=()=>lu(this,null,function*(){var o,u;let f;try{const p=yield fetch(a,{method:"get"});if(p.ok){const d=yield p.json();if((o=d.meta)!=null&&o.response_id)return r(d);throw{message:"synthetic response"}}else{let d=gu;try{const g=yield p.json();g.message&&(d=g.message),(u=g.meta)!=null&&u.msg&&(d=g.meta.msg)}catch{}qt[s]&&(qt[s].isError=!0);let m=ni;d==="This content is not available in your location"&&(m=du),f=new m(`${pu}${d}`,a,p.status,p.statusText)}}catch(p){f=new ni(p.message,a),qt[s]&&(qt[s].isError=!0)}throw f});qt[s]={request:l(),ts:Date.now()}}return qt[s].request}var St=ku,$n=s=>s&&s.type?s.type:"gifs",yu=class{constructor(s,e={}){this.getQS=(t={})=>new URLSearchParams(Yt(Gn(Yt({},t),{api_key:this.apiKey,pingback_id:Kc()}),this.qsParams)).toString(),this.apiKey=s,this.qsParams=e}categories(s){return St(`gifs/categories?${this.getQS(s)}`)}gif(s,e){const t=e!=null&&e.internal?"internal/":"";return St(`${t}gifs/${s}?${this.getQS()}`,{normalizer:si})}gifs(s,e){return Array.isArray(s)?St(`gifs?${this.getQS({ids:s.join(",")})}`,{normalizer:ts}):St(`gifs/categories/${s}/${e}?${this.getQS()}`,{normalizer:ts})}emoji(s){return St(`emoji?${this.getQS(s)}`,{normalizer:ts})}emojiDefaultVariations(s){return St(`emoji?${this.getQS(s)}`,{apiVersion:2,normalizer:ts})}emojiVariations(s){return St(`emoji/${s}/variations?${this.getQS()}`,{apiVersion:2,normalizer:ts})}animate(s,e={}){const t=this.getQS(Gn(Yt({},e),{m:s}));return St(`text/animate?${t}`,{normalizer:ts})}search(s,e={}){const t=e.channel?`@${e.channel} ${s}`:s;let n;e.type==="text"&&(n=!0);const r=this.getQS(Gn(Yt({rating:"pg-13"},e),{q:t,excludeDynamicResults:n}));return St(`${$n(e)}/search?${r}`,{normalizer:ts})}subcategories(s,e){return St(`gifs/categories/${s}?${this.getQS(e)}`)}trending(s={}){return St(`${$n(s)}/trending?${this.getQS(Yt({rating:"pg-13"},s))}`,{normalizer:ts})}random(s){return St(`${$n(s)}/random?${this.getQS(Yt({rating:"pg-13"},s))}`,{noCache:!0,normalizer:si})}related(s,e={}){const{type:t="gifs"}=e;return St(`${t}/related?${this.getQS(Yt({gif_id:s,rating:"pg-13"},e))}`,{normalizer:ts})}channels(s,e={}){return St(`channels/search?${this.getQS(Yt({q:s,rating:"pg-13"},e))}`)}},wu=yu,ri;if(typeof ru<"u"){const{version:s}=au();(ri=aa())!=null&&ri.get("X-GIPHY-SDK-NAME")||(Qr("X-GIPHY-SDK-NAME","FetchAPI"),Qr("X-GIPHY-SDK-VERSION",s))}function ii(s,e,t){const n=s.slice();return n[11]=e[t],n}function Eu(s){let e=[],t=new Map,n,r=Ve(s[1]);const i=a=>a[11].id;for(let a=0;a<r.length;a+=1){let l=ii(s,r,a),o=i(l);t.set(o,e[a]=li(o,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();n=Fe()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);n=Fe()},m(a,l){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(a,l);z(a,n,l)},p(a,l){l&34&&(r=Ve(a[1]),e=Ts(e,l,i,1,a,r,t,n.parentNode,Ss,li,n,ii))},d(a){a&&_(n);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function Au(s){let e,t="No GIFs found";return{c(){e=k("div"),e.textContent=t,this.h()},l(n){e=b(n,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1db6zr7"&&(e.textContent=t),this.h()},h(){h(e,"class","no-results svelte-1t262zs")},m(n,r){z(n,e,r)},p:Pe,d(n){n&&_(e)}}}function Su(s){let e,t="Loading...";return{c(){e=k("div"),e.textContent=t,this.h()},l(n){e=b(n,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1f5y80z"&&(e.textContent=t),this.h()},h(){h(e,"class","loading svelte-1t262zs")},m(n,r){z(n,e,r)},p:Pe,d(n){n&&_(e)}}}function li(s,e){let t,n,r,i,a,l,o;function u(){return e[8](e[11])}return{key:s,first:null,c(){t=k("button"),n=k("img"),a=M(),this.h()},l(f){t=b(f,"BUTTON",{class:!0});var p=D(t);n=b(p,"IMG",{src:!0,alt:!0,class:!0}),a=L(p),p.forEach(_),this.h()},h(){Ue(n.src,r=e[11].images.fixed_height_small.url)||h(n,"src",r),h(n,"alt",i=e[11].title),h(n,"class","svelte-1t262zs"),h(t,"class","gif-item svelte-1t262zs"),this.first=t},m(f,p){z(f,t,p),c(t,n),c(t,a),l||(o=Y(t,"click",u),l=!0)},p(f,p){e=f,p&2&&!Ue(n.src,r=e[11].images.fixed_height_small.url)&&h(n,"src",r),p&2&&i!==(i=e[11].title)&&h(n,"alt",i)},d(f){f&&_(t),l=!1,o()}}}function Tu(s){let e,t,n,r,i,a="âœ•",l,o,u,f;function p(g,v){return g[2]?Su:g[1].length===0?Au:Eu}let d=p(s),m=d(s);return{c(){e=k("div"),t=k("div"),n=k("input"),r=M(),i=k("button"),i.textContent=a,l=M(),o=k("div"),m.c(),this.h()},l(g){e=b(g,"DIV",{class:!0});var v=D(e);t=b(v,"DIV",{class:!0});var A=D(t);n=b(A,"INPUT",{type:!0,placeholder:!0,class:!0}),r=L(A),i=b(A,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(i)!=="svelte-xkwxcu"&&(i.textContent=a),A.forEach(_),l=L(v),o=b(v,"DIV",{class:!0});var I=D(o);m.l(I),I.forEach(_),v.forEach(_),this.h()},h(){h(n,"type","text"),h(n,"placeholder","Search GIFs..."),h(n,"class","svelte-1t262zs"),h(i,"class","close-btn svelte-1t262zs"),h(t,"class","giphy-header svelte-1t262zs"),h(o,"class","gif-grid svelte-1t262zs"),h(e,"class","giphy-picker svelte-1t262zs")},m(g,v){z(g,e,v),c(e,t),c(t,n),et(n,s[0]),c(t,r),c(t,i),c(e,l),c(e,o),m.m(o,null),u||(f=[Y(n,"input",s[6]),Y(n,"input",s[4]),Y(i,"click",s[7])],u=!0)},p(g,[v]){v&1&&n.value!==g[0]&&et(n,g[0]),d===(d=p(g))&&m?m.p(g,v):(m.d(1),m=d(g),m&&(m.c(),m.m(o,null)))},i:Pe,o:Pe,d(g){g&&_(e),m.d(),u=!1,xe(f)}}}function Cu(s,e,t){const n=yl();let r="",i=[],a=!1;const l=new wu("sXpGFDGZs0Dv1mmNFvYaGUvYwKX0PWIh");async function o(){if(!r.trim()){u();return}t(2,a=!0);try{const{data:g}=await l.search(r,{limit:20});t(1,i=g)}catch(g){console.error("Error fetching GIFs:",g)}t(2,a=!1)}async function u(){t(2,a=!0);try{const{data:g}=await l.trending({limit:20});t(1,i=g)}catch(g){console.error("Error fetching trending GIFs:",g)}t(2,a=!1)}function f(g){n("select",g.images.fixed_height.url)}Es(()=>{u()});function p(){r=this.value,t(0,r)}return[r,i,a,n,o,f,p,()=>n("close"),g=>f(g)]}class Iu extends bt{constructor(e){super(),kt(this,e,Cu,Tu,_t,{})}}function ai(s){let e,t,n,r,i=(s[2]?"Your Profile":s[1].username)+"",a,l,o,u="Ã—",f,p,d,m,g,v,A,I,y,E="Username:",w,T,C=s[1].username+"",S,P,O,N,R,F;function B(X,ie){return X[4]||X[1].profilePicture?Du:Ru}let U=B(s),G=U(s),q=s[2]&&oi(s),H=!s[2]&&ci(s);function J(X,ie){return X[2]?xu:Fu}let j=J(s),V=j(s),Z=s[2]&&fi(s);return{c(){e=k("div"),t=k("div"),n=k("div"),r=k("h2"),a=W(i),l=M(),o=k("button"),o.textContent=u,f=M(),p=k("div"),d=k("div"),m=k("div"),G.c(),g=M(),q&&q.c(),v=M(),A=k("div"),I=k("div"),y=k("span"),y.textContent=E,w=M(),T=k("span"),S=W(C),P=M(),H&&H.c(),O=M(),V.c(),N=M(),Z&&Z.c(),this.h()},l(X){e=b(X,"DIV",{class:!0});var ie=D(e);t=b(ie,"DIV",{class:!0});var he=D(t);n=b(he,"DIV",{class:!0});var re=D(n);r=b(re,"H2",{class:!0});var me=D(r);a=$(me,i),me.forEach(_),l=L(re),o=b(re,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(o)!=="svelte-12zniqk"&&(o.textContent=u),re.forEach(_),f=L(he),p=b(he,"DIV",{class:!0});var de=D(p);d=b(de,"DIV",{class:!0});var se=D(d);m=b(se,"DIV",{class:!0});var K=D(m);G.l(K),K.forEach(_),g=L(se),q&&q.l(se),se.forEach(_),v=L(de),A=b(de,"DIV",{class:!0});var ue=D(A);I=b(ue,"DIV",{class:!0});var fe=D(I);y=b(fe,"SPAN",{class:!0,"data-svelte-h":!0}),Q(y)!=="svelte-1fffgfa"&&(y.textContent=E),w=L(fe),T=b(fe,"SPAN",{class:!0});var ve=D(T);S=$(ve,C),ve.forEach(_),fe.forEach(_),ue.forEach(_),P=L(de),H&&H.l(de),O=L(de),V.l(de),de.forEach(_),N=L(he),Z&&Z.l(he),he.forEach(_),ie.forEach(_),this.h()},h(){h(r,"class","svelte-1gfq969"),h(o,"class","close-btn svelte-1gfq969"),h(n,"class","modal-header svelte-1gfq969"),h(m,"class","profile-picture-container svelte-1gfq969"),h(d,"class","profile-picture-section svelte-1gfq969"),h(y,"class","info-label svelte-1gfq969"),h(T,"class","info-value svelte-1gfq969"),h(I,"class","info-row svelte-1gfq969"),h(A,"class","user-info svelte-1gfq969"),h(p,"class","modal-body svelte-1gfq969"),h(t,"class","modal-content svelte-1gfq969"),h(e,"class","modal-overlay svelte-1gfq969")},m(X,ie){z(X,e,ie),c(e,t),c(t,n),c(n,r),c(r,a),c(n,l),c(n,o),c(t,f),c(t,p),c(p,d),c(d,m),G.m(m,null),c(d,g),q&&q.m(d,null),c(p,v),c(p,A),c(A,I),c(I,y),c(I,w),c(I,T),c(T,S),c(p,P),H&&H.m(p,null),c(p,O),V.m(p,null),c(t,N),Z&&Z.m(t,null),R||(F=[Y(o,"click",s[9]),Y(t,"click",As(s[12])),Y(e,"click",s[9])],R=!0)},p(X,ie){ie&6&&i!==(i=(X[2]?"Your Profile":X[1].username)+"")&&ne(a,i),U===(U=B(X))&&G?G.p(X,ie):(G.d(1),G=U(X),G&&(G.c(),G.m(m,null))),X[2]?q?q.p(X,ie):(q=oi(X),q.c(),q.m(d,null)):q&&(q.d(1),q=null),ie&2&&C!==(C=X[1].username+"")&&ne(S,C),X[2]?H&&(H.d(1),H=null):H?H.p(X,ie):(H=ci(X),H.c(),H.m(p,O)),j===(j=J(X))&&V?V.p(X,ie):(V.d(1),V=j(X),V&&(V.c(),V.m(p,null))),X[2]?Z?Z.p(X,ie):(Z=fi(X),Z.c(),Z.m(t,null)):Z&&(Z.d(1),Z=null)},d(X){X&&_(e),G.d(),q&&q.d(),H&&H.d(),V.d(),Z&&Z.d(),R=!1,xe(F)}}}function Ru(s){let e,t=s[1].username.charAt(0).toUpperCase()+"",n;return{c(){e=k("div"),n=W(t),this.h()},l(r){e=b(r,"DIV",{class:!0,style:!0});var i=D(e);n=$(i,t),i.forEach(_),this.h()},h(){h(e,"class","profile-picture-placeholder svelte-1gfq969"),Le(e,"background-color",s[1].color)},m(r,i){z(r,e,i),c(e,n)},p(r,i){i&2&&t!==(t=r[1].username.charAt(0).toUpperCase()+"")&&ne(n,t),i&2&&Le(e,"background-color",r[1].color)},d(r){r&&_(e)}}}function Du(s){let e,t,n;return{c(){e=k("img"),this.h()},l(r){e=b(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ue(e.src,t=s[4]||s[1].profilePicture)||h(e,"src",t),h(e,"alt",n=s[1].username),h(e,"class","profile-picture svelte-1gfq969")},m(r,i){z(r,e,i)},p(r,i){i&18&&!Ue(e.src,t=r[4]||r[1].profilePicture)&&h(e,"src",t),i&2&&n!==(n=r[1].username)&&h(e,"alt",n)},d(r){r&&_(e)}}}function oi(s){let e,t,n=s[4]||s[1].profilePicture?"Change Picture":"Upload Picture",r,i,a,l,o;return{c(){e=k("div"),t=k("label"),r=W(n),i=M(),a=k("input"),this.h()},l(u){e=b(u,"DIV",{class:!0});var f=D(e);t=b(f,"LABEL",{for:!0,class:!0});var p=D(t);r=$(p,n),p.forEach(_),i=L(f),a=b(f,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),f.forEach(_),this.h()},h(){h(t,"for","profile-picture"),h(t,"class","upload-label svelte-1gfq969"),h(a,"id","profile-picture"),h(a,"type","file"),h(a,"accept","image/*"),h(a,"class","file-input svelte-1gfq969"),h(e,"class","upload-section svelte-1gfq969")},m(u,f){z(u,e,f),c(e,t),c(t,r),c(e,i),c(e,a),l||(o=Y(a,"change",s[10]),l=!0)},p(u,f){f&18&&n!==(n=u[4]||u[1].profilePicture?"Change Picture":"Upload Picture")&&ne(r,n)},d(u){u&&_(e),l=!1,o()}}}function ci(s){let e,t,n,r="Personal Notes:",i,a,l=!s[6]&&ui(s);function o(p,d){return p[6]?Pu:p[5]?Nu:Ou}let u=o(s),f=u(s);return{c(){e=k("div"),t=k("div"),n=k("label"),n.textContent=r,i=M(),l&&l.c(),a=M(),f.c(),this.h()},l(p){e=b(p,"DIV",{class:!0});var d=D(e);t=b(d,"DIV",{class:!0});var m=D(t);n=b(m,"LABEL",{class:!0,"data-svelte-h":!0}),Q(n)!=="svelte-1vz1uda"&&(n.textContent=r),i=L(m),l&&l.l(m),m.forEach(_),a=L(d),f.l(d),d.forEach(_),this.h()},h(){h(n,"class","notes-label svelte-1gfq969"),h(t,"class","notes-header svelte-1gfq969"),h(e,"class","notes-section svelte-1gfq969")},m(p,d){z(p,e,d),c(e,t),c(t,n),c(t,i),l&&l.m(t,null),c(e,a),f.m(e,null)},p(p,d){p[6]?l&&(l.d(1),l=null):l?l.p(p,d):(l=ui(p),l.c(),l.m(t,null)),u===(u=o(p))&&f?f.p(p,d):(f.d(1),f=u(p),f&&(f.c(),f.m(e,null)))},d(p){p&&_(e),l&&l.d(),f.d()}}}function ui(s){let e,t=s[5]?"Edit":"Add Note",n,r,i;return{c(){e=k("button"),n=W(t),this.h()},l(a){e=b(a,"BUTTON",{class:!0});var l=D(e);n=$(l,t),l.forEach(_),this.h()},h(){h(e,"class","edit-note-btn svelte-1gfq969")},m(a,l){z(a,e,l),c(e,n),r||(i=Y(e,"click",s[13]),r=!0)},p(a,l){l&32&&t!==(t=a[5]?"Edit":"Add Note")&&ne(n,t)},d(a){a&&_(e),r=!1,i()}}}function Ou(s){let e,t='No notes yet. Click "Add Note" to remember details about this user.';return{c(){e=k("div"),e.textContent=t,this.h()},l(n){e=b(n,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-t39qdr"&&(e.textContent=t),this.h()},h(){h(e,"class","note-placeholder svelte-1gfq969")},m(n,r){z(n,e,r)},p:Pe,d(n){n&&_(e)}}}function Nu(s){let e,t;return{c(){e=k("div"),t=W(s[5]),this.h()},l(n){e=b(n,"DIV",{class:!0});var r=D(e);t=$(r,s[5]),r.forEach(_),this.h()},h(){h(e,"class","note-display svelte-1gfq969")},m(n,r){z(n,e,r),c(e,t)},p(n,r){r&32&&ne(t,n[5])},d(n){n&&_(e)}}}function Pu(s){let e,t,n,r,i="Cancel",a,l,o="Save Note",u,f;return{c(){e=k("textarea"),t=M(),n=k("div"),r=k("button"),r.textContent=i,a=M(),l=k("button"),l.textContent=o,this.h()},l(p){e=b(p,"TEXTAREA",{placeholder:!0,class:!0,rows:!0}),D(e).forEach(_),t=L(p),n=b(p,"DIV",{class:!0});var d=D(n);r=b(d,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(r)!=="svelte-hulrz8"&&(r.textContent=i),a=L(d),l=b(d,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(l)!=="svelte-9d2dbm"&&(l.textContent=o),d.forEach(_),this.h()},h(){h(e,"placeholder","Add personal notes (e.g., nickname, birthday, interests...)"),h(e,"class","note-textarea svelte-1gfq969"),h(e,"rows","3"),h(r,"class","cancel-note-btn svelte-1gfq969"),h(l,"class","save-note-btn svelte-1gfq969"),h(n,"class","note-actions svelte-1gfq969")},m(p,d){z(p,e,d),et(e,s[5]),z(p,t,d),z(p,n,d),c(n,r),c(n,a),c(n,l),u||(f=[Y(e,"input",s[14]),Y(r,"click",s[15]),Y(l,"click",s[8])],u=!0)},p(p,d){d&32&&et(e,p[5])},d(p){p&&(_(e),_(t),_(n)),u=!1,xe(f)}}}function Fu(s){let e,t,n,r,i=s[1].status.charAt(0).toUpperCase()+s[1].status.slice(1)+"",a;return{c(){e=k("div"),t=k("span"),n=M(),r=k("span"),a=W(i),this.h()},l(l){e=b(l,"DIV",{class:!0});var o=D(e);t=b(o,"SPAN",{class:!0,style:!0}),D(t).forEach(_),n=L(o),r=b(o,"SPAN",{class:!0});var u=D(r);a=$(u,i),u.forEach(_),o.forEach(_),this.h()},h(){h(t,"class","status-dot svelte-1gfq969"),Le(t,"background-color",Qs(s[1].status)),h(r,"class","status-text svelte-1gfq969"),h(e,"class","status-display svelte-1gfq969")},m(l,o){z(l,e,o),c(e,t),c(e,n),c(e,r),c(r,a)},p(l,o){o&2&&Le(t,"background-color",Qs(l[1].status)),o&2&&i!==(i=l[1].status.charAt(0).toUpperCase()+l[1].status.slice(1)+"")&&ne(a,i)},d(l){l&&_(e)}}}function xu(s){let e,t,n="Status:",r,i,a,l,o,u,f,p,d,m,g,v,A,I,y,E,w,T;return{c(){e=k("div"),t=k("label"),t.textContent=n,r=M(),i=k("div"),a=k("button"),l=k("span"),o=W(`\r
								Active`),f=M(),p=k("button"),d=k("span"),m=W(`\r
								Away`),v=M(),A=k("button"),I=k("span"),y=W(`\r
								Busy`),this.h()},l(C){e=b(C,"DIV",{class:!0});var S=D(e);t=b(S,"LABEL",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-138t5u0"&&(t.textContent=n),r=L(S),i=b(S,"DIV",{class:!0});var P=D(i);a=b(P,"BUTTON",{class:!0});var O=D(a);l=b(O,"SPAN",{class:!0,style:!0}),D(l).forEach(_),o=$(O,`\r
								Active`),O.forEach(_),f=L(P),p=b(P,"BUTTON",{class:!0});var N=D(p);d=b(N,"SPAN",{class:!0,style:!0}),D(d).forEach(_),m=$(N,`\r
								Away`),N.forEach(_),v=L(P),A=b(P,"BUTTON",{class:!0});var R=D(A);I=b(R,"SPAN",{class:!0,style:!0}),D(I).forEach(_),y=$(R,`\r
								Busy`),R.forEach(_),P.forEach(_),S.forEach(_),this.h()},h(){h(t,"class","status-label svelte-1gfq969"),h(l,"class","status-dot svelte-1gfq969"),Le(l,"background-color",Qs("active")),h(a,"class",u="status-btn "+(s[3]==="active"?"selected":"")+" svelte-1gfq969"),h(d,"class","status-dot svelte-1gfq969"),Le(d,"background-color",Qs("away")),h(p,"class",g="status-btn "+(s[3]==="away"?"selected":"")+" svelte-1gfq969"),h(I,"class","status-dot svelte-1gfq969"),Le(I,"background-color",Qs("busy")),h(A,"class",E="status-btn "+(s[3]==="busy"?"selected":"")+" svelte-1gfq969"),h(i,"class","status-options svelte-1gfq969"),h(e,"class","status-section svelte-1gfq969")},m(C,S){z(C,e,S),c(e,t),c(e,r),c(e,i),c(i,a),c(a,l),c(a,o),c(i,f),c(i,p),c(p,d),c(p,m),c(i,v),c(i,A),c(A,I),c(A,y),w||(T=[Y(a,"click",s[16]),Y(p,"click",s[17]),Y(A,"click",s[18])],w=!0)},p(C,S){S&8&&u!==(u="status-btn "+(C[3]==="active"?"selected":"")+" svelte-1gfq969")&&h(a,"class",u),S&8&&g!==(g="status-btn "+(C[3]==="away"?"selected":"")+" svelte-1gfq969")&&h(p,"class",g),S&8&&E!==(E="status-btn "+(C[3]==="busy"?"selected":"")+" svelte-1gfq969")&&h(A,"class",E)},d(C){C&&_(e),w=!1,xe(T)}}}function fi(s){let e,t,n="Cancel",r,i,a="Save Changes",l,o;return{c(){e=k("div"),t=k("button"),t.textContent=n,r=M(),i=k("button"),i.textContent=a,this.h()},l(u){e=b(u,"DIV",{class:!0});var f=D(e);t=b(f,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-2pqgi7"&&(t.textContent=n),r=L(f),i=b(f,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(i)!=="svelte-2yi6cr"&&(i.textContent=a),f.forEach(_),this.h()},h(){h(t,"class","cancel-btn svelte-1gfq969"),h(i,"class","save-btn svelte-1gfq969"),h(e,"class","modal-footer svelte-1gfq969")},m(u,f){z(u,e,f),c(e,t),c(e,r),c(e,i),l||(o=[Y(t,"click",s[9]),Y(i,"click",s[11])],l=!0)},p:Pe,d(u){u&&_(e),l=!1,xe(o)}}}function Lu(s){let e,t=s[0]&&s[1]&&ai(s);return{c(){t&&t.c(),e=Fe()},l(n){t&&t.l(n),e=Fe()},m(n,r){t&&t.m(n,r),z(n,e,r)},p(n,[r]){n[0]&&n[1]?t?t.p(n,r):(t=ai(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Pe,o:Pe,d(n){n&&_(e),t&&t.d(n)}}}function Qs(s){switch(s){case"active":return"#10b981";case"away":return"#f59e0b";case"busy":return"#ef4444";default:return"#6b7280"}}function Mu(s,e,t){let{isOpen:n=!1}=e,{user:r=null}=e,{isOwnProfile:i=!1}=e,a=(r==null?void 0:r.status)||"active";r!=null&&r.profilePicture;let l=null,o=null,u="",f=!1;function p(){if(!r)return;const S=JSON.parse(localStorage.getItem("userNotes")||"{}");t(5,u=S[r.id]||"")}function d(){if(!r)return;const S=JSON.parse(localStorage.getItem("userNotes")||"{}");u.trim()?S[r.id]=u:delete S[r.id],localStorage.setItem("userNotes",JSON.stringify(S)),t(6,f=!1)}function m(){t(0,n=!1),l=null,t(4,o=null),t(6,f=!1)}function g(S){var N;const O=(N=S.target.files)==null?void 0:N[0];if(O&&O.type.startsWith("image/")){l=O;const R=new FileReader;R.onload=F=>{var B;t(4,o=(B=F.target)==null?void 0:B.result)},R.readAsDataURL(O)}}function v(){i&&(l&&o?Xr(a,o):a!==(r==null?void 0:r.status)&&Xr(a,void 0),m())}function A(S){Ns.call(this,s,S)}const I=()=>t(6,f=!0);function y(){u=this.value,t(5,u)}const E=()=>{t(6,f=!1),p()},w=()=>t(3,a="active"),T=()=>t(3,a="away"),C=()=>t(3,a="busy");return s.$$set=S=>{"isOpen"in S&&t(0,n=S.isOpen),"user"in S&&t(1,r=S.user),"isOwnProfile"in S&&t(2,i=S.isOwnProfile)},s.$$.update=()=>{s.$$.dirty&2&&r&&(t(3,a=r.status),r.profilePicture,p())},[n,r,i,a,o,u,f,p,d,m,g,v,A,I,y,E,w,T,C]}class ua extends bt{constructor(e){super(),kt(this,e,Mu,Lu,_t,{isOpen:0,user:1,isOwnProfile:2})}}function hi(s){let e,t,n,r=`<span class="menu-icon svelte-1tp94fk">ðŸ’¬</span>
				Reply`,i,a,l,o,u,f,p=s[1].isPinned?"ðŸ“Œ":"ðŸ“",d,m,g=s[1].isPinned?"Unpin":"Pin",v,A,I,y,E=`<span class="menu-icon svelte-1tp94fk">ðŸ“‹</span>
				Copy Text`,w,T,C,S=s[11]&&s[6]&&di(s),P=s[7]&&pi(s),O=s[12]&&gi(s),N=s[12]&&mi(s);return{c(){e=k("div"),t=k("div"),n=k("button"),n.innerHTML=r,i=M(),S&&S.c(),a=M(),P&&P.c(),l=M(),O&&O.c(),o=M(),u=k("button"),f=k("span"),d=W(p),m=M(),v=W(g),A=W(" Message"),I=M(),y=k("button"),y.innerHTML=E,w=M(),N&&N.c(),this.h()},l(R){e=b(R,"DIV",{class:!0});var F=D(e);t=b(F,"DIV",{class:!0,style:!0});var B=D(t);n=b(B,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(n)!=="svelte-1bhlhgs"&&(n.innerHTML=r),i=L(B),S&&S.l(B),a=L(B),P&&P.l(B),l=L(B),O&&O.l(B),o=L(B),u=b(B,"BUTTON",{class:!0});var U=D(u);f=b(U,"SPAN",{class:!0});var G=D(f);d=$(G,p),G.forEach(_),m=L(U),v=$(U,g),A=$(U," Message"),U.forEach(_),I=L(B),y=b(B,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(y)!=="svelte-pkfnng"&&(y.innerHTML=E),w=L(B),N&&N.l(B),B.forEach(_),F.forEach(_),this.h()},h(){h(n,"class","menu-item svelte-1tp94fk"),h(f,"class","menu-icon svelte-1tp94fk"),h(u,"class","menu-item svelte-1tp94fk"),h(y,"class","menu-item copy svelte-1tp94fk"),h(t,"class","context-menu svelte-1tp94fk"),Le(t,"top",s[9]+"px"),Le(t,"left",s[10]+"px"),h(e,"class","context-menu-overlay svelte-1tp94fk")},m(R,F){z(R,e,F),c(e,t),c(t,n),c(t,i),S&&S.m(t,null),c(t,a),P&&P.m(t,null),c(t,l),O&&O.m(t,null),c(t,o),c(t,u),c(u,f),c(f,d),c(u,m),c(u,v),c(u,A),c(t,I),c(t,y),c(t,w),N&&N.m(t,null),s[18](t),T||(C=[Y(n,"click",function(){ks(s[5])&&s[5].apply(this,arguments)}),Y(u,"click",function(){ks(s[4])&&s[4].apply(this,arguments)}),Y(y,"click",s[17]),Y(t,"click",As(s[16])),Y(e,"click",s[19])],T=!0)},p(R,F){s=R,s[11]&&s[6]?S?S.p(s,F):(S=di(s),S.c(),S.m(t,a)):S&&(S.d(1),S=null),s[7]?P?P.p(s,F):(P=pi(s),P.c(),P.m(t,l)):P&&(P.d(1),P=null),s[12]?O?O.p(s,F):(O=gi(s),O.c(),O.m(t,o)):O&&(O.d(1),O=null),F&2&&p!==(p=s[1].isPinned?"ðŸ“Œ":"ðŸ“")&&ne(d,p),F&2&&g!==(g=s[1].isPinned?"Unpin":"Pin")&&ne(v,g),s[12]?N?N.p(s,F):(N=mi(s),N.c(),N.m(t,null)):N&&(N.d(1),N=null),F&512&&Le(t,"top",s[9]+"px"),F&1024&&Le(t,"left",s[10]+"px")},d(R){R&&_(e),S&&S.d(),P&&P.d(),O&&O.d(),N&&N.d(),s[18](null),T=!1,xe(C)}}}function di(s){let e,t=`<span class="menu-icon svelte-1tp94fk">â¬‡ï¸</span>
					Download`,n,r;return{c(){e=k("button"),e.innerHTML=t,this.h()},l(i){e=b(i,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-7q5p9o"&&(e.innerHTML=t),this.h()},h(){h(e,"class","menu-item svelte-1tp94fk")},m(i,a){z(i,e,a),n||(r=Y(e,"click",function(){ks(s[6])&&s[6].apply(this,arguments)}),n=!0)},p(i,a){s=i},d(i){i&&_(e),n=!1,r()}}}function pi(s){let e,t=`<span class="menu-icon svelte-1tp94fk">â†—ï¸</span>
					Forward`,n,r;return{c(){e=k("button"),e.innerHTML=t,this.h()},l(i){e=b(i,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1d631nw"&&(e.innerHTML=t),this.h()},h(){h(e,"class","menu-item svelte-1tp94fk")},m(i,a){z(i,e,a),n||(r=Y(e,"click",function(){ks(s[7])&&s[7].apply(this,arguments)}),n=!0)},p(i,a){s=i},d(i){i&&_(e),n=!1,r()}}}function gi(s){let e,t=`<span class="menu-icon svelte-1tp94fk">âœï¸</span>
					Edit Message`,n,r;return{c(){e=k("button"),e.innerHTML=t,this.h()},l(i){e=b(i,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-8fvj6d"&&(e.innerHTML=t),this.h()},h(){h(e,"class","menu-item svelte-1tp94fk")},m(i,a){z(i,e,a),n||(r=Y(e,"click",function(){ks(s[2])&&s[2].apply(this,arguments)}),n=!0)},p(i,a){s=i},d(i){i&&_(e),n=!1,r()}}}function mi(s){let e,t,n,r=`<span class="menu-icon svelte-1tp94fk">ðŸ—‘ï¸</span>
					Delete Message`,i,a;return{c(){e=k("div"),t=M(),n=k("button"),n.innerHTML=r,this.h()},l(l){e=b(l,"DIV",{class:!0}),D(e).forEach(_),t=L(l),n=b(l,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(n)!=="svelte-g8outl"&&(n.innerHTML=r),this.h()},h(){h(e,"class","menu-divider svelte-1tp94fk"),h(n,"class","menu-item delete svelte-1tp94fk")},m(l,o){z(l,e,o),z(l,t,o),z(l,n,o),i||(a=Y(n,"click",function(){ks(s[3])&&s[3].apply(this,arguments)}),i=!0)},p(l,o){s=l},d(l){l&&(_(e),_(t),_(n)),i=!1,a()}}}function Bu(s){let e,t=s[0]&&hi(s);return{c(){t&&t.c(),e=Fe()},l(n){t&&t.l(n),e=Fe()},m(n,r){t&&t.m(n,r),z(n,e,r)},p(n,[r]){n[0]?t?t.p(n,r):(t=hi(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Pe,o:Pe,d(n){n&&_(e),t&&t.d(n)}}}function Uu(s,e,t){let n,r,i,a,l;Ie(s,ws,S=>t(15,l=S));let{message:o}=e,{x:u=0}=e,{y:f=0}=e,{visible:p=!1}=e,{onEdit:d}=e,{onDelete:m}=e,{onPin:g}=e,{onReply:v}=e,{onDownload:A=void 0}=e,{onForward:I=void 0}=e,y;function E(S){Ns.call(this,s,S)}const w=()=>{navigator.clipboard.writeText(o.text),t(0,p=!1)};function T(S){ot[S?"unshift":"push"](()=>{y=S,t(8,y)})}const C=()=>t(0,p=!1);return s.$$set=S=>{"message"in S&&t(1,o=S.message),"x"in S&&t(13,u=S.x),"y"in S&&t(14,f=S.y),"visible"in S&&t(0,p=S.visible),"onEdit"in S&&t(2,d=S.onEdit),"onDelete"in S&&t(3,m=S.onDelete),"onPin"in S&&t(4,g=S.onPin),"onReply"in S&&t(5,v=S.onReply),"onDownload"in S&&t(6,A=S.onDownload),"onForward"in S&&t(7,I=S.onForward)},s.$$.update=()=>{s.$$.dirty&32770&&t(12,n=o.userId===(l==null?void 0:l.id)),s.$$.dirty&2&&t(11,r=o.type==="file"&&o.fileUrl),s.$$.dirty&8448&&t(10,i=(()=>{if(!y)return u;const S=y.offsetWidth||200,P=window.innerWidth;return u+S>P?u-S:u})()),s.$$.dirty&16640&&t(9,a=(()=>{if(!y)return f;const S=y.offsetHeight||300,P=window.innerHeight;return f+S>P?f-S:f})())},[p,o,d,m,g,v,A,I,y,a,i,r,n,u,f,l,E,w,T,C]}class ju extends bt{constructor(e){super(),kt(this,e,Uu,Bu,_t,{message:1,x:13,y:14,visible:0,onEdit:2,onDelete:3,onPin:4,onReply:5,onDownload:6,onForward:7})}}function vi(s,e,t){const n=s.slice();return n[9]=e[t],n}function _i(s){let e,t,n,r,i="Forward Message",a,l,o="âœ•",u,f,p,d="Choose a channel to forward this message to:",m,g,v,A,I=Ve(s[2]),y=[];for(let E=0;E<I.length;E+=1)y[E]=ki(vi(s,I,E));return{c(){e=k("div"),t=k("div"),n=k("div"),r=k("h3"),r.textContent=i,a=M(),l=k("button"),l.textContent=o,u=M(),f=k("div"),p=k("p"),p.textContent=d,m=M(),g=k("div");for(let E=0;E<y.length;E+=1)y[E].c();this.h()},l(E){e=b(E,"DIV",{class:!0});var w=D(e);t=b(w,"DIV",{class:!0});var T=D(t);n=b(T,"DIV",{class:!0});var C=D(n);r=b(C,"H3",{class:!0,"data-svelte-h":!0}),Q(r)!=="svelte-1xq5ns4"&&(r.textContent=i),a=L(C),l=b(C,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(l)!=="svelte-19jqbg1"&&(l.textContent=o),C.forEach(_),u=L(T),f=b(T,"DIV",{class:!0});var S=D(f);p=b(S,"P",{class:!0,"data-svelte-h":!0}),Q(p)!=="svelte-alvqmp"&&(p.textContent=d),m=L(S),g=b(S,"DIV",{class:!0});var P=D(g);for(let O=0;O<y.length;O+=1)y[O].l(P);P.forEach(_),S.forEach(_),T.forEach(_),w.forEach(_),this.h()},h(){h(r,"class","svelte-feor7p"),h(l,"class","close-button svelte-feor7p"),h(n,"class","dialog-header svelte-feor7p"),h(p,"class","dialog-description svelte-feor7p"),h(g,"class","channel-list svelte-feor7p"),h(f,"class","dialog-content svelte-feor7p"),h(t,"class","dialog svelte-feor7p"),h(e,"class","dialog-overlay svelte-feor7p")},m(E,w){z(E,e,w),c(e,t),c(t,n),c(n,r),c(n,a),c(n,l),c(t,u),c(t,f),c(f,p),c(f,m),c(f,g);for(let T=0;T<y.length;T+=1)y[T]&&y[T].m(g,null);v||(A=[Y(l,"click",s[5]),Y(t,"click",As(s[6])),Y(e,"click",s[5])],v=!0)},p(E,w){if(w&28){I=Ve(E[2]);let T;for(T=0;T<I.length;T+=1){const C=vi(E,I,T);y[T]?y[T].p(C,w):(y[T]=ki(C),y[T].c(),y[T].m(g,null))}for(;T<y.length;T+=1)y[T].d(1);y.length=I.length}},d(E){E&&_(e),Cn(y,E),v=!1,xe(A)}}}function bi(s){let e,t,n,r,i=s[9].name+"",a,l,o,u;function f(g,v){return g[9].type==="dm"?zu:qu}let p=f(s),d=p(s);function m(){return s[7](s[9])}return{c(){e=k("button"),t=k("span"),d.c(),n=M(),r=k("span"),a=W(i),l=M(),this.h()},l(g){e=b(g,"BUTTON",{class:!0});var v=D(e);t=b(v,"SPAN",{class:!0});var A=D(t);d.l(A),A.forEach(_),n=L(v),r=b(v,"SPAN",{class:!0});var I=D(r);a=$(I,i),I.forEach(_),l=L(v),v.forEach(_),this.h()},h(){h(t,"class","channel-icon svelte-feor7p"),h(r,"class","channel-name svelte-feor7p"),h(e,"class","channel-item svelte-feor7p")},m(g,v){z(g,e,v),c(e,t),d.m(t,null),c(e,n),c(e,r),c(r,a),c(e,l),o||(u=Y(e,"click",m),o=!0)},p(g,v){s=g,p!==(p=f(s))&&(d.d(1),d=p(s),d&&(d.c(),d.m(t,null))),v&4&&i!==(i=s[9].name+"")&&ne(a,i)},d(g){g&&_(e),d.d(),o=!1,u()}}}function qu(s){let e;return{c(){e=W("#")},l(t){e=$(t,"#")},m(t,n){z(t,e,n)},d(t){t&&_(e)}}}function zu(s){let e;return{c(){e=W("ðŸ’¬")},l(t){e=$(t,"ðŸ’¬")},m(t,n){z(t,e,n)},d(t){t&&_(e)}}}function ki(s){let e,t=s[9].id!==s[3]&&bi(s);return{c(){t&&t.c(),e=Fe()},l(n){t&&t.l(n),e=Fe()},m(n,r){t&&t.m(n,r),z(n,e,r)},p(n,r){n[9].id!==n[3]?t?t.p(n,r):(t=bi(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&_(e),t&&t.d(n)}}}function Vu(s){let e,t=s[0]&&s[1]&&_i(s);return{c(){t&&t.c(),e=Fe()},l(n){t&&t.l(n),e=Fe()},m(n,r){t&&t.m(n,r),z(n,e,r)},p(n,[r]){n[0]&&n[1]?t?t.p(n,r):(t=_i(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Pe,o:Pe,d(n){n&&_(e),t&&t.d(n)}}}function Hu(s,e,t){let n,r,i;Ie(s,xs,d=>t(8,n=d)),Ie(s,Ks,d=>t(2,r=d)),Ie(s,Ls,d=>t(3,i=d));let{visible:a=!1}=e,{message:l=null}=e;function o(d){!l||!n||(n.emit("message",{channelId:d,text:l.text,type:l.type,gifUrl:l.gifUrl,fileUrl:l.fileUrl,fileName:l.fileName,fileSize:l.fileSize,files:l.files}),t(0,a=!1))}function u(){t(0,a=!1)}function f(d){Ns.call(this,s,d)}const p=d=>o(d.id);return s.$$set=d=>{"visible"in d&&t(0,a=d.visible),"message"in d&&t(1,l=d.message)},[a,l,r,i,o,u,f,p]}class Gu extends bt{constructor(e){super(),kt(this,e,Hu,Vu,_t,{visible:0,message:1})}}function yi(s,e,t){const n=s.slice();n[55]=e[t];const r=n[15](n[55].user);n[56]=r;const i=n[28](n[55].replyTo);return n[57]=i,n}function wi(s,e,t){const n=s.slice();return n[60]=e[t],n[62]=t,n}function Ei(s){let e,t="<span>New Messages</span>";return{c(){e=k("div"),e.innerHTML=t,this.h()},l(n){e=b(n,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1uzyipm"&&(e.innerHTML=t),this.h()},h(){h(e,"class","new-messages-divider svelte-1hbqjje")},m(n,r){z(n,e,r)},d(n){n&&_(e)}}}function $u(s){let e,t=s[55].user.charAt(0).toUpperCase()+"",n;return{c(){e=k("div"),n=W(t),this.h()},l(r){e=b(r,"DIV",{class:!0,style:!0});var i=D(e);n=$(i,t),i.forEach(_),this.h()},h(){h(e,"class","avatar-placeholder svelte-1hbqjje"),Le(e,"background-color",s[16](s[55].user))},m(r,i){z(r,e,i),c(e,n)},p(r,i){i[0]&1&&t!==(t=r[55].user.charAt(0).toUpperCase()+"")&&ne(n,t),i[0]&1&&Le(e,"background-color",r[16](r[55].user))},d(r){r&&_(e)}}}function Wu(s){let e,t,n;return{c(){e=k("img"),this.h()},l(r){e=b(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ue(e.src,t=s[56].profilePicture)||h(e,"src",t),h(e,"alt",n=s[55].user),h(e,"class","avatar svelte-1hbqjje")},m(r,i){z(r,e,i)},p(r,i){i[0]&1&&!Ue(e.src,t=r[56].profilePicture)&&h(e,"src",t),i[0]&1&&n!==(n=r[55].user)&&h(e,"alt",n)},d(r){r&&_(e)}}}function Yu(s){let e,t=s[55].user+"",n;return{c(){e=k("span"),n=W(t),this.h()},l(r){e=b(r,"SPAN",{class:!0});var i=D(e);n=$(i,t),i.forEach(_),this.h()},h(){h(e,"class","username svelte-1hbqjje")},m(r,i){z(r,e,i),c(e,n)},p(r,i){i[0]&1&&t!==(t=r[55].user+"")&&ne(n,t)},d(r){r&&_(e)}}}function Zu(s){let e,t=s[55].user+"",n,r,i;function a(){return s[36](s[56])}return{c(){e=k("button"),n=W(t),this.h()},l(l){e=b(l,"BUTTON",{class:!0});var o=D(e);n=$(o,t),o.forEach(_),this.h()},h(){h(e,"class","username svelte-1hbqjje")},m(l,o){z(l,e,o),c(e,n),r||(i=Y(e,"click",a),r=!0)},p(l,o){s=l,o[0]&1&&t!==(t=s[55].user+"")&&ne(n,t)},d(l){l&&_(e),r=!1,i()}}}function Ai(s){let e,t="ðŸ“Œ";return{c(){e=k("span"),e.textContent=t,this.h()},l(n){e=b(n,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),Q(e)!=="svelte-cawwa1"&&(e.textContent=t),this.h()},h(){h(e,"class","pin-badge svelte-1hbqjje"),h(e,"title","Pinned message")},m(n,r){z(n,e,r)},d(n){n&&_(e)}}}function Si(s){let e,t="(edited)";return{c(){e=k("span"),e.textContent=t,this.h()},l(n){e=b(n,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),Q(e)!=="svelte-13y41lm"&&(e.textContent=t),this.h()},h(){h(e,"class","edited-badge svelte-1hbqjje"),h(e,"title","Edited")},m(n,r){z(n,e,r)},d(n){n&&_(e)}}}function Ti(s){let e,t,n,r,i,a=s[57].user+"",l,o,u,f=s[57].text.substring(0,100)+"",p,d=s[57].text.length>100?"...":"",m;return{c(){e=k("div"),t=k("div"),n=M(),r=k("div"),i=k("span"),l=W(a),o=M(),u=k("span"),p=W(f),m=W(d),this.h()},l(g){e=b(g,"DIV",{class:!0});var v=D(e);t=b(v,"DIV",{class:!0}),D(t).forEach(_),n=L(v),r=b(v,"DIV",{class:!0});var A=D(r);i=b(A,"SPAN",{class:!0});var I=D(i);l=$(I,a),I.forEach(_),o=L(A),u=b(A,"SPAN",{class:!0});var y=D(u);p=$(y,f),m=$(y,d),y.forEach(_),A.forEach(_),v.forEach(_),this.h()},h(){h(t,"class","reply-line svelte-1hbqjje"),h(i,"class","reply-username svelte-1hbqjje"),h(u,"class","reply-text svelte-1hbqjje"),h(r,"class","reply-content svelte-1hbqjje"),h(e,"class","reply-preview svelte-1hbqjje")},m(g,v){z(g,e,v),c(e,t),c(e,n),c(e,r),c(r,i),c(i,l),c(r,o),c(r,u),c(u,p),c(u,m)},p(g,v){v[0]&1&&a!==(a=g[57].user+"")&&ne(l,a),v[0]&1&&f!==(f=g[57].text.substring(0,100)+"")&&ne(p,f),v[0]&1&&d!==(d=g[57].text.length>100?"...":"")&&ne(m,d)},d(g){g&&_(e)}}}function Xu(s){let e;function t(i,a){return i[55].type==="gif"&&i[55].gifUrl?ef:i[55].type==="file"&&(i[55].fileUrl||i[55].files)?Ju:Qu}let n=t(s),r=n(s);return{c(){e=k("div"),r.c(),this.h()},l(i){e=b(i,"DIV",{class:!0});var a=D(e);r.l(a),a.forEach(_),this.h()},h(){h(e,"class","message-content")},m(i,a){z(i,e,a),r.m(e,null)},p(i,a){n===(n=t(i))&&r?r.p(i,a):(r.d(1),r=n(i),r&&(r.c(),r.m(e,null)))},d(i){i&&_(e),r.d()}}}function Ku(s){let e,t,n,r,i,a="Cancel",l,o,u="Save",f,p;function d(...g){return s[38](s[55],...g)}function m(){return s[39](s[55])}return{c(){e=k("div"),t=k("textarea"),n=M(),r=k("div"),i=k("button"),i.textContent=a,l=M(),o=k("button"),o.textContent=u,this.h()},l(g){e=b(g,"DIV",{class:!0});var v=D(e);t=b(v,"TEXTAREA",{class:!0,rows:!0}),D(t).forEach(_),n=L(v),r=b(v,"DIV",{class:!0});var A=D(r);i=b(A,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(i)!=="svelte-1czerce"&&(i.textContent=a),l=L(A),o=b(A,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(o)!=="svelte-w3glyi"&&(o.textContent=u),A.forEach(_),v.forEach(_),this.h()},h(){h(t,"class","edit-textarea svelte-1hbqjje"),h(t,"rows","3"),h(i,"class","edit-cancel svelte-1hbqjje"),h(o,"class","edit-save svelte-1hbqjje"),h(r,"class","edit-actions svelte-1hbqjje"),h(e,"class","edit-mode svelte-1hbqjje")},m(g,v){z(g,e,v),c(e,t),et(t,s[10]),c(e,n),c(e,r),c(r,i),c(r,l),c(r,o),f||(p=[Y(t,"input",s[37]),Y(t,"keydown",d),Y(i,"click",s[21]),Y(o,"click",m)],f=!0)},p(g,v){s=g,v[0]&1024&&et(t,s[10])},d(g){g&&_(e),f=!1,xe(p)}}}function Qu(s){let e,t,n=An(s[55].text)+"";return{c(){e=k("div"),t=new El(!1),this.h()},l(r){e=b(r,"DIV",{class:!0});var i=D(e);t=wl(i,!1),i.forEach(_),this.h()},h(){t.a=null,h(e,"class","markdown-content svelte-1hbqjje")},m(r,i){z(r,e,i),t.m(n,e)},p(r,i){i[0]&1&&n!==(n=An(r[55].text)+"")&&t.p(n)},d(r){r&&_(e)}}}function Ju(s){let e,t;function n(l,o){if(l[55].files&&l[55].files.length>1)return sf;if(l[55].fileUrl)return tf}let r=n(s),i=r&&r(s),a=s[55].text&&(s[55].files?s[55].text!==`Shared ${s[55].files.length} files`:s[55].text!==`Shared: ${s[55].fileName}`)&&Di(s);return{c(){i&&i.c(),e=M(),a&&a.c(),t=Fe()},l(l){i&&i.l(l),e=L(l),a&&a.l(l),t=Fe()},m(l,o){i&&i.m(l,o),z(l,e,o),a&&a.m(l,o),z(l,t,o)},p(l,o){r===(r=n(l))&&i?i.p(l,o):(i&&i.d(1),i=r&&r(l),i&&(i.c(),i.m(e.parentNode,e))),l[55].text&&(l[55].files?l[55].text!==`Shared ${l[55].files.length} files`:l[55].text!==`Shared: ${l[55].fileName}`)?a?a.p(l,o):(a=Di(l),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null)},d(l){l&&(_(e),_(t)),i&&i.d(l),a&&a.d(l)}}}function ef(s){let e,t;return{c(){e=k("img"),this.h()},l(n){e=b(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ue(e.src,t=s[55].gifUrl)||h(e,"src",t),h(e,"alt","GIF"),h(e,"class","gif svelte-1hbqjje")},m(n,r){z(n,e,r)},p(n,r){r[0]&1&&!Ue(e.src,t=n[55].gifUrl)&&h(e,"src",t)},d(n){n&&_(e)}}}function tf(s){let e,t,n;function r(l,o){return o[0]&1&&(e=null),o[0]&1&&(t=null),e==null&&(e=!!fa(l[55].fileName)),e?lf:(t==null&&(t=!!ha(l[55].fileName)),t?rf:nf)}let i=r(s,[-1,-1,-1]),a=i(s);return{c(){a.c(),n=Fe()},l(l){a.l(l),n=Fe()},m(l,o){a.m(l,o),z(l,n,o)},p(l,o){i===(i=r(l,o))&&a?a.p(l,o):(a.d(1),a=i(l),a&&(a.c(),a.m(n.parentNode,n)))},d(l){l&&_(n),a.d(l)}}}function sf(s){let e,t=Ve(s[55].files.slice(0,4)),n=[];for(let r=0;r<t.length;r+=1)n[r]=Ri(wi(s,t,r));return{c(){e=k("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=b(r,"DIV",{class:!0});var i=D(e);for(let a=0;a<n.length;a+=1)n[a].l(i);i.forEach(_),this.h()},h(){h(e,"class","files-gallery svelte-1hbqjje"),ye(e,"has-more",s[55].files.length>4)},m(r,i){z(r,e,i);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null)},p(r,i){if(i[0]&536870913|i[1]&1){t=Ve(r[55].files.slice(0,4));let a;for(a=0;a<t.length;a+=1){const l=wi(r,t,a);n[a]?n[a].p(l,i):(n[a]=Ri(l),n[a].c(),n[a].m(e,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}i[0]&1&&ye(e,"has-more",r[55].files.length>4)},d(r){r&&_(e),Cn(n,r)}}}function nf(s){let e,t,n=cs(s[55].fileName)+"",r,i,a,l,o=s[55].fileName+"",u,f,p,d=os(s[55].fileSize)+"",m,g,v;return{c(){e=k("a"),t=k("span"),r=W(n),i=M(),a=k("div"),l=k("span"),u=W(o),f=M(),p=k("span"),m=W(d),this.h()},l(A){e=b(A,"A",{href:!0,download:!0,class:!0});var I=D(e);t=b(I,"SPAN",{class:!0});var y=D(t);r=$(y,n),y.forEach(_),i=L(I),a=b(I,"DIV",{class:!0});var E=D(a);l=b(E,"SPAN",{class:!0});var w=D(l);u=$(w,o),w.forEach(_),f=L(E),p=b(E,"SPAN",{class:!0});var T=D(p);m=$(T,d),T.forEach(_),E.forEach(_),I.forEach(_),this.h()},h(){h(t,"class","file-icon svelte-1hbqjje"),h(l,"class","file-name svelte-1hbqjje"),h(p,"class","file-size svelte-1hbqjje"),h(a,"class","file-info svelte-1hbqjje"),h(e,"href",g=He(s[55].fileUrl)),h(e,"download",v=s[55].fileName),h(e,"class","file-attachment svelte-1hbqjje")},m(A,I){z(A,e,I),c(e,t),c(t,r),c(e,i),c(e,a),c(a,l),c(l,u),c(a,f),c(a,p),c(p,m)},p(A,I){I[0]&1&&n!==(n=cs(A[55].fileName)+"")&&ne(r,n),I[0]&1&&o!==(o=A[55].fileName+"")&&ne(u,o),I[0]&1&&d!==(d=os(A[55].fileSize)+"")&&ne(m,d),I[0]&1&&g!==(g=He(A[55].fileUrl))&&h(e,"href",g),I[0]&1&&v!==(v=A[55].fileName)&&h(e,"download",v)},d(A){A&&_(e)}}}function rf(s){let e,t,n,r,i,a,l,o,u,f=cs(s[55].fileName)+"",p,d,m=s[55].fileName+"",g,v,A,I,y=os(s[55].fileSize)+"",E,w,T,C,S,P;function O(...R){return s[44](s[55],...R)}function N(...R){return s[45](s[55],...R)}return{c(){e=k("div"),t=k("video"),n=k("source"),a=W(`\r
									Your browser does not support the video tag.`),l=M(),o=k("a"),u=k("span"),p=W(f),d=M(),g=W(m),v=M(),A=k("span"),I=W("("),E=W(y),w=W(")"),this.h()},l(R){e=b(R,"DIV",{class:!0});var F=D(e);t=b(F,"VIDEO",{class:!0,title:!0});var B=D(t);n=b(B,"SOURCE",{src:!0,type:!0}),a=$(B,`\r
									Your browser does not support the video tag.`),B.forEach(_),l=L(F),o=b(F,"A",{href:!0,download:!0,class:!0});var U=D(o);u=b(U,"SPAN",{class:!0});var G=D(u);p=$(G,f),G.forEach(_),d=L(U),g=$(U,m),v=L(U),A=b(U,"SPAN",{class:!0});var q=D(A);I=$(q,"("),E=$(q,y),w=$(q,")"),q.forEach(_),U.forEach(_),F.forEach(_),this.h()},h(){var R;Ue(n.src,r=He(s[55].fileUrl))||h(n,"src",r),h(n,"type",i="video/"+((R=s[55].fileName)==null?void 0:R.split(".").pop())),t.controls=!0,h(t,"class","inline-video svelte-1hbqjje"),h(t,"title","Click to enlarge, right-click for options"),h(u,"class","file-icon svelte-1hbqjje"),h(A,"class","file-size svelte-1hbqjje"),h(o,"href",T=He(s[55].fileUrl)),h(o,"download",C=s[55].fileName),h(o,"class","video-download-link svelte-1hbqjje"),h(e,"class","video-container svelte-1hbqjje")},m(R,F){z(R,e,F),c(e,t),c(t,n),c(t,a),c(e,l),c(e,o),c(o,u),c(u,p),c(o,d),c(o,g),c(o,v),c(o,A),c(A,I),c(A,E),c(A,w),S||(P=[Y(t,"click",O),Y(t,"contextmenu",N)],S=!0)},p(R,F){var B;s=R,F[0]&1&&!Ue(n.src,r=He(s[55].fileUrl))&&h(n,"src",r),F[0]&1&&i!==(i="video/"+((B=s[55].fileName)==null?void 0:B.split(".").pop()))&&h(n,"type",i),F[0]&1&&f!==(f=cs(s[55].fileName)+"")&&ne(p,f),F[0]&1&&m!==(m=s[55].fileName+"")&&ne(g,m),F[0]&1&&y!==(y=os(s[55].fileSize)+"")&&ne(E,y),F[0]&1&&T!==(T=He(s[55].fileUrl))&&h(o,"href",T),F[0]&1&&C!==(C=s[55].fileName)&&h(o,"download",C)},d(R){R&&_(e),S=!1,xe(P)}}}function lf(s){let e,t,n,r,i,a,l,o=cs(s[55].fileName)+"",u,f,p=s[55].fileName+"",d,m,g,v,A=os(s[55].fileSize)+"",I,y,E,w,T,C;function S(...O){return s[42](s[55],...O)}function P(...O){return s[43](s[55],...O)}return{c(){e=k("div"),t=k("img"),i=M(),a=k("a"),l=k("span"),u=W(o),f=M(),d=W(p),m=M(),g=k("span"),v=W("("),I=W(A),y=W(")"),this.h()},l(O){e=b(O,"DIV",{class:!0});var N=D(e);t=b(N,"IMG",{src:!0,alt:!0,class:!0,title:!0}),i=L(N),a=b(N,"A",{href:!0,download:!0,class:!0});var R=D(a);l=b(R,"SPAN",{class:!0});var F=D(l);u=$(F,o),F.forEach(_),f=L(R),d=$(R,p),m=L(R),g=b(R,"SPAN",{class:!0});var B=D(g);v=$(B,"("),I=$(B,A),y=$(B,")"),B.forEach(_),R.forEach(_),N.forEach(_),this.h()},h(){Ue(t.src,n=He(s[55].fileUrl))||h(t,"src",n),h(t,"alt",r=s[55].fileName),h(t,"class","inline-image svelte-1hbqjje"),h(t,"title","Click to enlarge, right-click for options"),h(l,"class","file-icon svelte-1hbqjje"),h(g,"class","file-size svelte-1hbqjje"),h(a,"href",E=He(s[55].fileUrl)),h(a,"download",w=s[55].fileName),h(a,"class","image-download-link svelte-1hbqjje"),h(e,"class","image-container svelte-1hbqjje")},m(O,N){z(O,e,N),c(e,t),c(e,i),c(e,a),c(a,l),c(l,u),c(a,f),c(a,d),c(a,m),c(a,g),c(g,v),c(g,I),c(g,y),T||(C=[Y(t,"click",S),Y(t,"contextmenu",P)],T=!0)},p(O,N){s=O,N[0]&1&&!Ue(t.src,n=He(s[55].fileUrl))&&h(t,"src",n),N[0]&1&&r!==(r=s[55].fileName)&&h(t,"alt",r),N[0]&1&&o!==(o=cs(s[55].fileName)+"")&&ne(u,o),N[0]&1&&p!==(p=s[55].fileName+"")&&ne(d,p),N[0]&1&&A!==(A=os(s[55].fileSize)+"")&&ne(I,A),N[0]&1&&E!==(E=He(s[55].fileUrl))&&h(a,"href",E),N[0]&1&&w!==(w=s[55].fileName)&&h(a,"download",w)},d(O){O&&_(e),T=!1,xe(C)}}}function af(s){let e,t,n=cs(s[60].fileName)+"",r,i,a,l,o=s[60].fileName+"",u,f,p,d,m=os(s[60].fileSize)+"",g,v,A,I,y;return{c(){e=k("a"),t=k("div"),r=W(n),i=M(),a=k("div"),l=k("span"),u=W(o),f=M(),p=k("span"),d=W("("),g=W(m),v=W(")"),A=M(),this.h()},l(E){e=b(E,"A",{href:!0,download:!0,class:!0});var w=D(e);t=b(w,"DIV",{class:!0});var T=D(t);r=$(T,n),T.forEach(_),i=L(w),a=b(w,"DIV",{class:!0});var C=D(a);l=b(C,"SPAN",{class:!0});var S=D(l);u=$(S,o),S.forEach(_),f=L(C),p=b(C,"SPAN",{class:!0});var P=D(p);d=$(P,"("),g=$(P,m),v=$(P,")"),P.forEach(_),C.forEach(_),A=L(w),w.forEach(_),this.h()},h(){h(t,"class","gallery-file-icon-large svelte-1hbqjje"),h(l,"class","file-name-truncate svelte-1hbqjje"),h(p,"class","file-size-small svelte-1hbqjje"),h(a,"class","gallery-file-overlay svelte-1hbqjje"),h(e,"href",I=He(s[60].fileUrl)),h(e,"download",y=s[60].fileName),h(e,"class","gallery-file-item file-link svelte-1hbqjje")},m(E,w){z(E,e,w),c(e,t),c(t,r),c(e,i),c(e,a),c(a,l),c(l,u),c(a,f),c(a,p),c(p,d),c(p,g),c(p,v),c(e,A)},p(E,w){w[0]&1&&n!==(n=cs(E[60].fileName)+"")&&ne(r,n),w[0]&1&&o!==(o=E[60].fileName+"")&&ne(u,o),w[0]&1&&m!==(m=os(E[60].fileSize)+"")&&ne(g,m),w[0]&1&&I!==(I=He(E[60].fileUrl))&&h(e,"href",I),w[0]&1&&y!==(y=E[60].fileName)&&h(e,"download",y)},d(E){E&&_(e)}}}function of(s){let e,t,n,r,i,a,l,o;function u(...p){return s[41](s[60],...p)}let f=s[62]===3&&s[55].files.length>4&&Ci(s);return{c(){e=k("div"),t=k("video"),n=k("source"),i=M(),f&&f.c(),a=M(),this.h()},l(p){e=b(p,"DIV",{class:!0});var d=D(e);t=b(d,"VIDEO",{class:!0,title:!0});var m=D(t);n=b(m,"SOURCE",{src:!0}),m.forEach(_),i=L(d),f&&f.l(d),a=L(d),d.forEach(_),this.h()},h(){Ue(n.src,r=He(s[60].fileUrl))||h(n,"src",r),h(t,"class","gallery-file-video svelte-1hbqjje"),h(t,"title","Click to enlarge"),h(e,"class","gallery-file-item svelte-1hbqjje"),ye(e,"last-item",s[62]===3&&s[55].files.length>4)},m(p,d){z(p,e,d),c(e,t),c(t,n),c(e,i),f&&f.m(e,null),c(e,a),l||(o=Y(t,"click",u),l=!0)},p(p,d){s=p,d[0]&1&&!Ue(n.src,r=He(s[60].fileUrl))&&h(n,"src",r),s[62]===3&&s[55].files.length>4?f?f.p(s,d):(f=Ci(s),f.c(),f.m(e,a)):f&&(f.d(1),f=null),d[0]&1&&ye(e,"last-item",s[62]===3&&s[55].files.length>4)},d(p){p&&_(e),f&&f.d(),l=!1,o()}}}function cf(s){let e,t,n,r,i,a,l,o;function u(...p){return s[40](s[60],...p)}let f=s[62]===3&&s[55].files.length>4&&Ii(s);return{c(){e=k("div"),t=k("img"),i=M(),f&&f.c(),a=M(),this.h()},l(p){e=b(p,"DIV",{class:!0});var d=D(e);t=b(d,"IMG",{src:!0,alt:!0,class:!0,title:!0}),i=L(d),f&&f.l(d),a=L(d),d.forEach(_),this.h()},h(){Ue(t.src,n=He(s[60].fileUrl))||h(t,"src",n),h(t,"alt",r=s[60].fileName),h(t,"class","gallery-file-image svelte-1hbqjje"),h(t,"title","Click to enlarge"),h(e,"class","gallery-file-item svelte-1hbqjje"),ye(e,"last-item",s[62]===3&&s[55].files.length>4)},m(p,d){z(p,e,d),c(e,t),c(e,i),f&&f.m(e,null),c(e,a),l||(o=Y(t,"click",u),l=!0)},p(p,d){s=p,d[0]&1&&!Ue(t.src,n=He(s[60].fileUrl))&&h(t,"src",n),d[0]&1&&r!==(r=s[60].fileName)&&h(t,"alt",r),s[62]===3&&s[55].files.length>4?f?f.p(s,d):(f=Ii(s),f.c(),f.m(e,a)):f&&(f.d(1),f=null),d[0]&1&&ye(e,"last-item",s[62]===3&&s[55].files.length>4)},d(p){p&&_(e),f&&f.d(),l=!1,o()}}}function Ci(s){let e,t,n,r=s[55].files.length-4+"",i;return{c(){e=k("div"),t=k("span"),n=W("+"),i=W(r),this.h()},l(a){e=b(a,"DIV",{class:!0});var l=D(e);t=b(l,"SPAN",{class:!0});var o=D(t);n=$(o,"+"),i=$(o,r),o.forEach(_),l.forEach(_),this.h()},h(){h(t,"class","more-count svelte-1hbqjje"),h(e,"class","more-overlay svelte-1hbqjje")},m(a,l){z(a,e,l),c(e,t),c(t,n),c(t,i)},p(a,l){l[0]&1&&r!==(r=a[55].files.length-4+"")&&ne(i,r)},d(a){a&&_(e)}}}function Ii(s){let e,t,n,r=s[55].files.length-4+"",i;return{c(){e=k("div"),t=k("span"),n=W("+"),i=W(r),this.h()},l(a){e=b(a,"DIV",{class:!0});var l=D(e);t=b(l,"SPAN",{class:!0});var o=D(t);n=$(o,"+"),i=$(o,r),o.forEach(_),l.forEach(_),this.h()},h(){h(t,"class","more-count svelte-1hbqjje"),h(e,"class","more-overlay svelte-1hbqjje")},m(a,l){z(a,e,l),c(e,t),c(t,n),c(t,i)},p(a,l){l[0]&1&&r!==(r=a[55].files.length-4+"")&&ne(i,r)},d(a){a&&_(e)}}}function Ri(s){let e,t,n;function r(l,o){return o[0]&1&&(e=null),o[0]&1&&(t=null),e==null&&(e=!!fa(l[60].fileName)),e?cf:(t==null&&(t=!!ha(l[60].fileName)),t?of:af)}let i=r(s,[-1,-1,-1]),a=i(s);return{c(){a.c(),n=Fe()},l(l){a.l(l),n=Fe()},m(l,o){a.m(l,o),z(l,n,o)},p(l,o){i===(i=r(l,o))&&a?a.p(l,o):(a.d(1),a=i(l),a&&(a.c(),a.m(n.parentNode,n)))},d(l){l&&_(n),a.d(l)}}}function Di(s){let e,t,n=An(s[55].text)+"";return{c(){e=k("div"),t=new El(!1),this.h()},l(r){e=b(r,"DIV",{class:!0});var i=D(e);t=wl(i,!1),i.forEach(_),this.h()},h(){t.a=null,h(e,"class","markdown-content svelte-1hbqjje")},m(r,i){z(r,e,i),t.m(n,e)},p(r,i){i[0]&1&&n!==(n=An(r[55].text)+"")&&t.p(n)},d(r){r&&_(e)}}}function Oi(s,e){let t,n,r,i,a,l,o,u,f,p,d,m,g=xi(e[55].timestamp)+"",v,A,I,y,E,w,T=e[1]===e[55].id&&Ei();function C(j,V){var Z;return(Z=j[56])!=null&&Z.profilePicture?Wu:$u}let S=C(e),P=S(e);function O(j,V){return j[56]?Zu:Yu}let N=O(e),R=N(e),F=e[55].isPinned&&Ai(),B=e[55].isEdited&&Si(),U=e[57]&&Ti(e);function G(j,V){return j[9]===j[55].id?Ku:Xu}let q=G(e),H=q(e);function J(...j){return e[46](e[55],...j)}return{key:s,first:null,c(){t=Fe(),T&&T.c(),n=M(),r=k("div"),i=k("div"),P.c(),a=M(),l=k("div"),o=k("div"),u=k("div"),R.c(),f=M(),F&&F.c(),p=M(),B&&B.c(),d=M(),m=k("span"),v=W(g),A=M(),U&&U.c(),I=M(),H.c(),this.h()},l(j){t=Fe(),T&&T.l(j),n=L(j),r=b(j,"DIV",{class:!0});var V=D(r);i=b(V,"DIV",{class:!0});var Z=D(i);P.l(Z),Z.forEach(_),a=L(V),l=b(V,"DIV",{class:!0});var X=D(l);o=b(X,"DIV",{class:!0});var ie=D(o);u=b(ie,"DIV",{class:!0});var he=D(u);R.l(he),f=L(he),F&&F.l(he),p=L(he),B&&B.l(he),he.forEach(_),d=L(ie),m=b(ie,"SPAN",{class:!0});var re=D(m);v=$(re,g),re.forEach(_),ie.forEach(_),A=L(X),U&&U.l(X),I=L(X),H.l(X),X.forEach(_),V.forEach(_),this.h()},h(){h(i,"class","message-avatar svelte-1hbqjje"),h(u,"class","header-left svelte-1hbqjje"),h(m,"class","timestamp svelte-1hbqjje"),h(o,"class","message-header svelte-1hbqjje"),h(l,"class","message-body svelte-1hbqjje"),h(r,"class",y="message "+(e[55].isPinned?"pinned":"")+" svelte-1hbqjje"),this.first=t},m(j,V){z(j,t,V),T&&T.m(j,V),z(j,n,V),z(j,r,V),c(r,i),P.m(i,null),c(r,a),c(r,l),c(l,o),c(o,u),R.m(u,null),c(u,f),F&&F.m(u,null),c(u,p),B&&B.m(u,null),c(o,d),c(o,m),c(m,v),c(l,A),U&&U.m(l,null),c(l,I),H.m(l,null),E||(w=Y(r,"contextmenu",J),E=!0)},p(j,V){e=j,e[1]===e[55].id?T||(T=Ei(),T.c(),T.m(n.parentNode,n)):T&&(T.d(1),T=null),S===(S=C(e))&&P?P.p(e,V):(P.d(1),P=S(e),P&&(P.c(),P.m(i,null))),N===(N=O(e))&&R?R.p(e,V):(R.d(1),R=N(e),R&&(R.c(),R.m(u,f))),e[55].isPinned?F||(F=Ai(),F.c(),F.m(u,p)):F&&(F.d(1),F=null),e[55].isEdited?B||(B=Si(),B.c(),B.m(u,null)):B&&(B.d(1),B=null),V[0]&1&&g!==(g=xi(e[55].timestamp)+"")&&ne(v,g),e[57]?U?U.p(e,V):(U=Ti(e),U.c(),U.m(l,I)):U&&(U.d(1),U=null),q===(q=G(e))&&H?H.p(e,V):(H.d(1),H=q(e),H&&(H.c(),H.m(l,null))),V[0]&1&&y!==(y="message "+(e[55].isPinned?"pinned":"")+" svelte-1hbqjje")&&h(r,"class",y)},d(j){j&&(_(t),_(n),_(r)),T&&T.d(j),P.d(),R.d(),F&&F.d(),B&&B.d(),U&&U.d(),H.d(),E=!1,w()}}}function Ni(s){let e,t,n;function r(a){s[49](a)}let i={message:s[8],x:s[6],y:s[7],onEdit:s[19],onDelete:s[22],onPin:s[23],onReply:s[24],onDownload:s[25],onForward:s[26]};return s[5]!==void 0&&(i.visible=s[5]),e=new ju({props:i}),ot.push(()=>Xt(e,"visible",r)),{c(){pt(e.$$.fragment)},l(a){dt(e.$$.fragment,a)},m(a,l){ht(e,a,l),n=!0},p(a,l){const o={};l[0]&256&&(o.message=a[8]),l[0]&64&&(o.x=a[6]),l[0]&128&&(o.y=a[7]),!t&&l[0]&32&&(t=!0,o.visible=a[5],Zt(()=>t=!1)),e.$set(o)},i(a){n||(Oe(e.$$.fragment,a),n=!0)},o(a){Be(e.$$.fragment,a),n=!1},d(a){ft(e,a)}}}function Pi(s){let e,t,n,r,i,a="âœ•",l,o,u,f,p;return{c(){e=k("div"),t=k("img"),r=M(),i=k("button"),i.textContent=a,l=M(),o=k("a"),u=W("Open in new tab"),this.h()},l(d){e=b(d,"DIV",{class:!0});var m=D(e);t=b(m,"IMG",{src:!0,alt:!0,class:!0}),r=L(m),i=b(m,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(i)!=="svelte-cyanf1"&&(i.textContent=a),l=L(m),o=b(m,"A",{href:!0,target:!0,rel:!0,class:!0});var g=D(o);u=$(g,"Open in new tab"),g.forEach(_),m.forEach(_),this.h()},h(){Ue(t.src,n=s[13])||h(t,"src",n),h(t,"alt","Enlarged"),h(t,"class","enlarged-image svelte-1hbqjje"),h(i,"class","close-modal svelte-1hbqjje"),h(o,"href",s[13]),h(o,"target","_blank"),h(o,"rel","noopener noreferrer"),h(o,"class","open-new-tab svelte-1hbqjje"),h(e,"class","image-modal svelte-1hbqjje")},m(d,m){z(d,e,m),c(e,t),c(e,r),c(e,i),c(e,l),c(e,o),c(o,u),f||(p=[Y(t,"click",As(s[35])),Y(i,"click",s[30]),Y(e,"click",s[30])],f=!0)},p(d,m){m[0]&8192&&!Ue(t.src,n=d[13])&&h(t,"src",n),m[0]&8192&&h(o,"href",d[13])},d(d){d&&_(e),f=!1,xe(p)}}}function Fi(s){let e,t,n,r,i,a,l,o="âœ•",u,f,p,d,m;return{c(){e=k("div"),t=k("video"),n=k("source"),i=W(`\r
			Your browser does not support the video tag.`),a=M(),l=k("button"),l.textContent=o,u=M(),f=k("a"),p=W("Open in new tab"),this.h()},l(g){e=b(g,"DIV",{class:!0});var v=D(e);t=b(v,"VIDEO",{class:!0});var A=D(t);n=b(A,"SOURCE",{src:!0}),i=$(A,`\r
			Your browser does not support the video tag.`),A.forEach(_),a=L(v),l=b(v,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(l)!=="svelte-yc21b"&&(l.textContent=o),u=L(v),f=b(v,"A",{href:!0,target:!0,rel:!0,class:!0});var I=D(f);p=$(I,"Open in new tab"),I.forEach(_),v.forEach(_),this.h()},h(){Ue(n.src,r=s[14])||h(n,"src",r),t.controls=!0,t.autoplay=!0,h(t,"class","enlarged-video svelte-1hbqjje"),h(l,"class","close-modal svelte-1hbqjje"),h(f,"href",s[14]),h(f,"target","_blank"),h(f,"rel","noopener noreferrer"),h(f,"class","open-new-tab svelte-1hbqjje"),h(e,"class","video-modal svelte-1hbqjje")},m(g,v){z(g,e,v),c(e,t),c(t,n),c(t,i),c(e,a),c(e,l),c(e,u),c(e,f),c(f,p),d||(m=[Y(t,"click",As(s[34])),Y(l,"click",s[32]),Y(e,"click",s[32])],d=!0)},p(g,v){v[0]&16384&&!Ue(n.src,r=g[14])&&h(n,"src",r),v[0]&16384&&h(f,"href",g[14])},d(g){g&&_(e),d=!1,xe(m)}}}function uf(s){let e=[],t=new Map,n,r,i,a,l,o,u,f,p,d,m,g,v,A=Ve(s[0]);const I=R=>R[55].id;for(let R=0;R<A.length;R+=1){let F=yi(s,A,R),B=I(F);t.set(B,e[R]=Oi(B,F))}function y(R){s[47](R)}function E(R){s[48](R)}let w={isOwnProfile:s[4]};s[2]!==void 0&&(w.isOpen=s[2]),s[3]!==void 0&&(w.user=s[3]),r=new ua({props:w}),ot.push(()=>Xt(r,"isOpen",y)),ot.push(()=>Xt(r,"user",E));let T=s[8]&&Ni(s);function C(R){s[50](R)}function S(R){s[51](R)}let P={};s[11]!==void 0&&(P.visible=s[11]),s[12]!==void 0&&(P.message=s[12]),u=new Gu({props:P}),ot.push(()=>Xt(u,"visible",C)),ot.push(()=>Xt(u,"message",S));let O=s[13]&&Pi(s),N=s[14]&&Fi(s);return{c(){for(let R=0;R<e.length;R+=1)e[R].c();n=M(),pt(r.$$.fragment),l=M(),T&&T.c(),o=M(),pt(u.$$.fragment),d=M(),O&&O.c(),m=M(),N&&N.c(),g=Fe()},l(R){for(let F=0;F<e.length;F+=1)e[F].l(R);n=L(R),dt(r.$$.fragment,R),l=L(R),T&&T.l(R),o=L(R),dt(u.$$.fragment,R),d=L(R),O&&O.l(R),m=L(R),N&&N.l(R),g=Fe()},m(R,F){for(let B=0;B<e.length;B+=1)e[B]&&e[B].m(R,F);z(R,n,F),ht(r,R,F),z(R,l,F),T&&T.m(R,F),z(R,o,F),ht(u,R,F),z(R,d,F),O&&O.m(R,F),z(R,m,F),N&&N.m(R,F),z(R,g,F),v=!0},p(R,F){F[0]&943162883|F[1]&1&&(A=Ve(R[0]),e=Ts(e,F,I,1,R,A,t,n.parentNode,Ss,Oi,n,yi));const B={};F[0]&16&&(B.isOwnProfile=R[4]),!i&&F[0]&4&&(i=!0,B.isOpen=R[2],Zt(()=>i=!1)),!a&&F[0]&8&&(a=!0,B.user=R[3],Zt(()=>a=!1)),r.$set(B),R[8]?T?(T.p(R,F),F[0]&256&&Oe(T,1)):(T=Ni(R),T.c(),Oe(T,1),T.m(o.parentNode,o)):T&&(en(),Be(T,1,1,()=>{T=null}),tn());const U={};!f&&F[0]&2048&&(f=!0,U.visible=R[11],Zt(()=>f=!1)),!p&&F[0]&4096&&(p=!0,U.message=R[12],Zt(()=>p=!1)),u.$set(U),R[13]?O?O.p(R,F):(O=Pi(R),O.c(),O.m(m.parentNode,m)):O&&(O.d(1),O=null),R[14]?N?N.p(R,F):(N=Fi(R),N.c(),N.m(g.parentNode,g)):N&&(N.d(1),N=null)},i(R){v||(Oe(r.$$.fragment,R),Oe(T),Oe(u.$$.fragment,R),v=!0)},o(R){Be(r.$$.fragment,R),Be(T),Be(u.$$.fragment,R),v=!1},d(R){R&&(_(n),_(l),_(o),_(d),_(m),_(g));for(let F=0;F<e.length;F+=1)e[F].d(R);ft(r,R),T&&T.d(R),ft(u,R),O&&O.d(R),N&&N.d(R)}}}function xi(s){return new Date(s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}function os(s){return s?s<1024?s+" B":s<1024*1024?(s/1024).toFixed(1)+" KB":(s/(1024*1024)).toFixed(1)+" MB":""}function He(s){return s?s.startsWith("data:")||s.startsWith("http:")||s.startsWith("https:")?s:`${window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin}${s}`:""}function cs(s){if(!s)return"ðŸ“Ž";const e=s.toLowerCase().split(".").pop()||"";return{jpg:"ðŸ–¼ï¸",jpeg:"ðŸ–¼ï¸",png:"ðŸ–¼ï¸",gif:"ðŸ–¼ï¸",bmp:"ðŸ–¼ï¸",svg:"ðŸ–¼ï¸",webp:"ðŸ–¼ï¸",mp4:"ðŸŽ¬",mov:"ðŸŽ¬",avi:"ðŸŽ¬",mkv:"ðŸŽ¬",webm:"ðŸŽ¬",flv:"ðŸŽ¬",mp3:"ðŸŽµ",wav:"ðŸŽµ",ogg:"ðŸŽµ",flac:"ðŸŽµ",pdf:"ðŸ“„",doc:"ðŸ“",docx:"ðŸ“",txt:"ðŸ“",rtf:"ðŸ“",xls:"ðŸ“Š",xlsx:"ðŸ“Š",csv:"ðŸ“Š",ppt:"ðŸ“½ï¸",pptx:"ðŸ“½ï¸",zip:"ðŸ“¦",rar:"ðŸ“¦","7z":"ðŸ“¦",tar:"ðŸ“¦",gz:"ðŸ“¦",js:"ðŸ’»",ts:"ðŸ’»",py:"ðŸ’»",java:"ðŸ’»",cpp:"ðŸ’»",c:"ðŸ’»",cs:"ðŸ’»",html:"ðŸ’»",css:"ðŸ’»",json:"ðŸ’»",blend:"ðŸŽ¨",fbx:"ðŸŽ¨",obj:"ðŸŽ¨",stl:"ðŸŽ¨",psd:"ðŸŽ¨",ai:"ðŸŽ¨",sketch:"ðŸŽ¨"}[e]||"ðŸ“Ž"}function fa(s){if(!s)return!1;const e=s.toLowerCase().split(".").pop()||"";return["jpg","jpeg","png","gif","bmp","svg","webp"].includes(e)}function ha(s){if(!s)return!1;const e=s.toLowerCase().split(".").pop()||"";return["mp4","mov","avi","mkv","webm","flv"].includes(e)}function Li(){document.querySelectorAll('.spoiler[data-spoiler="true"]').forEach(e=>{e.hasAttribute("data-listener-attached")||(e.addEventListener("click",function(){this.classList.toggle("revealed")}),e.setAttribute("data-listener-attached","true"))})}function ff(s,e,t){let n,r,i;Ie(s,Ls,ee=>t(52,n=ee)),Ie(s,ws,ee=>t(53,r=ee)),Ie(s,rs,ee=>t(54,i=ee));let{messages:a}=e,{onReply:l=()=>{}}=e,{firstUnreadMessageId:o=null}=e,u=!1,f=null,p=!1,d=!1,m=0,g=0,v=null,A=null,I="";function y(ee){return i.find(pe=>pe.username===ee)}function E(ee){const pe=y(ee);return(pe==null?void 0:pe.color)||"#6b7280"}function w(ee){t(3,f=ee),t(4,p=ee.id===(r==null?void 0:r.id)),t(2,u=!0)}function T(ee,pe){ee.preventDefault(),t(8,v=pe),t(6,m=ee.clientX),t(7,g=ee.clientY),t(5,d=!0)}function C(){v&&(t(9,A=v.id),t(10,I=v.text),t(5,d=!1))}function S(ee){I.trim()&&ra(n,ee,I.trim()),t(9,A=null),t(10,I="")}function P(){t(9,A=null),t(10,I="")}function O(){v&&(confirm("Are you sure you want to delete this message?")&&qc(n,v.id),t(5,d=!1))}function N(){v&&(ia(n,v.id),t(5,d=!1))}function R(){v&&(l(v),t(5,d=!1))}async function F(){if(!(!(v!=null&&v.fileUrl)||!(v!=null&&v.fileName))){try{const ee=He(v.fileUrl),Ge=await(await fetch(ee)).blob(),it=window.URL.createObjectURL(Ge),$e=document.createElement("a");$e.href=it,$e.download=v.fileName,document.body.appendChild($e),$e.click(),document.body.removeChild($e),window.URL.revokeObjectURL(it)}catch(ee){console.error("Download failed:",ee)}t(5,d=!1)}}let B=!1,U=null;function G(){v&&(t(12,U=v),t(11,B=!0),t(5,d=!1))}function q(ee,pe){ee.preventDefault(),t(8,v=pe),t(6,m=ee.clientX),t(7,g=ee.clientY),t(5,d=!0)}function H(ee){if(ee)return a.find(pe=>pe.id===ee)}let J=null,j=null;function V(ee){t(13,J=ee)}function Z(){t(13,J=null)}function X(ee){t(14,j=ee)}function ie(){t(14,j=null)}Es(Li),ba(Li);function he(ee){Ns.call(this,s,ee)}function re(ee){Ns.call(this,s,ee)}const me=ee=>w(ee);function de(){I=this.value,t(10,I)}const se=(ee,pe)=>{pe.key==="Enter"&&!pe.shiftKey?(pe.preventDefault(),S(ee.id)):pe.key==="Escape"&&(pe.preventDefault(),P())},K=ee=>S(ee.id),ue=(ee,pe)=>pe.button===0&&V(He(ee.fileUrl)),fe=(ee,pe)=>pe.button===0&&X(He(ee.fileUrl)),ve=(ee,pe)=>pe.button===0&&ee.fileUrl&&V(He(ee.fileUrl)),ce=(ee,pe)=>q(pe,ee),ke=(ee,pe)=>{pe.button===0&&ee.fileUrl&&X(He(ee.fileUrl))},Se=(ee,pe)=>q(pe,ee),Te=(ee,pe)=>T(pe,ee);function Ze(ee){u=ee,t(2,u)}function De(ee){f=ee,t(3,f)}function Ne(ee){d=ee,t(5,d)}function Xe(ee){B=ee,t(11,B)}function yt(ee){U=ee,t(12,U)}return s.$$set=ee=>{"messages"in ee&&t(0,a=ee.messages),"onReply"in ee&&t(33,l=ee.onReply),"firstUnreadMessageId"in ee&&t(1,o=ee.firstUnreadMessageId)},[a,o,u,f,p,d,m,g,v,A,I,B,U,J,j,y,E,w,T,C,S,P,O,N,R,F,G,q,H,V,Z,X,ie,l,he,re,me,de,se,K,ue,fe,ve,ce,ke,Se,Te,Ze,De,Ne,Xe,yt]}class hf extends bt{constructor(e){super(),kt(this,e,ff,uf,_t,{messages:0,onReply:33,firstUnreadMessageId:1},null,[-1,-1,-1])}}function Mi(s,e,t){const n=s.slice();return n[6]=e[t],n}function Bi(s){let e,t,n,r="ðŸ“Œ",i,a,l="Pinned Messages",o,u,f,p=s[0].length+"",d,m,g,v,A=[],I=new Map,y=Ve(s[0]);const E=w=>w[6].id;for(let w=0;w<y.length;w+=1){let T=Mi(s,y,w),C=E(T);I.set(C,A[w]=Ui(C,T))}return{c(){e=k("div"),t=k("div"),n=k("span"),n.textContent=r,i=M(),a=k("span"),a.textContent=l,o=M(),u=k("span"),f=W("("),d=W(p),m=W(")"),g=M(),v=k("div");for(let w=0;w<A.length;w+=1)A[w].c();this.h()},l(w){e=b(w,"DIV",{class:!0});var T=D(e);t=b(T,"DIV",{class:!0});var C=D(t);n=b(C,"SPAN",{class:!0,"data-svelte-h":!0}),Q(n)!=="svelte-73xtmc"&&(n.textContent=r),i=L(C),a=b(C,"SPAN",{class:!0,"data-svelte-h":!0}),Q(a)!=="svelte-123zvdk"&&(a.textContent=l),o=L(C),u=b(C,"SPAN",{class:!0});var S=D(u);f=$(S,"("),d=$(S,p),m=$(S,")"),S.forEach(_),C.forEach(_),g=L(T),v=b(T,"DIV",{class:!0});var P=D(v);for(let O=0;O<A.length;O+=1)A[O].l(P);P.forEach(_),T.forEach(_),this.h()},h(){h(n,"class","pinned-icon svelte-1ivhp56"),h(a,"class","pinned-title svelte-1ivhp56"),h(u,"class","pinned-count svelte-1ivhp56"),h(t,"class","pinned-header svelte-1ivhp56"),h(v,"class","pinned-messages svelte-1ivhp56"),h(e,"class","pinned-container svelte-1ivhp56")},m(w,T){z(w,e,T),c(e,t),c(t,n),c(t,i),c(t,a),c(t,o),c(t,u),c(u,f),c(u,d),c(u,m),c(e,g),c(e,v);for(let C=0;C<A.length;C+=1)A[C]&&A[C].m(v,null)},p(w,T){T&1&&p!==(p=w[0].length+"")&&ne(d,p),T&7&&(y=Ve(w[0]),A=Ts(A,T,E,1,w,y,I,v,Ss,Ui,null,Mi))},d(w){w&&_(e);for(let T=0;T<A.length;T+=1)A[T].d()}}}function Ui(s,e){let t,n,r,i=e[6].user+"",a,l,o,u=e[6].text.substring(0,100)+"",f,p=e[6].text.length>100?"...":"",d,m,g,v=ji(e[6].timestamp)+"",A,I,y,E="Ã—",w,T,C;function S(){return e[3](e[6])}return{key:s,first:null,c(){t=k("div"),n=k("div"),r=k("span"),a=W(i),l=M(),o=k("span"),f=W(u),d=W(p),m=M(),g=k("span"),A=W(v),I=M(),y=k("button"),y.textContent=E,w=M(),this.h()},l(P){t=b(P,"DIV",{class:!0});var O=D(t);n=b(O,"DIV",{class:!0});var N=D(n);r=b(N,"SPAN",{class:!0,style:!0});var R=D(r);a=$(R,i),R.forEach(_),l=L(N),o=b(N,"SPAN",{class:!0});var F=D(o);f=$(F,u),d=$(F,p),F.forEach(_),m=L(N),g=b(N,"SPAN",{class:!0});var B=D(g);A=$(B,v),B.forEach(_),N.forEach(_),I=L(O),y=b(O,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(y)!=="svelte-87szfn"&&(y.textContent=E),w=L(O),O.forEach(_),this.h()},h(){h(r,"class","pinned-user svelte-1ivhp56"),Le(r,"color",e[1](e[6].user)),h(o,"class","pinned-text svelte-1ivhp56"),h(g,"class","pinned-time svelte-1ivhp56"),h(n,"class","pinned-message-content svelte-1ivhp56"),h(y,"class","unpin-btn svelte-1ivhp56"),h(y,"title","Unpin message"),h(t,"class","pinned-message svelte-1ivhp56"),this.first=t},m(P,O){z(P,t,O),c(t,n),c(n,r),c(r,a),c(n,l),c(n,o),c(o,f),c(o,d),c(n,m),c(n,g),c(g,A),c(t,I),c(t,y),c(t,w),T||(C=Y(y,"click",S),T=!0)},p(P,O){e=P,O&1&&i!==(i=e[6].user+"")&&ne(a,i),O&1&&Le(r,"color",e[1](e[6].user)),O&1&&u!==(u=e[6].text.substring(0,100)+"")&&ne(f,u),O&1&&p!==(p=e[6].text.length>100?"...":"")&&ne(d,p),O&1&&v!==(v=ji(e[6].timestamp)+"")&&ne(A,v)},d(P){P&&_(t),T=!1,C()}}}function df(s){let e,t=s[0].length>0&&Bi(s);return{c(){t&&t.c(),e=Fe()},l(n){t&&t.l(n),e=Fe()},m(n,r){t&&t.m(n,r),z(n,e,r)},p(n,[r]){n[0].length>0?t?t.p(n,r):(t=Bi(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Pe,o:Pe,d(n){n&&_(e),t&&t.d(n)}}}function ji(s){return new Date(s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}function pf(s,e,t){let n;Ie(s,rs,u=>t(4,n=u));let{pinnedMessages:r}=e;function i(u){return n.find(f=>f.username===u)}function a(u){const f=i(u);return(f==null?void 0:f.color)||"#6b7280"}function l(u){ia(u)}const o=u=>l(u.id);return s.$$set=u=>{"pinnedMessages"in u&&t(0,r=u.pinnedMessages)},[r,a,l,o]}class gf extends bt{constructor(e){super(),kt(this,e,pf,df,_t,{pinnedMessages:0})}}function qi(s,e,t){const n=s.slice();return n[42]=e[t].file,n[43]=e[t].preview,n[45]=t,n}function zi(s){let e,t='<div class="drag-overlay-content svelte-1938lan"><div class="drag-icon svelte-1938lan">ðŸ“</div> <div class="drag-text svelte-1938lan">Drop files here to upload</div></div>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(n){e=b(n,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1patjf9"&&(e.innerHTML=t),this.h()},h(){h(e,"class","drag-overlay svelte-1938lan")},m(n,r){z(n,e,r)},d(n){n&&_(e)}}}function Vi(s){let e,t,n,r,i=s[14].join(", ")+"",a,l,o=s[14].length===1?"is":"are",u,f;return{c(){e=k("div"),t=k("span"),n=M(),r=k("span"),a=W(i),l=M(),u=W(o),f=W(" typing..."),this.h()},l(p){e=b(p,"DIV",{class:!0});var d=D(e);t=b(d,"SPAN",{class:!0}),D(t).forEach(_),n=L(d),r=b(d,"SPAN",{});var m=D(r);a=$(m,i),l=L(m),u=$(m,o),f=$(m," typing..."),m.forEach(_),d.forEach(_),this.h()},h(){h(t,"class","typing-dots svelte-1938lan"),h(e,"class","typing-indicator svelte-1938lan")},m(p,d){z(p,e,d),c(e,t),c(e,n),c(e,r),c(r,a),c(r,l),c(r,u),c(r,f)},p(p,d){d[0]&16384&&i!==(i=p[14].join(", ")+"")&&ne(a,i),d[0]&16384&&o!==(o=p[14].length===1?"is":"are")&&ne(u,o)},d(p){p&&_(e)}}}function Hi(s){let e,t;return e=new Iu({}),e.$on("select",s[19]),e.$on("close",s[31]),{c(){pt(e.$$.fragment)},l(n){dt(e.$$.fragment,n)},m(n,r){ht(e,n,r),t=!0},p:Pe,i(n){t||(Oe(e.$$.fragment,n),t=!0)},o(n){Be(e.$$.fragment,n),t=!1},d(n){ft(e,n)}}}function mf(s){let e,t,n,r,i=s[5].user+"",a,l,o,u,f=s[5].text.substring(0,50)+"",p,d=s[5].text.length>50?"...":"",m,g,v,A="âœ•",I,y;return{c(){e=k("div"),t=k("div"),n=k("span"),r=W("Replying to "),a=W(i),l=W(":"),o=M(),u=k("span"),p=W(f),m=W(d),g=M(),v=k("button"),v.textContent=A,this.h()},l(E){e=b(E,"DIV",{class:!0});var w=D(e);t=b(w,"DIV",{class:!0});var T=D(t);n=b(T,"SPAN",{class:!0});var C=D(n);r=$(C,"Replying to "),a=$(C,i),l=$(C,":"),C.forEach(_),o=L(T),u=b(T,"SPAN",{class:!0});var S=D(u);p=$(S,f),m=$(S,d),S.forEach(_),T.forEach(_),g=L(w),v=b(w,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(v)!=="svelte-1av190j"&&(v.textContent=A),w.forEach(_),this.h()},h(){h(n,"class","reply-label svelte-1938lan"),h(u,"class","reply-preview svelte-1938lan"),h(t,"class","reply-info svelte-1938lan"),h(v,"class","cancel-reply svelte-1938lan"),h(e,"class","reply-bar svelte-1938lan")},m(E,w){z(E,e,w),c(e,t),c(t,n),c(n,r),c(n,a),c(n,l),c(t,o),c(t,u),c(u,p),c(u,m),c(e,g),c(e,v),I||(y=Y(v,"click",s[21]),I=!0)},p(E,w){w[0]&32&&i!==(i=E[5].user+"")&&ne(a,i),w[0]&32&&f!==(f=E[5].text.substring(0,50)+"")&&ne(p,f),w[0]&32&&d!==(d=E[5].text.length>50?"...":"")&&ne(m,d)},d(E){E&&_(e),I=!1,y()}}}function vf(s){let e,t,n='<span class="edit-label svelte-1938lan">Editing message</span> <span class="edit-hint svelte-1938lan">Press Escape to cancel</span>',r,i,a="âœ•",l,o;return{c(){e=k("div"),t=k("div"),t.innerHTML=n,r=M(),i=k("button"),i.textContent=a,this.h()},l(u){e=b(u,"DIV",{class:!0});var f=D(e);t=b(f,"DIV",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-1kwfa7y"&&(t.innerHTML=n),r=L(f),i=b(f,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(i)!=="svelte-1anw7a5"&&(i.textContent=a),f.forEach(_),this.h()},h(){h(t,"class","edit-info svelte-1938lan"),h(i,"class","cancel-edit svelte-1938lan"),h(e,"class","edit-bar svelte-1938lan")},m(u,f){z(u,e,f),c(e,t),c(e,r),c(e,i),l||(o=Y(i,"click",s[18]),l=!0)},p:Pe,d(u){u&&_(e),l=!1,o()}}}function Gi(s){let e,t,n,r=s[10].length+"",i,a,l=s[10].length>1?"s":"",o,u,f,p,d="âœ•",m,g,v,A,I,y=s[10].length+"",E,w,T=s[10].length>1?"s":"",C,S,P,O=Ve(s[10]),N=[];for(let R=0;R<O.length;R+=1)N[R]=$i(qi(s,O,R));return{c(){e=k("div"),t=k("div"),n=k("span"),i=W(r),a=W(" file"),o=W(l),u=W(" selected"),f=M(),p=k("button"),p.textContent=d,m=M(),g=k("div");for(let R=0;R<N.length;R+=1)N[R].c();v=M(),A=k("button"),I=W("Upload "),E=W(y),w=W(" file"),C=W(T),this.h()},l(R){e=b(R,"DIV",{class:!0});var F=D(e);t=b(F,"DIV",{class:!0});var B=D(t);n=b(B,"SPAN",{});var U=D(n);i=$(U,r),a=$(U," file"),o=$(U,l),u=$(U," selected"),U.forEach(_),f=L(B),p=b(B,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(p)!=="svelte-pcsk7y"&&(p.textContent=d),B.forEach(_),m=L(F),g=b(F,"DIV",{class:!0});var G=D(g);for(let H=0;H<N.length;H+=1)N[H].l(G);G.forEach(_),v=L(F),A=b(F,"BUTTON",{class:!0});var q=D(A);I=$(q,"Upload "),E=$(q,y),w=$(q," file"),C=$(q,T),q.forEach(_),F.forEach(_),this.h()},h(){h(p,"class","cancel-gallery svelte-1938lan"),h(t,"class","gallery-header svelte-1938lan"),h(g,"class","gallery-grid svelte-1938lan"),h(A,"class","upload-files-btn svelte-1938lan"),h(e,"class","file-gallery svelte-1938lan")},m(R,F){z(R,e,F),c(e,t),c(t,n),c(n,i),c(n,a),c(n,o),c(n,u),c(t,f),c(t,p),c(e,m),c(e,g);for(let B=0;B<N.length;B+=1)N[B]&&N[B].m(g,null);c(e,v),c(e,A),c(A,I),c(A,E),c(A,w),c(A,C),S||(P=[Y(p,"click",s[24]),Y(A,"click",s[28])],S=!0)},p(R,F){if(F[0]&1024&&r!==(r=R[10].length+"")&&ne(i,r),F[0]&1024&&l!==(l=R[10].length>1?"s":"")&&ne(o,l),F[0]&8389632){O=Ve(R[10]);let B;for(B=0;B<O.length;B+=1){const U=qi(R,O,B);N[B]?N[B].p(U,F):(N[B]=$i(U),N[B].c(),N[B].m(g,null))}for(;B<N.length;B+=1)N[B].d(1);N.length=O.length}F[0]&1024&&y!==(y=R[10].length+"")&&ne(E,y),F[0]&1024&&T!==(T=R[10].length>1?"s":"")&&ne(C,T)},d(R){R&&_(e),Cn(N,R),S=!1,xe(P)}}}function _f(s){let e,t,n;function r(l,o){return o[0]&1024&&(t=null),o[0]&1024&&(n=null),t==null&&(t=!!l[42].type.startsWith("video/")),t?wf:(n==null&&(n=!!l[42].type.startsWith("audio/")),n?yf:kf)}let i=r(s,[-1,-1]),a=i(s);return{c(){e=k("div"),a.c(),this.h()},l(l){e=b(l,"DIV",{class:!0});var o=D(e);a.l(o),o.forEach(_),this.h()},h(){h(e,"class","gallery-file-icon svelte-1938lan")},m(l,o){z(l,e,o),a.m(e,null)},p(l,o){i!==(i=r(l,o))&&(a.d(1),a=i(l),a&&(a.c(),a.m(e,null)))},d(l){l&&_(e),a.d()}}}function bf(s){let e,t,n;return{c(){e=k("img"),this.h()},l(r){e=b(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ue(e.src,t=s[43])||h(e,"src",t),h(e,"alt",n=s[42].name),h(e,"class","gallery-preview svelte-1938lan")},m(r,i){z(r,e,i)},p(r,i){i[0]&1024&&!Ue(e.src,t=r[43])&&h(e,"src",t),i[0]&1024&&n!==(n=r[42].name)&&h(e,"alt",n)},d(r){r&&_(e)}}}function kf(s){let e;return{c(){e=W("ðŸ“„")},l(t){e=$(t,"ðŸ“„")},m(t,n){z(t,e,n)},d(t){t&&_(e)}}}function yf(s){let e;return{c(){e=W("ðŸŽµ")},l(t){e=$(t,"ðŸŽµ")},m(t,n){z(t,e,n)},d(t){t&&_(e)}}}function wf(s){let e;return{c(){e=W("ðŸŽ¬")},l(t){e=$(t,"ðŸŽ¬")},m(t,n){z(t,e,n)},d(t){t&&_(e)}}}function $i(s){let e,t,n,r,i=s[42].name+"",a,l,o,u=(s[42].size/1024/1024).toFixed(2)+"",f,p,d,m,g="âœ•",v,A,I;function y(C,S){return C[43]?bf:_f}let E=y(s),w=E(s);function T(){return s[32](s[45])}return{c(){e=k("div"),w.c(),t=M(),n=k("div"),r=k("div"),a=W(i),l=M(),o=k("div"),f=W(u),p=W(" MB"),d=M(),m=k("button"),m.textContent=g,v=M(),this.h()},l(C){e=b(C,"DIV",{class:!0});var S=D(e);w.l(S),t=L(S),n=b(S,"DIV",{class:!0});var P=D(n);r=b(P,"DIV",{class:!0});var O=D(r);a=$(O,i),O.forEach(_),l=L(P),o=b(P,"DIV",{class:!0});var N=D(o);f=$(N,u),p=$(N," MB"),N.forEach(_),P.forEach(_),d=L(S),m=b(S,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(m)!=="svelte-17gof1i"&&(m.textContent=g),v=L(S),S.forEach(_),this.h()},h(){h(r,"class","gallery-file-name svelte-1938lan"),h(o,"class","gallery-file-size svelte-1938lan"),h(n,"class","gallery-file-info svelte-1938lan"),h(m,"class","remove-file svelte-1938lan"),h(e,"class","gallery-item svelte-1938lan")},m(C,S){z(C,e,S),w.m(e,null),c(e,t),c(e,n),c(n,r),c(r,a),c(n,l),c(n,o),c(o,f),c(o,p),c(e,d),c(e,m),c(e,v),A||(I=Y(m,"click",T),A=!0)},p(C,S){s=C,E===(E=y(s))&&w?w.p(s,S):(w.d(1),w=E(s),w&&(w.c(),w.m(e,t))),S[0]&1024&&i!==(i=s[42].name+"")&&ne(a,i),S[0]&1024&&u!==(u=(s[42].size/1024/1024).toFixed(2)+"")&&ne(f,u)},d(C){C&&_(e),w.d(),A=!1,I()}}}function Wi(s){let e,t,n,r="Uploading files...",i,a,l,o,u,f,p;return{c(){e=k("div"),t=k("div"),n=k("span"),n.textContent=r,i=M(),a=k("span"),l=W(s[8]),o=W("%"),u=M(),f=k("div"),p=k("div"),this.h()},l(d){e=b(d,"DIV",{class:!0});var m=D(e);t=b(m,"DIV",{class:!0});var g=D(t);n=b(g,"SPAN",{"data-svelte-h":!0}),Q(n)!=="svelte-10wvq4k"&&(n.textContent=r),i=L(g),a=b(g,"SPAN",{});var v=D(a);l=$(v,s[8]),o=$(v,"%"),v.forEach(_),g.forEach(_),u=L(m),f=b(m,"DIV",{class:!0});var A=D(f);p=b(A,"DIV",{class:!0,style:!0}),D(p).forEach(_),A.forEach(_),m.forEach(_),this.h()},h(){h(t,"class","upload-progress-info svelte-1938lan"),h(p,"class","progress-fill svelte-1938lan"),Le(p,"width",s[8]+"%"),h(f,"class","progress-bar svelte-1938lan"),h(e,"class","upload-progress-bar svelte-1938lan")},m(d,m){z(d,e,m),c(e,t),c(t,n),c(t,i),c(t,a),c(a,l),c(a,o),c(e,u),c(e,f),c(f,p)},p(d,m){m[0]&256&&ne(l,d[8]),m[0]&256&&Le(p,"width",d[8]+"%")},d(d){d&&_(e)}}}function Ef(s){let e,t,n,r,i,a,l,o,u,f,p,d,m,g,v,A,I,y,E,w,T,C,S="ðŸ“Ž",P,O,N="GIF",R,F,B,U,G,q,H,J,j,V=s[11]&&zi();o=new gf({props:{pinnedMessages:s[12]}}),f=new hf({props:{messages:s[0],onReply:s[20],firstUnreadMessageId:s[13]}});let Z=s[14].length>0&&Vi(s),X=s[4]&&Hi(s);function ie(se,K){if(se[7])return vf;if(se[5])return mf}let he=ie(s),re=he&&he(s),me=s[10].length>0&&!s[9]&&Gi(s),de=s[9]&&Wi(s);return{c(){e=k("div"),V&&V.c(),t=M(),n=k("div"),r=k("h2"),i=W(s[1]),a=M(),l=k("div"),pt(o.$$.fragment),u=M(),pt(f.$$.fragment),p=M(),Z&&Z.c(),d=M(),X&&X.c(),m=M(),re&&re.c(),g=M(),v=k("div"),me&&me.c(),A=M(),de&&de.c(),I=M(),y=k("input"),E=M(),w=k("div"),T=k("div"),C=k("button"),C.textContent=S,P=M(),O=k("button"),O.textContent=N,R=M(),F=k("textarea"),B=M(),U=k("button"),G=W("Send"),this.h()},l(se){e=b(se,"DIV",{class:!0});var K=D(e);V&&V.l(K),t=L(K),n=b(K,"DIV",{class:!0});var ue=D(n);r=b(ue,"H2",{class:!0});var fe=D(r);i=$(fe,s[1]),fe.forEach(_),ue.forEach(_),a=L(K),l=b(K,"DIV",{class:!0});var ve=D(l);dt(o.$$.fragment,ve),u=L(ve),dt(f.$$.fragment,ve),p=L(ve),Z&&Z.l(ve),ve.forEach(_),d=L(K),X&&X.l(K),m=L(K),re&&re.l(K),g=L(K),v=b(K,"DIV",{class:!0});var ce=D(v);me&&me.l(ce),A=L(ce),de&&de.l(ce),I=L(ce),y=b(ce,"INPUT",{type:!0,style:!0}),E=L(ce),w=b(ce,"DIV",{class:!0});var ke=D(w);T=b(ke,"DIV",{class:!0});var Se=D(T);C=b(Se,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(C)!=="svelte-1fiys3t"&&(C.textContent=S),P=L(Se),O=b(Se,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(O)!=="svelte-1i50t7a"&&(O.textContent=N),Se.forEach(_),R=L(ke),F=b(ke,"TEXTAREA",{placeholder:!0,maxlength:!0,rows:!0,class:!0}),D(F).forEach(_),B=L(ke),U=b(ke,"BUTTON",{class:!0});var Te=D(U);G=$(Te,"Send"),Te.forEach(_),ke.forEach(_),ce.forEach(_),K.forEach(_),this.h()},h(){h(r,"class","svelte-1938lan"),h(n,"class","chat-header svelte-1938lan"),h(l,"class","messages svelte-1938lan"),h(y,"type","file"),y.multiple=!0,Le(y,"display","none"),h(C,"class","input-icon-button svelte-1938lan"),h(C,"title","Attach file"),h(O,"class","input-icon-button svelte-1938lan"),h(O,"title","Add GIF"),h(T,"class","input-buttons-left svelte-1938lan"),h(F,"placeholder","Type a message... (Shift+Enter for new line)"),h(F,"maxlength","2000"),h(F,"rows","1"),h(F,"class","svelte-1938lan"),h(U,"class","send-button svelte-1938lan"),U.disabled=q=!s[2].trim(),h(w,"class","input-container svelte-1938lan"),h(v,"class","input-wrapper svelte-1938lan"),h(e,"class","chat-container svelte-1938lan")},m(se,K){z(se,e,K),V&&V.m(e,null),c(e,t),c(e,n),c(n,r),c(r,i),c(e,a),c(e,l),ht(o,l,null),c(l,u),ht(f,l,null),c(l,p),Z&&Z.m(l,null),s[30](l),c(e,d),X&&X.m(e,null),c(e,m),re&&re.m(e,null),c(e,g),c(e,v),me&&me.m(v,null),c(v,A),de&&de.m(v,null),c(v,I),c(v,y),s[33](y),c(v,E),c(v,w),c(w,T),c(T,C),c(T,P),c(T,O),c(w,R),c(w,F),et(F,s[2]),c(w,B),c(w,U),c(U,G),H=!0,J||(j=[Y(y,"change",s[22]),Y(C,"click",s[34]),Y(O,"click",s[35]),Y(F,"input",s[36]),Y(F,"input",s[15]),Y(F,"keydown",s[16]),Y(U,"click",s[17]),Y(e,"dragenter",s[25]),Y(e,"dragleave",s[26]),Y(e,"dragover",Af),Y(e,"drop",s[27])],J=!0)},p(se,K){se[11]?V||(V=zi(),V.c(),V.m(e,t)):V&&(V.d(1),V=null),(!H||K[0]&2)&&ne(i,se[1]);const ue={};K[0]&4096&&(ue.pinnedMessages=se[12]),o.$set(ue);const fe={};K[0]&1&&(fe.messages=se[0]),K[0]&8192&&(fe.firstUnreadMessageId=se[13]),f.$set(fe),se[14].length>0?Z?Z.p(se,K):(Z=Vi(se),Z.c(),Z.m(l,null)):Z&&(Z.d(1),Z=null),se[4]?X?(X.p(se,K),K[0]&16&&Oe(X,1)):(X=Hi(se),X.c(),Oe(X,1),X.m(e,m)):X&&(en(),Be(X,1,1,()=>{X=null}),tn()),he===(he=ie(se))&&re?re.p(se,K):(re&&re.d(1),re=he&&he(se),re&&(re.c(),re.m(e,g))),se[10].length>0&&!se[9]?me?me.p(se,K):(me=Gi(se),me.c(),me.m(v,A)):me&&(me.d(1),me=null),se[9]?de?de.p(se,K):(de=Wi(se),de.c(),de.m(v,I)):de&&(de.d(1),de=null),K[0]&4&&et(F,se[2]),(!H||K[0]&4&&q!==(q=!se[2].trim()))&&(U.disabled=q)},i(se){H||(Oe(o.$$.fragment,se),Oe(f.$$.fragment,se),Oe(X),H=!0)},o(se){Be(o.$$.fragment,se),Be(f.$$.fragment,se),Be(X),H=!1},d(se){se&&_(e),V&&V.d(),ft(o),ft(f),Z&&Z.d(),s[30](null),X&&X.d(),re&&re.d(),me&&me.d(),de&&de.d(),s[33](null),J=!1,xe(j)}}}function Af(s){s.preventDefault(),s.stopPropagation()}function Sf(s,e,t){let n,r,i,a,l,o,u;Ie(s,Ls,K=>t(1,i=K)),Ie(s,ws,K=>t(40,a=K)),Ie(s,Ut,K=>t(29,l=K)),Ie(s,yr,K=>t(13,o=K)),Ie(s,sa,K=>t(14,u=K));let f="",p,d,m=!1,g=null,v,A=null,I=0,y=!1,E=[],w=[],T=!1,C=0;async function S(){await ka(),p&&t(3,p.scrollTop=p.scrollHeight,p)}function P(){Hn(!0),d&&clearTimeout(d),d=setTimeout(()=>{Hn(!1)},1e3)}function O(K){if(K.key==="ArrowUp"&&!f.trim()&&!A){K.preventDefault();const ue=n.filter(fe=>fe.userId===(a==null?void 0:a.id));if(ue.length>0){const fe=ue[ue.length-1];t(7,A=fe),t(2,f=fe.text)}}else K.key==="Escape"&&A?(K.preventDefault(),R()):K.key==="Enter"&&!K.shiftKey&&(K.preventDefault(),N())}function N(){f.trim()&&(A?(ra(i,A.id,f.trim()),t(7,A=null)):(hn(i,f.trim(),"text",{replyTo:g==null?void 0:g.id}),t(5,g=null)),t(2,f=""),Hn(!1),d&&clearTimeout(d))}function R(){t(7,A=null),t(2,f="")}function F(K){hn(i,"","gif",{gifUrl:K.detail,replyTo:g==null?void 0:g.id}),t(5,g=null),t(4,m=!1)}function B(K){t(5,g=K);const ue=document.querySelector('input[type="text"]');ue==null||ue.focus()}function U(){t(5,g=null)}async function G(K){const ue=K.target,fe=Array.from(ue.files||[]);if(fe.length===0){console.log("No files selected");return}console.log("Files selected:",fe.length);const ve=1024*1024*1024;for(const ce of fe)if(ce.size>ve){alert(`File too large! Maximum size is 1GB per file. "${ce.name}" is ${(ce.size/1024/1024).toFixed(2)}MB`),ue.value="";return}E=fe,t(10,w=await Promise.all(fe.map(async ce=>{if(ce.type.startsWith("image/")){const ke=await new Promise(Se=>{const Te=new FileReader;Te.onload=Ze=>{var De;return Se((De=Ze.target)==null?void 0:De.result)},Te.readAsDataURL(ce)});return{file:ce,preview:ke}}return{file:ce}}))),ue.value=""}function q(K){E=E.filter((ue,fe)=>fe!==K),t(10,w=w.filter((ue,fe)=>fe!==K))}function H(){E=[],t(10,w=[])}function J(K){var ue;K.preventDefault(),K.stopPropagation(),C++,(ue=K.dataTransfer)!=null&&ue.types.includes("Files")&&t(11,T=!0)}function j(K){K.preventDefault(),K.stopPropagation(),C--,C===0&&t(11,T=!1)}async function V(K){var ve;K.preventDefault(),K.stopPropagation(),t(11,T=!1),C=0;const ue=Array.from(((ve=K.dataTransfer)==null?void 0:ve.files)||[]);if(ue.length===0)return;const fe=1024*1024*1024;for(const ce of ue)if(ce.size>fe){alert(`File too large! Maximum size is 1GB per file. "${ce.name}" is ${(ce.size/1024/1024).toFixed(2)}MB`);return}E=ue,t(10,w=await Promise.all(ue.map(async ce=>{if(ce.type.startsWith("image/")){const ke=await new Promise(Se=>{const Te=new FileReader;Te.onload=Ze=>{var De;return Se((De=Ze.target)==null?void 0:De.result)},Te.readAsDataURL(ce)});return{file:ce,preview:ke}}return{file:ce}})))}async function Z(){if(E.length===0)return;t(9,y=!0);const K=E.length;let ue=0;try{const fe=window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin,ve=[];for(const ce of E){const ke=await new Promise((Se,Te)=>{const Ze=new FormData;Ze.append("file",ce),Ze.append("channelId",i);const De=new XMLHttpRequest;De.upload.addEventListener("progress",Ne=>{if(Ne.lengthComputable){const Xe=Ne.loaded/Ne.total*100,yt=(ue+Xe/100)/K*100;t(8,I=Math.round(yt))}}),De.addEventListener("load",()=>{if(De.status===200){const Ne=JSON.parse(De.responseText);ue++,Se({fileUrl:Ne.fileUrl,fileName:ce.name,fileSize:ce.size})}else Te(new Error("Upload failed"))}),De.addEventListener("error",()=>{Te(new Error("Upload failed"))}),De.open("POST",`${fe}/api/upload`),De.send(Ze)});ve.push(ke)}ve.length===1?hn(i,f.trim()||`Shared: ${ve[0].fileName}`,"file",{fileUrl:ve[0].fileUrl,fileName:ve[0].fileName,fileSize:ve[0].fileSize,replyTo:g==null?void 0:g.id}):hn(i,f.trim()||`Shared ${ve.length} files`,"file",{files:ve,replyTo:g==null?void 0:g.id}),console.log("All files uploaded"),t(2,f=""),t(5,g=null),E=[],t(10,w=[]),t(9,y=!1),t(8,I=0)}catch(fe){console.error("Upload error:",fe),alert("Failed to upload files. Please try again."),t(9,y=!1),t(8,I=0)}}Es(()=>{S()});function X(K){ot[K?"unshift":"push"](()=>{p=K,t(3,p)})}const ie=()=>t(4,m=!1),he=K=>q(K);function re(K){ot[K?"unshift":"push"](()=>{v=K,t(6,v)})}const me=()=>v==null?void 0:v.click(),de=()=>t(4,m=!m);function se(){f=this.value,t(2,f)}return s.$$.update=()=>{s.$$.dirty[0]&536870914&&t(0,n=l[i]||[]),s.$$.dirty[0]&1&&t(12,r=n.filter(K=>K.isPinned)),s.$$.dirty[0]&1&&n.length&&S()},[n,i,f,p,m,g,v,A,I,y,w,T,r,o,u,P,O,N,R,F,B,U,G,q,H,J,j,V,Z,l,X,ie,he,re,me,de,se]}class Tf extends bt{constructor(e){super(),kt(this,e,Sf,Ef,_t,{},null,[-1,-1])}}function Cf(s){let e,t,n,r,i,a,l,o,u,f="Join Chat",p,d;return{c(){e=k("div"),t=k("div"),n=k("img"),i=M(),a=k("form"),l=k("input"),o=M(),u=k("button"),u.textContent=f,this.h()},l(m){e=b(m,"DIV",{class:!0});var g=D(e);t=b(g,"DIV",{class:!0});var v=D(t);n=b(v,"IMG",{src:!0,alt:!0,class:!0}),i=L(v),a=b(v,"FORM",{class:!0});var A=D(a);l=b(A,"INPUT",{type:!0,placeholder:!0,maxlength:!0,class:!0}),o=L(A),u=b(A,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Q(u)!=="svelte-1oym1t5"&&(u.textContent=f),A.forEach(_),v.forEach(_),g.forEach(_),this.h()},h(){Ue(n.src,r="/wabi-logo.png")||h(n,"src",r),h(n,"alt","Wabi"),h(n,"class","logo svelte-1icgi6p"),h(l,"type","text"),h(l,"placeholder","Enter your username"),h(l,"maxlength","20"),l.required=!0,l.autofocus=!0,h(l,"class","svelte-1icgi6p"),h(u,"type","submit"),h(u,"class","svelte-1icgi6p"),h(a,"class","svelte-1icgi6p"),h(t,"class","login-box svelte-1icgi6p"),h(e,"class","login-container svelte-1icgi6p")},m(m,g){z(m,e,g),c(e,t),c(t,n),c(t,i),c(t,a),c(a,l),et(l,s[0]),c(a,o),c(a,u),l.focus(),p||(d=[Y(l,"input",s[2]),Y(a,"submit",ya(s[1]))],p=!0)},p(m,[g]){g&1&&l.value!==m[0]&&et(l,m[0])},i:Pe,o:Pe,d(m){m&&_(e),p=!1,xe(d)}}}function If(s,e,t){const n=yl();let r="";function i(){r.trim()&&n("login",r.trim())}function a(){r=this.value,t(0,r)}return[r,i,a]}class Rf extends bt{constructor(e){super(),kt(this,e,If,Cf,_t,{})}}function Yi(s,e,t){const n=s.slice();return n[17]=e[t],n}function Zi(s){let e,t,n,r="Total Messages",i,a,l=s[3].totalMessages.toLocaleString()+"",o,u,f,p,d="Storage Used",m,g,v=Sn(s[3].totalSize)+"",A,I,y,E,w="Archives",T,C,S=s[3].archives.length+"",P,O,N,R,F,B="Rotation Period",U,G,q,H="Weekly",J,j="Monthly",V,Z="Every 6 Months",X,ie="Yearly",he,re,me="How often to create a new archive file (like changing batteries)",de,se,K,ue,fe="Keep Last",ve,ce,ke,Se,Te,Ze="archives",De,Ne,Xe="Older archives are automatically deleted to save space",yt,ee,pe,Ge,it="ðŸ—‘ï¸ Clear All History",$e,Ke;function Ct(ge,we){return ge[3].archives.length>0?Of:Df}let Ht=Ct(s),Qe=Ht(s);return{c(){e=k("div"),t=k("div"),n=k("div"),n.textContent=r,i=M(),a=k("div"),o=W(l),u=M(),f=k("div"),p=k("div"),p.textContent=d,m=M(),g=k("div"),A=W(v),I=M(),y=k("div"),E=k("div"),E.textContent=w,T=M(),C=k("div"),P=W(S),O=M(),N=k("div"),R=k("label"),F=k("span"),F.textContent=B,U=M(),G=k("select"),q=k("option"),q.textContent=H,J=k("option"),J.textContent=j,V=k("option"),V.textContent=Z,X=k("option"),X.textContent=ie,he=M(),re=k("p"),re.textContent=me,de=M(),se=k("div"),K=k("label"),ue=k("span"),ue.textContent=fe,ve=M(),ce=k("div"),ke=k("input"),Se=M(),Te=k("span"),Te.textContent=Ze,De=M(),Ne=k("p"),Ne.textContent=Xe,yt=M(),Qe.c(),ee=M(),pe=k("div"),Ge=k("button"),Ge.textContent=it,this.h()},l(ge){e=b(ge,"DIV",{class:!0});var we=D(e);t=b(we,"DIV",{class:!0});var Dt=D(t);n=b(Dt,"DIV",{class:!0,"data-svelte-h":!0}),Q(n)!=="svelte-akn32o"&&(n.textContent=r),i=L(Dt),a=b(Dt,"DIV",{class:!0});var Lt=D(a);o=$(Lt,l),Lt.forEach(_),Dt.forEach(_),u=L(we),f=b(we,"DIV",{class:!0});var qe=D(f);p=b(qe,"DIV",{class:!0,"data-svelte-h":!0}),Q(p)!=="svelte-5vlbe4"&&(p.textContent=d),m=L(qe),g=b(qe,"DIV",{class:!0});var Ot=D(g);A=$(Ot,v),Ot.forEach(_),qe.forEach(_),I=L(we),y=b(we,"DIV",{class:!0});var Nt=D(y);E=b(Nt,"DIV",{class:!0,"data-svelte-h":!0}),Q(E)!=="svelte-1e1df45"&&(E.textContent=w),T=L(Nt),C=b(Nt,"DIV",{class:!0});var It=D(C);P=$(It,S),It.forEach(_),Nt.forEach(_),we.forEach(_),O=L(ge),N=b(ge,"DIV",{class:!0});var wt=D(N);R=b(wt,"LABEL",{class:!0});var Rt=D(R);F=b(Rt,"SPAN",{class:!0,"data-svelte-h":!0}),Q(F)!=="svelte-608xyy"&&(F.textContent=B),U=L(Rt),G=b(Rt,"SELECT",{class:!0});var Je=D(G);q=b(Je,"OPTION",{"data-svelte-h":!0}),Q(q)!=="svelte-crm6lv"&&(q.textContent=H),J=b(Je,"OPTION",{"data-svelte-h":!0}),Q(J)!=="svelte-hva46z"&&(J.textContent=j),V=b(Je,"OPTION",{"data-svelte-h":!0}),Q(V)!=="svelte-1s0lvql"&&(V.textContent=Z),X=b(Je,"OPTION",{"data-svelte-h":!0}),Q(X)!=="svelte-jp5v27"&&(X.textContent=ie),Je.forEach(_),Rt.forEach(_),he=L(wt),re=b(wt,"P",{class:!0,"data-svelte-h":!0}),Q(re)!=="svelte-qu5pay"&&(re.textContent=me),wt.forEach(_),de=L(ge),se=b(ge,"DIV",{class:!0});var Jt=D(se);K=b(Jt,"LABEL",{class:!0});var Me=D(K);ue=b(Me,"SPAN",{class:!0,"data-svelte-h":!0}),Q(ue)!=="svelte-1im50qe"&&(ue.textContent=fe),ve=L(Me),ce=b(Me,"DIV",{class:!0});var Gt=D(ce);ke=b(Gt,"INPUT",{type:!0,min:!0,max:!0,class:!0}),Se=L(Gt),Te=b(Gt,"SPAN",{class:!0,"data-svelte-h":!0}),Q(Te)!=="svelte-nj3imy"&&(Te.textContent=Ze),Gt.forEach(_),Me.forEach(_),De=L(Jt),Ne=b(Jt,"P",{class:!0,"data-svelte-h":!0}),Q(Ne)!=="svelte-he359b"&&(Ne.textContent=Xe),Jt.forEach(_),yt=L(ge),Qe.l(ge),ee=L(ge),pe=b(ge,"DIV",{class:!0});var fs=D(pe);Ge=b(fs,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(Ge)!=="svelte-1u0bcm7"&&(Ge.textContent=it),fs.forEach(_),this.h()},h(){h(n,"class","stat-label svelte-qkrj18"),h(a,"class","stat-value svelte-qkrj18"),h(t,"class","stat svelte-qkrj18"),h(p,"class","stat-label svelte-qkrj18"),h(g,"class","stat-value svelte-qkrj18"),h(f,"class","stat svelte-qkrj18"),h(E,"class","stat-label svelte-qkrj18"),h(C,"class","stat-value svelte-qkrj18"),h(y,"class","stat svelte-qkrj18"),h(e,"class","stats-panel svelte-qkrj18"),h(F,"class","label svelte-qkrj18"),q.__value="week",et(q,q.__value),J.__value="month",et(J,J.__value),V.__value="half-year",et(V,V.__value),X.__value="year",et(X,X.__value),h(G,"class","svelte-qkrj18"),s[1]===void 0&&wa(()=>s[12].call(G)),h(R,"class","svelte-qkrj18"),h(re,"class","hint svelte-qkrj18"),h(N,"class","setting-group svelte-qkrj18"),h(ue,"class","label svelte-qkrj18"),h(ke,"type","number"),h(ke,"min","1"),h(ke,"max","52"),h(ke,"class","svelte-qkrj18"),h(Te,"class","unit svelte-qkrj18"),h(ce,"class","number-input-group svelte-qkrj18"),h(K,"class","svelte-qkrj18"),h(Ne,"class","hint svelte-qkrj18"),h(se,"class","setting-group svelte-qkrj18"),h(Ge,"class","btn-danger svelte-qkrj18"),h(pe,"class","actions svelte-qkrj18")},m(ge,we){z(ge,e,we),c(e,t),c(t,n),c(t,i),c(t,a),c(a,o),c(e,u),c(e,f),c(f,p),c(f,m),c(f,g),c(g,A),c(e,I),c(e,y),c(y,E),c(y,T),c(y,C),c(C,P),z(ge,O,we),z(ge,N,we),c(N,R),c(R,F),c(R,U),c(R,G),c(G,q),c(G,J),c(G,V),c(G,X),Cr(G,s[1],!0),c(N,he),c(N,re),z(ge,de,we),z(ge,se,we),c(se,K),c(K,ue),c(K,ve),c(K,ce),c(ce,ke),et(ke,s[2]),c(ce,Se),c(ce,Te),c(se,De),c(se,Ne),z(ge,yt,we),Qe.m(ge,we),z(ge,ee,we),z(ge,pe,we),c(pe,Ge),$e||(Ke=[Y(G,"change",s[12]),Y(G,"change",s[5]),Y(ke,"input",s[13]),Y(ke,"change",s[6]),Y(Ge,"click",s[10])],$e=!0)},p(ge,we){we&8&&l!==(l=ge[3].totalMessages.toLocaleString()+"")&&ne(o,l),we&8&&v!==(v=Sn(ge[3].totalSize)+"")&&ne(A,v),we&8&&S!==(S=ge[3].archives.length+"")&&ne(P,S),we&2&&Cr(G,ge[1]),we&4&&Al(ke.value)!==ge[2]&&et(ke,ge[2]),Ht===(Ht=Ct(ge))&&Qe?Qe.p(ge,we):(Qe.d(1),Qe=Ht(ge),Qe&&(Qe.c(),Qe.m(ee.parentNode,ee)))},d(ge){ge&&(_(e),_(O),_(N),_(de),_(se),_(yt),_(ee),_(pe)),Qe.d(ge),$e=!1,xe(Ke)}}}function Df(s){let e,t="<p>No archives yet. Messages will be saved as you chat.</p>";return{c(){e=k("div"),e.innerHTML=t,this.h()},l(n){e=b(n,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-kqcvlb"&&(e.innerHTML=t),this.h()},h(){h(e,"class","empty-state svelte-qkrj18")},m(n,r){z(n,e,r)},p:Pe,d(n){n&&_(e)}}}function Of(s){let e,t,n,r="Archive History",i,a,l="ðŸ“¦ Export All",o,u,f,p,d=Ve(s[3].archives),m=[];for(let g=0;g<d.length;g+=1)m[g]=Xi(Yi(s,d,g));return{c(){e=k("div"),t=k("div"),n=k("h4"),n.textContent=r,i=M(),a=k("button"),a.textContent=l,o=M(),u=k("div");for(let g=0;g<m.length;g+=1)m[g].c();this.h()},l(g){e=b(g,"DIV",{class:!0});var v=D(e);t=b(v,"DIV",{class:!0});var A=D(t);n=b(A,"H4",{class:!0,"data-svelte-h":!0}),Q(n)!=="svelte-1i91zrs"&&(n.textContent=r),i=L(A),a=b(A,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(a)!=="svelte-197zvis"&&(a.textContent=l),A.forEach(_),o=L(v),u=b(v,"DIV",{class:!0});var I=D(u);for(let y=0;y<m.length;y+=1)m[y].l(I);I.forEach(_),v.forEach(_),this.h()},h(){h(n,"class","svelte-qkrj18"),h(a,"class","btn-small svelte-qkrj18"),h(t,"class","section-header svelte-qkrj18"),h(u,"class","archive-list svelte-qkrj18"),h(e,"class","archives-section svelte-qkrj18")},m(g,v){z(g,e,v),c(e,t),c(t,n),c(t,i),c(t,a),c(e,o),c(e,u);for(let A=0;A<m.length;A+=1)m[A]&&m[A].m(u,null);f||(p=Y(a,"click",s[9]),f=!0)},p(g,v){if(v&392){d=Ve(g[3].archives);let A;for(A=0;A<d.length;A+=1){const I=Yi(g,d,A);m[A]?m[A].p(I,v):(m[A]=Xi(I),m[A].c(),m[A].m(u,null))}for(;A<m.length;A+=1)m[A].d(1);m.length=d.length}},d(g){g&&_(e),Cn(m,g),f=!1,p()}}}function Xi(s){let e,t,n,r=lr(s[17].period)+"",i,a,l,o=Sn(s[17].size)+"",u,f,p=s[17].messageCount.toLocaleString()+"",d,m,g,v,A,I="ðŸ’¾",y,E,w="ðŸ—‘ï¸",T,C,S;function P(){return s[14](s[17])}function O(){return s[15](s[17])}return{c(){e=k("div"),t=k("div"),n=k("span"),i=W(r),a=M(),l=k("span"),u=W(o),f=W(" â€¢ "),d=W(p),m=W(" messages"),g=M(),v=k("div"),A=k("button"),A.textContent=I,y=M(),E=k("button"),E.textContent=w,T=M(),this.h()},l(N){e=b(N,"DIV",{class:!0});var R=D(e);t=b(R,"DIV",{class:!0});var F=D(t);n=b(F,"SPAN",{class:!0});var B=D(n);i=$(B,r),B.forEach(_),a=L(F),l=b(F,"SPAN",{class:!0});var U=D(l);u=$(U,o),f=$(U," â€¢ "),d=$(U,p),m=$(U," messages"),U.forEach(_),F.forEach(_),g=L(R),v=b(R,"DIV",{class:!0});var G=D(v);A=b(G,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(A)!=="svelte-13e8aja"&&(A.textContent=I),y=L(G),E=b(G,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(E)!=="svelte-1br206h"&&(E.textContent=w),G.forEach(_),T=L(R),R.forEach(_),this.h()},h(){h(n,"class","archive-period svelte-qkrj18"),h(l,"class","archive-meta svelte-qkrj18"),h(t,"class","archive-info svelte-qkrj18"),h(A,"class","btn-icon svelte-qkrj18"),h(A,"title","Export"),h(E,"class","btn-icon danger svelte-qkrj18"),h(E,"title","Delete"),h(v,"class","archive-actions svelte-qkrj18"),h(e,"class","archive-item svelte-qkrj18")},m(N,R){z(N,e,R),c(e,t),c(t,n),c(n,i),c(t,a),c(t,l),c(l,u),c(l,f),c(l,d),c(l,m),c(e,g),c(e,v),c(v,A),c(v,y),c(v,E),c(e,T),C||(S=[Y(A,"click",P),Y(E,"click",O)],C=!0)},p(N,R){s=N,R&8&&r!==(r=lr(s[17].period)+"")&&ne(i,r),R&8&&o!==(o=Sn(s[17].size)+"")&&ne(u,o),R&8&&p!==(p=s[17].messageCount.toLocaleString()+"")&&ne(d,p)},d(N){N&&_(e),C=!1,xe(S)}}}function Nf(s){let e,t,n='<h3 class="svelte-qkrj18">ðŸ’¾ Local Storage</h3> <p class="subtitle svelte-qkrj18">Your chat history is saved only on your device. The server stores nothing permanently.</p>',r,i,a,l,o,u,f="Save chat history locally",p,d,m="When enabled, messages are stored in your browser. You control your data.",g,v,A,I=s[0]&&Zi(s);return{c(){e=k("div"),t=k("div"),t.innerHTML=n,r=M(),i=k("div"),a=k("label"),l=k("input"),o=M(),u=k("span"),u.textContent=f,p=M(),d=k("p"),d.textContent=m,g=M(),I&&I.c(),this.h()},l(y){e=b(y,"DIV",{class:!0});var E=D(e);t=b(E,"DIV",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-s9o5r3"&&(t.innerHTML=n),r=L(E),i=b(E,"DIV",{class:!0});var w=D(i);a=b(w,"LABEL",{class:!0});var T=D(a);l=b(T,"INPUT",{type:!0,class:!0}),o=L(T),u=b(T,"SPAN",{class:!0,"data-svelte-h":!0}),Q(u)!=="svelte-1ssgcs1"&&(u.textContent=f),T.forEach(_),p=L(w),d=b(w,"P",{class:!0,"data-svelte-h":!0}),Q(d)!=="svelte-1hbmqvb"&&(d.textContent=m),w.forEach(_),g=L(E),I&&I.l(E),E.forEach(_),this.h()},h(){h(t,"class","header svelte-qkrj18"),h(l,"type","checkbox"),h(l,"class","svelte-qkrj18"),h(u,"class","toggle-label"),h(a,"class","toggle-setting svelte-qkrj18"),h(d,"class","hint svelte-qkrj18"),h(i,"class","setting-group svelte-qkrj18"),h(e,"class","storage-settings svelte-qkrj18")},m(y,E){z(y,e,E),c(e,t),c(e,r),c(e,i),c(i,a),c(a,l),l.checked=s[0],c(a,o),c(a,u),c(i,p),c(i,d),c(e,g),I&&I.m(e,null),v||(A=[Y(l,"change",s[11]),Y(l,"change",s[4])],v=!0)},p(y,[E]){E&1&&(l.checked=y[0]),y[0]?I?I.p(y,E):(I=Zi(y),I.c(),I.m(e,null)):I&&(I.d(1),I=null)},i:Pe,o:Pe,d(y){y&&_(e),I&&I.d(),v=!1,xe(A)}}}function Sn(s){if(s===0)return"0 B";const e=s/(1024*1024);return e>=.01?`${e.toFixed(2)} MB`:`${(s/1024).toFixed(2)} KB`}function lr(s){if(s.includes("-W")){const[e,t]=s.split("-W");return`Week ${t}, ${e}`}else if(s.includes("-H")){const[e,t]=s.split("-");return`${t==="H1"?"First":"Second"} Half ${e}`}else if(s.match(/^\d{4}-\d{2}$/)){const[e,t]=s.split("-");return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(t)-1]} ${e}`}else return`Year ${s}`}function Pf(s,e,t){let n=!1,r=Tt.getRotationPeriod(),i=Tt.getMaxArchives(),a={archives:[],totalSize:0,totalMessages:0};async function l(){t(0,n=!n),await Tt.setEnabled(n),n||confirm("Disable local storage? Your saved history will remain until you clear it manually.")||(t(0,n=!0),await Tt.setEnabled(!0)),await g()}async function o(){await Tt.setRotationPeriod(r),await g()}async function u(){await Tt.setMaxArchives(i),await g()}async function f(w){confirm(`Delete archive "${lr(w)}"?`)&&(await Tt.deleteArchive(w),await g())}async function p(w){await Tt.exportArchive(w)}async function d(){await Tt.exportArchives()}async function m(){confirm("Delete ALL saved chat history? This cannot be undone!")&&(await Tt.clearAllHistory(),await g())}async function g(){t(3,a=await Tt.getStats())}Es(async()=>{t(0,n=await Tt.isEnabled()),await g()});function v(){n=this.checked,t(0,n)}function A(){r=Ea(this),t(1,r)}function I(){i=Al(this.value),t(2,i)}return[n,r,i,a,l,o,u,f,p,d,m,v,A,I,w=>p(w.period),w=>f(w.period)]}class Ff extends bt{constructor(e){super(),kt(this,e,Pf,Nf,_t,{})}}function Ki(s){let e,t,n,r,i="âš™ï¸ Settings",a,l,o="âœ•",u,f,p,d,m="ðŸŽ¤ Audio & Video",g,v,A,I='<span class="setting-label svelte-9y3hbf">Sound Effects</span> <span class="setting-description svelte-9y3hbf">Play sounds for messages and notifications</span>',y,E,w=s[1]?"ðŸ”Š":"ðŸ”‡",T,C,S,P,O='<span class="setting-label svelte-9y3hbf">Microphone</span> <span class="setting-description svelte-9y3hbf">Enable microphone for voice calls</span>',N,R,F=s[3]?"ðŸŽ¤":"ðŸ”‡",B,U,G,q,H='<span class="setting-label svelte-9y3hbf">Camera</span> <span class="setting-description svelte-9y3hbf">Enable camera for video calls</span>',J,j,V=s[4]?"ðŸ“¹":"ðŸ“·",Z,X,ie,he,re="ðŸ”” Notifications",me,de,se,K='<span class="setting-label svelte-9y3hbf">Desktop Notifications</span> <span class="setting-description svelte-9y3hbf">Get notified when you receive new messages</span>',ue,fe,ve=s[2]?"âœ… Enabled":"ðŸ”” Enable",ce,ke,Se,Te,Ze="ðŸŽ¨ Appearance",De,Ne,Xe,yt='<span class="setting-label svelte-9y3hbf">Theme</span> <span class="setting-description svelte-9y3hbf">Switch between light and dark mode</span>',ee,pe,Ge=s[5]==="dark"?"ðŸŒ™":"â˜€ï¸",it,$e,Ke,Ct,Ht="ðŸ–¥ï¸ Server Management",Qe,ge,we,Dt='<span class="setting-label svelte-9y3hbf">Clear All Server Messages</span> <span class="setting-description svelte-9y3hbf">Delete all messages from the server for all users (cannot be undone)</span>',Lt,qe,Ot="ðŸ—‘ï¸ Clear Server",Nt,It,wt,Rt,Je,Jt='<h3 class="svelte-9y3hbf">â„¹ï¸ About</h3> <div class="about-info svelte-9y3hbf"><p class="svelte-9y3hbf"><strong class="svelte-9y3hbf">Wabi Chat</strong></p> <p class="svelte-9y3hbf">Privacy-first ephemeral chat. No tracking. No data collection.</p> <p class="svelte-9y3hbf">Server stores nothing permanently. You control your data.</p> <p class="version svelte-9y3hbf">Version 1.0.0</p></div>',Me,Gt,fs;return wt=new Ff({}),{c(){e=k("div"),t=k("div"),n=k("div"),r=k("h2"),r.textContent=i,a=M(),l=k("button"),l.textContent=o,u=M(),f=k("div"),p=k("div"),d=k("h3"),d.textContent=m,g=M(),v=k("div"),A=k("div"),A.innerHTML=I,y=M(),E=k("button"),T=W(w),C=M(),S=k("div"),P=k("div"),P.innerHTML=O,N=M(),R=k("button"),B=W(F),U=M(),G=k("div"),q=k("div"),q.innerHTML=H,J=M(),j=k("button"),Z=W(V),X=M(),ie=k("div"),he=k("h3"),he.textContent=re,me=M(),de=k("div"),se=k("div"),se.innerHTML=K,ue=M(),fe=k("button"),ce=W(ve),ke=M(),Se=k("div"),Te=k("h3"),Te.textContent=Ze,De=M(),Ne=k("div"),Xe=k("div"),Xe.innerHTML=yt,ee=M(),pe=k("button"),it=W(Ge),$e=M(),Ke=k("div"),Ct=k("h3"),Ct.textContent=Ht,Qe=M(),ge=k("div"),we=k("div"),we.innerHTML=Dt,Lt=M(),qe=k("button"),qe.textContent=Ot,Nt=M(),It=k("div"),pt(wt.$$.fragment),Rt=M(),Je=k("div"),Je.innerHTML=Jt,this.h()},l(_e){e=b(_e,"DIV",{class:!0});var ze=D(e);t=b(ze,"DIV",{class:!0});var Is=D(t);n=b(Is,"DIV",{class:!0});var hs=D(n);r=b(hs,"H2",{class:!0,"data-svelte-h":!0}),Q(r)!=="svelte-15bbpfh"&&(r.textContent=i),a=L(hs),l=b(hs,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(l)!=="svelte-3o141q"&&(l.textContent=o),hs.forEach(_),u=L(Is),f=b(Is,"DIV",{class:!0});var lt=D(f);p=b(lt,"DIV",{class:!0});var Mt=D(p);d=b(Mt,"H3",{class:!0,"data-svelte-h":!0}),Q(d)!=="svelte-1tdb4hv"&&(d.textContent=m),g=L(Mt),v=b(Mt,"DIV",{class:!0});var ds=D(v);A=b(ds,"DIV",{class:!0,"data-svelte-h":!0}),Q(A)!=="svelte-5e193f"&&(A.innerHTML=I),y=L(ds),E=b(ds,"BUTTON",{class:!0});var ln=D(E);T=$(ln,w),ln.forEach(_),ds.forEach(_),C=L(Mt),S=b(Mt,"DIV",{class:!0});var ct=D(S);P=b(ct,"DIV",{class:!0,"data-svelte-h":!0}),Q(P)!=="svelte-ql0oob"&&(P.innerHTML=O),N=L(ct),R=b(ct,"BUTTON",{class:!0});var $t=D(R);B=$($t,F),$t.forEach(_),ct.forEach(_),U=L(Mt),G=b(Mt,"DIV",{class:!0});var ps=D(G);q=b(ps,"DIV",{class:!0,"data-svelte-h":!0}),Q(q)!=="svelte-fu2kxq"&&(q.innerHTML=H),J=L(ps),j=b(ps,"BUTTON",{class:!0});var Ms=D(j);Z=$(Ms,V),Ms.forEach(_),ps.forEach(_),Mt.forEach(_),X=L(lt),ie=b(lt,"DIV",{class:!0});var ls=D(ie);he=b(ls,"H3",{class:!0,"data-svelte-h":!0}),Q(he)!=="svelte-yb4801"&&(he.textContent=re),me=L(ls),de=b(ls,"DIV",{class:!0});var gs=D(de);se=b(gs,"DIV",{class:!0,"data-svelte-h":!0}),Q(se)!=="svelte-11j8eba"&&(se.innerHTML=K),ue=L(gs),fe=b(gs,"BUTTON",{class:!0});var Pt=D(fe);ce=$(Pt,ve),Pt.forEach(_),gs.forEach(_),ls.forEach(_),ke=L(lt),Se=b(lt,"DIV",{class:!0});var ms=D(Se);Te=b(ms,"H3",{class:!0,"data-svelte-h":!0}),Q(Te)!=="svelte-bdq4j0"&&(Te.textContent=Ze),De=L(ms),Ne=b(ms,"DIV",{class:!0});var vs=D(Ne);Xe=b(vs,"DIV",{class:!0,"data-svelte-h":!0}),Q(Xe)!=="svelte-1expsbb"&&(Xe.innerHTML=yt),ee=L(vs),pe=b(vs,"BUTTON",{class:!0});var Bs=D(pe);it=$(Bs,Ge),Bs.forEach(_),vs.forEach(_),ms.forEach(_),$e=L(lt),Ke=b(lt,"DIV",{class:!0});var _s=D(Ke);Ct=b(_s,"H3",{class:!0,"data-svelte-h":!0}),Q(Ct)!=="svelte-13bxj89"&&(Ct.textContent=Ht),Qe=L(_s),ge=b(_s,"DIV",{class:!0});var Rs=D(ge);we=b(Rs,"DIV",{class:!0,"data-svelte-h":!0}),Q(we)!=="svelte-1kywvm7"&&(we.innerHTML=Dt),Lt=L(Rs),qe=b(Rs,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(qe)!=="svelte-uzfcg3"&&(qe.textContent=Ot),Rs.forEach(_),_s.forEach(_),Nt=L(lt),It=b(lt,"DIV",{class:!0});var oe=D(It);dt(wt.$$.fragment,oe),oe.forEach(_),Rt=L(lt),Je=b(lt,"DIV",{class:!0,"data-svelte-h":!0}),Q(Je)!=="svelte-137zy12"&&(Je.innerHTML=Jt),lt.forEach(_),Is.forEach(_),ze.forEach(_),this.h()},h(){h(r,"class","svelte-9y3hbf"),h(l,"class","close-btn svelte-9y3hbf"),h(n,"class","modal-header svelte-9y3hbf"),h(d,"class","svelte-9y3hbf"),h(A,"class","setting-info svelte-9y3hbf"),h(E,"class","toggle-btn svelte-9y3hbf"),ye(E,"active",s[1]),h(v,"class","setting-item svelte-9y3hbf"),h(P,"class","setting-info svelte-9y3hbf"),h(R,"class","toggle-btn svelte-9y3hbf"),ye(R,"active",s[3]),h(S,"class","setting-item svelte-9y3hbf"),h(q,"class","setting-info svelte-9y3hbf"),h(j,"class","toggle-btn svelte-9y3hbf"),ye(j,"active",s[4]),h(G,"class","setting-item svelte-9y3hbf"),h(p,"class","settings-section svelte-9y3hbf"),h(he,"class","svelte-9y3hbf"),h(se,"class","setting-info svelte-9y3hbf"),h(fe,"class","action-btn svelte-9y3hbf"),ye(fe,"active",s[2]),h(de,"class","setting-item svelte-9y3hbf"),h(ie,"class","settings-section svelte-9y3hbf"),h(Te,"class","svelte-9y3hbf"),h(Xe,"class","setting-info svelte-9y3hbf"),h(pe,"class","toggle-btn svelte-9y3hbf"),ye(pe,"active",s[5]==="light"),h(Ne,"class","setting-item svelte-9y3hbf"),h(Se,"class","settings-section svelte-9y3hbf"),h(Ct,"class","svelte-9y3hbf"),h(we,"class","setting-info svelte-9y3hbf"),h(qe,"class","action-btn danger svelte-9y3hbf"),h(ge,"class","setting-item svelte-9y3hbf"),h(Ke,"class","settings-section svelte-9y3hbf"),h(It,"class","settings-section svelte-9y3hbf"),h(Je,"class","settings-section svelte-9y3hbf"),h(f,"class","settings-sections svelte-9y3hbf"),h(t,"class","modal-content svelte-9y3hbf"),h(e,"class","modal-overlay svelte-9y3hbf")},m(_e,ze){z(_e,e,ze),c(e,t),c(t,n),c(n,r),c(n,a),c(n,l),c(t,u),c(t,f),c(f,p),c(p,d),c(p,g),c(p,v),c(v,A),c(v,y),c(v,E),c(E,T),c(p,C),c(p,S),c(S,P),c(S,N),c(S,R),c(R,B),c(p,U),c(p,G),c(G,q),c(G,J),c(G,j),c(j,Z),c(f,X),c(f,ie),c(ie,he),c(ie,me),c(ie,de),c(de,se),c(de,ue),c(de,fe),c(fe,ce),c(f,ke),c(f,Se),c(Se,Te),c(Se,De),c(Se,Ne),c(Ne,Xe),c(Ne,ee),c(Ne,pe),c(pe,it),c(f,$e),c(f,Ke),c(Ke,Ct),c(Ke,Qe),c(Ke,ge),c(ge,we),c(ge,Lt),c(ge,qe),c(f,Nt),c(f,It),ht(wt,It,null),c(f,Rt),c(f,Je),Me=!0,Gt||(fs=[Y(l,"click",s[12]),Y(E,"click",s[6]),Y(R,"click",s[7]),Y(j,"click",s[8]),Y(fe,"click",s[10]),Y(pe,"click",s[9]),Y(qe,"click",s[11]),Y(t,"click",As(s[13])),Y(e,"click",s[12])],Gt=!0)},p(_e,ze){(!Me||ze&2)&&w!==(w=_e[1]?"ðŸ”Š":"ðŸ”‡")&&ne(T,w),(!Me||ze&2)&&ye(E,"active",_e[1]),(!Me||ze&8)&&F!==(F=_e[3]?"ðŸŽ¤":"ðŸ”‡")&&ne(B,F),(!Me||ze&8)&&ye(R,"active",_e[3]),(!Me||ze&16)&&V!==(V=_e[4]?"ðŸ“¹":"ðŸ“·")&&ne(Z,V),(!Me||ze&16)&&ye(j,"active",_e[4]),(!Me||ze&4)&&ve!==(ve=_e[2]?"âœ… Enabled":"ðŸ”” Enable")&&ne(ce,ve),(!Me||ze&4)&&ye(fe,"active",_e[2]),(!Me||ze&32)&&Ge!==(Ge=_e[5]==="dark"?"ðŸŒ™":"â˜€ï¸")&&ne(it,Ge),(!Me||ze&32)&&ye(pe,"active",_e[5]==="light")},i(_e){Me||(Oe(wt.$$.fragment,_e),Me=!0)},o(_e){Be(wt.$$.fragment,_e),Me=!1},d(_e){_e&&_(e),ft(wt),Gt=!1,xe(fs)}}}function xf(s){let e,t,n=s[0]&&Ki(s);return{c(){n&&n.c(),e=Fe()},l(r){n&&n.l(r),e=Fe()},m(r,i){n&&n.m(r,i),z(r,e,i),t=!0},p(r,[i]){r[0]?n?(n.p(r,i),i&1&&Oe(n,1)):(n=Ki(r),n.c(),Oe(n,1),n.m(e.parentNode,e)):n&&(en(),Be(n,1,1,()=>{n=null}),tn())},i(r){t||(Oe(n),t=!0)},o(r){Be(n),t=!1},d(r){r&&_(e),n&&n.d(r)}}}function Lf(s,e,t){Ie(s,ws,I=>t(14,I)),Ie(s,rs,I=>t(15,I)),Ie(s,Ut,I=>t(16,I));let{isOpen:n=!1}=e,r=!0,i=!0,a=!0,l=!0,o="dark";Es(()=>{t(1,r=localStorage.getItem("soundEnabled")!=="false"),t(2,i=localStorage.getItem("notificationsEnabled")!=="false"),t(3,a=localStorage.getItem("micEnabled")!=="false"),t(4,l=localStorage.getItem("cameraEnabled")!=="false"),t(5,o=localStorage.getItem("theme")||"dark")});function u(){t(1,r=!r),localStorage.setItem("soundEnabled",r.toString())}function f(){t(3,a=!a),localStorage.setItem("micEnabled",a.toString())}function p(){t(4,l=!l),localStorage.setItem("cameraEnabled",l.toString())}function d(){t(5,o=o==="dark"?"light":"dark"),localStorage.setItem("theme",o),document.documentElement.setAttribute("data-theme",o)}async function m(){if(!("Notification"in window)){alert("This browser does not support notifications");return}if(Notification.permission==="granted"){alert("Notifications are already enabled!");return}await Notification.requestPermission()==="granted"?(t(2,i=!0),localStorage.setItem("notificationsEnabled","true"),new Notification("Community Chat",{body:"Notifications enabled! You'll be notified of new messages.",icon:"/icon-192.png"})):(t(2,i=!1),localStorage.setItem("notificationsEnabled","false"))}async function g(){if(confirm("Are you sure you want to delete ALL messages from the server? This will clear messages for all users and cannot be undone!"))try{const I=window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin,E=await(await fetch(`${I}/api/clear-messages`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();E.success?(Ut.set({general:[]}),alert("All server messages have been deleted successfully!")):alert("Failed to clear server messages: "+(E.error||"Unknown error"))}catch(I){console.error("Error clearing server messages:",I),alert("Failed to clear server messages. Check console for details.")}}function v(){t(0,n=!1)}function A(I){Ns.call(this,s,I)}return s.$$set=I=>{"isOpen"in I&&t(0,n=I.isOpen)},[n,r,i,a,l,o,u,f,p,d,m,g,v,A]}class Mf extends bt{constructor(e){super(),kt(this,e,Lf,xf,_t,{isOpen:0})}}function Qi(s,e,t){const n=s.slice();return n[17]=e[t],n}function Ji(s){let e,t,n,r,i="Create",a,l;return{c(){e=k("div"),t=k("input"),n=M(),r=k("button"),r.textContent=i,this.h()},l(o){e=b(o,"DIV",{class:!0});var u=D(e);t=b(u,"INPUT",{type:!0,placeholder:!0,class:!0}),n=L(u),r=b(u,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(r)!=="svelte-1ih09o9"&&(r.textContent=i),u.forEach(_),this.h()},h(){h(t,"type","text"),h(t,"placeholder","channel-name"),t.autofocus=!0,h(t,"class","svelte-143upw8"),h(r,"class","svelte-143upw8"),h(e,"class","create-channel svelte-143upw8")},m(o,u){z(o,e,u),c(e,t),et(t,s[1]),c(e,n),c(e,r),t.focus(),a||(l=[Y(t,"input",s[12]),Y(t,"keydown",s[13]),Y(r,"click",s[7])],a=!0)},p(o,u){u&2&&t.value!==o[1]&&et(t,o[1])},d(o){o&&_(e),a=!1,xe(l)}}}function el(s){let e,t="Ã—",n,r;function i(){return s[15](s[17])}return{c(){e=k("button"),e.textContent=t,this.h()},l(a){e=b(a,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-12rgdhl"&&(e.textContent=t),this.h()},h(){h(e,"class","delete-btn svelte-143upw8")},m(a,l){z(a,e,l),n||(r=Y(e,"click",As(i)),n=!0)},p(a,l){s=a},d(a){a&&_(e),n=!1,r()}}}function tl(s,e){let t,n,r,i="#",a,l=e[17].name+"",o,u,f,p,d;function m(){return e[14](e[17])}let g=e[17].id!=="general"&&el(e);return{key:s,first:null,c(){t=k("div"),n=k("button"),r=k("span"),r.textContent=i,a=M(),o=W(l),u=M(),g&&g.c(),f=M(),this.h()},l(v){t=b(v,"DIV",{class:!0});var A=D(t);n=b(A,"BUTTON",{class:!0});var I=D(n);r=b(I,"SPAN",{class:!0,"data-svelte-h":!0}),Q(r)!=="svelte-16vlh54"&&(r.textContent=i),a=L(I),o=$(I,l),I.forEach(_),u=L(A),g&&g.l(A),f=L(A),A.forEach(_),this.h()},h(){h(r,"class","hash svelte-143upw8"),h(n,"class","channel-btn svelte-143upw8"),h(t,"class","channel-item svelte-143upw8"),ye(t,"active",e[5]===e[17].id),this.first=t},m(v,A){z(v,t,A),c(t,n),c(n,r),c(n,a),c(n,o),c(t,u),g&&g.m(t,null),c(t,f),p||(d=Y(n,"click",m),p=!0)},p(v,A){e=v,A&16&&l!==(l=e[17].name+"")&&ne(o,l),e[17].id!=="general"?g?g.p(e,A):(g=el(e),g.c(),g.m(t,f)):g&&(g.d(1),g=null),A&48&&ye(t,"active",e[5]===e[17].id)},d(v){v&&_(t),g&&g.d(),p=!1,d()}}}function Bf(s){let e,t,n,r='<img src="/wabi-logo.png" alt="Wabi" class="logo-img svelte-143upw8"/>',i,a,l="âš™ï¸",o,u,f,p="Text Channels",d,m,g,v="ðŸ“º",A,I,y="+",E,w,T,C=[],S=new Map,P,O,N,R,F,B,U=s[2]&&Ji(s),G=Ve(s[4]);const q=j=>j[17].id;for(let j=0;j<G.length;j+=1){let V=Qi(s,G,j),Z=q(V);S.set(Z,C[j]=tl(Z,V))}function H(j){s[16](j)}let J={};return s[3]!==void 0&&(J.isOpen=s[3]),O=new Mf({props:J}),ot.push(()=>Xt(O,"isOpen",H)),{c(){e=k("div"),t=k("div"),n=k("div"),n.innerHTML=r,i=M(),a=k("button"),a.textContent=l,o=M(),u=k("div"),f=k("h3"),f.textContent=p,d=M(),m=k("div"),g=k("button"),g.textContent=v,A=M(),I=k("button"),I.textContent=y,E=M(),U&&U.c(),w=M(),T=k("div");for(let j=0;j<C.length;j+=1)C[j].c();P=M(),pt(O.$$.fragment),this.h()},l(j){e=b(j,"DIV",{class:!0});var V=D(e);t=b(V,"DIV",{class:!0});var Z=D(t);n=b(Z,"DIV",{class:!0,"data-svelte-h":!0}),Q(n)!=="svelte-16tyvz0"&&(n.innerHTML=r),i=L(Z),a=b(Z,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(a)!=="svelte-128luu5"&&(a.textContent=l),Z.forEach(_),o=L(V),u=b(V,"DIV",{class:!0});var X=D(u);f=b(X,"H3",{class:!0,"data-svelte-h":!0}),Q(f)!=="svelte-cahn79"&&(f.textContent=p),d=L(X),m=b(X,"DIV",{class:!0});var ie=D(m);g=b(ie,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(g)!=="svelte-5el016"&&(g.textContent=v),A=L(ie),I=b(ie,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(I)!=="svelte-ou792o"&&(I.textContent=y),ie.forEach(_),X.forEach(_),E=L(V),U&&U.l(V),w=L(V),T=b(V,"DIV",{class:!0});var he=D(T);for(let re=0;re<C.length;re+=1)C[re].l(he);he.forEach(_),V.forEach(_),P=L(j),dt(O.$$.fragment,j),this.h()},h(){h(n,"class","logo svelte-143upw8"),h(a,"class","settings-btn svelte-143upw8"),h(a,"title","Settings"),h(t,"class","top-section svelte-143upw8"),h(f,"class","svelte-143upw8"),h(g,"class","screen-share-icon-btn svelte-143upw8"),h(g,"title","Screen Share"),ye(g,"active",s[0]==="screen"),h(I,"class","add-btn svelte-143upw8"),h(I,"title","Create channel"),h(m,"class","header-buttons svelte-143upw8"),h(u,"class","sidebar-header svelte-143upw8"),h(T,"class","channel-list svelte-143upw8"),h(e,"class","channel-sidebar svelte-143upw8")},m(j,V){z(j,e,V),c(e,t),c(t,n),c(t,i),c(t,a),c(e,o),c(e,u),c(u,f),c(u,d),c(u,m),c(m,g),c(m,A),c(m,I),c(e,E),U&&U.m(e,null),c(e,w),c(e,T);for(let Z=0;Z<C.length;Z+=1)C[Z]&&C[Z].m(T,null);z(j,P,V),ht(O,j,V),R=!0,F||(B=[Y(a,"click",s[9]),Y(g,"click",s[10]),Y(I,"click",s[11])],F=!0)},p(j,[V]){(!R||V&1)&&ye(g,"active",j[0]==="screen"),j[2]?U?U.p(j,V):(U=Ji(j),U.c(),U.m(e,w)):U&&(U.d(1),U=null),V&368&&(G=Ve(j[4]),C=Ts(C,V,q,1,j,G,S,T,Ss,tl,null,Qi));const Z={};!N&&V&8&&(N=!0,Z.isOpen=j[3],Zt(()=>N=!1)),O.$set(Z)},i(j){R||(Oe(O.$$.fragment,j),R=!0)},o(j){Be(O.$$.fragment,j),R=!1},d(j){j&&(_(e),_(P)),U&&U.d();for(let V=0;V<C.length;V+=1)C[V].d();ft(O,j),F=!1,xe(B)}}}function Uf(s,e,t){let n,r;Ie(s,Ks,w=>t(4,n=w)),Ie(s,Ls,w=>t(5,r=w));let{activeView:i="chat"}=e,a="",l=!1,o=!1;function u(w){Bc(w)}function f(){a.trim()&&(Uc(a.trim()),t(1,a=""),t(2,l=!1))}function p(w){confirm(`Delete channel #${w}?`)&&jc(w)}const d=()=>t(3,o=!0),m=()=>t(0,i="screen"),g=()=>t(2,l=!l);function v(){a=this.value,t(1,a)}const A=w=>w.key==="Enter"&&f(),I=w=>u(w.id),y=w=>p(w.id);function E(w){o=w,t(3,o)}return s.$$set=w=>{"activeView"in w&&t(0,i=w.activeView)},s.$$.update=()=>{s.$$.dirty&1&&i==="chat"&&Vc()},[i,a,l,o,n,r,u,f,p,d,m,g,v,A,I,y,E]}class jf extends bt{constructor(e){super(),kt(this,e,Uf,Bf,_t,{activeView:0})}}const wr=rt([]),Tn=rt(null),Nn=rt(!1),nn=rt(!1),rn=rt(!1),Ps=new Map;let tt=null;const da={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]};async function sl(s,e,t=!1){try{return tt=await navigator.mediaDevices.getUserMedia({video:t,audio:!0}),Nn.set(!0),nn.set(!1),rn.set(!t),s.emit("call-initiate",{targetUserId:e,isVideoCall:t}),tt}catch(n){throw console.error("Error starting call:",n),n}}async function qf(s,e,t=!1){try{return tt=await navigator.mediaDevices.getUserMedia({video:t,audio:!0}),Nn.set(!0),nn.set(!1),rn.set(!t),s.emit("call-answer",{callerId:e,isVideoCall:t}),Tn.set(null),tt}catch(n){throw console.error("Error answering call:",n),n}}function zf(s,e){s.emit("call-reject",{callerId:e}),Tn.set(null)}function Wn(s){tt&&(tt.getTracks().forEach(e=>e.stop()),tt=null),Nn.set(!1),nn.set(!1),rn.set(!1),s.emit("call-end"),Ps.forEach(e=>e.close()),Ps.clear(),wr.set([])}function Vf(){if(tt){const s=tt.getAudioTracks()[0];s&&(s.enabled=!s.enabled,nn.set(!s.enabled))}}function Hf(){if(tt){const s=tt.getVideoTracks()[0];s&&(s.enabled=!s.enabled,rn.set(!s.enabled))}}async function Gf(s,e){const t=new RTCPeerConnection(da);Ps.set(e,t),tt&&tt.getTracks().forEach(r=>{t.addTrack(r,tt)}),t.onicecandidate=r=>{r.candidate&&s.emit("call-ice-candidate",{candidate:r.candidate,targetId:e})},t.ontrack=r=>{pa(e,r.streams[0])};const n=await t.createOffer();await t.setLocalDescription(n),s.emit("call-offer",{offer:n,targetId:e})}async function $f(s,e,t,n){const r=new RTCPeerConnection(da);Ps.set(e,r),tt&&tt.getTracks().forEach(a=>{r.addTrack(a,tt)}),r.ontrack=a=>{pa(e,a.streams[0])},r.onicecandidate=a=>{a.candidate&&s.emit("call-ice-candidate",{candidate:a.candidate,targetId:e})},await r.setRemoteDescription(n);const i=await r.createAnswer();await r.setLocalDescription(i),s.emit("call-answer-sdp",{answer:i,targetId:e})}async function Wf(s,e){const t=Ps.get(s);t&&await t.setRemoteDescription(e)}async function Yf(s,e){const t=Ps.get(s);t&&await t.addIceCandidate(e)}function pa(s,e){wr.update(t=>{const n=t.findIndex(i=>i.userId===s),r={userId:s,username:"",stream:e,isVideoEnabled:e.getVideoTracks().length>0,isAudioEnabled:e.getAudioTracks().length>0};return n>=0?(t[n]=r,t):[...t,r]})}function Zf(){return tt}function nl(s,e,t){const n=s.slice();return n[14]=e[t],n}function Xf(s){let e,t=s[14].username.charAt(0).toUpperCase()+"",n;return{c(){e=k("div"),n=W(t),this.h()},l(r){e=b(r,"DIV",{class:!0,style:!0});var i=D(e);n=$(i,t),i.forEach(_),this.h()},h(){h(e,"class","user-avatar-placeholder svelte-15lp6hy"),Le(e,"background-color",s[14].color)},m(r,i){z(r,e,i),c(e,n)},p(r,i){i&16&&t!==(t=r[14].username.charAt(0).toUpperCase()+"")&&ne(n,t),i&16&&Le(e,"background-color",r[14].color)},d(r){r&&_(e)}}}function Kf(s){let e,t,n;return{c(){e=k("img"),this.h()},l(r){e=b(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ue(e.src,t=s[14].profilePicture)||h(e,"src",t),h(e,"alt",n=s[14].username),h(e,"class","user-avatar svelte-15lp6hy")},m(r,i){z(r,e,i)},p(r,i){i&16&&!Ue(e.src,t=r[14].profilePicture)&&h(e,"src",t),i&16&&n!==(n=r[14].username)&&h(e,"alt",n)},d(r){r&&_(e)}}}function rl(s){let e,t="(you)";return{c(){e=k("span"),e.textContent=t,this.h()},l(n){e=b(n,"SPAN",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-2b4nly"&&(e.textContent=t),this.h()},h(){h(e,"class","you-badge svelte-15lp6hy")},m(n,r){z(n,e,r)},d(n){n&&_(e)}}}function il(s){let e,t,n="ðŸ“ž",r,i,a="ðŸ“¹",l,o;function u(...p){return s[9](s[14],...p)}function f(...p){return s[10](s[14],...p)}return{c(){e=k("div"),t=k("button"),t.textContent=n,r=M(),i=k("button"),i.textContent=a,this.h()},l(p){e=b(p,"DIV",{class:!0});var d=D(e);t=b(d,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(t)!=="svelte-jmuv4z"&&(t.textContent=n),r=L(d),i=b(d,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(i)!=="svelte-1whn4df"&&(i.textContent=a),d.forEach(_),this.h()},h(){h(t,"class","call-btn voice-call svelte-15lp6hy"),h(t,"title","Voice call"),h(i,"class","call-btn video-call svelte-15lp6hy"),h(i,"title","Video call"),h(e,"class","call-buttons svelte-15lp6hy")},m(p,d){z(p,e,d),c(e,t),c(e,r),c(e,i),l||(o=[Y(t,"click",u),Y(i,"click",f)],l=!0)},p(p,d){s=p},d(p){p&&_(e),l=!1,xe(o)}}}function ll(s,e){var R,F;let t,n,r,i,a,l=e[14].username+"",o,u,f,p,d,m,g,v=e[14].status+"",A,I,y,E,w;function T(B,U){return B[14].profilePicture?Kf:Xf}let C=T(e),S=C(e),P=e[14].id===((R=e[3])==null?void 0:R.id)&&rl();function O(){return e[8](e[14])}let N=e[14].id!==((F=e[3])==null?void 0:F.id)&&il(e);return{key:s,first:null,c(){t=k("div"),n=k("button"),S.c(),r=M(),i=k("div"),a=k("span"),o=W(l),u=M(),P&&P.c(),f=M(),p=k("div"),d=k("span"),m=M(),g=k("span"),A=W(v),I=M(),N&&N.c(),y=M(),this.h()},l(B){t=b(B,"DIV",{class:!0});var U=D(t);n=b(U,"BUTTON",{class:!0});var G=D(n);S.l(G),r=L(G),i=b(G,"DIV",{class:!0});var q=D(i);a=b(q,"SPAN",{class:!0});var H=D(a);o=$(H,l),u=L(H),P&&P.l(H),H.forEach(_),f=L(q),p=b(q,"DIV",{class:!0});var J=D(p);d=b(J,"SPAN",{class:!0,style:!0}),D(d).forEach(_),m=L(J),g=b(J,"SPAN",{class:!0});var j=D(g);A=$(j,v),j.forEach(_),J.forEach(_),q.forEach(_),G.forEach(_),I=L(U),N&&N.l(U),y=L(U),U.forEach(_),this.h()},h(){h(a,"class","user-name svelte-15lp6hy"),h(d,"class","status-dot svelte-15lp6hy"),Le(d,"background-color",al(e[14].status)),h(g,"class","status-text svelte-15lp6hy"),h(p,"class","user-status svelte-15lp6hy"),h(i,"class","user-info svelte-15lp6hy"),h(n,"class","user svelte-15lp6hy"),h(t,"class","user-container svelte-15lp6hy"),this.first=t},m(B,U){z(B,t,U),c(t,n),S.m(n,null),c(n,r),c(n,i),c(i,a),c(a,o),c(a,u),P&&P.m(a,null),c(i,f),c(i,p),c(p,d),c(p,m),c(p,g),c(g,A),c(t,I),N&&N.m(t,null),c(t,y),E||(w=Y(n,"click",O),E=!0)},p(B,U){var G,q;e=B,C===(C=T(e))&&S?S.p(e,U):(S.d(1),S=C(e),S&&(S.c(),S.m(n,r))),U&16&&l!==(l=e[14].username+"")&&ne(o,l),e[14].id===((G=e[3])==null?void 0:G.id)?P||(P=rl(),P.c(),P.m(a,null)):P&&(P.d(1),P=null),U&16&&Le(d,"background-color",al(e[14].status)),U&16&&v!==(v=e[14].status+"")&&ne(A,v),e[14].id!==((q=e[3])==null?void 0:q.id)?N?N.p(e,U):(N=il(e),N.c(),N.m(t,y)):N&&(N.d(1),N=null)},d(B){B&&_(t),S.d(),P&&P.d(),N&&N.d(),E=!1,w()}}}function Qf(s){let e,t,n,r,i=s[4].length+"",a,l,o,u,f=[],p=new Map,d,m,g,v,A,I=Ve(s[4]);const y=C=>C[14].id;for(let C=0;C<I.length;C+=1){let S=nl(s,I,C),P=y(S);p.set(P,f[C]=ll(P,S))}function E(C){s[11](C)}function w(C){s[12](C)}let T={isOwnProfile:s[2]};return s[0]!==void 0&&(T.isOpen=s[0]),s[1]!==void 0&&(T.user=s[1]),m=new ua({props:T}),ot.push(()=>Xt(m,"isOpen",E)),ot.push(()=>Xt(m,"user",w)),{c(){e=k("aside"),t=k("div"),n=k("h3"),r=W("Online ("),a=W(i),l=W(")"),o=M(),u=k("div");for(let C=0;C<f.length;C+=1)f[C].c();d=M(),pt(m.$$.fragment),this.h()},l(C){e=b(C,"ASIDE",{class:!0});var S=D(e);t=b(S,"DIV",{class:!0});var P=D(t);n=b(P,"H3",{class:!0});var O=D(n);r=$(O,"Online ("),a=$(O,i),l=$(O,")"),O.forEach(_),P.forEach(_),o=L(S),u=b(S,"DIV",{class:!0});var N=D(u);for(let R=0;R<f.length;R+=1)f[R].l(N);N.forEach(_),S.forEach(_),d=L(C),dt(m.$$.fragment,C),this.h()},h(){h(n,"class","svelte-15lp6hy"),h(t,"class","panel-header svelte-15lp6hy"),h(u,"class","user-list svelte-15lp6hy"),h(e,"class","user-panel svelte-15lp6hy")},m(C,S){z(C,e,S),c(e,t),c(t,n),c(n,r),c(n,a),c(n,l),c(e,o),c(e,u);for(let P=0;P<f.length;P+=1)f[P]&&f[P].m(u,null);z(C,d,S),ht(m,C,S),A=!0},p(C,[S]){(!A||S&16)&&i!==(i=C[4].length+"")&&ne(a,i),S&248&&(I=Ve(C[4]),f=Ts(f,S,y,1,C,I,p,u,Ss,ll,null,nl));const P={};S&4&&(P.isOwnProfile=C[2]),!g&&S&1&&(g=!0,P.isOpen=C[0],Zt(()=>g=!1)),!v&&S&2&&(v=!0,P.user=C[1],Zt(()=>v=!1)),m.$set(P)},i(C){A||(Oe(m.$$.fragment,C),A=!0)},o(C){Be(m.$$.fragment,C),A=!1},d(C){C&&(_(e),_(d));for(let S=0;S<f.length;S+=1)f[S].d();ft(m,C)}}}function al(s){switch(s){case"active":return"#10b981";case"away":return"#f59e0b";case"busy":return"#ef4444";default:return"#6b7280"}}function Jf(s,e,t){let n,r,i;Ie(s,xs,I=>t(13,n=I)),Ie(s,ws,I=>t(3,r=I)),Ie(s,rs,I=>t(4,i=I));let a=!1,l=null,o=!1;function u(I){t(1,l=I),t(2,o=I.id===(r==null?void 0:r.id)),t(0,a=!0)}async function f(I,y){if(I.stopPropagation(),!(!n||y.id===(r==null?void 0:r.id)))try{await sl(n,y.id,!1)}catch{alert("Failed to start voice call. Please check microphone permissions.")}}async function p(I,y){if(I.stopPropagation(),!(!n||y.id===(r==null?void 0:r.id)))try{await sl(n,y.id,!0)}catch{alert("Failed to start video call. Please check camera and microphone permissions.")}}const d=I=>u(I),m=(I,y)=>f(y,I),g=(I,y)=>p(y,I);function v(I){a=I,t(0,a)}function A(I){l=I,t(1,l)}return[a,l,o,r,i,u,f,p,d,m,g,v,A]}class eh extends bt{constructor(e){super(),kt(this,e,Jf,Qf,_t,{})}}const Er=rt([]),Ar=rt(!1),us=new Map;let is=null;const ga={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]};async function th(s){try{return is=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1}),Ar.set(!0),s.emit("start-screen-share"),is.getVideoTracks()[0].onended=()=>{ma(s)},is}catch(e){throw console.error("Error starting screen share:",e),e}}function ma(s){is&&(is.getTracks().forEach(e=>e.stop()),is=null),Ar.set(!1),s.emit("stop-screen-share"),us.forEach(e=>e.close()),us.clear()}async function sh(s,e){const t=new RTCPeerConnection(ga);us.set(e,t),is&&is.getTracks().forEach(r=>{t.addTrack(r,is)}),t.onicecandidate=r=>{r.candidate&&s.emit("webrtc-ice-candidate",{candidate:r.candidate,targetId:e})};const n=await t.createOffer();await t.setLocalDescription(n),s.emit("webrtc-offer",{offer:n,targetId:e})}async function nh(s,e,t,n){const r=new RTCPeerConnection(ga);us.set(e,r),r.ontrack=a=>{Er.update(l=>{const o=l.findIndex(f=>f.userId===e),u={userId:e,username:t,stream:a.streams[0]};return o>=0?(l[o]=u,l):[...l,u]})},r.onicecandidate=a=>{a.candidate&&s.emit("webrtc-ice-candidate",{candidate:a.candidate,targetId:e})},await r.setRemoteDescription(n);const i=await r.createAnswer();await r.setLocalDescription(i),s.emit("webrtc-answer",{answer:i,targetId:e})}async function rh(s,e){const t=us.get(s);t&&await t.setRemoteDescription(e)}async function ih(s,e){const t=us.get(s);t&&await t.addIceCandidate(e)}function lh(s){Er.update(t=>t.filter(n=>n.userId!==s));const e=us.get(s);e&&(e.close(),us.delete(s))}function ol(s,e,t){const n=s.slice();return n[12]=e[t],n}function ah(s){let e,t="Start Sharing",n,r;return{c(){e=k("button"),e.textContent=t},l(i){e=b(i,"BUTTON",{"data-svelte-h":!0}),Q(e)!=="svelte-1ms5zeg"&&(e.textContent=t)},m(i,a){z(i,e,a),n||(r=Y(e,"click",s[6]),n=!0)},p:Pe,d(i){i&&_(e),n=!1,r()}}}function oh(s){let e,t="Stop Sharing",n,r;return{c(){e=k("button"),e.textContent=t,this.h()},l(i){e=b(i,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1urv00m"&&(e.textContent=t),this.h()},h(){h(e,"class","stop-btn svelte-bu6z9u")},m(i,a){z(i,e,a),n||(r=Y(e,"click",s[7]),n=!0)},p:Pe,d(i){i&&_(e),n=!1,r()}}}function cl(s){let e,t;return{c(){e=k("div"),t=W(s[2]),this.h()},l(n){e=b(n,"DIV",{class:!0});var r=D(e);t=$(r,s[2]),r.forEach(_),this.h()},h(){h(e,"class","error svelte-bu6z9u")},m(n,r){z(n,e,r),c(e,t)},p(n,r){r&4&&ne(t,n[2])},d(n){n&&_(e)}}}function ul(s){let e,t,n='<span class="badge svelte-bu6z9u">Your Screen</span>',r,i;return{c(){e=k("div"),t=k("div"),t.innerHTML=n,r=M(),i=k("video"),this.h()},l(a){e=b(a,"DIV",{class:!0});var l=D(e);t=b(l,"DIV",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-16dlolc"&&(t.innerHTML=n),r=L(l),i=b(l,"VIDEO",{class:!0}),D(i).forEach(_),l.forEach(_),this.h()},h(){h(t,"class","screen-header svelte-bu6z9u"),i.autoplay=!0,i.muted=!0,i.playsInline=!0,h(i,"class","svelte-bu6z9u"),h(e,"class","screen-item svelte-bu6z9u")},m(a,l){z(a,e,l),c(e,t),c(e,r),c(e,i),s[9](i)},p:Pe,d(a){a&&_(e),s[9](null)}}}function fl(s,e){let t,n,r,i=e[12].username+"",a,l,o,u,f,p,d;return{key:s,first:null,c(){t=k("div"),n=k("div"),r=k("span"),a=W(i),l=W("'s Screen"),o=M(),u=k("video"),this.h()},l(m){t=b(m,"DIV",{class:!0});var g=D(t);n=b(g,"DIV",{class:!0});var v=D(n);r=b(v,"SPAN",{class:!0});var A=D(r);a=$(A,i),l=$(A,"'s Screen"),A.forEach(_),v.forEach(_),o=L(g),u=b(g,"VIDEO",{class:!0}),D(u).forEach(_),g.forEach(_),this.h()},h(){h(r,"class","username svelte-bu6z9u"),h(n,"class","screen-header svelte-bu6z9u"),u.autoplay=!0,u.playsInline=!0,h(u,"class","svelte-bu6z9u"),h(t,"class","screen-item svelte-bu6z9u"),this.first=t},m(m,g){z(m,t,g),c(t,n),c(n,r),c(r,a),c(r,l),c(t,o),c(t,u),p||(d=Aa(f=uh.call(null,u,e[12].stream)),p=!0)},p(m,g){e=m,g&16&&i!==(i=e[12].username+"")&&ne(a,i),f&&ks(f.update)&&g&16&&f.update.call(null,e[12].stream)},d(m){m&&_(t),p=!1,d()}}}function hl(s){let e,t='<p class="svelte-bu6z9u">No active screen shares</p> <p class="hint svelte-bu6z9u">Click &quot;Start Sharing&quot; to share your screen</p>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(n){e=b(n,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-reuplr"&&(e.innerHTML=t),this.h()},h(){h(e,"class","empty-state svelte-bu6z9u")},m(n,r){z(n,e,r)},d(n){n&&_(e)}}}function ch(s){let e,t,n,r,i="â† Back",a,l,o="ðŸ–¥ï¸ Screen Sharing",u,f,p,d,m,g=[],v=new Map,A,I,y;function E(R,F){return R[3]?oh:ah}let w=E(s),T=w(s),C=s[2]&&cl(s),S=s[3]&&s[0]&&ul(s),P=Ve(s[4]);const O=R=>R[12].userId;for(let R=0;R<P.length;R+=1){let F=ol(s,P,R),B=O(F);v.set(B,g[R]=fl(B,F))}let N=!s[3]&&s[4].length===0&&hl();return{c(){e=k("div"),t=k("div"),n=k("div"),r=k("button"),r.textContent=i,a=M(),l=k("h2"),l.textContent=o,u=M(),T.c(),f=M(),C&&C.c(),p=M(),d=k("div"),S&&S.c(),m=M();for(let R=0;R<g.length;R+=1)g[R].c();A=M(),N&&N.c(),this.h()},l(R){e=b(R,"DIV",{class:!0});var F=D(e);t=b(F,"DIV",{class:!0});var B=D(t);n=b(B,"DIV",{class:!0});var U=D(n);r=b(U,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(r)!=="svelte-ts724a"&&(r.textContent=i),a=L(U),l=b(U,"H2",{class:!0,"data-svelte-h":!0}),Q(l)!=="svelte-1el2fdv"&&(l.textContent=o),U.forEach(_),u=L(B),T.l(B),B.forEach(_),f=L(F),C&&C.l(F),p=L(F),d=b(F,"DIV",{class:!0});var G=D(d);S&&S.l(G),m=L(G);for(let q=0;q<g.length;q+=1)g[q].l(G);A=L(G),N&&N.l(G),G.forEach(_),F.forEach(_),this.h()},h(){h(r,"class","back-btn svelte-bu6z9u"),h(r,"title","Back to chat"),h(l,"class","svelte-bu6z9u"),h(n,"class","header-left svelte-bu6z9u"),h(t,"class","header svelte-bu6z9u"),h(d,"class","screens svelte-bu6z9u"),h(e,"class","screen-share-container svelte-bu6z9u")},m(R,F){z(R,e,F),c(e,t),c(t,n),c(n,r),c(n,a),c(n,l),c(t,u),T.m(t,null),c(e,f),C&&C.m(e,null),c(e,p),c(e,d),S&&S.m(d,null),c(d,m);for(let B=0;B<g.length;B+=1)g[B]&&g[B].m(d,null);c(d,A),N&&N.m(d,null),I||(y=Y(r,"click",s[5]),I=!0)},p(R,[F]){w===(w=E(R))&&T?T.p(R,F):(T.d(1),T=w(R),T&&(T.c(),T.m(t,null))),R[2]?C?C.p(R,F):(C=cl(R),C.c(),C.m(e,p)):C&&(C.d(1),C=null),R[3]&&R[0]?S?S.p(R,F):(S=ul(R),S.c(),S.m(d,m)):S&&(S.d(1),S=null),F&16&&(P=Ve(R[4]),g=Ts(g,F,O,1,R,P,v,d,Ss,fl,A,ol)),!R[3]&&R[4].length===0?N||(N=hl(),N.c(),N.m(d,null)):N&&(N.d(1),N=null)},i:Pe,o:Pe,d(R){R&&_(e),T.d(),C&&C.d(),S&&S.d();for(let F=0;F<g.length;F+=1)g[F].d();N&&N.d(),I=!1,y()}}}function uh(s,e){return console.log("Setting remote video srcObject",e,"tracks:",e.getTracks()),s.srcObject=e,s.play().catch(t=>console.error("Error playing remote video:",t)),{update(t){console.log("Updating remote video srcObject",t,"tracks:",t.getTracks()),s.srcObject=t,s.play().catch(n=>console.error("Error playing updated remote video:",n))}}}function fh(s,e,t){let n,r,i,a;Ie(s,xs,v=>t(10,n=v)),Ie(s,Ar,v=>t(3,r=v)),Ie(s,rs,v=>t(11,i=v)),Ie(s,Er,v=>t(4,a=v));let{activeView:l="screen"}=e,o=null,u="",f;function p(){t(8,l="chat")}async function d(){try{if(!n)return;t(0,o=await th(n)),console.log("Screen share started, stream:",o),console.log("Stream tracks:",o==null?void 0:o.getTracks()),console.log("Video tracks:",o==null?void 0:o.getVideoTracks()),t(2,u="")}catch(v){t(2,u="Failed to start screen sharing. Please grant permissions."),console.error("Screen share error:",v)}}function m(){n&&(ma(n),t(0,o=null))}Es(()=>{n&&(n.on("screen-share-started",async v=>{n&&(console.log(`${v.username} started screen sharing`),Ul(),t(8,l="screen"),document.hidden&&"Notification"in window&&Notification.permission==="granted"&&new Notification("Screen Share Started",{body:`${v.username} is sharing their screen`,icon:"/icon-192.png"}))}),n.on("screen-share-stopped",v=>{lh(v)}),n.on("webrtc-offer",async v=>{if(!n)return;const A=i.find(I=>I.id===v.senderId);A&&await nh(n,v.senderId,A.username,v.offer)}),n.on("webrtc-answer",async v=>{await rh(v.senderId,v.answer)}),n.on("webrtc-ice-candidate",async v=>{await ih(v.senderId,v.candidate)}),n.on("user-joined",async v=>{r&&n&&setTimeout(()=>{n&&sh(n,v.id)},1e3)}))});function g(v){ot[v?"unshift":"push"](()=>{f=v,t(1,f),t(0,o)})}return s.$$set=v=>{"activeView"in v&&t(8,l=v.activeView)},s.$$.update=()=>{s.$$.dirty&3&&f&&o&&(console.log("Setting local video srcObject",o),t(1,f.srcObject=o,f),f.play().catch(v=>console.error("Error playing local video:",v)))},[o,f,u,r,a,p,d,m,l,g]}class hh extends bt{constructor(e){super(),kt(this,e,fh,ch,_t,{activeView:8})}}function dl(s,e,t){const n=s.slice();return n[15]=e[t],n[16]=e,n[17]=t,n}function pl(s){let e,t,n,r,i=s[2].username.charAt(0).toUpperCase()+"",a,l,o,u=s[2].username+"",f,p,d,m=s[2].isVideoCall?"ðŸ“¹ Video":"ðŸ“ž Voice",g,v,A,I,y,E=`<span class="btn-icon svelte-1e217ta">ðŸ“ž</span>
					Answer`,w,T,C=`<span class="btn-icon svelte-1e217ta">âœ–ï¸</span>
					Decline`,S,P;return{c(){e=k("div"),t=k("div"),n=k("div"),r=k("div"),a=W(i),l=M(),o=k("h2"),f=W(u),p=M(),d=k("p"),g=W(m),v=W(" Call"),A=M(),I=k("div"),y=k("button"),y.innerHTML=E,w=M(),T=k("button"),T.innerHTML=C,this.h()},l(O){e=b(O,"DIV",{class:!0});var N=D(e);t=b(N,"DIV",{class:!0});var R=D(t);n=b(R,"DIV",{class:!0});var F=D(n);r=b(F,"DIV",{class:!0});var B=D(r);a=$(B,i),B.forEach(_),l=L(F),o=b(F,"H2",{class:!0});var U=D(o);f=$(U,u),U.forEach(_),p=L(F),d=b(F,"P",{class:!0});var G=D(d);g=$(G,m),v=$(G," Call"),G.forEach(_),F.forEach(_),A=L(R),I=b(R,"DIV",{class:!0});var q=D(I);y=b(q,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(y)!=="svelte-u3s2jz"&&(y.innerHTML=E),w=L(q),T=b(q,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(T)!=="svelte-om1ns7"&&(T.innerHTML=C),q.forEach(_),R.forEach(_),N.forEach(_),this.h()},h(){h(r,"class","caller-avatar svelte-1e217ta"),h(o,"class","svelte-1e217ta"),h(d,"class","call-type svelte-1e217ta"),h(n,"class","caller-info svelte-1e217ta"),h(y,"class","answer-btn svelte-1e217ta"),h(T,"class","reject-btn svelte-1e217ta"),h(I,"class","call-actions svelte-1e217ta"),h(t,"class","incoming-call-modal svelte-1e217ta"),h(e,"class","call-modal-overlay svelte-1e217ta")},m(O,N){z(O,e,N),c(e,t),c(t,n),c(n,r),c(r,a),c(n,l),c(n,o),c(o,f),c(n,p),c(n,d),c(d,g),c(d,v),c(t,A),c(t,I),c(I,y),c(I,w),c(I,T),S||(P=[Y(y,"click",s[7]),Y(T,"click",s[8])],S=!0)},p(O,N){N&4&&i!==(i=O[2].username.charAt(0).toUpperCase()+"")&&ne(a,i),N&4&&u!==(u=O[2].username+"")&&ne(f,u),N&4&&m!==(m=O[2].isVideoCall?"ðŸ“¹ Video":"ðŸ“ž Voice")&&ne(g,m)},d(O){O&&_(e),S=!1,xe(P)}}}function gl(s){let e,t,n,r,i,a,l,o="You",u,f=[],p=new Map,d,m,g,v,A=s[6]?"ðŸ”‡":"ðŸŽ¤",I,y,E,w,T,C=s[5]?"ðŸ“¹":"ðŸ“·",S,P,O,N,R='<span class="control-icon svelte-1e217ta">ðŸ“ž</span>',F,B,U=s[5]&&ml(),G=Ve(s[3]);const q=H=>H[15].userId;for(let H=0;H<G.length;H+=1){let J=dl(s,G,H),j=q(J);p.set(j,f[H]=_l(j,J))}return{c(){e=k("div"),t=k("div"),n=k("div"),r=k("video"),i=M(),U&&U.c(),a=M(),l=k("div"),l.textContent=o,u=M();for(let H=0;H<f.length;H+=1)f[H].c();d=M(),m=k("div"),g=k("button"),v=k("span"),I=W(A),E=M(),w=k("button"),T=k("span"),S=W(C),O=M(),N=k("button"),N.innerHTML=R,this.h()},l(H){e=b(H,"DIV",{class:!0});var J=D(e);t=b(J,"DIV",{class:!0});var j=D(t);n=b(j,"DIV",{class:!0});var V=D(n);r=b(V,"VIDEO",{class:!0}),D(r).forEach(_),i=L(V),U&&U.l(V),a=L(V),l=b(V,"DIV",{class:!0,"data-svelte-h":!0}),Q(l)!=="svelte-1l6ztyc"&&(l.textContent=o),V.forEach(_),u=L(j);for(let me=0;me<f.length;me+=1)f[me].l(j);j.forEach(_),d=L(J),m=b(J,"DIV",{class:!0});var Z=D(m);g=b(Z,"BUTTON",{class:!0,title:!0});var X=D(g);v=b(X,"SPAN",{class:!0});var ie=D(v);I=$(ie,A),ie.forEach(_),X.forEach(_),E=L(Z),w=b(Z,"BUTTON",{class:!0,title:!0});var he=D(w);T=b(he,"SPAN",{class:!0});var re=D(T);S=$(re,C),re.forEach(_),he.forEach(_),O=L(Z),N=b(Z,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(N)!=="svelte-1rszrze"&&(N.innerHTML=R),Z.forEach(_),J.forEach(_),this.h()},h(){r.autoplay=!0,r.muted=!0,r.playsInline=!0,h(r,"class","video-element svelte-1e217ta"),ye(r,"video-hidden",s[5]),h(l,"class","video-label svelte-1e217ta"),h(n,"class","video-wrapper local-video svelte-1e217ta"),h(t,"class","video-grid svelte-1e217ta"),h(v,"class","control-icon svelte-1e217ta"),h(g,"class","control-btn svelte-1e217ta"),h(g,"title",y=s[6]?"Unmute":"Mute"),ye(g,"active",s[6]),h(T,"class","control-icon svelte-1e217ta"),h(w,"class","control-btn svelte-1e217ta"),h(w,"title",P=s[5]?"Turn on camera":"Turn off camera"),ye(w,"active",s[5]),h(N,"class","control-btn end-call-btn svelte-1e217ta"),h(N,"title","End call"),h(m,"class","call-controls svelte-1e217ta"),h(e,"class","active-call-container svelte-1e217ta")},m(H,J){z(H,e,J),c(e,t),c(t,n),c(n,r),s[12](r),c(n,i),U&&U.m(n,null),c(n,a),c(n,l),c(t,u);for(let j=0;j<f.length;j+=1)f[j]&&f[j].m(t,null);c(e,d),c(e,m),c(m,g),c(g,v),c(v,I),c(m,E),c(m,w),c(w,T),c(T,S),c(m,O),c(m,N),F||(B=[Y(g,"click",s[10]),Y(w,"click",s[11]),Y(N,"click",s[9])],F=!0)},p(H,J){J&32&&ye(r,"video-hidden",H[5]),H[5]?U||(U=ml(),U.c(),U.m(n,a)):U&&(U.d(1),U=null),J&10&&(G=Ve(H[3]),f=Ts(f,J,q,1,H,G,p,t,Ss,_l,null,dl)),J&64&&A!==(A=H[6]?"ðŸ”‡":"ðŸŽ¤")&&ne(I,A),J&64&&y!==(y=H[6]?"Unmute":"Mute")&&h(g,"title",y),J&64&&ye(g,"active",H[6]),J&32&&C!==(C=H[5]?"ðŸ“¹":"ðŸ“·")&&ne(S,C),J&32&&P!==(P=H[5]?"Turn on camera":"Turn off camera")&&h(w,"title",P),J&32&&ye(w,"active",H[5])},d(H){H&&_(e),s[12](null),U&&U.d();for(let J=0;J<f.length;J+=1)f[J].d();F=!1,xe(B)}}}function ml(s){let e,t='<span class="placeholder-icon svelte-1e217ta">ðŸ“¹</span> <span>Camera Off</span>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(n){e=b(n,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-57tuav"&&(e.innerHTML=t),this.h()},h(){h(e,"class","video-placeholder svelte-1e217ta")},m(n,r){z(n,e,r)},d(n){n&&_(e)}}}function vl(s){let e,t,n="ðŸ‘¤",r,i,a=(s[15].username||"User")+"",l;return{c(){e=k("div"),t=k("span"),t.textContent=n,r=M(),i=k("span"),l=W(a),this.h()},l(o){e=b(o,"DIV",{class:!0});var u=D(e);t=b(u,"SPAN",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-18bpbb5"&&(t.textContent=n),r=L(u),i=b(u,"SPAN",{});var f=D(i);l=$(f,a),f.forEach(_),u.forEach(_),this.h()},h(){h(t,"class","placeholder-icon svelte-1e217ta"),h(e,"class","video-placeholder svelte-1e217ta")},m(o,u){z(o,e,u),c(e,t),c(e,r),c(e,i),c(i,l)},p(o,u){u&8&&a!==(a=(o[15].username||"User")+"")&&ne(l,a)},d(o){o&&_(e)}}}function _l(s,e){let t,n,r=e[15],i,a,l,o=(e[15].username||"User")+"",u,f;const p=()=>e[13](n,r),d=()=>e[13](null,r);let m=!e[15].isVideoEnabled&&vl(e);return{key:s,first:null,c(){t=k("div"),n=k("video"),i=M(),m&&m.c(),a=M(),l=k("div"),u=W(o),f=M(),this.h()},l(g){t=b(g,"DIV",{class:!0});var v=D(t);n=b(v,"VIDEO",{class:!0}),D(n).forEach(_),i=L(v),m&&m.l(v),a=L(v),l=b(v,"DIV",{class:!0});var A=D(l);u=$(A,o),A.forEach(_),f=L(v),v.forEach(_),this.h()},h(){n.autoplay=!0,n.playsInline=!0,h(n,"class","video-element svelte-1e217ta"),ye(n,"video-hidden",!e[15].isVideoEnabled),h(l,"class","video-label svelte-1e217ta"),h(t,"class","video-wrapper remote-video svelte-1e217ta"),this.first=t},m(g,v){z(g,t,v),c(t,n),p(),c(t,i),m&&m.m(t,null),c(t,a),c(t,l),c(l,u),c(t,f)},p(g,v){e=g,r!==e[15]&&(d(),r=e[15],p()),v&8&&ye(n,"video-hidden",!e[15].isVideoEnabled),e[15].isVideoEnabled?m&&(m.d(1),m=null):m?m.p(e,v):(m=vl(e),m.c(),m.m(t,a)),v&8&&o!==(o=(e[15].username||"User")+"")&&ne(u,o)},d(g){g&&_(t),d(),m&&m.d()}}}function dh(s){let e,t,n=s[2]&&pl(s),r=s[4]&&gl(s);return{c(){n&&n.c(),e=M(),r&&r.c(),t=Fe()},l(i){n&&n.l(i),e=L(i),r&&r.l(i),t=Fe()},m(i,a){n&&n.m(i,a),z(i,e,a),r&&r.m(i,a),z(i,t,a)},p(i,[a]){i[2]?n?n.p(i,a):(n=pl(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),i[4]?r?r.p(i,a):(r=gl(i),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:Pe,o:Pe,d(i){i&&(_(e),_(t)),n&&n.d(i),r&&r.d(i)}}}function ph(){console.log("Incoming call ringtone")}function gh(s,e,t){let n,r,i,a,l,o;Ie(s,xs,y=>t(14,n=y)),Ie(s,Tn,y=>t(2,r=y)),Ie(s,wr,y=>t(3,i=y)),Ie(s,Nn,y=>t(4,a=y)),Ie(s,rn,y=>t(5,l=y)),Ie(s,nn,y=>t(6,o=y));let u,f={};Es(()=>{n&&(n.on("call-incoming",y=>{Tn.set({userId:y.userId,username:y.username,isVideoCall:y.isVideoCall})}),n.on("call-accepted",async y=>{await Gf(n,y.userId)}),n.on("call-rejected",y=>{alert("Call was rejected"),Wn(n)}),n.on("call-ended",y=>{Wn(n)}),n.on("call-offer",async y=>{const E=i.find(T=>T.userId===y.senderId)||r,w=E?E.username:"Unknown";await $f(n,y.senderId,w,y.offer)}),n.on("call-answer-sdp",async y=>{await Wf(y.senderId,y.answer)}),n.on("call-ice-candidate",async y=>{await Yf(y.senderId,y.candidate)}))}),Sl(()=>{n&&(n.off("call-incoming"),n.off("call-accepted"),n.off("call-rejected"),n.off("call-ended"),n.off("call-offer"),n.off("call-answer-sdp"),n.off("call-ice-candidate"))});async function p(){!r||!n||await qf(n,r.userId,r.isVideoCall)}function d(){!r||!n||zf(n,r.userId)}function m(){n&&Wn(n)}function g(){Vf()}function v(){Hf()}function A(y){ot[y?"unshift":"push"](()=>{u=y,t(0,u),t(4,a)})}function I(y,E){ot[y?"unshift":"push"](()=>{f[E.userId]=y,t(1,f)})}return s.$$.update=()=>{if(s.$$.dirty&4&&r&&ph(),s.$$.dirty&17&&a&&u){const y=Zf();y&&t(0,u.srcObject=y,u)}s.$$.dirty&10&&i.length>0&&i.forEach(y=>{const E=f[y.userId];E&&y.stream&&(E.srcObject=y.stream)})},[u,f,r,i,a,l,o,p,d,m,g,v,A,I]}class mh extends bt{constructor(e){super(),kt(this,e,gh,dh,_t,{})}}const{window:bl}=Sa;function vh(s){let e,t,n,r,i,a,l,o,u,f,p,d,m,g,v,A,I,y=s[2]?"â†’":"â†",E,w,T,C,S,P,O,N;function R(q){s[12](q)}let F={};s[1]!==void 0&&(F.activeView=s[1]),n=new jf({props:F}),ot.push(()=>Xt(n,"activeView",R)),f=new Tf({});function B(q){s[13](q)}let U={};s[1]!==void 0&&(U.activeView=s[1]),m=new hh({props:U}),ot.push(()=>Xt(m,"activeView",B));let G=s[2]&&kl(s);return S=new mh({}),{c(){e=k("div"),t=k("div"),pt(n.$$.fragment),i=M(),a=k("div"),l=M(),o=k("div"),u=k("div"),pt(f.$$.fragment),p=M(),d=k("div"),pt(m.$$.fragment),v=M(),G&&G.c(),A=M(),I=k("button"),E=W(y),C=M(),pt(S.$$.fragment),this.h()},l(q){e=b(q,"DIV",{class:!0});var H=D(e);t=b(H,"DIV",{class:!0,style:!0});var J=D(t);dt(n.$$.fragment,J),i=L(J),a=b(J,"DIV",{class:!0}),D(a).forEach(_),J.forEach(_),l=L(H),o=b(H,"DIV",{class:!0});var j=D(o);u=b(j,"DIV",{class:!0});var V=D(u);dt(f.$$.fragment,V),V.forEach(_),p=L(j),d=b(j,"DIV",{class:!0});var Z=D(d);dt(m.$$.fragment,Z),Z.forEach(_),j.forEach(_),v=L(H),G&&G.l(H),A=L(H),I=b(H,"BUTTON",{class:!0,title:!0,style:!0});var X=D(I);E=$(X,y),X.forEach(_),H.forEach(_),C=L(q),dt(S.$$.fragment,q),this.h()},h(){h(a,"class","resize-handle resize-handle-channel svelte-u9tga7"),h(t,"class","channel-sidebar-container svelte-u9tga7"),Le(t,"width",s[3]+"px"),h(u,"class","svelte-u9tga7"),ye(u,"hidden",s[1]!=="chat"),h(d,"class","svelte-u9tga7"),ye(d,"hidden",s[1]!=="screen"),h(o,"class","main-content svelte-u9tga7"),h(I,"class","user-panel-toggle svelte-u9tga7"),h(I,"title",w=s[2]?"Hide user panel":"Show user panel"),h(I,"style",T=s[2]?`right: ${s[4]}px`:"right: 0"),ye(I,"open",s[2]),h(e,"class","app-container svelte-u9tga7"),ye(e,"resizing",s[5]||s[6])},m(q,H){z(q,e,H),c(e,t),ht(n,t,null),c(t,i),c(t,a),c(e,l),c(e,o),c(o,u),ht(f,u,null),c(o,p),c(o,d),ht(m,d,null),c(e,v),G&&G.m(e,null),c(e,A),c(e,I),c(I,E),z(q,C,H),ht(S,q,H),P=!0,O||(N=[Y(a,"mousedown",s[8]),Y(I,"click",s[14])],O=!0)},p(q,H){const J={};!r&&H&2&&(r=!0,J.activeView=q[1],Zt(()=>r=!1)),n.$set(J),(!P||H&8)&&Le(t,"width",q[3]+"px"),(!P||H&2)&&ye(u,"hidden",q[1]!=="chat");const j={};!g&&H&2&&(g=!0,j.activeView=q[1],Zt(()=>g=!1)),m.$set(j),(!P||H&2)&&ye(d,"hidden",q[1]!=="screen"),q[2]?G?(G.p(q,H),H&4&&Oe(G,1)):(G=kl(q),G.c(),Oe(G,1),G.m(e,A)):G&&(en(),Be(G,1,1,()=>{G=null}),tn()),(!P||H&4)&&y!==(y=q[2]?"â†’":"â†")&&ne(E,y),(!P||H&4&&w!==(w=q[2]?"Hide user panel":"Show user panel"))&&h(I,"title",w),(!P||H&20&&T!==(T=q[2]?`right: ${q[4]}px`:"right: 0"))&&h(I,"style",T),(!P||H&4)&&ye(I,"open",q[2]),(!P||H&96)&&ye(e,"resizing",q[5]||q[6])},i(q){P||(Oe(n.$$.fragment,q),Oe(f.$$.fragment,q),Oe(m.$$.fragment,q),Oe(G),Oe(S.$$.fragment,q),P=!0)},o(q){Be(n.$$.fragment,q),Be(f.$$.fragment,q),Be(m.$$.fragment,q),Be(G),Be(S.$$.fragment,q),P=!1},d(q){q&&(_(e),_(C)),ft(n),ft(f),ft(m),G&&G.d(),ft(S,q),O=!1,xe(N)}}}function _h(s){let e,t;return e=new Rf({}),e.$on("login",s[7]),{c(){pt(e.$$.fragment)},l(n){dt(e.$$.fragment,n)},m(n,r){ht(e,n,r),t=!0},p:Pe,i(n){t||(Oe(e.$$.fragment,n),t=!0)},o(n){Be(e.$$.fragment,n),t=!1},d(n){ft(e,n)}}}function kl(s){let e,t,n,r,i,a,l;return r=new eh({}),{c(){e=k("div"),t=k("div"),n=M(),pt(r.$$.fragment),this.h()},l(o){e=b(o,"DIV",{class:!0,style:!0});var u=D(e);t=b(u,"DIV",{class:!0}),D(t).forEach(_),n=L(u),dt(r.$$.fragment,u),u.forEach(_),this.h()},h(){h(t,"class","resize-handle resize-handle-user svelte-u9tga7"),h(e,"class","user-panel-container svelte-u9tga7"),Le(e,"width",s[4]+"px")},m(o,u){z(o,e,u),c(e,t),c(e,n),ht(r,e,null),i=!0,a||(l=Y(t,"mousedown",s[9]),a=!0)},p(o,u){(!i||u&16)&&Le(e,"width",o[4]+"px")},i(o){i||(Oe(r.$$.fragment,o),i=!0)},o(o){Be(r.$$.fragment,o),i=!1},d(o){o&&_(e),ft(r),a=!1,l()}}}function bh(s){let e,t,n,r,i,a;const l=[_h,vh],o=[];function u(f,p){return f[0]?1:0}return e=u(s),t=o[e]=l[e](s),{c(){t.c(),n=Fe()},l(f){t.l(f),n=Fe()},m(f,p){o[e].m(f,p),z(f,n,p),r=!0,i||(a=[Y(bl,"mousemove",s[10]),Y(bl,"mouseup",s[11])],i=!0)},p(f,[p]){let d=e;e=u(f),e===d?o[e].p(f,p):(en(),Be(o[d],1,1,()=>{o[d]=null}),tn(),t=o[e],t?t.p(f,p):(t=o[e]=l[e](f),t.c()),Oe(t,1),t.m(n.parentNode,n))},i(f){r||(Oe(t),r=!0)},o(f){Be(t),r=!1},d(f){f&&_(n),o[e].d(f),i=!1,xe(a)}}}function kh(s,e,t){let n="",r=!1,i="chat",a=!1,l=240,o=250,u=!1,f=!1;function p(E){n=E.detail,Mc(n),t(0,r=!0)}function d(E){t(5,u=!0),E.preventDefault()}function m(E){t(6,f=!0),E.preventDefault()}function g(E){if(u){const w=E.clientX;w>=180&&w<=400&&t(3,l=w)}else if(f){const w=window.innerWidth-E.clientX;w>=200&&w<=500&&t(4,o=w)}}function v(){t(5,u=!1),t(6,f=!1)}Sl(()=>{zc()});function A(E){i=E,t(1,i)}function I(E){i=E,t(1,i)}return[r,i,a,l,o,u,f,p,d,m,g,v,A,I,()=>t(2,a=!a)]}class Ch extends bt{constructor(e){super(),kt(this,e,kh,bh,_t,{})}}export{Ch as component};
