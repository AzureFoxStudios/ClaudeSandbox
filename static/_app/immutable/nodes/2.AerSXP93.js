var ga=Object.defineProperty;var ma=(s,e,t)=>e in s?ga(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var Ee=(s,e,t)=>ma(s,typeof e!="symbol"?e+"":e,t);import{A as Le,s as _t,n as Ne,d as _,O as tt,i as j,e as c,P as G,x as h,f as b,h as D,k as L,Q as K,l as k,m as M,R as kl,r as ws,p as Fe,S as Ue,b as ne,T as Es,j as V,t as H,U as Os,y as Me,o as Re,B as bs,z as ot,V as Tn,W as Yt,q as va,X as yl,Y as wl,Z as Te,v as _a,_ as ba,$ as Tr,a0 as El,I as ka,a1 as ya,a2 as wa,a3 as Al}from"../chunks/CdCOery0.js";import{a as Ce,S as bt,i as kt,f as Zt,d as ht,t as xe,g as Ns,c as Ps,m as dt,e as pt,b as gt}from"../chunks/CqCFC2cg.js";import{w as it}from"../chunks/BHhKbfRM.js";/* empty css                */const Ea=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Ve(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function As(s,e){s.d(1),e.delete(s.key)}function Ss(s,e,t,n,r,i,a,l,o,u,f,p){let d=s.length,m=i.length,g=d;const v={};for(;g--;)v[s[g].key]=g;const A=[],R=new Map,y=new Map,E=[];for(g=m;g--;){const S=p(r,i,g),F=t(S);let N=a.get(F);N?E.push(()=>N.p(S,e)):(N=u(F,S),N.c()),R.set(F,A[g]=N),F in v&&y.set(F,Math.abs(g-v[F]))}const w=new Set,T=new Set;function C(S){Ce(S,1),S.m(l,f),a.set(S.key,S),f=S.first,m--}for(;d&&m;){const S=A[m-1],F=s[d-1],N=S.key,O=F.key;S===F?(f=S.first,d--,m--):R.has(O)?!a.has(N)||w.has(N)?C(S):T.has(O)?d--:y.get(N)>y.get(O)?(T.add(N),C(S)):(w.add(O),d--):(o(F,a),d--)}for(;d--;){const S=s[d];R.has(S.key)||o(S,a)}for(;m;)C(A[m-1]);return Le(E),A}const Kt=Object.create(null);Kt.open="0";Kt.close="1";Kt.ping="2";Kt.pong="3";Kt.message="4";Kt.upgrade="5";Kt.noop="6";const gn=Object.create(null);Object.keys(Kt).forEach(s=>{gn[Kt[s]]=s});const Wn={type:"error",data:"parser error"},Sl=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Tl=typeof ArrayBuffer=="function",Cl=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,lr=({type:s,data:e},t,n)=>Sl&&e instanceof Blob?t?n(e):Cr(e,n):Tl&&(e instanceof ArrayBuffer||Cl(e))?t?n(e):Cr(new Blob([e]),n):n(Kt[s]+(e||"")),Cr=(s,e)=>{const t=new FileReader;return t.onload=function(){const n=t.result.split(",")[1];e("b"+(n||""))},t.readAsDataURL(s)};function Ir(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let Pn;function Aa(s,e){if(Sl&&s.data instanceof Blob)return s.data.arrayBuffer().then(Ir).then(e);if(Tl&&(s.data instanceof ArrayBuffer||Cl(s.data)))return e(Ir(s.data));lr(s,!1,t=>{Pn||(Pn=new TextEncoder),e(Pn.encode(t))})}const Rr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ys=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<Rr.length;s++)Ys[Rr.charCodeAt(s)]=s;const Sa=s=>{let e=s.length*.75,t=s.length,n,r=0,i,a,l,o;s[s.length-1]==="="&&(e--,s[s.length-2]==="="&&e--);const u=new ArrayBuffer(e),f=new Uint8Array(u);for(n=0;n<t;n+=4)i=Ys[s.charCodeAt(n)],a=Ys[s.charCodeAt(n+1)],l=Ys[s.charCodeAt(n+2)],o=Ys[s.charCodeAt(n+3)],f[r++]=i<<2|a>>4,f[r++]=(a&15)<<4|l>>2,f[r++]=(l&3)<<6|o&63;return u},Ta=typeof ArrayBuffer=="function",ar=(s,e)=>{if(typeof s!="string")return{type:"message",data:Il(s,e)};const t=s.charAt(0);return t==="b"?{type:"message",data:Ca(s.substring(1),e)}:gn[t]?s.length>1?{type:gn[t],data:s.substring(1)}:{type:gn[t]}:Wn},Ca=(s,e)=>{if(Ta){const t=Sa(s);return Il(t,e)}else return{base64:!0,data:s}},Il=(s,e)=>{switch(e){case"blob":return s instanceof Blob?s:new Blob([s]);case"arraybuffer":default:return s instanceof ArrayBuffer?s:s.buffer}},Rl="",Ia=(s,e)=>{const t=s.length,n=new Array(t);let r=0;s.forEach((i,a)=>{lr(i,!1,l=>{n[a]=l,++r===t&&e(n.join(Rl))})})},Ra=(s,e)=>{const t=s.split(Rl),n=[];for(let r=0;r<t.length;r++){const i=ar(t[r],e);if(n.push(i),i.type==="error")break}return n};function Da(){return new TransformStream({transform(s,e){Aa(s,t=>{const n=t.length;let r;if(n<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,n);else if(n<65536){r=new Uint8Array(3);const i=new DataView(r.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{r=new Uint8Array(9);const i=new DataView(r.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}s.data&&typeof s.data!="string"&&(r[0]|=128),e.enqueue(r),e.enqueue(t)})}})}let Fn;function ln(s){return s.reduce((e,t)=>e+t.length,0)}function an(s,e){if(s[0].length===e)return s.shift();const t=new Uint8Array(e);let n=0;for(let r=0;r<e;r++)t[r]=s[0][n++],n===s[0].length&&(s.shift(),n=0);return s.length&&n<s[0].length&&(s[0]=s[0].slice(n)),t}function Oa(s,e){Fn||(Fn=new TextDecoder);const t=[];let n=0,r=-1,i=!1;return new TransformStream({transform(a,l){for(t.push(a);;){if(n===0){if(ln(t)<1)break;const o=an(t,1);i=(o[0]&128)===128,r=o[0]&127,r<126?n=3:r===126?n=1:n=2}else if(n===1){if(ln(t)<2)break;const o=an(t,2);r=new DataView(o.buffer,o.byteOffset,o.length).getUint16(0),n=3}else if(n===2){if(ln(t)<8)break;const o=an(t,8),u=new DataView(o.buffer,o.byteOffset,o.length),f=u.getUint32(0);if(f>Math.pow(2,21)-1){l.enqueue(Wn);break}r=f*Math.pow(2,32)+u.getUint32(4),n=3}else{if(ln(t)<r)break;const o=an(t,r);l.enqueue(ar(i?o:Fn.decode(o),e)),n=0}if(r===0||r>s){l.enqueue(Wn);break}}}})}const Dl=4;function Ye(s){if(s)return Na(s)}function Na(s){for(var e in Ye.prototype)s[e]=Ye.prototype[e];return s}Ye.prototype.on=Ye.prototype.addEventListener=function(s,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(e),this};Ye.prototype.once=function(s,e){function t(){this.off(s,t),e.apply(this,arguments)}return t.fn=e,this.on(s,t),this};Ye.prototype.off=Ye.prototype.removeListener=Ye.prototype.removeAllListeners=Ye.prototype.removeEventListener=function(s,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+s];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var n,r=0;r<t.length;r++)if(n=t[r],n===e||n.fn===e){t.splice(r,1);break}return t.length===0&&delete this._callbacks["$"+s],this};Ye.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+s],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t){t=t.slice(0);for(var n=0,r=t.length;n<r;++n)t[n].apply(this,e)}return this};Ye.prototype.emitReserved=Ye.prototype.emit;Ye.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};Ye.prototype.hasListeners=function(s){return!!this.listeners(s).length};const Cn=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Ft=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Pa="arraybuffer";function Ol(s,...e){return e.reduce((t,n)=>(s.hasOwnProperty(n)&&(t[n]=s[n]),t),{})}const Fa=Ft.setTimeout,xa=Ft.clearTimeout;function In(s,e){e.useNativeTimers?(s.setTimeoutFn=Fa.bind(Ft),s.clearTimeoutFn=xa.bind(Ft)):(s.setTimeoutFn=Ft.setTimeout.bind(Ft),s.clearTimeoutFn=Ft.clearTimeout.bind(Ft))}const La=1.33;function Ma(s){return typeof s=="string"?Ba(s):Math.ceil((s.byteLength||s.size)*La)}function Ba(s){let e=0,t=0;for(let n=0,r=s.length;n<r;n++)e=s.charCodeAt(n),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(n++,t+=4);return t}function Nl(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Ua(s){let e="";for(let t in s)s.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(s[t]));return e}function ja(s){let e={},t=s.split("&");for(let n=0,r=t.length;n<r;n++){let i=t[n].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class qa extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class or extends Ye{constructor(e){super(),this.writable=!1,In(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new qa(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=ar(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=Ua(e);return t.length?"?"+t:""}}class za extends or{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||t()})),this.writable||(n++,this.once("drain",function(){--n||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};Ra(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Ia(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=Nl()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let Pl=!1;try{Pl=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Va=Pl;function Ha(){}class Ga extends za{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let n=location.port;n||(n=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(r,i)=>{this.onError("xhr post error",r,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,n)=>{this.onError("xhr poll error",t,n)}),this.pollXhr=e}}class Xt extends Ye{constructor(e,t,n){super(),this.createRequest=e,In(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const t=Ol(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let r in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(r)&&n.setRequestHeader(r,this._opts.extraHeaders[r])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var r;n.readyState===3&&((r=this._opts.cookieJar)===null||r===void 0||r.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(r){this.setTimeoutFn(()=>{this._onError(r)},0);return}typeof document<"u"&&(this._index=Xt.requestsCount++,Xt.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Ha,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Xt.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Xt.requestsCount=0;Xt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Dr);else if(typeof addEventListener=="function"){const s="onpagehide"in Ft?"pagehide":"unload";addEventListener(s,Dr,!1)}}function Dr(){for(let s in Xt.requests)Xt.requests.hasOwnProperty(s)&&Xt.requests[s].abort()}const $a=function(){const s=Fl({xdomain:!1});return s&&s.responseType!==null}();class Wa extends Ga{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=$a&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Xt(Fl,this.uri(),e)}}function Fl(s){const e=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Va))return new XMLHttpRequest}catch{}if(!e)try{return new Ft[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const xl=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Ya extends or{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=xl?{}:Ol(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;lr(n,this.supportsBinary,i=>{try{this.doWrite(n,i)}catch{}r&&Cn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Nl()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const xn=Ft.WebSocket||Ft.MozWebSocket;class Za extends Ya{createSocket(e,t,n){return xl?new xn(e,t,n):t?new xn(e,t):new xn(e)}doWrite(e,t){this.ws.send(t)}}class Xa extends or{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=Oa(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),r=Da();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const i=()=>{n.read().then(({done:l,value:o})=>{l||(this.onPacket(o),i())}).catch(l=>{})};i();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;this._writer.write(n).then(()=>{r&&Cn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Ka={websocket:Za,webtransport:Xa,polling:Wa},Qa=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Ja=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Yn(s){if(s.length>8e3)throw"URI too long";const e=s,t=s.indexOf("["),n=s.indexOf("]");t!=-1&&n!=-1&&(s=s.substring(0,t)+s.substring(t,n).replace(/:/g,";")+s.substring(n,s.length));let r=Qa.exec(s||""),i={},a=14;for(;a--;)i[Ja[a]]=r[a]||"";return t!=-1&&n!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=eo(i,i.path),i.queryKey=to(i,i.query),i}function eo(s,e){const t=/\/{2,9}/g,n=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function to(s,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,r,i){r&&(t[r]=i)}),t}const Zn=typeof addEventListener=="function"&&typeof removeEventListener=="function",mn=[];Zn&&addEventListener("offline",()=>{mn.forEach(s=>s())},!1);class ls extends Ye{constructor(e,t){if(super(),this.binaryType=Pa,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const n=Yn(e);t.hostname=n.host,t.secure=n.protocol==="https"||n.protocol==="wss",t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=Yn(t.host).host);In(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(n=>{const r=n.prototype.name;this.transports.push(r),this._transportsByName[r]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=ja(this.opts.query)),Zn&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},mn.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=Dl,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&ls.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",ls.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let n=0;n<this.writeBuffer.length;n++){const r=this.writeBuffer[n].data;if(r&&(t+=Ma(r)),n>0&&t>this._maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Cn(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,r){if(typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(ls.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Zn&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=mn.indexOf(this._offlineEventListener);n!==-1&&mn.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}ls.protocol=Dl;class so extends ls{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;ls.priorWebsocketSuccess=!1;const r=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",p=>{if(!n)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;ls.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(f(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=t.name,this.emitReserved("upgradeError",d)}}))};function i(){n||(n=!0,f(),t.close(),t=null)}const a=p=>{const d=new Error("probe error: "+p);d.transport=t.name,i(),this.emitReserved("upgradeError",d)};function l(){a("transport closed")}function o(){a("socket closed")}function u(p){t&&p.name!==t.name&&i()}const f=()=>{t.removeListener("open",r),t.removeListener("error",a),t.removeListener("close",l),this.off("close",o),this.off("upgrading",u)};t.once("open",r),t.once("error",a),t.once("close",l),this.once("close",o),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}let no=class extends so{constructor(e,t={}){const n=typeof e=="object"?e:t;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(r=>Ka[r]).filter(r=>!!r)),super(e,n)}};function ro(s,e="",t){let n=s;t=t||typeof location<"u"&&location,s==null&&(s=t.protocol+"//"+t.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=t.protocol+s:s=t.host+s),/^(https?|wss?):\/\//.test(s)||(typeof t<"u"?s=t.protocol+"//"+s:s="https://"+s),n=Yn(s)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+e,n.href=n.protocol+"://"+i+(t&&t.port===n.port?"":":"+n.port),n}const io=typeof ArrayBuffer=="function",lo=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,Ll=Object.prototype.toString,ao=typeof Blob=="function"||typeof Blob<"u"&&Ll.call(Blob)==="[object BlobConstructor]",oo=typeof File=="function"||typeof File<"u"&&Ll.call(File)==="[object FileConstructor]";function cr(s){return io&&(s instanceof ArrayBuffer||lo(s))||ao&&s instanceof Blob||oo&&s instanceof File}function vn(s,e){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let t=0,n=s.length;t<n;t++)if(vn(s[t]))return!0;return!1}if(cr(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return vn(s.toJSON(),!0);for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&vn(s[t]))return!0;return!1}function co(s){const e=[],t=s.data,n=s;return n.data=Xn(t,e),n.attachments=e.length,{packet:n,buffers:e}}function Xn(s,e){if(!s)return s;if(cr(s)){const t={_placeholder:!0,num:e.length};return e.push(s),t}else if(Array.isArray(s)){const t=new Array(s.length);for(let n=0;n<s.length;n++)t[n]=Xn(s[n],e);return t}else if(typeof s=="object"&&!(s instanceof Date)){const t={};for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=Xn(s[n],e));return t}return s}function uo(s,e){return s.data=Kn(s.data,e),delete s.attachments,s}function Kn(s,e){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<e.length)return e[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let t=0;t<s.length;t++)s[t]=Kn(s[t],e);else if(typeof s=="object")for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&(s[t]=Kn(s[t],e));return s}const fo=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ho=5;var we;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(we||(we={}));class po{constructor(e){this.replacer=e}encode(e){return(e.type===we.EVENT||e.type===we.ACK)&&vn(e)?this.encodeAsBinary({type:e.type===we.EVENT?we.BINARY_EVENT:we.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===we.BINARY_EVENT||e.type===we.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=co(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}function Or(s){return Object.prototype.toString.call(s)==="[object Object]"}class ur extends Ye{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===we.BINARY_EVENT;n||t.type===we.BINARY_ACK?(t.type=n?we.EVENT:we.ACK,this.reconstructor=new go(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(cr(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(we[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===we.BINARY_EVENT||n.type===we.BINARY_ACK){const i=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const a=e.substring(i,t);if(a!=Number(a)||e.charAt(t)!=="-")throw new Error("Illegal attachments");n.attachments=Number(a)}if(e.charAt(t+1)==="/"){const i=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););n.nsp=e.substring(i,t)}else n.nsp="/";const r=e.charAt(t+1);if(r!==""&&Number(r)==r){const i=t+1;for(;++t;){const a=e.charAt(t);if(a==null||Number(a)!=a){--t;break}if(t===e.length)break}n.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=this.tryParse(e.substr(t));if(ur.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case we.CONNECT:return Or(t);case we.DISCONNECT:return t===void 0;case we.CONNECT_ERROR:return typeof t=="string"||Or(t);case we.EVENT:case we.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&fo.indexOf(t[0])===-1);case we.ACK:case we.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class go{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=uo(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const mo=Object.freeze(Object.defineProperty({__proto__:null,Decoder:ur,Encoder:po,get PacketType(){return we},protocol:ho},Symbol.toStringTag,{value:"Module"}));function jt(s,e,t){return s.on(e,t),function(){s.off(e,t)}}const vo=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ml extends Ye{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[jt(e,"open",this.onopen.bind(this)),jt(e,"packet",this.onpacket.bind(this)),jt(e,"error",this.onerror.bind(this)),jt(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,r,i;if(vo.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const a={type:we.EVENT,data:t};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const f=this.ids++,p=t.pop();this._registerAckCallback(f,p),a.id=f}const l=(r=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||r===void 0?void 0:r.writable,o=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(o?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var n;const r=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(r===void 0){this.acks[e]=t;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===e&&this.sendBuffer.splice(l,1);t.call(this,new Error("operation has timed out"))},r),a=(...l)=>{this.io.clearTimeoutFn(i),t.apply(this,l)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...t){return new Promise((n,r)=>{const i=(a,l)=>a?r(a):n(l);i.withError=!0,t.push(i),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((r,...i)=>n!==this._queue[0]?void 0:(r!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(r)):(this._queue.shift(),t&&t(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:we.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case we.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case we.EVENT:case we.BINARY_EVENT:this.onevent(e);break;case we.ACK:case we.BINARY_ACK:this.onack(e);break;case we.DISCONNECT:this.ondisconnect();break;case we.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...r){n||(n=!0,t.packet({type:we.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:we.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function xs(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}xs.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*s);s=Math.floor(e*10)&1?s+t:s-t}return Math.min(s,this.max)|0};xs.prototype.reset=function(){this.attempts=0};xs.prototype.setMin=function(s){this.ms=s};xs.prototype.setMax=function(s){this.max=s};xs.prototype.setJitter=function(s){this.jitter=s};class Qn extends Ye{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,In(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((n=t.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new xs({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||mo;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new no(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=jt(t,"open",function(){n.onopen(),e&&e()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),e?e(l):this.maybeReconnectOnOpen()},a=jt(t,"error",i);if(this._timeout!==!1){const l=this._timeout,o=this.setTimeoutFn(()=>{r(),i(new Error("timeout")),t.close()},l);this.opts.autoUnref&&o.unref(),this.subs.push(()=>{this.clearTimeoutFn(o)})}return this.subs.push(r),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(jt(e,"ping",this.onping.bind(this)),jt(e,"data",this.ondata.bind(this)),jt(e,"error",this.onerror.bind(this)),jt(e,"close",this.onclose.bind(this)),jt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Cn(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Ml(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t)if(this.nsps[n].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(r=>{r?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",r)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const js={};function _n(s,e){typeof s=="object"&&(e=s,s=void 0),e=e||{};const t=ro(s,e.path||"/socket.io"),n=t.source,r=t.id,i=t.path,a=js[r]&&i in js[r].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let o;return l?o=new Qn(n,e):(js[r]||(js[r]=new Qn(n,e)),o=js[r]),t.query&&!e.query&&(e.query=t.queryKey),o.socket(t.path,e)}Object.assign(_n,{Manager:Qn,Socket:Ml,io:_n,connect:_n});function _o(s,e){if(e)return;if(!(localStorage.getItem("notificationsEnabled")==="true")){console.log("Notifications disabled in settings");return}if(Notification.permission!=="granted"){console.log("Notification permission not granted:",Notification.permission);return}if(!document.hidden){console.log("Page is visible, skipping notification");return}let n="",r="",i="/icon-192.png";switch(s.type){case"text":n=s.user,r=s.text;break;case"gif":n=s.user,r="ðŸŽ¬ Sent a GIF";break;case"file":n=s.user,r=`ðŸ“Ž Sent a file: ${s.fileName}`;break}const a=new Notification(n,{body:r,icon:i,badge:i,tag:`message-${s.id}`,requireInteraction:!1,silent:!1});a.onclick=()=>{window.focus(),a.close()},setTimeout(()=>{a.close()},5e3)}function fr(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Ts=fr();function Bl(s){Ts=s}var Ks={exec:()=>null};function Ie(s,e=""){let t=typeof s=="string"?s:s.source,n={replace:(r,i)=>{let a=typeof i=="string"?i:i.source;return a=a.replace(ft.caret,"$1"),t=t.replace(r,a),n},getRegex:()=>new RegExp(t,e)};return n}var bo=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),ft={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:s=>new RegExp(`^( {0,3}${s})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}#`),htmlBeginRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}<(?:[a-z].*>|!--)`,"i")},ko=/^(?:[ \t]*(?:\n|$))+/,yo=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,wo=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,tn=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Eo=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr=/(?:[*+-]|\d{1,9}[.)])/,Ul=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,jl=Ie(Ul).replace(/bull/g,hr).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Ao=Ie(Ul).replace(/bull/g,hr).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),dr=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,So=/^[^\n]+/,pr=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,To=Ie(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",pr).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Co=Ie(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,hr).getRegex(),Rn="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",gr=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Io=Ie("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",gr).replace("tag",Rn).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ql=Ie(dr).replace("hr",tn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Rn).getRegex(),Ro=Ie(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",ql).getRegex(),mr={blockquote:Ro,code:yo,def:To,fences:wo,heading:Eo,hr:tn,html:Io,lheading:jl,list:Co,newline:ko,paragraph:ql,table:Ks,text:So},Nr=Ie("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",tn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Rn).getRegex(),Do={...mr,lheading:Ao,table:Nr,paragraph:Ie(dr).replace("hr",tn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Nr).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Rn).getRegex()},Oo={...mr,html:Ie(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",gr).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ks,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ie(dr).replace("hr",tn).replace("heading",` *#{1,6} *[^
]`).replace("lheading",jl).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},No=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Po=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,zl=/^( {2,}|\\)\n(?!\s*$)/,Fo=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Dn=/[\p{P}\p{S}]/u,vr=/[\s\p{P}\p{S}]/u,Vl=/[^\s\p{P}\p{S}]/u,xo=Ie(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,vr).getRegex(),Hl=/(?!~)[\p{P}\p{S}]/u,Lo=/(?!~)[\s\p{P}\p{S}]/u,Mo=/(?:[^\s\p{P}\p{S}]|~)/u,Bo=Ie(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",bo?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Gl=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Uo=Ie(Gl,"u").replace(/punct/g,Dn).getRegex(),jo=Ie(Gl,"u").replace(/punct/g,Hl).getRegex(),$l="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",qo=Ie($l,"gu").replace(/notPunctSpace/g,Vl).replace(/punctSpace/g,vr).replace(/punct/g,Dn).getRegex(),zo=Ie($l,"gu").replace(/notPunctSpace/g,Mo).replace(/punctSpace/g,Lo).replace(/punct/g,Hl).getRegex(),Vo=Ie("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Vl).replace(/punctSpace/g,vr).replace(/punct/g,Dn).getRegex(),Ho=Ie(/\\(punct)/,"gu").replace(/punct/g,Dn).getRegex(),Go=Ie(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),$o=Ie(gr).replace("(?:-->|$)","-->").getRegex(),Wo=Ie("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",$o).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),kn=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Yo=Ie(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",kn).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Wl=Ie(/^!?\[(label)\]\[(ref)\]/).replace("label",kn).replace("ref",pr).getRegex(),Yl=Ie(/^!?\[(ref)\](?:\[\])?/).replace("ref",pr).getRegex(),Zo=Ie("reflink|nolink(?!\\()","g").replace("reflink",Wl).replace("nolink",Yl).getRegex(),Pr=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,_r={_backpedal:Ks,anyPunctuation:Ho,autolink:Go,blockSkip:Bo,br:zl,code:Po,del:Ks,emStrongLDelim:Uo,emStrongRDelimAst:qo,emStrongRDelimUnd:Vo,escape:No,link:Yo,nolink:Yl,punctuation:xo,reflink:Wl,reflinkSearch:Zo,tag:Wo,text:Fo,url:Ks},Xo={..._r,link:Ie(/^!?\[(label)\]\((.*?)\)/).replace("label",kn).getRegex(),reflink:Ie(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",kn).getRegex()},Jn={..._r,emStrongRDelimAst:zo,emStrongLDelim:jo,url:Ie(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",Pr).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Ie(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",Pr).getRegex()},Ko={...Jn,br:Ie(zl).replace("{2,}","*").getRegex(),text:Ie(Jn.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},on={normal:mr,gfm:Do,pedantic:Oo},qs={normal:_r,gfm:Jn,breaks:Ko,pedantic:Xo},Qo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Fr=s=>Qo[s];function ts(s,e){if(e){if(ft.escapeTest.test(s))return s.replace(ft.escapeReplace,Fr)}else if(ft.escapeTestNoEncode.test(s))return s.replace(ft.escapeReplaceNoEncode,Fr);return s}function xr(s){try{s=encodeURI(s).replace(ft.percentDecode,"%")}catch{return null}return s}function Lr(s,e){var i;let t=s.replace(ft.findPipe,(a,l,o)=>{let u=!1,f=l;for(;--f>=0&&o[f]==="\\";)u=!u;return u?"|":" |"}),n=t.split(ft.splitPipe),r=0;if(n[0].trim()||n.shift(),n.length>0&&!((i=n.at(-1))!=null&&i.trim())&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(ft.slashPipe,"|");return n}function zs(s,e,t){let n=s.length;if(n===0)return"";let r=0;for(;r<n&&s.charAt(n-r-1)===e;)r++;return s.slice(0,n-r)}function Jo(s,e){if(s.indexOf(e[1])===-1)return-1;let t=0;for(let n=0;n<s.length;n++)if(s[n]==="\\")n++;else if(s[n]===e[0])t++;else if(s[n]===e[1]&&(t--,t<0))return n;return t>0?-2:-1}function Mr(s,e,t,n,r){let i=e.href,a=e.title||null,l=s[1].replace(r.other.outputLinkReplace,"$1");n.state.inLink=!0;let o={type:s[0].charAt(0)==="!"?"image":"link",raw:t,href:i,title:a,text:l,tokens:n.inlineTokens(l)};return n.state.inLink=!1,o}function ec(s,e,t){let n=s.match(t.other.indentCodeCompensation);if(n===null)return e;let r=n[1];return e.split(`
`).map(i=>{let a=i.match(t.other.beginningSpace);if(a===null)return i;let[l]=a;return l.length>=r.length?i.slice(r.length):i}).join(`
`)}var yn=class{constructor(s){Ee(this,"options");Ee(this,"rules");Ee(this,"lexer");this.options=s||Ts}space(s){let e=this.rules.block.newline.exec(s);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(s){let e=this.rules.block.code.exec(s);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:zs(t,`
`)}}}fences(s){let e=this.rules.block.fences.exec(s);if(e){let t=e[0],n=ec(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:n}}}heading(s){let e=this.rules.block.heading.exec(s);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let n=zs(t,"#");(this.options.pedantic||!n||this.rules.other.endingSpaceChar.test(n))&&(t=n.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(s){let e=this.rules.block.hr.exec(s);if(e)return{type:"hr",raw:zs(e[0],`
`)}}blockquote(s){let e=this.rules.block.blockquote.exec(s);if(e){let t=zs(e[0],`
`).split(`
`),n="",r="",i=[];for(;t.length>0;){let a=!1,l=[],o;for(o=0;o<t.length;o++)if(this.rules.other.blockquoteStart.test(t[o]))l.push(t[o]),a=!0;else if(!a)l.push(t[o]);else break;t=t.slice(o);let u=l.join(`
`),f=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}
${u}`:u,r=r?`${r}
${f}`:f;let p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(f,i,!0),this.lexer.state.top=p,t.length===0)break;let d=i.at(-1);if((d==null?void 0:d.type)==="code")break;if((d==null?void 0:d.type)==="blockquote"){let m=d,g=m.raw+`
`+t.join(`
`),v=this.blockquote(g);i[i.length-1]=v,n=n.substring(0,n.length-m.raw.length)+v.raw,r=r.substring(0,r.length-m.text.length)+v.text;break}else if((d==null?void 0:d.type)==="list"){let m=d,g=m.raw+`
`+t.join(`
`),v=this.list(g);i[i.length-1]=v,n=n.substring(0,n.length-d.raw.length)+v.raw,r=r.substring(0,r.length-m.raw.length)+v.raw,t=g.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:n,tokens:i,text:r}}}list(s){var t,n;let e=this.rules.block.list.exec(s);if(e){let r=e[1].trim(),i=r.length>1,a={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");let l=this.rules.other.listItemRegex(r),o=!1;for(;s;){let f=!1,p="",d="";if(!(e=l.exec(s))||this.rules.block.hr.test(s))break;p=e[0],s=s.substring(p.length);let m=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,R=>" ".repeat(3*R.length)),g=s.split(`
`,1)[0],v=!m.trim(),A=0;if(this.options.pedantic?(A=2,d=m.trimStart()):v?A=e[1].length+1:(A=e[2].search(this.rules.other.nonSpaceChar),A=A>4?1:A,d=m.slice(A),A+=e[1].length),v&&this.rules.other.blankLine.test(g)&&(p+=g+`
`,s=s.substring(g.length+1),f=!0),!f){let R=this.rules.other.nextBulletRegex(A),y=this.rules.other.hrRegex(A),E=this.rules.other.fencesBeginRegex(A),w=this.rules.other.headingBeginRegex(A),T=this.rules.other.htmlBeginRegex(A);for(;s;){let C=s.split(`
`,1)[0],S;if(g=C,this.options.pedantic?(g=g.replace(this.rules.other.listReplaceNesting,"  "),S=g):S=g.replace(this.rules.other.tabCharGlobal,"    "),E.test(g)||w.test(g)||T.test(g)||R.test(g)||y.test(g))break;if(S.search(this.rules.other.nonSpaceChar)>=A||!g.trim())d+=`
`+S.slice(A);else{if(v||m.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||E.test(m)||w.test(m)||y.test(m))break;d+=`
`+g}!v&&!g.trim()&&(v=!0),p+=C+`
`,s=s.substring(C.length+1),m=S.slice(A)}}a.loose||(o?a.loose=!0:this.rules.other.doubleBlankLine.test(p)&&(o=!0)),a.items.push({type:"list_item",raw:p,task:!!this.options.gfm&&this.rules.other.listIsTask.test(d),loose:!1,text:d,tokens:[]}),a.raw+=p}let u=a.items.at(-1);if(u)u.raw=u.raw.trimEnd(),u.text=u.text.trimEnd();else return;a.raw=a.raw.trimEnd();for(let f of a.items){if(this.lexer.state.top=!1,f.tokens=this.lexer.blockTokens(f.text,[]),f.task){if(f.text=f.text.replace(this.rules.other.listReplaceTask,""),((t=f.tokens[0])==null?void 0:t.type)==="text"||((n=f.tokens[0])==null?void 0:n.type)==="paragraph"){f.tokens[0].raw=f.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),f.tokens[0].text=f.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let d=this.lexer.inlineQueue.length-1;d>=0;d--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[d].src)){this.lexer.inlineQueue[d].src=this.lexer.inlineQueue[d].src.replace(this.rules.other.listReplaceTask,"");break}}let p=this.rules.other.listTaskCheckbox.exec(f.raw);if(p){let d={type:"checkbox",raw:p[0]+" ",checked:p[0]!=="[ ]"};f.checked=d.checked,a.loose?f.tokens[0]&&["paragraph","text"].includes(f.tokens[0].type)&&"tokens"in f.tokens[0]&&f.tokens[0].tokens?(f.tokens[0].raw=d.raw+f.tokens[0].raw,f.tokens[0].text=d.raw+f.tokens[0].text,f.tokens[0].tokens.unshift(d)):f.tokens.unshift({type:"paragraph",raw:d.raw,text:d.raw,tokens:[d]}):f.tokens.unshift(d)}}if(!a.loose){let p=f.tokens.filter(m=>m.type==="space"),d=p.length>0&&p.some(m=>this.rules.other.anyLine.test(m.raw));a.loose=d}}if(a.loose)for(let f of a.items){f.loose=!0;for(let p of f.tokens)p.type==="text"&&(p.type="paragraph")}return a}}html(s){let e=this.rules.block.html.exec(s);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(s){let e=this.rules.block.def.exec(s);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:n,title:r}}}table(s){var a;let e=this.rules.block.table.exec(s);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let t=Lr(e[1]),n=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=(a=e[3])!=null&&a.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===n.length){for(let l of n)this.rules.other.tableAlignRight.test(l)?i.align.push("right"):this.rules.other.tableAlignCenter.test(l)?i.align.push("center"):this.rules.other.tableAlignLeft.test(l)?i.align.push("left"):i.align.push(null);for(let l=0;l<t.length;l++)i.header.push({text:t[l],tokens:this.lexer.inline(t[l]),header:!0,align:i.align[l]});for(let l of r)i.rows.push(Lr(l,i.header.length).map((o,u)=>({text:o,tokens:this.lexer.inline(o),header:!1,align:i.align[u]})));return i}}lheading(s){let e=this.rules.block.lheading.exec(s);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(s){let e=this.rules.block.paragraph.exec(s);if(e){let t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(s){let e=this.rules.block.text.exec(s);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(s){let e=this.rules.inline.escape.exec(s);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(s){let e=this.rules.inline.tag.exec(s);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(s){let e=this.rules.inline.link.exec(s);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let i=zs(t.slice(0,-1),"\\");if((t.length-i.length)%2===0)return}else{let i=Jo(e[2],"()");if(i===-2)return;if(i>-1){let a=(e[0].indexOf("!")===0?5:4)+e[1].length+i;e[2]=e[2].substring(0,i),e[0]=e[0].substring(0,a).trim(),e[3]=""}}let n=e[2],r="";if(this.options.pedantic){let i=this.rules.other.pedanticHrefTitle.exec(n);i&&(n=i[1],r=i[3])}else r=e[3]?e[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?n=n.slice(1):n=n.slice(1,-1)),Mr(e,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(s,e){let t;if((t=this.rules.inline.reflink.exec(s))||(t=this.rules.inline.nolink.exec(s))){let n=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=e[n.toLowerCase()];if(!r){let i=t[0].charAt(0);return{type:"text",raw:i,text:i}}return Mr(t,r,t[0],this.lexer,this.rules)}}emStrong(s,e,t=""){let n=this.rules.inline.emStrongLDelim.exec(s);if(!(!n||n[3]&&t.match(this.rules.other.unicodeAlphaNumeric))&&(!(n[1]||n[2])||!t||this.rules.inline.punctuation.exec(t))){let r=[...n[0]].length-1,i,a,l=r,o=0,u=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,e=e.slice(-1*s.length+r);(n=u.exec(e))!=null;){if(i=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!i)continue;if(a=[...i].length,n[3]||n[4]){l+=a;continue}else if((n[5]||n[6])&&r%3&&!((r+a)%3)){o+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+o);let f=[...n[0]][0].length,p=s.slice(0,r+n.index+f+a);if(Math.min(r,a)%2){let m=p.slice(1,-1);return{type:"em",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}let d=p.slice(2,-2);return{type:"strong",raw:p,text:d,tokens:this.lexer.inlineTokens(d)}}}}codespan(s){let e=this.rules.inline.code.exec(s);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),n=this.rules.other.nonSpaceChar.test(t),r=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return n&&r&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(s){let e=this.rules.inline.br.exec(s);if(e)return{type:"br",raw:e[0]}}del(s){let e=this.rules.inline.del.exec(s);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(s){let e=this.rules.inline.autolink.exec(s);if(e){let t,n;return e[2]==="@"?(t=e[1],n="mailto:"+t):(t=e[1],n=t),{type:"link",raw:e[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}url(s){var t;let e;if(e=this.rules.inline.url.exec(s)){let n,r;if(e[2]==="@")n=e[0],r="mailto:"+n;else{let i;do i=e[0],e[0]=((t=this.rules.inline._backpedal.exec(e[0]))==null?void 0:t[0])??"";while(i!==e[0]);n=e[0],e[1]==="www."?r="http://"+e[0]:r=e[0]}return{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(s){let e=this.rules.inline.text.exec(s);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},zt=class er{constructor(e){Ee(this,"tokens");Ee(this,"options");Ee(this,"state");Ee(this,"inlineQueue");Ee(this,"tokenizer");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ts,this.options.tokenizer=this.options.tokenizer||new yn,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:ft,block:on.normal,inline:qs.normal};this.options.pedantic?(t.block=on.pedantic,t.inline=qs.pedantic):this.options.gfm&&(t.block=on.gfm,this.options.breaks?t.inline=qs.breaks:t.inline=qs.gfm),this.tokenizer.rules=t}static get rules(){return{block:on,inline:qs}}static lex(e,t){return new er(t).lex(e)}static lexInline(e,t){return new er(t).inlineTokens(e)}lex(e){e=e.replace(ft.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){var r,i,a;for(this.options.pedantic&&(e=e.replace(ft.tabCharGlobal,"    ").replace(ft.spaceLine,""));e;){let l;if((i=(r=this.options.extensions)==null?void 0:r.block)!=null&&i.some(u=>(l=u.call({lexer:this},e,t))?(e=e.substring(l.raw.length),t.push(l),!0):!1))continue;if(l=this.tokenizer.space(e)){e=e.substring(l.raw.length);let u=t.at(-1);l.raw.length===1&&u!==void 0?u.raw+=`
`:t.push(l);continue}if(l=this.tokenizer.code(e)){e=e.substring(l.raw.length);let u=t.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+l.raw,u.text+=`
`+l.text,this.inlineQueue.at(-1).src=u.text):t.push(l);continue}if(l=this.tokenizer.fences(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.heading(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.hr(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.blockquote(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.list(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.html(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.def(e)){e=e.substring(l.raw.length);let u=t.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+l.raw,u.text+=`
`+l.raw,this.inlineQueue.at(-1).src=u.text):this.tokens.links[l.tag]||(this.tokens.links[l.tag]={href:l.href,title:l.title},t.push(l));continue}if(l=this.tokenizer.table(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.lheading(e)){e=e.substring(l.raw.length),t.push(l);continue}let o=e;if((a=this.options.extensions)!=null&&a.startBlock){let u=1/0,f=e.slice(1),p;this.options.extensions.startBlock.forEach(d=>{p=d.call({lexer:this},f),typeof p=="number"&&p>=0&&(u=Math.min(u,p))}),u<1/0&&u>=0&&(o=e.substring(0,u+1))}if(this.state.top&&(l=this.tokenizer.paragraph(o))){let u=t.at(-1);n&&(u==null?void 0:u.type)==="paragraph"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+l.raw,u.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):t.push(l),n=o.length!==e.length,e=e.substring(l.raw.length);continue}if(l=this.tokenizer.text(e)){e=e.substring(l.raw.length);let u=t.at(-1);(u==null?void 0:u.type)==="text"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+l.raw,u.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):t.push(l);continue}if(e){let u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var o,u,f,p,d;let n=e,r=null;if(this.tokens.links){let m=Object.keys(this.tokens.links);if(m.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)m.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,r.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let i;for(;(r=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)i=r[2]?r[2].length:0,n=n.slice(0,r.index+i)+"["+"a".repeat(r[0].length-i-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);n=((u=(o=this.options.hooks)==null?void 0:o.emStrongMask)==null?void 0:u.call({lexer:this},n))??n;let a=!1,l="";for(;e;){a||(l=""),a=!1;let m;if((p=(f=this.options.extensions)==null?void 0:f.inline)!=null&&p.some(v=>(m=v.call({lexer:this},e,t))?(e=e.substring(m.raw.length),t.push(m),!0):!1))continue;if(m=this.tokenizer.escape(e)){e=e.substring(m.raw.length),t.push(m);continue}if(m=this.tokenizer.tag(e)){e=e.substring(m.raw.length),t.push(m);continue}if(m=this.tokenizer.link(e)){e=e.substring(m.raw.length),t.push(m);continue}if(m=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(m.raw.length);let v=t.at(-1);m.type==="text"&&(v==null?void 0:v.type)==="text"?(v.raw+=m.raw,v.text+=m.text):t.push(m);continue}if(m=this.tokenizer.emStrong(e,n,l)){e=e.substring(m.raw.length),t.push(m);continue}if(m=this.tokenizer.codespan(e)){e=e.substring(m.raw.length),t.push(m);continue}if(m=this.tokenizer.br(e)){e=e.substring(m.raw.length),t.push(m);continue}if(m=this.tokenizer.del(e)){e=e.substring(m.raw.length),t.push(m);continue}if(m=this.tokenizer.autolink(e)){e=e.substring(m.raw.length),t.push(m);continue}if(!this.state.inLink&&(m=this.tokenizer.url(e))){e=e.substring(m.raw.length),t.push(m);continue}let g=e;if((d=this.options.extensions)!=null&&d.startInline){let v=1/0,A=e.slice(1),R;this.options.extensions.startInline.forEach(y=>{R=y.call({lexer:this},A),typeof R=="number"&&R>=0&&(v=Math.min(v,R))}),v<1/0&&v>=0&&(g=e.substring(0,v+1))}if(m=this.tokenizer.inlineText(g)){e=e.substring(m.raw.length),m.raw.slice(-1)!=="_"&&(l=m.raw.slice(-1)),a=!0;let v=t.at(-1);(v==null?void 0:v.type)==="text"?(v.raw+=m.raw,v.text+=m.text):t.push(m);continue}if(e){let v="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(v);break}else throw new Error(v)}}return t}},wn=class{constructor(s){Ee(this,"options");Ee(this,"parser");this.options=s||Ts}space(s){return""}code({text:s,lang:e,escaped:t}){var i;let n=(i=(e||"").match(ft.notSpaceStart))==null?void 0:i[0],r=s.replace(ft.endingNewline,"")+`
`;return n?'<pre><code class="language-'+ts(n)+'">'+(t?r:ts(r,!0))+`</code></pre>
`:"<pre><code>"+(t?r:ts(r,!0))+`</code></pre>
`}blockquote({tokens:s}){return`<blockquote>
${this.parser.parse(s)}</blockquote>
`}html({text:s}){return s}def(s){return""}heading({tokens:s,depth:e}){return`<h${e}>${this.parser.parseInline(s)}</h${e}>
`}hr(s){return`<hr>
`}list(s){let e=s.ordered,t=s.start,n="";for(let a=0;a<s.items.length;a++){let l=s.items[a];n+=this.listitem(l)}let r=e?"ol":"ul",i=e&&t!==1?' start="'+t+'"':"";return"<"+r+i+`>
`+n+"</"+r+`>
`}listitem(s){return`<li>${this.parser.parse(s.tokens)}</li>
`}checkbox({checked:s}){return"<input "+(s?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:s}){return`<p>${this.parser.parseInline(s)}</p>
`}table(s){let e="",t="";for(let r=0;r<s.header.length;r++)t+=this.tablecell(s.header[r]);e+=this.tablerow({text:t});let n="";for(let r=0;r<s.rows.length;r++){let i=s.rows[r];t="";for(let a=0;a<i.length;a++)t+=this.tablecell(i[a]);n+=this.tablerow({text:t})}return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+n+`</table>
`}tablerow({text:s}){return`<tr>
${s}</tr>
`}tablecell(s){let e=this.parser.parseInline(s.tokens),t=s.header?"th":"td";return(s.align?`<${t} align="${s.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:s}){return`<strong>${this.parser.parseInline(s)}</strong>`}em({tokens:s}){return`<em>${this.parser.parseInline(s)}</em>`}codespan({text:s}){return`<code>${ts(s,!0)}</code>`}br(s){return"<br>"}del({tokens:s}){return`<del>${this.parser.parseInline(s)}</del>`}link({href:s,title:e,tokens:t}){let n=this.parser.parseInline(t),r=xr(s);if(r===null)return n;s=r;let i='<a href="'+s+'"';return e&&(i+=' title="'+ts(e)+'"'),i+=">"+n+"</a>",i}image({href:s,title:e,text:t,tokens:n}){n&&(t=this.parser.parseInline(n,this.parser.textRenderer));let r=xr(s);if(r===null)return ts(t);s=r;let i=`<img src="${s}" alt="${t}"`;return e&&(i+=` title="${ts(e)}"`),i+=">",i}text(s){return"tokens"in s&&s.tokens?this.parser.parseInline(s.tokens):"escaped"in s&&s.escaped?s.text:ts(s.text)}},br=class{strong({text:s}){return s}em({text:s}){return s}codespan({text:s}){return s}del({text:s}){return s}html({text:s}){return s}text({text:s}){return s}link({text:s}){return""+s}image({text:s}){return""+s}br(){return""}checkbox({raw:s}){return s}},Vt=class tr{constructor(e){Ee(this,"options");Ee(this,"renderer");Ee(this,"textRenderer");this.options=e||Ts,this.options.renderer=this.options.renderer||new wn,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new br}static parse(e,t){return new tr(t).parse(e)}static parseInline(e,t){return new tr(t).parseInline(e)}parse(e){var n,r;let t="";for(let i=0;i<e.length;i++){let a=e[i];if((r=(n=this.options.extensions)==null?void 0:n.renderers)!=null&&r[a.type]){let o=a,u=this.options.extensions.renderers[o.type].call({parser:this},o);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(o.type)){t+=u||"";continue}}let l=a;switch(l.type){case"space":{t+=this.renderer.space(l);break}case"hr":{t+=this.renderer.hr(l);break}case"heading":{t+=this.renderer.heading(l);break}case"code":{t+=this.renderer.code(l);break}case"table":{t+=this.renderer.table(l);break}case"blockquote":{t+=this.renderer.blockquote(l);break}case"list":{t+=this.renderer.list(l);break}case"checkbox":{t+=this.renderer.checkbox(l);break}case"html":{t+=this.renderer.html(l);break}case"def":{t+=this.renderer.def(l);break}case"paragraph":{t+=this.renderer.paragraph(l);break}case"text":{t+=this.renderer.text(l);break}default:{let o='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return t}parseInline(e,t=this.renderer){var r,i;let n="";for(let a=0;a<e.length;a++){let l=e[a];if((i=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&i[l.type]){let u=this.options.extensions.renderers[l.type].call({parser:this},l);if(u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(l.type)){n+=u||"";continue}}let o=l;switch(o.type){case"escape":{n+=t.text(o);break}case"html":{n+=t.html(o);break}case"link":{n+=t.link(o);break}case"image":{n+=t.image(o);break}case"checkbox":{n+=t.checkbox(o);break}case"strong":{n+=t.strong(o);break}case"em":{n+=t.em(o);break}case"codespan":{n+=t.codespan(o);break}case"br":{n+=t.br(o);break}case"del":{n+=t.del(o);break}case"text":{n+=t.text(o);break}default:{let u='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return n}},pn,Zs=(pn=class{constructor(s){Ee(this,"options");Ee(this,"block");this.options=s||Ts}preprocess(s){return s}postprocess(s){return s}processAllTokens(s){return s}emStrongMask(s){return s}provideLexer(){return this.block?zt.lex:zt.lexInline}provideParser(){return this.block?Vt.parse:Vt.parseInline}},Ee(pn,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),Ee(pn,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),pn),tc=class{constructor(...s){Ee(this,"defaults",fr());Ee(this,"options",this.setOptions);Ee(this,"parse",this.parseMarkdown(!0));Ee(this,"parseInline",this.parseMarkdown(!1));Ee(this,"Parser",Vt);Ee(this,"Renderer",wn);Ee(this,"TextRenderer",br);Ee(this,"Lexer",zt);Ee(this,"Tokenizer",yn);Ee(this,"Hooks",Zs);this.use(...s)}walkTokens(s,e){var n,r;let t=[];for(let i of s)switch(t=t.concat(e.call(this,i)),i.type){case"table":{let a=i;for(let l of a.header)t=t.concat(this.walkTokens(l.tokens,e));for(let l of a.rows)for(let o of l)t=t.concat(this.walkTokens(o.tokens,e));break}case"list":{let a=i;t=t.concat(this.walkTokens(a.items,e));break}default:{let a=i;(r=(n=this.defaults.extensions)==null?void 0:n.childTokens)!=null&&r[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{let o=a[l].flat(1/0);t=t.concat(this.walkTokens(o,e))}):a.tokens&&(t=t.concat(this.walkTokens(a.tokens,e)))}}return t}use(...s){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return s.forEach(t=>{let n={...t};if(n.async=this.defaults.async||n.async||!1,t.extensions&&(t.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){let i=e.renderers[r.name];i?e.renderers[r.name]=function(...a){let l=r.renderer.apply(this,a);return l===!1&&(l=i.apply(this,a)),l}:e.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let i=e[r.level];i?i.unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&(r.level==="block"?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:r.level==="inline"&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),n.extensions=e),t.renderer){let r=this.defaults.renderer||new wn(this.defaults);for(let i in t.renderer){if(!(i in r))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;let a=i,l=t.renderer[a],o=r[a];r[a]=(...u)=>{let f=l.apply(r,u);return f===!1&&(f=o.apply(r,u)),f||""}}n.renderer=r}if(t.tokenizer){let r=this.defaults.tokenizer||new yn(this.defaults);for(let i in t.tokenizer){if(!(i in r))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;let a=i,l=t.tokenizer[a],o=r[a];r[a]=(...u)=>{let f=l.apply(r,u);return f===!1&&(f=o.apply(r,u)),f}}n.tokenizer=r}if(t.hooks){let r=this.defaults.hooks||new Zs;for(let i in t.hooks){if(!(i in r))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;let a=i,l=t.hooks[a],o=r[a];Zs.passThroughHooks.has(i)?r[a]=u=>{if(this.defaults.async&&Zs.passThroughHooksRespectAsync.has(i))return(async()=>{let p=await l.call(r,u);return o.call(r,p)})();let f=l.call(r,u);return o.call(r,f)}:r[a]=(...u)=>{if(this.defaults.async)return(async()=>{let p=await l.apply(r,u);return p===!1&&(p=await o.apply(r,u)),p})();let f=l.apply(r,u);return f===!1&&(f=o.apply(r,u)),f}}n.hooks=r}if(t.walkTokens){let r=this.defaults.walkTokens,i=t.walkTokens;n.walkTokens=function(a){let l=[];return l.push(i.call(this,a)),r&&(l=l.concat(r.call(this,a))),l}}this.defaults={...this.defaults,...n}}),this}setOptions(s){return this.defaults={...this.defaults,...s},this}lexer(s,e){return zt.lex(s,e??this.defaults)}parser(s,e){return Vt.parse(s,e??this.defaults)}parseMarkdown(s){return(e,t)=>{let n={...t},r={...this.defaults,...n},i=this.onError(!!r.silent,!!r.async);if(this.defaults.async===!0&&n.async===!1)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(r.hooks&&(r.hooks.options=r,r.hooks.block=s),r.async)return(async()=>{let a=r.hooks?await r.hooks.preprocess(e):e,l=await(r.hooks?await r.hooks.provideLexer():s?zt.lex:zt.lexInline)(a,r),o=r.hooks?await r.hooks.processAllTokens(l):l;r.walkTokens&&await Promise.all(this.walkTokens(o,r.walkTokens));let u=await(r.hooks?await r.hooks.provideParser():s?Vt.parse:Vt.parseInline)(o,r);return r.hooks?await r.hooks.postprocess(u):u})().catch(i);try{r.hooks&&(e=r.hooks.preprocess(e));let a=(r.hooks?r.hooks.provideLexer():s?zt.lex:zt.lexInline)(e,r);r.hooks&&(a=r.hooks.processAllTokens(a)),r.walkTokens&&this.walkTokens(a,r.walkTokens);let l=(r.hooks?r.hooks.provideParser():s?Vt.parse:Vt.parseInline)(a,r);return r.hooks&&(l=r.hooks.postprocess(l)),l}catch(a){return i(a)}}}onError(s,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,s){let n="<p>An error occurred:</p><pre>"+ts(t.message+"",!0)+"</pre>";return e?Promise.resolve(n):n}if(e)return Promise.reject(t);throw t}}},ks=new tc;function De(s,e){return ks.parse(s,e)}De.options=De.setOptions=function(s){return ks.setOptions(s),De.defaults=ks.defaults,Bl(De.defaults),De};De.getDefaults=fr;De.defaults=Ts;De.use=function(...s){return ks.use(...s),De.defaults=ks.defaults,Bl(De.defaults),De};De.walkTokens=function(s,e){return ks.walkTokens(s,e)};De.parseInline=ks.parseInline;De.Parser=Vt;De.parser=Vt.parse;De.Renderer=wn;De.TextRenderer=br;De.Lexer=zt;De.lexer=zt.lex;De.Tokenizer=yn;De.Hooks=Zs;De.parse=De;De.options;De.setOptions;De.use;De.walkTokens;De.parseInline;Vt.parse;zt.lex;var Br=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sc(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Zl={exports:{}};(function(s){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var t=function(n){var r=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,a={},l={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function y(E){return E instanceof o?new o(E.type,y(E.content),E.alias):Array.isArray(E)?E.map(y):E.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(y){return Object.prototype.toString.call(y).slice(8,-1)},objId:function(y){return y.__id||Object.defineProperty(y,"__id",{value:++i}),y.__id},clone:function y(E,w){w=w||{};var T,C;switch(l.util.type(E)){case"Object":if(C=l.util.objId(E),w[C])return w[C];T={},w[C]=T;for(var S in E)E.hasOwnProperty(S)&&(T[S]=y(E[S],w));return T;case"Array":return C=l.util.objId(E),w[C]?w[C]:(T=[],w[C]=T,E.forEach(function(F,N){T[N]=y(F,w)}),T);default:return E}},getLanguage:function(y){for(;y;){var E=r.exec(y.className);if(E)return E[1].toLowerCase();y=y.parentElement}return"none"},setLanguage:function(y,E){y.className=y.className.replace(RegExp(r,"gi"),""),y.classList.add("language-"+E)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(T){var y=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(T.stack)||[])[1];if(y){var E=document.getElementsByTagName("script");for(var w in E)if(E[w].src==y)return E[w]}return null}},isActive:function(y,E,w){for(var T="no-"+E;y;){var C=y.classList;if(C.contains(E))return!0;if(C.contains(T))return!1;y=y.parentElement}return!!w}},languages:{plain:a,plaintext:a,text:a,txt:a,extend:function(y,E){var w=l.util.clone(l.languages[y]);for(var T in E)w[T]=E[T];return w},insertBefore:function(y,E,w,T){T=T||l.languages;var C=T[y],S={};for(var F in C)if(C.hasOwnProperty(F)){if(F==E)for(var N in w)w.hasOwnProperty(N)&&(S[N]=w[N]);w.hasOwnProperty(F)||(S[F]=C[F])}var O=T[y];return T[y]=S,l.languages.DFS(l.languages,function(I,P){P===O&&I!=y&&(this[I]=S)}),S},DFS:function y(E,w,T,C){C=C||{};var S=l.util.objId;for(var F in E)if(E.hasOwnProperty(F)){w.call(E,F,E[F],T||F);var N=E[F],O=l.util.type(N);O==="Object"&&!C[S(N)]?(C[S(N)]=!0,y(N,w,null,C)):O==="Array"&&!C[S(N)]&&(C[S(N)]=!0,y(N,w,F,C))}}},plugins:{},highlightAll:function(y,E){l.highlightAllUnder(document,y,E)},highlightAllUnder:function(y,E,w){var T={callback:w,container:y,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};l.hooks.run("before-highlightall",T),T.elements=Array.prototype.slice.apply(T.container.querySelectorAll(T.selector)),l.hooks.run("before-all-elements-highlight",T);for(var C=0,S;S=T.elements[C++];)l.highlightElement(S,E===!0,T.callback)},highlightElement:function(y,E,w){var T=l.util.getLanguage(y),C=l.languages[T];l.util.setLanguage(y,T);var S=y.parentElement;S&&S.nodeName.toLowerCase()==="pre"&&l.util.setLanguage(S,T);var F=y.textContent,N={element:y,language:T,grammar:C,code:F};function O(P){N.highlightedCode=P,l.hooks.run("before-insert",N),N.element.innerHTML=N.highlightedCode,l.hooks.run("after-highlight",N),l.hooks.run("complete",N),w&&w.call(N.element)}if(l.hooks.run("before-sanity-check",N),S=N.element.parentElement,S&&S.nodeName.toLowerCase()==="pre"&&!S.hasAttribute("tabindex")&&S.setAttribute("tabindex","0"),!N.code){l.hooks.run("complete",N),w&&w.call(N.element);return}if(l.hooks.run("before-highlight",N),!N.grammar){O(l.util.encode(N.code));return}if(E&&n.Worker){var I=new Worker(l.filename);I.onmessage=function(P){O(P.data)},I.postMessage(JSON.stringify({language:N.language,code:N.code,immediateClose:!0}))}else O(l.highlight(N.code,N.grammar,N.language))},highlight:function(y,E,w){var T={code:y,grammar:E,language:w};if(l.hooks.run("before-tokenize",T),!T.grammar)throw new Error('The language "'+T.language+'" has no grammar.');return T.tokens=l.tokenize(T.code,T.grammar),l.hooks.run("after-tokenize",T),o.stringify(l.util.encode(T.tokens),T.language)},tokenize:function(y,E){var w=E.rest;if(w){for(var T in w)E[T]=w[T];delete E.rest}var C=new p;return d(C,C.head,y),f(y,C,E,C.head,0),g(C)},hooks:{all:{},add:function(y,E){var w=l.hooks.all;w[y]=w[y]||[],w[y].push(E)},run:function(y,E){var w=l.hooks.all[y];if(!(!w||!w.length))for(var T=0,C;C=w[T++];)C(E)}},Token:o};n.Prism=l;function o(y,E,w,T){this.type=y,this.content=E,this.alias=w,this.length=(T||"").length|0}o.stringify=function y(E,w){if(typeof E=="string")return E;if(Array.isArray(E)){var T="";return E.forEach(function(O){T+=y(O,w)}),T}var C={type:E.type,content:y(E.content,w),tag:"span",classes:["token",E.type],attributes:{},language:w},S=E.alias;S&&(Array.isArray(S)?Array.prototype.push.apply(C.classes,S):C.classes.push(S)),l.hooks.run("wrap",C);var F="";for(var N in C.attributes)F+=" "+N+'="'+(C.attributes[N]||"").replace(/"/g,"&quot;")+'"';return"<"+C.tag+' class="'+C.classes.join(" ")+'"'+F+">"+C.content+"</"+C.tag+">"};function u(y,E,w,T){y.lastIndex=E;var C=y.exec(w);if(C&&T&&C[1]){var S=C[1].length;C.index+=S,C[0]=C[0].slice(S)}return C}function f(y,E,w,T,C,S){for(var F in w)if(!(!w.hasOwnProperty(F)||!w[F])){var N=w[F];N=Array.isArray(N)?N:[N];for(var O=0;O<N.length;++O){if(S&&S.cause==F+","+O)return;var I=N[O],P=I.inside,B=!!I.lookbehind,U=!!I.greedy,$=I.alias;if(U&&!I.pattern.global){var X=I.pattern.toString().match(/[imsuy]*$/)[0];I.pattern=RegExp(I.pattern.source,X+"g")}for(var Q=I.pattern||I,te=T.next,q=C;te!==E.tail&&!(S&&q>=S.reach);q+=te.value.length,te=te.next){var z=te.value;if(E.length>y.length)return;if(!(z instanceof o)){var W=1,Y;if(U){if(Y=u(Q,q,y,B),!Y||Y.index>=y.length)break;var ge=Y.index,ie=Y.index+Y[0].length,he=q;for(he+=te.value.length;ge>=he;)te=te.next,he+=te.value.length;if(he-=te.value.length,q=he,te.value instanceof o)continue;for(var re=te;re!==E.tail&&(he<ie||typeof re.value=="string");re=re.next)W++,he+=re.value.length;W--,z=y.slice(q,he),Y.index-=q}else if(Y=u(Q,0,z,B),!Y)continue;var ge=Y.index,de=Y[0],se=z.slice(0,ge),Z=z.slice(ge+de.length),ue=q+z.length;S&&ue>S.reach&&(S.reach=ue);var fe=te.prev;se&&(fe=d(E,fe,se),q+=se.length),m(E,fe,W);var me=new o(F,P?l.tokenize(de,P):de,$,de);if(te=d(E,fe,me),Z&&d(E,te,Z),W>1){var ce={cause:F+","+O,reach:ue};f(y,E,w,te.prev,q,ce),S&&ce.reach>S.reach&&(S.reach=ce.reach)}}}}}}function p(){var y={value:null,prev:null,next:null},E={value:null,prev:y,next:null};y.next=E,this.head=y,this.tail=E,this.length=0}function d(y,E,w){var T=E.next,C={value:w,prev:E,next:T};return E.next=C,T.prev=C,y.length++,C}function m(y,E,w){for(var T=E.next,C=0;C<w&&T!==y.tail;C++)T=T.next;E.next=T,T.prev=E,y.length-=C}function g(y){for(var E=[],w=y.head.next;w!==y.tail;)E.push(w.value),w=w.next;return E}if(!n.document)return n.addEventListener&&(l.disableWorkerMessageHandler||n.addEventListener("message",function(y){var E=JSON.parse(y.data),w=E.language,T=E.code,C=E.immediateClose;n.postMessage(l.highlight(T,l.languages[w],w)),C&&n.close()},!1)),l;var v=l.util.currentScript();v&&(l.filename=v.src,v.hasAttribute("data-manual")&&(l.manual=!0));function A(){l.manual||l.highlightAll()}if(!l.manual){var R=document.readyState;R==="loading"||R==="interactive"&&v&&v.defer?document.addEventListener("DOMContentLoaded",A):window.requestAnimationFrame?window.requestAnimationFrame(A):window.setTimeout(A,16)}return l}(e);s.exports&&(s.exports=t),typeof Br<"u"&&(Br.Prism=t),t.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.languages.markup.doctype.inside["internal-subset"].inside=t.languages.markup,t.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(r,i){var a={};a["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[i]},a.cdata=/^<!\[CDATA\[|\]\]>$/i;var l={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:a}};l["language-"+i]={pattern:/[\s\S]+/,inside:t.languages[i]};var o={};o[r]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return r}),"i"),lookbehind:!0,greedy:!0,inside:l},t.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(t.languages.markup.tag,"addAttribute",{value:function(n,r){t.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[r,"language-"+r],inside:t.languages[r]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.xml=t.languages.extend("markup",{}),t.languages.ssml=t.languages.xml,t.languages.atom=t.languages.xml,t.languages.rss=t.languages.xml,function(n){var r=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+r.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+r.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+r.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+r.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:r,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var i=n.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:t.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),t.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),t.languages.markup&&(t.languages.markup.tag.addInlined("script","javascript"),t.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),t.languages.js=t.languages.javascript,function(){if(typeof t>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loadingâ€¦",r=function(v,A){return"âœ– Error "+v+" while fetching file: "+A},i="âœ– Error: File does not exist or is empty",a={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},l="data-src-status",o="loading",u="loaded",f="failed",p="pre[data-src]:not(["+l+'="'+u+'"]):not(['+l+'="'+o+'"])';function d(v,A,R){var y=new XMLHttpRequest;y.open("GET",v,!0),y.onreadystatechange=function(){y.readyState==4&&(y.status<400&&y.responseText?A(y.responseText):y.status>=400?R(r(y.status,y.statusText)):R(i))},y.send(null)}function m(v){var A=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(v||"");if(A){var R=Number(A[1]),y=A[2],E=A[3];return y?E?[R,Number(E)]:[R,void 0]:[R,R]}}t.hooks.add("before-highlightall",function(v){v.selector+=", "+p}),t.hooks.add("before-sanity-check",function(v){var A=v.element;if(A.matches(p)){v.code="",A.setAttribute(l,o);var R=A.appendChild(document.createElement("CODE"));R.textContent=n;var y=A.getAttribute("data-src"),E=v.language;if(E==="none"){var w=(/\.(\w+)$/.exec(y)||[,"none"])[1];E=a[w]||w}t.util.setLanguage(R,E),t.util.setLanguage(A,E);var T=t.plugins.autoloader;T&&T.loadLanguages(E),d(y,function(C){A.setAttribute(l,u);var S=m(A.getAttribute("data-range"));if(S){var F=C.split(/\r\n?|\n/g),N=S[0],O=S[1]==null?F.length:S[1];N<0&&(N+=F.length),N=Math.max(0,Math.min(N-1,F.length)),O<0&&(O+=F.length),O=Math.max(0,Math.min(O,F.length)),C=F.slice(N,O).join(`
`),A.hasAttribute("data-start")||A.setAttribute("data-start",String(N+1))}R.textContent=C,t.highlightElement(R)},function(C){A.setAttribute(l,f),R.textContent=C})}}),t.plugins.fileHighlight={highlight:function(A){for(var R=(A||document).querySelectorAll(p),y=0,E;E=R[y++];)t.highlightElement(E)}};var g=!1;t.fileHighlight=function(){g||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),g=!0),t.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(Zl);var nc=Zl.exports;const Ln=sc(nc);/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:Xl,setPrototypeOf:Ur,isFrozen:rc,getPrototypeOf:ic,getOwnPropertyDescriptor:lc}=Object;let{freeze:mt,seal:xt,create:sr}=Object,{apply:nr,construct:rr}=typeof Reflect<"u"&&Reflect;mt||(mt=function(e){return e});xt||(xt=function(e){return e});nr||(nr=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return e.apply(t,r)});rr||(rr=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new e(...n)});const cn=vt(Array.prototype.forEach),ac=vt(Array.prototype.lastIndexOf),jr=vt(Array.prototype.pop),Vs=vt(Array.prototype.push),oc=vt(Array.prototype.splice),bn=vt(String.prototype.toLowerCase),Mn=vt(String.prototype.toString),Bn=vt(String.prototype.match),Hs=vt(String.prototype.replace),cc=vt(String.prototype.indexOf),uc=vt(String.prototype.trim),Bt=vt(Object.prototype.hasOwnProperty),ut=vt(RegExp.prototype.test),Gs=fc(TypeError);function vt(s){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return nr(s,e,n)}}function fc(s){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return rr(s,t)}}function be(s,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:bn;Ur&&Ur(s,null);let n=e.length;for(;n--;){let r=e[n];if(typeof r=="string"){const i=t(r);i!==r&&(rc(e)||(e[n]=i),r=i)}s[r]=!0}return s}function hc(s){for(let e=0;e<s.length;e++)Bt(s,e)||(s[e]=null);return s}function ss(s){const e=sr(null);for(const[t,n]of Xl(s))Bt(s,t)&&(Array.isArray(n)?e[t]=hc(n):n&&typeof n=="object"&&n.constructor===Object?e[t]=ss(n):e[t]=n);return e}function $s(s,e){for(;s!==null;){const n=lc(s,e);if(n){if(n.get)return vt(n.get);if(typeof n.value=="function")return vt(n.value)}s=ic(s)}function t(){return null}return t}const qr=mt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Un=mt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),jn=mt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),dc=mt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),qn=mt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),pc=mt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),zr=mt(["#text"]),Vr=mt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),zn=mt(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Hr=mt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),un=mt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),gc=xt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),mc=xt(/<%[\w\W]*|[\w\W]*%>/gm),vc=xt(/\$\{[\w\W]*/gm),_c=xt(/^data-[\-\w.\u00B7-\uFFFF]+$/),bc=xt(/^aria-[\-\w]+$/),Kl=xt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),kc=xt(/^(?:\w+script|data):/i),yc=xt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ql=xt(/^html$/i),wc=xt(/^[a-z][.\w]*(-[.\w]+)+$/i);var Gr=Object.freeze({__proto__:null,ARIA_ATTR:bc,ATTR_WHITESPACE:yc,CUSTOM_ELEMENT:wc,DATA_ATTR:_c,DOCTYPE_NAME:Ql,ERB_EXPR:mc,IS_ALLOWED_URI:Kl,IS_SCRIPT_OR_DATA:kc,MUSTACHE_EXPR:gc,TMPLIT_EXPR:vc});const Ws={element:1,text:3,progressingInstruction:7,comment:8,document:9},Ec=function(){return typeof window>"u"?null:window},Ac=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},$r=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Jl(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ec();const e=oe=>Jl(oe);if(e.version="3.3.0",e.removed=[],!s||!s.document||s.document.nodeType!==Ws.document||!s.Element)return e.isSupported=!1,e;let{document:t}=s;const n=t,r=n.currentScript,{DocumentFragment:i,HTMLTemplateElement:a,Node:l,Element:o,NodeFilter:u,NamedNodeMap:f=s.NamedNodeMap||s.MozNamedAttrMap,HTMLFormElement:p,DOMParser:d,trustedTypes:m}=s,g=o.prototype,v=$s(g,"cloneNode"),A=$s(g,"remove"),R=$s(g,"nextSibling"),y=$s(g,"childNodes"),E=$s(g,"parentNode");if(typeof a=="function"){const oe=t.createElement("template");oe.content&&oe.content.ownerDocument&&(t=oe.content.ownerDocument)}let w,T="";const{implementation:C,createNodeIterator:S,createDocumentFragment:F,getElementsByTagName:N}=t,{importNode:O}=n;let I=$r();e.isSupported=typeof Xl=="function"&&typeof E=="function"&&C&&C.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:P,ERB_EXPR:B,TMPLIT_EXPR:U,DATA_ATTR:$,ARIA_ATTR:X,IS_SCRIPT_OR_DATA:Q,ATTR_WHITESPACE:te,CUSTOM_ELEMENT:q}=Gr;let{IS_ALLOWED_URI:z}=Gr,W=null;const Y=be({},[...qr,...Un,...jn,...qn,...zr]);let ie=null;const he=be({},[...Vr,...zn,...Hr,...un]);let re=Object.seal(sr(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ge=null,de=null;const se=Object.seal(sr(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Z=!0,ue=!0,fe=!1,me=!0,ce=!1,ke=!0,Ae=!1,Se=!1,Ze=!1,Oe=!1,Pe=!1,Xe=!1,ee=!0,ve=!1;const He="user-content-";let Ge=!0,Ke=!1,yt={},Qe=null;const Ct=be({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ht=null;const Je=be({},["audio","video","img","source","image","track"]);let pe=null;const ye=be({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Dt="http://www.w3.org/1998/Math/MathML",Lt="http://www.w3.org/2000/svg",qe="http://www.w3.org/1999/xhtml";let Ot=qe,Nt=!1,It=null;const wt=be({},[Dt,Lt,qe],Mn);let Rt=be({},["mi","mo","mn","ms","mtext"]),et=be({},["annotation-xml"]);const Qt=be({},["title","style","font","a","script"]);let Be=null;const Gt=["application/xhtml+xml","text/html"],us="text/html";let _e=null,ze=null;const Cs=t.createElement("form"),fs=function(x){return x instanceof RegExp||x instanceof Function},lt=function(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ze&&ze===x)){if((!x||typeof x!="object")&&(x={}),x=ss(x),Be=Gt.indexOf(x.PARSER_MEDIA_TYPE)===-1?us:x.PARSER_MEDIA_TYPE,_e=Be==="application/xhtml+xml"?Mn:bn,W=Bt(x,"ALLOWED_TAGS")?be({},x.ALLOWED_TAGS,_e):Y,ie=Bt(x,"ALLOWED_ATTR")?be({},x.ALLOWED_ATTR,_e):he,It=Bt(x,"ALLOWED_NAMESPACES")?be({},x.ALLOWED_NAMESPACES,Mn):wt,pe=Bt(x,"ADD_URI_SAFE_ATTR")?be(ss(ye),x.ADD_URI_SAFE_ATTR,_e):ye,Ht=Bt(x,"ADD_DATA_URI_TAGS")?be(ss(Je),x.ADD_DATA_URI_TAGS,_e):Je,Qe=Bt(x,"FORBID_CONTENTS")?be({},x.FORBID_CONTENTS,_e):Ct,ge=Bt(x,"FORBID_TAGS")?be({},x.FORBID_TAGS,_e):ss({}),de=Bt(x,"FORBID_ATTR")?be({},x.FORBID_ATTR,_e):ss({}),yt=Bt(x,"USE_PROFILES")?x.USE_PROFILES:!1,Z=x.ALLOW_ARIA_ATTR!==!1,ue=x.ALLOW_DATA_ATTR!==!1,fe=x.ALLOW_UNKNOWN_PROTOCOLS||!1,me=x.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ce=x.SAFE_FOR_TEMPLATES||!1,ke=x.SAFE_FOR_XML!==!1,Ae=x.WHOLE_DOCUMENT||!1,Oe=x.RETURN_DOM||!1,Pe=x.RETURN_DOM_FRAGMENT||!1,Xe=x.RETURN_TRUSTED_TYPE||!1,Ze=x.FORCE_BODY||!1,ee=x.SANITIZE_DOM!==!1,ve=x.SANITIZE_NAMED_PROPS||!1,Ge=x.KEEP_CONTENT!==!1,Ke=x.IN_PLACE||!1,z=x.ALLOWED_URI_REGEXP||Kl,Ot=x.NAMESPACE||qe,Rt=x.MATHML_TEXT_INTEGRATION_POINTS||Rt,et=x.HTML_INTEGRATION_POINTS||et,re=x.CUSTOM_ELEMENT_HANDLING||{},x.CUSTOM_ELEMENT_HANDLING&&fs(x.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(re.tagNameCheck=x.CUSTOM_ELEMENT_HANDLING.tagNameCheck),x.CUSTOM_ELEMENT_HANDLING&&fs(x.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(re.attributeNameCheck=x.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),x.CUSTOM_ELEMENT_HANDLING&&typeof x.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(re.allowCustomizedBuiltInElements=x.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ce&&(ue=!1),Pe&&(Oe=!0),yt&&(W=be({},zr),ie=[],yt.html===!0&&(be(W,qr),be(ie,Vr)),yt.svg===!0&&(be(W,Un),be(ie,zn),be(ie,un)),yt.svgFilters===!0&&(be(W,jn),be(ie,zn),be(ie,un)),yt.mathMl===!0&&(be(W,qn),be(ie,Hr),be(ie,un))),x.ADD_TAGS&&(typeof x.ADD_TAGS=="function"?se.tagCheck=x.ADD_TAGS:(W===Y&&(W=ss(W)),be(W,x.ADD_TAGS,_e))),x.ADD_ATTR&&(typeof x.ADD_ATTR=="function"?se.attributeCheck=x.ADD_ATTR:(ie===he&&(ie=ss(ie)),be(ie,x.ADD_ATTR,_e))),x.ADD_URI_SAFE_ATTR&&be(pe,x.ADD_URI_SAFE_ATTR,_e),x.FORBID_CONTENTS&&(Qe===Ct&&(Qe=ss(Qe)),be(Qe,x.FORBID_CONTENTS,_e)),Ge&&(W["#text"]=!0),Ae&&be(W,["html","head","body"]),W.table&&(be(W,["tbody"]),delete ge.tbody),x.TRUSTED_TYPES_POLICY){if(typeof x.TRUSTED_TYPES_POLICY.createHTML!="function")throw Gs('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof x.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Gs('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=x.TRUSTED_TYPES_POLICY,T=w.createHTML("")}else w===void 0&&(w=Ac(m,r)),w!==null&&typeof T=="string"&&(T=w.createHTML(""));mt&&mt(x),ze=x}},Mt=be({},[...Un,...jn,...dc]),hs=be({},[...qn,...pc]),rn=function(x){let J=E(x);(!J||!J.tagName)&&(J={namespaceURI:Ot,tagName:"template"});const ae=bn(x.tagName),je=bn(J.tagName);return It[x.namespaceURI]?x.namespaceURI===Lt?J.namespaceURI===qe?ae==="svg":J.namespaceURI===Dt?ae==="svg"&&(je==="annotation-xml"||Rt[je]):!!Mt[ae]:x.namespaceURI===Dt?J.namespaceURI===qe?ae==="math":J.namespaceURI===Lt?ae==="math"&&et[je]:!!hs[ae]:x.namespaceURI===qe?J.namespaceURI===Lt&&!et[je]||J.namespaceURI===Dt&&!Rt[je]?!1:!hs[ae]&&(Qt[ae]||!Mt[ae]):!!(Be==="application/xhtml+xml"&&It[x.namespaceURI]):!1},ct=function(x){Vs(e.removed,{element:x});try{E(x).removeChild(x)}catch{A(x)}},$t=function(x,J){try{Vs(e.removed,{attribute:J.getAttributeNode(x),from:J})}catch{Vs(e.removed,{attribute:null,from:J})}if(J.removeAttribute(x),x==="is")if(Oe||Pe)try{ct(J)}catch{}else try{J.setAttribute(x,"")}catch{}},ds=function(x){let J=null,ae=null;if(Ze)x="<remove></remove>"+x;else{const We=Bn(x,/^[\r\n\t ]+/);ae=We&&We[0]}Be==="application/xhtml+xml"&&Ot===qe&&(x='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+x+"</body></html>");const je=w?w.createHTML(x):x;if(Ot===qe)try{J=new d().parseFromString(je,Be)}catch{}if(!J||!J.documentElement){J=C.createDocument(Ot,"template",null);try{J.documentElement.innerHTML=Nt?T:je}catch{}}const at=J.body||J.documentElement;return x&&ae&&at.insertBefore(t.createTextNode(ae),at.childNodes[0]||null),Ot===qe?N.call(J,Ae?"html":"body")[0]:Ae?J.documentElement:at},Bs=function(x){return S.call(x.ownerDocument||x,x,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},is=function(x){return x instanceof p&&(typeof x.nodeName!="string"||typeof x.textContent!="string"||typeof x.removeChild!="function"||!(x.attributes instanceof f)||typeof x.removeAttribute!="function"||typeof x.setAttribute!="function"||typeof x.namespaceURI!="string"||typeof x.insertBefore!="function"||typeof x.hasChildNodes!="function")},ps=function(x){return typeof l=="function"&&x instanceof l};function Pt(oe,x,J){cn(oe,ae=>{ae.call(e,x,J,ze)})}const gs=function(x){let J=null;if(Pt(I.beforeSanitizeElements,x,null),is(x))return ct(x),!0;const ae=_e(x.nodeName);if(Pt(I.uponSanitizeElement,x,{tagName:ae,allowedTags:W}),ke&&x.hasChildNodes()&&!ps(x.firstElementChild)&&ut(/<[/\w!]/g,x.innerHTML)&&ut(/<[/\w!]/g,x.textContent)||x.nodeType===Ws.progressingInstruction||ke&&x.nodeType===Ws.comment&&ut(/<[/\w]/g,x.data))return ct(x),!0;if(!(se.tagCheck instanceof Function&&se.tagCheck(ae))&&(!W[ae]||ge[ae])){if(!ge[ae]&&Us(ae)&&(re.tagNameCheck instanceof RegExp&&ut(re.tagNameCheck,ae)||re.tagNameCheck instanceof Function&&re.tagNameCheck(ae)))return!1;if(Ge&&!Qe[ae]){const je=E(x)||x.parentNode,at=y(x)||x.childNodes;if(at&&je){const We=at.length;for(let Et=We-1;Et>=0;--Et){const Jt=v(at[Et],!0);Jt.__removalCount=(x.__removalCount||0)+1,je.insertBefore(Jt,R(x))}}}return ct(x),!0}return x instanceof o&&!rn(x)||(ae==="noscript"||ae==="noembed"||ae==="noframes")&&ut(/<\/no(script|embed|frames)/i,x.innerHTML)?(ct(x),!0):(ce&&x.nodeType===Ws.text&&(J=x.textContent,cn([P,B,U],je=>{J=Hs(J,je," ")}),x.textContent!==J&&(Vs(e.removed,{element:x.cloneNode()}),x.textContent=J)),Pt(I.afterSanitizeElements,x,null),!1)},ms=function(x,J,ae){if(ee&&(J==="id"||J==="name")&&(ae in t||ae in Cs))return!1;if(!(ue&&!de[J]&&ut($,J))){if(!(Z&&ut(X,J))){if(!(se.attributeCheck instanceof Function&&se.attributeCheck(J,x))){if(!ie[J]||de[J]){if(!(Us(x)&&(re.tagNameCheck instanceof RegExp&&ut(re.tagNameCheck,x)||re.tagNameCheck instanceof Function&&re.tagNameCheck(x))&&(re.attributeNameCheck instanceof RegExp&&ut(re.attributeNameCheck,J)||re.attributeNameCheck instanceof Function&&re.attributeNameCheck(J,x))||J==="is"&&re.allowCustomizedBuiltInElements&&(re.tagNameCheck instanceof RegExp&&ut(re.tagNameCheck,ae)||re.tagNameCheck instanceof Function&&re.tagNameCheck(ae))))return!1}else if(!pe[J]){if(!ut(z,Hs(ae,te,""))){if(!((J==="src"||J==="xlink:href"||J==="href")&&x!=="script"&&cc(ae,"data:")===0&&Ht[x])){if(!(fe&&!ut(Q,Hs(ae,te,"")))){if(ae)return!1}}}}}}}return!0},Us=function(x){return x!=="annotation-xml"&&Bn(x,q)},vs=function(x){Pt(I.beforeSanitizeAttributes,x,null);const{attributes:J}=x;if(!J||is(x))return;const ae={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ie,forceKeepAttr:void 0};let je=J.length;for(;je--;){const at=J[je],{name:We,namespaceURI:Et,value:Jt}=at,Rs=_e(We),Nn=Jt;let nt=We==="value"?Nn:uc(Nn);if(ae.attrName=Rs,ae.attrValue=nt,ae.keepAttr=!0,ae.forceKeepAttr=void 0,Pt(I.uponSanitizeAttribute,x,ae),nt=ae.attrValue,ve&&(Rs==="id"||Rs==="name")&&($t(We,x),nt=He+nt),ke&&ut(/((--!?|])>)|<\/(style|title|textarea)/i,nt)){$t(We,x);continue}if(Rs==="attributename"&&Bn(nt,"href")){$t(We,x);continue}if(ae.forceKeepAttr)continue;if(!ae.keepAttr){$t(We,x);continue}if(!me&&ut(/\/>/i,nt)){$t(We,x);continue}ce&&cn([P,B,U],Sr=>{nt=Hs(nt,Sr," ")});const Ar=_e(x.nodeName);if(!ms(Ar,Rs,nt)){$t(We,x);continue}if(w&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!Et)switch(m.getAttributeType(Ar,Rs)){case"TrustedHTML":{nt=w.createHTML(nt);break}case"TrustedScriptURL":{nt=w.createScriptURL(nt);break}}if(nt!==Nn)try{Et?x.setAttributeNS(Et,We,nt):x.setAttribute(We,nt),is(x)?ct(x):jr(e.removed)}catch{$t(We,x)}}Pt(I.afterSanitizeAttributes,x,null)},Is=function oe(x){let J=null;const ae=Bs(x);for(Pt(I.beforeSanitizeShadowDOM,x,null);J=ae.nextNode();)Pt(I.uponSanitizeShadowNode,J,null),gs(J),vs(J),J.content instanceof i&&oe(J.content);Pt(I.afterSanitizeShadowDOM,x,null)};return e.sanitize=function(oe){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},J=null,ae=null,je=null,at=null;if(Nt=!oe,Nt&&(oe="<!-->"),typeof oe!="string"&&!ps(oe))if(typeof oe.toString=="function"){if(oe=oe.toString(),typeof oe!="string")throw Gs("dirty is not a string, aborting")}else throw Gs("toString is not a function");if(!e.isSupported)return oe;if(Se||lt(x),e.removed=[],typeof oe=="string"&&(Ke=!1),Ke){if(oe.nodeName){const Jt=_e(oe.nodeName);if(!W[Jt]||ge[Jt])throw Gs("root node is forbidden and cannot be sanitized in-place")}}else if(oe instanceof l)J=ds("<!---->"),ae=J.ownerDocument.importNode(oe,!0),ae.nodeType===Ws.element&&ae.nodeName==="BODY"||ae.nodeName==="HTML"?J=ae:J.appendChild(ae);else{if(!Oe&&!ce&&!Ae&&oe.indexOf("<")===-1)return w&&Xe?w.createHTML(oe):oe;if(J=ds(oe),!J)return Oe?null:Xe?T:""}J&&Ze&&ct(J.firstChild);const We=Bs(Ke?oe:J);for(;je=We.nextNode();)gs(je),vs(je),je.content instanceof i&&Is(je.content);if(Ke)return oe;if(Oe){if(Pe)for(at=F.call(J.ownerDocument);J.firstChild;)at.appendChild(J.firstChild);else at=J;return(ie.shadowroot||ie.shadowrootmode)&&(at=O.call(n,at,!0)),at}let Et=Ae?J.outerHTML:J.innerHTML;return Ae&&W["!doctype"]&&J.ownerDocument&&J.ownerDocument.doctype&&J.ownerDocument.doctype.name&&ut(Ql,J.ownerDocument.doctype.name)&&(Et="<!DOCTYPE "+J.ownerDocument.doctype.name+`>
`+Et),ce&&cn([P,B,U],Jt=>{Et=Hs(Et,Jt," ")}),w&&Xe?w.createHTML(Et):Et},e.setConfig=function(){let oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};lt(oe),Se=!0},e.clearConfig=function(){ze=null,Se=!1},e.isValidAttribute=function(oe,x,J){ze||lt({});const ae=_e(oe),je=_e(x);return ms(ae,je,J)},e.addHook=function(oe,x){typeof x=="function"&&Vs(I[oe],x)},e.removeHook=function(oe,x){if(x!==void 0){const J=ac(I[oe],x);return J===-1?void 0:oc(I[oe],J,1)[0]}return jr(I[oe])},e.removeHooks=function(oe){I[oe]=[]},e.removeAllHooks=function(){I=$r()},e}var Sc=Jl();Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;(function(s){s.languages.typescript=s.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),s.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete s.languages.typescript.parameter,delete s.languages.typescript["literal-property"];var e=s.languages.extend("typescript",{});delete e["class-name"],s.languages.typescript["class-name"].inside=e,s.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e}}}}),s.languages.ts=s.languages.typescript})(Prism);Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/};Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python;Prism.languages.py=Prism.languages.python;(function(s){var e=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,t=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,n={pattern:RegExp(/(^|[^\w.])/.source+t+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};s.languages.java=s.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[n,{pattern:RegExp(/(^|[^\w.])/.source+t+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:n.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+t+/[A-Z]\w*\b/.source),lookbehind:!0,inside:n.inside}],keyword:e,function:[s.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),s.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),s.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":n,keyword:e,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+t+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:n.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+t+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:n.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0,inside:{punctuation:/\./}}})})(Prism);Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}});Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete Prism.languages.c.boolean;(function(s){var e=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,t=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return e.source});s.languages.cpp=s.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:e,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),s.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return t})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),s.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:s.languages.cpp}}}}),s.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),s.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:s.languages.extend("cpp",{})}}),s.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},s.languages.cpp["base-clause"])})(Prism);(function(s){function e(q,z){return q.replace(/<<(\d+)>>/g,function(W,Y){return"(?:"+z[+Y]+")"})}function t(q,z,W){return RegExp(e(q,z),"")}function n(q,z){for(var W=0;W<z;W++)q=q.replace(/<<self>>/g,function(){return"(?:"+q+")"});return q.replace(/<<self>>/g,"[^\\s\\S]")}var r={type:"bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",typeDeclaration:"class enum interface record struct",contextual:"add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",other:"abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield"};function i(q){return"\\b(?:"+q.trim().replace(/ /g,"|")+")\\b"}var a=i(r.typeDeclaration),l=RegExp(i(r.type+" "+r.typeDeclaration+" "+r.contextual+" "+r.other)),o=i(r.typeDeclaration+" "+r.contextual+" "+r.other),u=i(r.type+" "+r.typeDeclaration+" "+r.other),f=n(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),p=n(/\((?:[^()]|<<self>>)*\)/.source,2),d=/@?\b[A-Za-z_]\w*\b/.source,m=e(/<<0>>(?:\s*<<1>>)?/.source,[d,f]),g=e(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[o,m]),v=/\[\s*(?:,\s*)*\]/.source,A=e(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[g,v]),R=e(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[f,p,v]),y=e(/\(<<0>>+(?:,<<0>>+)+\)/.source,[R]),E=e(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[y,g,v]),w={keyword:l,punctuation:/[<>()?,.:[\]]/},T=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,C=/"(?:\\.|[^\\"\r\n])*"/.source,S=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;s.languages.csharp=s.languages.extend("clike",{string:[{pattern:t(/(^|[^$\\])<<0>>/.source,[S]),lookbehind:!0,greedy:!0},{pattern:t(/(^|[^@$\\])<<0>>/.source,[C]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:t(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[g]),lookbehind:!0,inside:w},{pattern:t(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[d,E]),lookbehind:!0,inside:w},{pattern:t(/(\busing\s+)<<0>>(?=\s*=)/.source,[d]),lookbehind:!0},{pattern:t(/(\b<<0>>\s+)<<1>>/.source,[a,m]),lookbehind:!0,inside:w},{pattern:t(/(\bcatch\s*\(\s*)<<0>>/.source,[g]),lookbehind:!0,inside:w},{pattern:t(/(\bwhere\s+)<<0>>/.source,[d]),lookbehind:!0},{pattern:t(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[A]),lookbehind:!0,inside:w},{pattern:t(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[E,u,d]),inside:w}],keyword:l,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),s.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),s.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:t(/([(,]\s*)<<0>>(?=\s*:)/.source,[d]),lookbehind:!0,alias:"punctuation"}}),s.languages.insertBefore("csharp","class-name",{namespace:{pattern:t(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[d]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:t(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[p]),lookbehind:!0,alias:"class-name",inside:w},"return-type":{pattern:t(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[E,g]),inside:w,alias:"class-name"},"constructor-invocation":{pattern:t(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[E]),lookbehind:!0,inside:w,alias:"class-name"},"generic-method":{pattern:t(/<<0>>\s*<<1>>(?=\s*\()/.source,[d,f]),inside:{function:t(/^<<0>>/.source,[d]),generic:{pattern:RegExp(f),alias:"class-name",inside:w}}},"type-list":{pattern:t(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[a,m,d,E,l.source,p,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:t(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[m,p]),lookbehind:!0,greedy:!0,inside:s.languages.csharp},keyword:l,"class-name":{pattern:RegExp(E),greedy:!0,inside:w},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var F=C+"|"+T,N=e(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[F]),O=n(e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[N]),2),I=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,P=e(/<<0>>(?:\s*\(<<1>>*\))?/.source,[g,O]);s.languages.insertBefore("csharp","class-name",{attribute:{pattern:t(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[I,P]),lookbehind:!0,greedy:!0,inside:{target:{pattern:t(/^<<0>>(?=\s*:)/.source,[I]),alias:"keyword"},"attribute-arguments":{pattern:t(/\(<<0>>*\)/.source,[O]),inside:s.languages.csharp},"class-name":{pattern:RegExp(g),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var B=/:[^}\r\n]+/.source,U=n(e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[N]),2),$=e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[U,B]),X=n(e(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[F]),2),Q=e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[X,B]);function te(q,z){return{interpolation:{pattern:t(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[q]),lookbehind:!0,inside:{"format-string":{pattern:t(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[z,B]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:s.languages.csharp}}},string:/[\s\S]+/}}s.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:t(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[$]),lookbehind:!0,greedy:!0,inside:te($,U)},{pattern:t(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[Q]),lookbehind:!0,greedy:!0,inside:te(Q,X)}],char:{pattern:RegExp(T),greedy:!0}}),s.languages.dotnet=s.languages.cs=s.languages.csharp})(Prism);Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];(function(s){for(var e=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,t=0;t<2;t++)e=e.replace(/<self>/g,function(){return e});e=e.replace(/<self>/g,function(){return/[^\s\S]/.source}),s.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+e),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},s.languages.rust["closure-params"].inside.rest=s.languages.rust,s.languages.rust.attribute.inside.string=s.languages.rust.string})(Prism);(function(s){s.languages.ruby=s.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),s.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var e={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:s.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete s.languages.ruby.function;var t="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",n=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;s.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+t+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:e,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:e,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+n),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+n+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),s.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+t),greedy:!0,inside:{interpolation:e,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:e,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:e,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+t),greedy:!0,inside:{interpolation:e,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:e,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete s.languages.ruby.string,s.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),s.languages.rb=s.languages.ruby})(Prism);(function(s){var e="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",t={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},n={bash:t,environment:{pattern:RegExp("\\$"+e),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+e),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};s.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+e),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:n},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:t}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:n},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:n.entity}}],environment:{pattern:RegExp("\\$?"+e),alias:"constant"},variable:n.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},t.inside=s.languages.bash;for(var r=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=n.variable[1].inside,a=0;a<r.length;a++)i[r[a]]=s.languages.bash[r[a]];s.languages.sh=s.languages.bash,s.languages.shell=s.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(s){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;s.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+e.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},s.languages.css.atrule.inside.rest=s.languages.css;var t=s.languages.markup;t&&(t.tag.addInlined("style","css"),t.tag.addAttribute("style","css"))})(Prism);const en=new Map;De.setOptions({breaks:!0,gfm:!0});const Wr={js:"javascript",ts:"typescript",py:"python",rb:"ruby",sh:"bash",yml:"yaml",md:"markdown","c++":"cpp",csharp:"csharp","c#":"csharp",golang:"go",rs:"rust"},Tc={code(s){const e=s.text;let t=s.lang;if(t&&Wr[t.toLowerCase()]&&(t=Wr[t.toLowerCase()]),t&&Ln.languages[t])try{const r=Ln.highlight(e,Ln.languages[t],t);return`<pre class="language-${t}"><code class="language-${t}">${r}</code></pre>`}catch(r){console.error("Prism highlighting failed for",t,":",r);const i=e.replace(/</g,"&lt;").replace(/>/g,"&gt;");return`<pre class="language-${t}"><code class="language-${t}">${i}</code></pre>`}return`<pre><code>${e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</code></pre>`}};De.use({renderer:Tc});function En(s){s=s.replace(/\|\|(.+?)\|\|/g,'<span class="spoiler" data-spoiler="true">$1</span>'),s=s.replace(/```(\w+)\n([\s\S]*?)```/g,(n,r,i)=>i.endsWith(`
`)?n:"```"+r+`
`+i+"\n```");let e;try{const n=De.parse(s,{async:!1});e=typeof n=="string"?n:String(n)}catch(n){console.error("Markdown parse error:",n),e=s}return e=e.replace(/:([a-zA-Z0-9_]+):/g,(n,r)=>{const i=en.get(r);return i?`<img src="${i.url}" alt=":${r}:" class="emote ${i.type==="animated"?"emote-animated":""}" title=":${r}:">`:n}),Sc.sanitize(e,{ALLOWED_TAGS:["p","br","strong","em","u","s","del","code","pre","a","img","blockquote","ul","ol","li","h1","h2","h3","h4","h5","h6","hr","span"],ALLOWED_ATTR:["href","src","alt","class","title","target","rel","data-spoiler"],FORBID_TAGS:["style","script"],FORBID_ATTR:["style","onerror","onload"]})}function Cc(s){en.set(s.name,s)}function Ic(s){en.delete(s)}function Rc(s){en.clear(),s.forEach(e=>{en.set(e.name,e)})}const Dc="wabi-chat-db",Oc=1,At="messages",Ds="settings";class Nc{constructor(){Ee(this,"db",null);Ee(this,"initPromise",null)}async init(){if(!this.db)return this.initPromise?this.initPromise:(this.initPromise=new Promise((e,t)=>{const n=indexedDB.open(Dc,Oc);n.onerror=()=>t(n.error),n.onsuccess=()=>{this.db=n.result,e()},n.onupgradeneeded=r=>{const i=r.target.result;i.objectStoreNames.contains(At)||i.createObjectStore(At,{keyPath:"period"}),i.objectStoreNames.contains(Ds)||i.createObjectStore(Ds,{keyPath:"key"})}}),this.initPromise)}async getSetting(e){return this.db?new Promise((t,n)=>{const a=this.db.transaction([Ds],"readonly").objectStore(Ds).get(e);a.onsuccess=()=>{var l;return t((l=a.result)==null?void 0:l.value)},a.onerror=()=>n(a.error)}):null}async setSetting(e,t){if(this.db)return new Promise((n,r)=>{const l=this.db.transaction([Ds],"readwrite").objectStore(Ds).put({key:e,value:t});l.onsuccess=()=>n(),l.onerror=()=>r(l.error)})}async getArchive(e){return this.db?new Promise((t,n)=>{const a=this.db.transaction([At],"readonly").objectStore(At).get(e);a.onsuccess=()=>{var l;return t((l=a.result)==null?void 0:l.data)},a.onerror=()=>n(a.error)}):null}async setArchive(e,t){if(this.db)return new Promise((n,r)=>{const l=this.db.transaction([At],"readwrite").objectStore(At).put({period:e,data:t});l.onsuccess=()=>n(),l.onerror=()=>r(l.error)})}async deleteArchive(e){if(this.db)return new Promise((t,n)=>{const a=this.db.transaction([At],"readwrite").objectStore(At).delete(e);a.onsuccess=()=>t(),a.onerror=()=>n(a.error)})}async getAllArchiveKeys(){return this.db?new Promise((e,t)=>{const i=this.db.transaction([At],"readonly").objectStore(At).getAllKeys();i.onsuccess=()=>e(i.result),i.onerror=()=>t(i.error)}):[]}async getAllArchives(){return this.db?new Promise((e,t)=>{const i=this.db.transaction([At],"readonly").objectStore(At).getAll();i.onsuccess=()=>e(i.result),i.onerror=()=>t(i.error)}):[]}async clearAllArchives(){if(this.db)return new Promise((e,t)=>{const i=this.db.transaction([At],"readwrite").objectStore(At).clear();i.onsuccess=()=>e(),i.onerror=()=>t(i.error)})}}class Pc{constructor(){Ee(this,"rotationPeriod","month");Ee(this,"maxArchives",4);Ee(this,"db");Ee(this,"initPromise",null);this.db=new Nc,this.initPromise=this.init()}async init(){await this.db.init(),await this.loadSettings()}async ensureInit(){this.initPromise&&await this.initPromise}async loadSettings(){const e=await this.db.getSetting("rotationPeriod");e&&(this.rotationPeriod=e);const t=await this.db.getSetting("maxArchives");t&&(this.maxArchives=parseInt(t))}async setRotationPeriod(e){await this.ensureInit(),this.rotationPeriod=e,await this.db.setSetting("rotationPeriod",e)}async setMaxArchives(e){await this.ensureInit(),this.maxArchives=e,await this.db.setSetting("maxArchives",e.toString()),await this.rotateArchives()}getRotationPeriod(){return this.rotationPeriod}getMaxArchives(){return this.maxArchives}getPeriodKey(){const e=new Date,t=e.getFullYear();switch(this.rotationPeriod){case"week":{const n=this.getWeekNumber(e);return`${t}-W${String(n).padStart(2,"0")}`}case"month":{const n=e.getMonth()+1;return`${t}-${String(n).padStart(2,"0")}`}case"half-year":{const n=e.getMonth()<6?"H1":"H2";return`${t}-${n}`}case"year":return`${t}`}}getWeekNumber(e){const t=new Date(e.getFullYear(),0,1),n=Math.floor((e.getTime()-t.getTime())/(24*60*60*1e3));return Math.ceil((n+t.getDay()+1)/7)}async isEnabled(){await this.ensureInit();const e=await this.db.getSetting("saveHistory");return e==="true"||e===!0}async setEnabled(e){await this.ensureInit(),await this.db.setSetting("saveHistory",e.toString())}async saveMessage(e,t){if(await this.ensureInit(),!await this.isEnabled())return;const r=this.getPeriodKey(),i=await this.db.getArchive(r)||{};i[e]||(i[e]=[]),i[e].push(t);try{await this.db.setArchive(r,i),await this.rotateArchives()}catch(a){console.error("Failed to save message to IndexedDB:",a),await this.rotateArchives()}}async rotateArchives(){await this.ensureInit();const e=(await this.db.getAllArchiveKeys()).sort().reverse();if(e.length>this.maxArchives){const t=e.slice(this.maxArchives);for(const n of t)console.log(`ðŸ—‘ï¸ Auto-deleting old archive: ${n}`),await this.db.deleteArchive(n)}}async loadAllMessages(){if(await this.ensureInit(),!await this.isEnabled())return{};const t={},n=await this.db.getAllArchives();for(const r of n){const i=r.data||{};Object.entries(i).forEach(([a,l])=>{t[a]||(t[a]=[]),t[a].push(...l)})}return Object.keys(t).forEach(r=>{t[r].sort((i,a)=>i.timestamp-a.timestamp)}),t}async deleteArchive(e){await this.ensureInit(),await this.db.deleteArchive(e),console.log(`ðŸ—‘ï¸ Deleted archive: ${e}`)}async clearAllHistory(){await this.ensureInit(),await this.db.clearAllArchives(),console.log("ðŸ—‘ï¸ Cleared all chat history")}async exportArchives(){await this.ensureInit();const e=await this.db.getAllArchives();if(e.length===0){alert("No archives to export");return}e.forEach(t=>{const n=JSON.stringify(t.data),r=new Blob([n],{type:"application/json"}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=`wabi-chat-${t.period}.json`,a.click(),URL.revokeObjectURL(i)})}async exportArchive(e){await this.ensureInit();const t=await this.db.getArchive(e);if(!t){alert("Archive not found");return}const n=new Blob([JSON.stringify(t)],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`wabi-chat-${e}.json`,i.click(),URL.revokeObjectURL(r)}async getStats(){await this.ensureInit();const t=(await this.db.getAllArchives()).map(i=>{const a=JSON.stringify(i.data),l=new Blob([a]).size,o=i.data,u=Object.values(o).reduce((f,p)=>f+p.length,0);return{period:i.period,size:l,messageCount:u}}).sort((i,a)=>a.period.localeCompare(i.period)),n=t.reduce((i,a)=>i+a.size,0),r=t.reduce((i,a)=>i+a.messageCount,0);return{archives:t,totalSize:n,totalMessages:r}}}const Tt=new Pc,Ls=it(null),Qs=it([]),Ms=it("general"),Ut=it({general:[]}),ns=it([]),ea=it([]),ys=it(null),Yr=it(!1),ta=it(0),kr=it(null);let le=null;function Fc(s){let e="http://localhost:3000";return e="https://ungruff-subtarsal-libby.ngrok-free.dev",le=_n(e),Ls.set(le),Tt.loadAllMessages().then(t=>{Object.keys(t).length>0&&Ut.set(t)}),le.on("connect",()=>{console.log("Connected to server"),Yr.set(!0),le==null||le.emit("join",s)}),le.on("disconnect",()=>{console.log("Disconnected from server"),Yr.set(!1)}),le.on("init",t=>{Qs.set(t.channels),ns.set(t.users),t.emotes&&Rc(t.emotes);const n=t.users.find(r=>r.id===(le==null?void 0:le.id));n&&ys.set(n),le==null||le.emit("join-channel","general")}),le.on("channel-messages",t=>{Ut.update(n=>({...n,[t.channelId]:t.messages}))}),le.on("message",t=>{Ut.update(r=>({...r,[t.channelId]:[...r[t.channelId]||[],t.message]})),Tt.saveMessage(t.channelId,t.message);const n=t.message.userId===(le==null?void 0:le.id);_o(t.message,n),!n&&document.hidden&&ta.update(r=>(r===0&&kr.set(t.message.id),r+1))}),le.on("user-joined",t=>{ns.update(n=>[...n,t])}),le.on("user-left",t=>{ns.update(n=>n.filter(r=>r.id!==t.id))}),le.on("typing",t=>{ea.set(t)}),le.on("profile-updated",t=>{ns.update(n=>n.map(r=>r.id===t.id?t:r)),ys.update(n=>n&&n.id===t.id?t:n)}),le.on("message-edited",t=>{Ut.update(n=>({...n,[t.channelId]:(n[t.channelId]||[]).map(r=>r.id===t.messageId?{...r,text:t.newText,isEdited:!0}:r)}))}),le.on("message-deleted",t=>{Ut.update(n=>({...n,[t.channelId]:(n[t.channelId]||[]).filter(r=>r.id!==t.messageId)}))}),le.on("message-pin-toggled",t=>{Ut.update(n=>({...n,[t.channelId]:(n[t.channelId]||[]).map(r=>r.id===t.messageId?{...r,isPinned:t.isPinned}:r)}))}),le.on("channel-created",t=>{Qs.update(n=>[...n,t]),Ut.update(n=>({...n,[t.id]:[]}))}),le.on("channel-deleted",t=>{Qs.update(n=>n.filter(r=>r.id!==t)),Ut.update(n=>{const r={...n};return delete r[t],r}),Ms.update(n=>n===t?"general":n)}),le.on("channel-error",t=>{console.error("Channel error:",t),alert(t)}),le.on("emote-added",t=>{Cc(t)}),le.on("emote-deleted",t=>{Ic(t)}),le.on("emote-error",t=>{console.error("Emote error:",t),alert(t)}),le}function xc(s){le==null||le.emit("join-channel",s),Ms.set(s)}function Lc(s){le==null||le.emit("create-channel",s)}function Mc(s){le==null||le.emit("delete-channel",s)}function fn(s,e,t="text",n){le==null||le.emit("message",{channelId:s,text:e,type:t,...n})}function sa(s,e,t){le==null||le.emit("edit-message",{channelId:s,messageId:e,newText:t})}function Bc(s,e){le==null||le.emit("delete-message",{channelId:s,messageId:e})}function na(s,e){le==null||le.emit("toggle-pin-message",{channelId:s,messageId:e})}function Vn(s){le==null||le.emit("typing",s)}function Zr(s,e){le==null||le.emit("update-profile",{status:s,profilePicture:e})}function Uc(){le==null||le.disconnect(),Ls.set(null),le=null}function jc(){ta.set(0),kr.set(null)}let hn;const qc=new Uint8Array(16);function zc(){if(!hn&&(hn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!hn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return hn(qc)}const rt=[];for(let s=0;s<256;++s)rt.push((s+256).toString(16).slice(1));function Vc(s,e=0){return rt[s[e+0]]+rt[s[e+1]]+rt[s[e+2]]+rt[s[e+3]]+"-"+rt[s[e+4]]+rt[s[e+5]]+"-"+rt[s[e+6]]+rt[s[e+7]]+"-"+rt[s[e+8]]+rt[s[e+9]]+"-"+rt[s[e+10]]+rt[s[e+11]]+rt[s[e+12]]+rt[s[e+13]]+rt[s[e+14]]+rt[s[e+15]]}const Hc=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Xr={randomUUID:Hc};function Gc(s,e,t){if(Xr.randomUUID&&!s)return Xr.randomUUID();s=s||{};const n=s.random||(s.rng||zc)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Vc(n)}typeof window<"u"&&typeof location<"u"&&location.search.indexOf("giphy-debug");var _s="",ra=16,$c=()=>{let s="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=e.length;for(let n=0;n<ra;n++)s+=e.charAt(Math.floor(Math.random()*t));return s},Wc=()=>{if(!_s){try{_s=sessionStorage.getItem("giphyPingbackId")}catch{}if(!_s){const s=new Date().getTime().toString(16);try{_s=`${s}${Gc().replace(/-/g,"")}`.substring(0,ra)}catch{_s=$c()}try{sessionStorage.setItem("giphyPingbackId",_s)}catch{}}}return _s},Yc=Wc,dn=null;new Promise(s=>{typeof Image>"u"&&s(!1);const e=new Image;e.onload=()=>{dn=!0,s(dn)},e.onerror=()=>{dn=!1,s(dn)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"});var Xs=(typeof window<"u"?window:global)||{};Xs._GIPHY_SDK_HEADERS_=Xs._GIPHY_SDK_HEADERS_||(Xs.Headers?new Xs.Headers({"X-GIPHY-SDK-PLATFORM":"web"}):void 0);var ia=()=>Xs._GIPHY_SDK_HEADERS_,Kr=(s,e)=>{var t;return(t=ia())==null?void 0:t.set(s,e)},Zc=Object.defineProperty,Xc=Object.defineProperties,Kc=Object.getOwnPropertyDescriptors,Qc=Object.getOwnPropertyNames,Qr=Object.getOwnPropertySymbols,Jc=Object.prototype.hasOwnProperty,eu=Object.prototype.propertyIsEnumerable,Jr=(s,e,t)=>e in s?Zc(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,Wt=(s,e)=>{for(var t in e||(e={}))Jc.call(e,t)&&Jr(s,t,e[t]);if(Qr)for(var t of Qr(e))eu.call(e,t)&&Jr(s,t,e[t]);return s},Hn=(s,e)=>Xc(s,Kc(e)),tu=(s=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(s,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):s)(function(s){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+s+'" is not supported')}),su=(s,e)=>function(){return e||(0,s[Qc(s)[0]])((e={exports:{}}).exports,e),e.exports},nu=(s,e,t)=>new Promise((n,r)=>{var i=o=>{try{l(t.next(o))}catch(u){r(u)}},a=o=>{try{l(t.throw(o))}catch(u){r(u)}},l=o=>o.done?n(o.value):Promise.resolve(o.value).then(i,a);l((t=t.apply(s,e)).next())}),ru=su({"package.json"(s,e){e.exports={scripts:{lint:"run -T eslint . --ext .ts,.tsx",clean:"rm -rf ./dist",dev:"parcel public/test.html",docs:"typedoc src/index.ts",build:"run -T tsup src/index.ts --format cjs,esm --dts && run -T publint",prepublish:"npm run clean && npm run build",test:"run -T jest --config ./jestconfig.js","test:watch":"run -T jest --config ./jestconfig.js --watchAll"},name:"@giphy/js-fetch-api",version:"5.7.0",description:"Javascript API to fetch gifs and stickers from the GIPHY API.",homepage:"https://github.com/Giphy/giphy-js/tree/master/packages/fetch-api",main:"dist/index.cjs",types:"dist/index.d.ts",module:"dist/index.js",type:"module",sideEffects:!1,exports:{".":{types:"./dist/index.d.ts",import:"./dist/index.js",require:"./dist/index.cjs"},"./package.json":"./package.json"},files:["dist/","src/**/*"],license:"MIT",publishConfig:{access:"public"},dependencies:{"@giphy/js-types":"*","@giphy/js-util":"*"},devDependencies:{"jest-fetch-mock":"^3.0.3","parcel-bundler":"latest",typedoc:"^0.20.37","typedoc-thunder-theme":"^0.0.3",typescript:"^5.0.4"}}}}),iu=["is_anonymous","is_community","is_featured","is_hidden","is_indexable","is_preserve_size","is_realtime","is_removed","is_sticker","is_dynamic"],lu=["suppress_chrome","is_public","is_verified"],ei=s=>e=>s[e]=!!s[e],au=s=>typeof s=="string"?s:s.text,la=(s,e="")=>{const t=Wt({},s);t.id=String(t.id),t.tags=(t.tags||[]).map(au),t.bottle_data||(t.bottle_data={}),t.response_id=e,iu.forEach(ei(t)),Object.keys(t.images||{}).forEach(r=>{const i=t.images[r];i.width=parseInt(i.width),i.height=parseInt(i.height)});const{user:n}=t;if(n){const r=Wt({},n);lu.forEach(ei(r)),t.user=r}return t},ti=s=>{const{response_id:e}=s.meta;return s.data=la(s.data,e),s},es=s=>{const{response_id:e}=s.meta;return s.data=s.data.map(t=>la(t,e)),s},ou=(typeof window<"u"?window:global)||{},cu=ou.GIPHY_API_URL||"https://api.giphy.com/v1/",aa=class extends Error{constructor(s,e,t=0,n=""){super(s),this.url=e,this.status=t,this.statusText=n}},uu=class extends aa{},si=aa,fu="@giphy/js-fetch-api: ",hu="Error fetching",du=s=>s,qt={},pu=6e4,gu=6e3,mu=()=>{const s=Date.now();Object.keys(qt).forEach(e=>{const t=qt[e].isError?gu:pu;s-qt[e].ts>=t&&delete qt[e]})};function vu(s,e={}){const{apiVersion:t=1,noCache:n=!1,normalizer:r=du}=e,i=cu.replace(/\/v\d+\/$/,`/v${t}/`);if(mu(),!qt[s]||n){const a=`${i}${s}`,l=()=>nu(this,null,function*(){var o,u;let f;try{const p=yield fetch(a,{method:"get"});if(p.ok){const d=yield p.json();if((o=d.meta)!=null&&o.response_id)return r(d);throw{message:"synthetic response"}}else{let d=hu;try{const g=yield p.json();g.message&&(d=g.message),(u=g.meta)!=null&&u.msg&&(d=g.meta.msg)}catch{}qt[s]&&(qt[s].isError=!0);let m=si;d==="This content is not available in your location"&&(m=uu),f=new m(`${fu}${d}`,a,p.status,p.statusText)}}catch(p){f=new si(p.message,a),qt[s]&&(qt[s].isError=!0)}throw f});qt[s]={request:l(),ts:Date.now()}}return qt[s].request}var St=vu,Gn=s=>s&&s.type?s.type:"gifs",_u=class{constructor(s,e={}){this.getQS=(t={})=>new URLSearchParams(Wt(Hn(Wt({},t),{api_key:this.apiKey,pingback_id:Yc()}),this.qsParams)).toString(),this.apiKey=s,this.qsParams=e}categories(s){return St(`gifs/categories?${this.getQS(s)}`)}gif(s,e){const t=e!=null&&e.internal?"internal/":"";return St(`${t}gifs/${s}?${this.getQS()}`,{normalizer:ti})}gifs(s,e){return Array.isArray(s)?St(`gifs?${this.getQS({ids:s.join(",")})}`,{normalizer:es}):St(`gifs/categories/${s}/${e}?${this.getQS()}`,{normalizer:es})}emoji(s){return St(`emoji?${this.getQS(s)}`,{normalizer:es})}emojiDefaultVariations(s){return St(`emoji?${this.getQS(s)}`,{apiVersion:2,normalizer:es})}emojiVariations(s){return St(`emoji/${s}/variations?${this.getQS()}`,{apiVersion:2,normalizer:es})}animate(s,e={}){const t=this.getQS(Hn(Wt({},e),{m:s}));return St(`text/animate?${t}`,{normalizer:es})}search(s,e={}){const t=e.channel?`@${e.channel} ${s}`:s;let n;e.type==="text"&&(n=!0);const r=this.getQS(Hn(Wt({rating:"pg-13"},e),{q:t,excludeDynamicResults:n}));return St(`${Gn(e)}/search?${r}`,{normalizer:es})}subcategories(s,e){return St(`gifs/categories/${s}?${this.getQS(e)}`)}trending(s={}){return St(`${Gn(s)}/trending?${this.getQS(Wt({rating:"pg-13"},s))}`,{normalizer:es})}random(s){return St(`${Gn(s)}/random?${this.getQS(Wt({rating:"pg-13"},s))}`,{noCache:!0,normalizer:ti})}related(s,e={}){const{type:t="gifs"}=e;return St(`${t}/related?${this.getQS(Wt({gif_id:s,rating:"pg-13"},e))}`,{normalizer:es})}channels(s,e={}){return St(`channels/search?${this.getQS(Wt({q:s,rating:"pg-13"},e))}`)}},bu=_u,ni;if(typeof tu<"u"){const{version:s}=ru();(ni=ia())!=null&&ni.get("X-GIPHY-SDK-NAME")||(Kr("X-GIPHY-SDK-NAME","FetchAPI"),Kr("X-GIPHY-SDK-VERSION",s))}function ri(s,e,t){const n=s.slice();return n[11]=e[t],n}function ku(s){let e=[],t=new Map,n,r=Ve(s[1]);const i=a=>a[11].id;for(let a=0;a<r.length;a+=1){let l=ri(s,r,a),o=i(l);t.set(o,e[a]=ii(o,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();n=Fe()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);n=Fe()},m(a,l){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(a,l);j(a,n,l)},p(a,l){l&34&&(r=Ve(a[1]),e=Ss(e,l,i,1,a,r,t,n.parentNode,As,ii,n,ri))},d(a){a&&_(n);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function yu(s){let e,t="No GIFs found";return{c(){e=k("div"),e.textContent=t,this.h()},l(n){e=b(n,"DIV",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-1db6zr7"&&(e.textContent=t),this.h()},h(){h(e,"class","no-results svelte-1t262zs")},m(n,r){j(n,e,r)},p:Ne,d(n){n&&_(e)}}}function wu(s){let e,t="Loading...";return{c(){e=k("div"),e.textContent=t,this.h()},l(n){e=b(n,"DIV",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-1f5y80z"&&(e.textContent=t),this.h()},h(){h(e,"class","loading svelte-1t262zs")},m(n,r){j(n,e,r)},p:Ne,d(n){n&&_(e)}}}function ii(s,e){let t,n,r,i,a,l,o;function u(){return e[8](e[11])}return{key:s,first:null,c(){t=k("button"),n=k("img"),a=M(),this.h()},l(f){t=b(f,"BUTTON",{class:!0});var p=D(t);n=b(p,"IMG",{src:!0,alt:!0,class:!0}),a=L(p),p.forEach(_),this.h()},h(){Ue(n.src,r=e[11].images.fixed_height_small.url)||h(n,"src",r),h(n,"alt",i=e[11].title),h(n,"class","svelte-1t262zs"),h(t,"class","gif-item svelte-1t262zs"),this.first=t},m(f,p){j(f,t,p),c(t,n),c(t,a),l||(o=G(t,"click",u),l=!0)},p(f,p){e=f,p&2&&!Ue(n.src,r=e[11].images.fixed_height_small.url)&&h(n,"src",r),p&2&&i!==(i=e[11].title)&&h(n,"alt",i)},d(f){f&&_(t),l=!1,o()}}}function Eu(s){let e,t,n,r,i,a="âœ•",l,o,u,f;function p(g,v){return g[2]?wu:g[1].length===0?yu:ku}let d=p(s),m=d(s);return{c(){e=k("div"),t=k("div"),n=k("input"),r=M(),i=k("button"),i.textContent=a,l=M(),o=k("div"),m.c(),this.h()},l(g){e=b(g,"DIV",{class:!0});var v=D(e);t=b(v,"DIV",{class:!0});var A=D(t);n=b(A,"INPUT",{type:!0,placeholder:!0,class:!0}),r=L(A),i=b(A,"BUTTON",{class:!0,"data-svelte-h":!0}),K(i)!=="svelte-xkwxcu"&&(i.textContent=a),A.forEach(_),l=L(v),o=b(v,"DIV",{class:!0});var R=D(o);m.l(R),R.forEach(_),v.forEach(_),this.h()},h(){h(n,"type","text"),h(n,"placeholder","Search GIFs..."),h(n,"class","svelte-1t262zs"),h(i,"class","close-btn svelte-1t262zs"),h(t,"class","giphy-header svelte-1t262zs"),h(o,"class","gif-grid svelte-1t262zs"),h(e,"class","giphy-picker svelte-1t262zs")},m(g,v){j(g,e,v),c(e,t),c(t,n),tt(n,s[0]),c(t,r),c(t,i),c(e,l),c(e,o),m.m(o,null),u||(f=[G(n,"input",s[6]),G(n,"input",s[4]),G(i,"click",s[7])],u=!0)},p(g,[v]){v&1&&n.value!==g[0]&&tt(n,g[0]),d===(d=p(g))&&m?m.p(g,v):(m.d(1),m=d(g),m&&(m.c(),m.m(o,null)))},i:Ne,o:Ne,d(g){g&&_(e),m.d(),u=!1,Le(f)}}}function Au(s,e,t){const n=kl();let r="",i=[],a=!1;const l=new bu("sXpGFDGZs0Dv1mmNFvYaGUvYwKX0PWIh");async function o(){if(!r.trim()){u();return}t(2,a=!0);try{const{data:g}=await l.search(r,{limit:20});t(1,i=g)}catch(g){console.error("Error fetching GIFs:",g)}t(2,a=!1)}async function u(){t(2,a=!0);try{const{data:g}=await l.trending({limit:20});t(1,i=g)}catch(g){console.error("Error fetching trending GIFs:",g)}t(2,a=!1)}function f(g){n("select",g.images.fixed_height.url)}ws(()=>{u()});function p(){r=this.value,t(0,r)}return[r,i,a,n,o,f,p,()=>n("close"),g=>f(g)]}class Su extends bt{constructor(e){super(),kt(this,e,Au,Eu,_t,{})}}function li(s){let e,t,n,r,i=(s[2]?"Your Profile":s[1].username)+"",a,l,o,u="Ã—",f,p,d,m,g,v,A,R,y,E="Username:",w,T,C=s[1].username+"",S,F,N,O,I,P;function B(Y,ie){return Y[4]||Y[1].profilePicture?Cu:Tu}let U=B(s),$=U(s),X=s[2]&&ai(s),Q=!s[2]&&oi(s);function te(Y,ie){return Y[2]?Nu:Ou}let q=te(s),z=q(s),W=s[2]&&ui(s);return{c(){e=k("div"),t=k("div"),n=k("div"),r=k("h2"),a=H(i),l=M(),o=k("button"),o.textContent=u,f=M(),p=k("div"),d=k("div"),m=k("div"),$.c(),g=M(),X&&X.c(),v=M(),A=k("div"),R=k("div"),y=k("span"),y.textContent=E,w=M(),T=k("span"),S=H(C),F=M(),Q&&Q.c(),N=M(),z.c(),O=M(),W&&W.c(),this.h()},l(Y){e=b(Y,"DIV",{class:!0});var ie=D(e);t=b(ie,"DIV",{class:!0});var he=D(t);n=b(he,"DIV",{class:!0});var re=D(n);r=b(re,"H2",{class:!0});var ge=D(r);a=V(ge,i),ge.forEach(_),l=L(re),o=b(re,"BUTTON",{class:!0,"data-svelte-h":!0}),K(o)!=="svelte-12zniqk"&&(o.textContent=u),re.forEach(_),f=L(he),p=b(he,"DIV",{class:!0});var de=D(p);d=b(de,"DIV",{class:!0});var se=D(d);m=b(se,"DIV",{class:!0});var Z=D(m);$.l(Z),Z.forEach(_),g=L(se),X&&X.l(se),se.forEach(_),v=L(de),A=b(de,"DIV",{class:!0});var ue=D(A);R=b(ue,"DIV",{class:!0});var fe=D(R);y=b(fe,"SPAN",{class:!0,"data-svelte-h":!0}),K(y)!=="svelte-1fffgfa"&&(y.textContent=E),w=L(fe),T=b(fe,"SPAN",{class:!0});var me=D(T);S=V(me,C),me.forEach(_),fe.forEach(_),ue.forEach(_),F=L(de),Q&&Q.l(de),N=L(de),z.l(de),de.forEach(_),O=L(he),W&&W.l(he),he.forEach(_),ie.forEach(_),this.h()},h(){h(r,"class","svelte-1gfq969"),h(o,"class","close-btn svelte-1gfq969"),h(n,"class","modal-header svelte-1gfq969"),h(m,"class","profile-picture-container svelte-1gfq969"),h(d,"class","profile-picture-section svelte-1gfq969"),h(y,"class","info-label svelte-1gfq969"),h(T,"class","info-value svelte-1gfq969"),h(R,"class","info-row svelte-1gfq969"),h(A,"class","user-info svelte-1gfq969"),h(p,"class","modal-body svelte-1gfq969"),h(t,"class","modal-content svelte-1gfq969"),h(e,"class","modal-overlay svelte-1gfq969")},m(Y,ie){j(Y,e,ie),c(e,t),c(t,n),c(n,r),c(r,a),c(n,l),c(n,o),c(t,f),c(t,p),c(p,d),c(d,m),$.m(m,null),c(d,g),X&&X.m(d,null),c(p,v),c(p,A),c(A,R),c(R,y),c(R,w),c(R,T),c(T,S),c(p,F),Q&&Q.m(p,null),c(p,N),z.m(p,null),c(t,O),W&&W.m(t,null),I||(P=[G(o,"click",s[9]),G(t,"click",Es(s[12])),G(e,"click",s[9])],I=!0)},p(Y,ie){ie&6&&i!==(i=(Y[2]?"Your Profile":Y[1].username)+"")&&ne(a,i),U===(U=B(Y))&&$?$.p(Y,ie):($.d(1),$=U(Y),$&&($.c(),$.m(m,null))),Y[2]?X?X.p(Y,ie):(X=ai(Y),X.c(),X.m(d,null)):X&&(X.d(1),X=null),ie&2&&C!==(C=Y[1].username+"")&&ne(S,C),Y[2]?Q&&(Q.d(1),Q=null):Q?Q.p(Y,ie):(Q=oi(Y),Q.c(),Q.m(p,N)),q===(q=te(Y))&&z?z.p(Y,ie):(z.d(1),z=q(Y),z&&(z.c(),z.m(p,null))),Y[2]?W?W.p(Y,ie):(W=ui(Y),W.c(),W.m(t,null)):W&&(W.d(1),W=null)},d(Y){Y&&_(e),$.d(),X&&X.d(),Q&&Q.d(),z.d(),W&&W.d(),I=!1,Le(P)}}}function Tu(s){let e,t=s[1].username.charAt(0).toUpperCase()+"",n;return{c(){e=k("div"),n=H(t),this.h()},l(r){e=b(r,"DIV",{class:!0,style:!0});var i=D(e);n=V(i,t),i.forEach(_),this.h()},h(){h(e,"class","profile-picture-placeholder svelte-1gfq969"),Me(e,"background-color",s[1].color)},m(r,i){j(r,e,i),c(e,n)},p(r,i){i&2&&t!==(t=r[1].username.charAt(0).toUpperCase()+"")&&ne(n,t),i&2&&Me(e,"background-color",r[1].color)},d(r){r&&_(e)}}}function Cu(s){let e,t,n;return{c(){e=k("img"),this.h()},l(r){e=b(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ue(e.src,t=s[4]||s[1].profilePicture)||h(e,"src",t),h(e,"alt",n=s[1].username),h(e,"class","profile-picture svelte-1gfq969")},m(r,i){j(r,e,i)},p(r,i){i&18&&!Ue(e.src,t=r[4]||r[1].profilePicture)&&h(e,"src",t),i&2&&n!==(n=r[1].username)&&h(e,"alt",n)},d(r){r&&_(e)}}}function ai(s){let e,t,n=s[4]||s[1].profilePicture?"Change Picture":"Upload Picture",r,i,a,l,o;return{c(){e=k("div"),t=k("label"),r=H(n),i=M(),a=k("input"),this.h()},l(u){e=b(u,"DIV",{class:!0});var f=D(e);t=b(f,"LABEL",{for:!0,class:!0});var p=D(t);r=V(p,n),p.forEach(_),i=L(f),a=b(f,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),f.forEach(_),this.h()},h(){h(t,"for","profile-picture"),h(t,"class","upload-label svelte-1gfq969"),h(a,"id","profile-picture"),h(a,"type","file"),h(a,"accept","image/*"),h(a,"class","file-input svelte-1gfq969"),h(e,"class","upload-section svelte-1gfq969")},m(u,f){j(u,e,f),c(e,t),c(t,r),c(e,i),c(e,a),l||(o=G(a,"change",s[10]),l=!0)},p(u,f){f&18&&n!==(n=u[4]||u[1].profilePicture?"Change Picture":"Upload Picture")&&ne(r,n)},d(u){u&&_(e),l=!1,o()}}}function oi(s){let e,t,n,r="Personal Notes:",i,a,l=!s[6]&&ci(s);function o(p,d){return p[6]?Du:p[5]?Ru:Iu}let u=o(s),f=u(s);return{c(){e=k("div"),t=k("div"),n=k("label"),n.textContent=r,i=M(),l&&l.c(),a=M(),f.c(),this.h()},l(p){e=b(p,"DIV",{class:!0});var d=D(e);t=b(d,"DIV",{class:!0});var m=D(t);n=b(m,"LABEL",{class:!0,"data-svelte-h":!0}),K(n)!=="svelte-1vz1uda"&&(n.textContent=r),i=L(m),l&&l.l(m),m.forEach(_),a=L(d),f.l(d),d.forEach(_),this.h()},h(){h(n,"class","notes-label svelte-1gfq969"),h(t,"class","notes-header svelte-1gfq969"),h(e,"class","notes-section svelte-1gfq969")},m(p,d){j(p,e,d),c(e,t),c(t,n),c(t,i),l&&l.m(t,null),c(e,a),f.m(e,null)},p(p,d){p[6]?l&&(l.d(1),l=null):l?l.p(p,d):(l=ci(p),l.c(),l.m(t,null)),u===(u=o(p))&&f?f.p(p,d):(f.d(1),f=u(p),f&&(f.c(),f.m(e,null)))},d(p){p&&_(e),l&&l.d(),f.d()}}}function ci(s){let e,t=s[5]?"Edit":"Add Note",n,r,i;return{c(){e=k("button"),n=H(t),this.h()},l(a){e=b(a,"BUTTON",{class:!0});var l=D(e);n=V(l,t),l.forEach(_),this.h()},h(){h(e,"class","edit-note-btn svelte-1gfq969")},m(a,l){j(a,e,l),c(e,n),r||(i=G(e,"click",s[13]),r=!0)},p(a,l){l&32&&t!==(t=a[5]?"Edit":"Add Note")&&ne(n,t)},d(a){a&&_(e),r=!1,i()}}}function Iu(s){let e,t='No notes yet. Click "Add Note" to remember details about this user.';return{c(){e=k("div"),e.textContent=t,this.h()},l(n){e=b(n,"DIV",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-t39qdr"&&(e.textContent=t),this.h()},h(){h(e,"class","note-placeholder svelte-1gfq969")},m(n,r){j(n,e,r)},p:Ne,d(n){n&&_(e)}}}function Ru(s){let e,t;return{c(){e=k("div"),t=H(s[5]),this.h()},l(n){e=b(n,"DIV",{class:!0});var r=D(e);t=V(r,s[5]),r.forEach(_),this.h()},h(){h(e,"class","note-display svelte-1gfq969")},m(n,r){j(n,e,r),c(e,t)},p(n,r){r&32&&ne(t,n[5])},d(n){n&&_(e)}}}function Du(s){let e,t,n,r,i="Cancel",a,l,o="Save Note",u,f;return{c(){e=k("textarea"),t=M(),n=k("div"),r=k("button"),r.textContent=i,a=M(),l=k("button"),l.textContent=o,this.h()},l(p){e=b(p,"TEXTAREA",{placeholder:!0,class:!0,rows:!0}),D(e).forEach(_),t=L(p),n=b(p,"DIV",{class:!0});var d=D(n);r=b(d,"BUTTON",{class:!0,"data-svelte-h":!0}),K(r)!=="svelte-hulrz8"&&(r.textContent=i),a=L(d),l=b(d,"BUTTON",{class:!0,"data-svelte-h":!0}),K(l)!=="svelte-9d2dbm"&&(l.textContent=o),d.forEach(_),this.h()},h(){h(e,"placeholder","Add personal notes (e.g., nickname, birthday, interests...)"),h(e,"class","note-textarea svelte-1gfq969"),h(e,"rows","3"),h(r,"class","cancel-note-btn svelte-1gfq969"),h(l,"class","save-note-btn svelte-1gfq969"),h(n,"class","note-actions svelte-1gfq969")},m(p,d){j(p,e,d),tt(e,s[5]),j(p,t,d),j(p,n,d),c(n,r),c(n,a),c(n,l),u||(f=[G(e,"input",s[14]),G(r,"click",s[15]),G(l,"click",s[8])],u=!0)},p(p,d){d&32&&tt(e,p[5])},d(p){p&&(_(e),_(t),_(n)),u=!1,Le(f)}}}function Ou(s){let e,t,n,r,i=s[1].status.charAt(0).toUpperCase()+s[1].status.slice(1)+"",a;return{c(){e=k("div"),t=k("span"),n=M(),r=k("span"),a=H(i),this.h()},l(l){e=b(l,"DIV",{class:!0});var o=D(e);t=b(o,"SPAN",{class:!0,style:!0}),D(t).forEach(_),n=L(o),r=b(o,"SPAN",{class:!0});var u=D(r);a=V(u,i),u.forEach(_),o.forEach(_),this.h()},h(){h(t,"class","status-dot svelte-1gfq969"),Me(t,"background-color",Js(s[1].status)),h(r,"class","status-text svelte-1gfq969"),h(e,"class","status-display svelte-1gfq969")},m(l,o){j(l,e,o),c(e,t),c(e,n),c(e,r),c(r,a)},p(l,o){o&2&&Me(t,"background-color",Js(l[1].status)),o&2&&i!==(i=l[1].status.charAt(0).toUpperCase()+l[1].status.slice(1)+"")&&ne(a,i)},d(l){l&&_(e)}}}function Nu(s){let e,t,n="Status:",r,i,a,l,o,u,f,p,d,m,g,v,A,R,y,E,w,T;return{c(){e=k("div"),t=k("label"),t.textContent=n,r=M(),i=k("div"),a=k("button"),l=k("span"),o=H(`\r
								Active`),f=M(),p=k("button"),d=k("span"),m=H(`\r
								Away`),v=M(),A=k("button"),R=k("span"),y=H(`\r
								Busy`),this.h()},l(C){e=b(C,"DIV",{class:!0});var S=D(e);t=b(S,"LABEL",{class:!0,"data-svelte-h":!0}),K(t)!=="svelte-138t5u0"&&(t.textContent=n),r=L(S),i=b(S,"DIV",{class:!0});var F=D(i);a=b(F,"BUTTON",{class:!0});var N=D(a);l=b(N,"SPAN",{class:!0,style:!0}),D(l).forEach(_),o=V(N,`\r
								Active`),N.forEach(_),f=L(F),p=b(F,"BUTTON",{class:!0});var O=D(p);d=b(O,"SPAN",{class:!0,style:!0}),D(d).forEach(_),m=V(O,`\r
								Away`),O.forEach(_),v=L(F),A=b(F,"BUTTON",{class:!0});var I=D(A);R=b(I,"SPAN",{class:!0,style:!0}),D(R).forEach(_),y=V(I,`\r
								Busy`),I.forEach(_),F.forEach(_),S.forEach(_),this.h()},h(){h(t,"class","status-label svelte-1gfq969"),h(l,"class","status-dot svelte-1gfq969"),Me(l,"background-color",Js("active")),h(a,"class",u="status-btn "+(s[3]==="active"?"selected":"")+" svelte-1gfq969"),h(d,"class","status-dot svelte-1gfq969"),Me(d,"background-color",Js("away")),h(p,"class",g="status-btn "+(s[3]==="away"?"selected":"")+" svelte-1gfq969"),h(R,"class","status-dot svelte-1gfq969"),Me(R,"background-color",Js("busy")),h(A,"class",E="status-btn "+(s[3]==="busy"?"selected":"")+" svelte-1gfq969"),h(i,"class","status-options svelte-1gfq969"),h(e,"class","status-section svelte-1gfq969")},m(C,S){j(C,e,S),c(e,t),c(e,r),c(e,i),c(i,a),c(a,l),c(a,o),c(i,f),c(i,p),c(p,d),c(p,m),c(i,v),c(i,A),c(A,R),c(A,y),w||(T=[G(a,"click",s[16]),G(p,"click",s[17]),G(A,"click",s[18])],w=!0)},p(C,S){S&8&&u!==(u="status-btn "+(C[3]==="active"?"selected":"")+" svelte-1gfq969")&&h(a,"class",u),S&8&&g!==(g="status-btn "+(C[3]==="away"?"selected":"")+" svelte-1gfq969")&&h(p,"class",g),S&8&&E!==(E="status-btn "+(C[3]==="busy"?"selected":"")+" svelte-1gfq969")&&h(A,"class",E)},d(C){C&&_(e),w=!1,Le(T)}}}function ui(s){let e,t,n="Cancel",r,i,a="Save Changes",l,o;return{c(){e=k("div"),t=k("button"),t.textContent=n,r=M(),i=k("button"),i.textContent=a,this.h()},l(u){e=b(u,"DIV",{class:!0});var f=D(e);t=b(f,"BUTTON",{class:!0,"data-svelte-h":!0}),K(t)!=="svelte-2pqgi7"&&(t.textContent=n),r=L(f),i=b(f,"BUTTON",{class:!0,"data-svelte-h":!0}),K(i)!=="svelte-2yi6cr"&&(i.textContent=a),f.forEach(_),this.h()},h(){h(t,"class","cancel-btn svelte-1gfq969"),h(i,"class","save-btn svelte-1gfq969"),h(e,"class","modal-footer svelte-1gfq969")},m(u,f){j(u,e,f),c(e,t),c(e,r),c(e,i),l||(o=[G(t,"click",s[9]),G(i,"click",s[11])],l=!0)},p:Ne,d(u){u&&_(e),l=!1,Le(o)}}}function Pu(s){let e,t=s[0]&&s[1]&&li(s);return{c(){t&&t.c(),e=Fe()},l(n){t&&t.l(n),e=Fe()},m(n,r){t&&t.m(n,r),j(n,e,r)},p(n,[r]){n[0]&&n[1]?t?t.p(n,r):(t=li(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ne,o:Ne,d(n){n&&_(e),t&&t.d(n)}}}function Js(s){switch(s){case"active":return"#10b981";case"away":return"#f59e0b";case"busy":return"#ef4444";default:return"#6b7280"}}function Fu(s,e,t){let{isOpen:n=!1}=e,{user:r=null}=e,{isOwnProfile:i=!1}=e,a=(r==null?void 0:r.status)||"active";r!=null&&r.profilePicture;let l=null,o=null,u="",f=!1;function p(){if(!r)return;const S=JSON.parse(localStorage.getItem("userNotes")||"{}");t(5,u=S[r.id]||"")}function d(){if(!r)return;const S=JSON.parse(localStorage.getItem("userNotes")||"{}");u.trim()?S[r.id]=u:delete S[r.id],localStorage.setItem("userNotes",JSON.stringify(S)),t(6,f=!1)}function m(){t(0,n=!1),l=null,t(4,o=null),t(6,f=!1)}function g(S){var O;const N=(O=S.target.files)==null?void 0:O[0];if(N&&N.type.startsWith("image/")){l=N;const I=new FileReader;I.onload=P=>{var B;t(4,o=(B=P.target)==null?void 0:B.result)},I.readAsDataURL(N)}}function v(){i&&(l&&o?Zr(a,o):a!==(r==null?void 0:r.status)&&Zr(a,void 0),m())}function A(S){Os.call(this,s,S)}const R=()=>t(6,f=!0);function y(){u=this.value,t(5,u)}const E=()=>{t(6,f=!1),p()},w=()=>t(3,a="active"),T=()=>t(3,a="away"),C=()=>t(3,a="busy");return s.$$set=S=>{"isOpen"in S&&t(0,n=S.isOpen),"user"in S&&t(1,r=S.user),"isOwnProfile"in S&&t(2,i=S.isOwnProfile)},s.$$.update=()=>{s.$$.dirty&2&&r&&(t(3,a=r.status),r.profilePicture,p())},[n,r,i,a,o,u,f,p,d,m,g,v,A,R,y,E,w,T,C]}class oa extends bt{constructor(e){super(),kt(this,e,Fu,Pu,_t,{isOpen:0,user:1,isOwnProfile:2})}}function fi(s){let e,t,n,r=`<span class="menu-icon svelte-1tp94fk">ðŸ’¬</span>
				Reply`,i,a,l,o,u,f,p=s[1].isPinned?"ðŸ“Œ":"ðŸ“",d,m,g=s[1].isPinned?"Unpin":"Pin",v,A,R,y,E=`<span class="menu-icon svelte-1tp94fk">ðŸ“‹</span>
				Copy Text`,w,T,C,S=s[11]&&s[6]&&hi(s),F=s[7]&&di(s),N=s[12]&&pi(s),O=s[12]&&gi(s);return{c(){e=k("div"),t=k("div"),n=k("button"),n.innerHTML=r,i=M(),S&&S.c(),a=M(),F&&F.c(),l=M(),N&&N.c(),o=M(),u=k("button"),f=k("span"),d=H(p),m=M(),v=H(g),A=H(" Message"),R=M(),y=k("button"),y.innerHTML=E,w=M(),O&&O.c(),this.h()},l(I){e=b(I,"DIV",{class:!0});var P=D(e);t=b(P,"DIV",{class:!0,style:!0});var B=D(t);n=b(B,"BUTTON",{class:!0,"data-svelte-h":!0}),K(n)!=="svelte-1bhlhgs"&&(n.innerHTML=r),i=L(B),S&&S.l(B),a=L(B),F&&F.l(B),l=L(B),N&&N.l(B),o=L(B),u=b(B,"BUTTON",{class:!0});var U=D(u);f=b(U,"SPAN",{class:!0});var $=D(f);d=V($,p),$.forEach(_),m=L(U),v=V(U,g),A=V(U," Message"),U.forEach(_),R=L(B),y=b(B,"BUTTON",{class:!0,"data-svelte-h":!0}),K(y)!=="svelte-pkfnng"&&(y.innerHTML=E),w=L(B),O&&O.l(B),B.forEach(_),P.forEach(_),this.h()},h(){h(n,"class","menu-item svelte-1tp94fk"),h(f,"class","menu-icon svelte-1tp94fk"),h(u,"class","menu-item svelte-1tp94fk"),h(y,"class","menu-item copy svelte-1tp94fk"),h(t,"class","context-menu svelte-1tp94fk"),Me(t,"top",s[9]+"px"),Me(t,"left",s[10]+"px"),h(e,"class","context-menu-overlay svelte-1tp94fk")},m(I,P){j(I,e,P),c(e,t),c(t,n),c(t,i),S&&S.m(t,null),c(t,a),F&&F.m(t,null),c(t,l),N&&N.m(t,null),c(t,o),c(t,u),c(u,f),c(f,d),c(u,m),c(u,v),c(u,A),c(t,R),c(t,y),c(t,w),O&&O.m(t,null),s[18](t),T||(C=[G(n,"click",function(){bs(s[5])&&s[5].apply(this,arguments)}),G(u,"click",function(){bs(s[4])&&s[4].apply(this,arguments)}),G(y,"click",s[17]),G(t,"click",Es(s[16])),G(e,"click",s[19])],T=!0)},p(I,P){s=I,s[11]&&s[6]?S?S.p(s,P):(S=hi(s),S.c(),S.m(t,a)):S&&(S.d(1),S=null),s[7]?F?F.p(s,P):(F=di(s),F.c(),F.m(t,l)):F&&(F.d(1),F=null),s[12]?N?N.p(s,P):(N=pi(s),N.c(),N.m(t,o)):N&&(N.d(1),N=null),P&2&&p!==(p=s[1].isPinned?"ðŸ“Œ":"ðŸ“")&&ne(d,p),P&2&&g!==(g=s[1].isPinned?"Unpin":"Pin")&&ne(v,g),s[12]?O?O.p(s,P):(O=gi(s),O.c(),O.m(t,null)):O&&(O.d(1),O=null),P&512&&Me(t,"top",s[9]+"px"),P&1024&&Me(t,"left",s[10]+"px")},d(I){I&&_(e),S&&S.d(),F&&F.d(),N&&N.d(),O&&O.d(),s[18](null),T=!1,Le(C)}}}function hi(s){let e,t=`<span class="menu-icon svelte-1tp94fk">â¬‡ï¸</span>
					Download`,n,r;return{c(){e=k("button"),e.innerHTML=t,this.h()},l(i){e=b(i,"BUTTON",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-7q5p9o"&&(e.innerHTML=t),this.h()},h(){h(e,"class","menu-item svelte-1tp94fk")},m(i,a){j(i,e,a),n||(r=G(e,"click",function(){bs(s[6])&&s[6].apply(this,arguments)}),n=!0)},p(i,a){s=i},d(i){i&&_(e),n=!1,r()}}}function di(s){let e,t=`<span class="menu-icon svelte-1tp94fk">â†—ï¸</span>
					Forward`,n,r;return{c(){e=k("button"),e.innerHTML=t,this.h()},l(i){e=b(i,"BUTTON",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-1d631nw"&&(e.innerHTML=t),this.h()},h(){h(e,"class","menu-item svelte-1tp94fk")},m(i,a){j(i,e,a),n||(r=G(e,"click",function(){bs(s[7])&&s[7].apply(this,arguments)}),n=!0)},p(i,a){s=i},d(i){i&&_(e),n=!1,r()}}}function pi(s){let e,t=`<span class="menu-icon svelte-1tp94fk">âœï¸</span>
					Edit Message`,n,r;return{c(){e=k("button"),e.innerHTML=t,this.h()},l(i){e=b(i,"BUTTON",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-8fvj6d"&&(e.innerHTML=t),this.h()},h(){h(e,"class","menu-item svelte-1tp94fk")},m(i,a){j(i,e,a),n||(r=G(e,"click",function(){bs(s[2])&&s[2].apply(this,arguments)}),n=!0)},p(i,a){s=i},d(i){i&&_(e),n=!1,r()}}}function gi(s){let e,t,n,r=`<span class="menu-icon svelte-1tp94fk">ðŸ—‘ï¸</span>
					Delete Message`,i,a;return{c(){e=k("div"),t=M(),n=k("button"),n.innerHTML=r,this.h()},l(l){e=b(l,"DIV",{class:!0}),D(e).forEach(_),t=L(l),n=b(l,"BUTTON",{class:!0,"data-svelte-h":!0}),K(n)!=="svelte-g8outl"&&(n.innerHTML=r),this.h()},h(){h(e,"class","menu-divider svelte-1tp94fk"),h(n,"class","menu-item delete svelte-1tp94fk")},m(l,o){j(l,e,o),j(l,t,o),j(l,n,o),i||(a=G(n,"click",function(){bs(s[3])&&s[3].apply(this,arguments)}),i=!0)},p(l,o){s=l},d(l){l&&(_(e),_(t),_(n)),i=!1,a()}}}function xu(s){let e,t=s[0]&&fi(s);return{c(){t&&t.c(),e=Fe()},l(n){t&&t.l(n),e=Fe()},m(n,r){t&&t.m(n,r),j(n,e,r)},p(n,[r]){n[0]?t?t.p(n,r):(t=fi(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ne,o:Ne,d(n){n&&_(e),t&&t.d(n)}}}function Lu(s,e,t){let n,r,i,a,l;Re(s,ys,S=>t(15,l=S));let{message:o}=e,{x:u=0}=e,{y:f=0}=e,{visible:p=!1}=e,{onEdit:d}=e,{onDelete:m}=e,{onPin:g}=e,{onReply:v}=e,{onDownload:A=void 0}=e,{onForward:R=void 0}=e,y;function E(S){Os.call(this,s,S)}const w=()=>{navigator.clipboard.writeText(o.text),t(0,p=!1)};function T(S){ot[S?"unshift":"push"](()=>{y=S,t(8,y)})}const C=()=>t(0,p=!1);return s.$$set=S=>{"message"in S&&t(1,o=S.message),"x"in S&&t(13,u=S.x),"y"in S&&t(14,f=S.y),"visible"in S&&t(0,p=S.visible),"onEdit"in S&&t(2,d=S.onEdit),"onDelete"in S&&t(3,m=S.onDelete),"onPin"in S&&t(4,g=S.onPin),"onReply"in S&&t(5,v=S.onReply),"onDownload"in S&&t(6,A=S.onDownload),"onForward"in S&&t(7,R=S.onForward)},s.$$.update=()=>{s.$$.dirty&32770&&t(12,n=o.userId===(l==null?void 0:l.id)),s.$$.dirty&2&&t(11,r=o.type==="file"&&o.fileUrl),s.$$.dirty&8448&&t(10,i=(()=>{if(!y)return u;const S=y.offsetWidth||200,F=window.innerWidth;return u+S>F?u-S:u})()),s.$$.dirty&16640&&t(9,a=(()=>{if(!y)return f;const S=y.offsetHeight||300,F=window.innerHeight;return f+S>F?f-S:f})())},[p,o,d,m,g,v,A,R,y,a,i,r,n,u,f,l,E,w,T,C]}class Mu extends bt{constructor(e){super(),kt(this,e,Lu,xu,_t,{message:1,x:13,y:14,visible:0,onEdit:2,onDelete:3,onPin:4,onReply:5,onDownload:6,onForward:7})}}function mi(s,e,t){const n=s.slice();return n[9]=e[t],n}function vi(s){let e,t,n,r,i="Forward Message",a,l,o="âœ•",u,f,p,d="Choose a channel to forward this message to:",m,g,v,A,R=Ve(s[2]),y=[];for(let E=0;E<R.length;E+=1)y[E]=bi(mi(s,R,E));return{c(){e=k("div"),t=k("div"),n=k("div"),r=k("h3"),r.textContent=i,a=M(),l=k("button"),l.textContent=o,u=M(),f=k("div"),p=k("p"),p.textContent=d,m=M(),g=k("div");for(let E=0;E<y.length;E+=1)y[E].c();this.h()},l(E){e=b(E,"DIV",{class:!0});var w=D(e);t=b(w,"DIV",{class:!0});var T=D(t);n=b(T,"DIV",{class:!0});var C=D(n);r=b(C,"H3",{class:!0,"data-svelte-h":!0}),K(r)!=="svelte-1xq5ns4"&&(r.textContent=i),a=L(C),l=b(C,"BUTTON",{class:!0,"data-svelte-h":!0}),K(l)!=="svelte-19jqbg1"&&(l.textContent=o),C.forEach(_),u=L(T),f=b(T,"DIV",{class:!0});var S=D(f);p=b(S,"P",{class:!0,"data-svelte-h":!0}),K(p)!=="svelte-alvqmp"&&(p.textContent=d),m=L(S),g=b(S,"DIV",{class:!0});var F=D(g);for(let N=0;N<y.length;N+=1)y[N].l(F);F.forEach(_),S.forEach(_),T.forEach(_),w.forEach(_),this.h()},h(){h(r,"class","svelte-feor7p"),h(l,"class","close-button svelte-feor7p"),h(n,"class","dialog-header svelte-feor7p"),h(p,"class","dialog-description svelte-feor7p"),h(g,"class","channel-list svelte-feor7p"),h(f,"class","dialog-content svelte-feor7p"),h(t,"class","dialog svelte-feor7p"),h(e,"class","dialog-overlay svelte-feor7p")},m(E,w){j(E,e,w),c(e,t),c(t,n),c(n,r),c(n,a),c(n,l),c(t,u),c(t,f),c(f,p),c(f,m),c(f,g);for(let T=0;T<y.length;T+=1)y[T]&&y[T].m(g,null);v||(A=[G(l,"click",s[5]),G(t,"click",Es(s[6])),G(e,"click",s[5])],v=!0)},p(E,w){if(w&28){R=Ve(E[2]);let T;for(T=0;T<R.length;T+=1){const C=mi(E,R,T);y[T]?y[T].p(C,w):(y[T]=bi(C),y[T].c(),y[T].m(g,null))}for(;T<y.length;T+=1)y[T].d(1);y.length=R.length}},d(E){E&&_(e),Tn(y,E),v=!1,Le(A)}}}function _i(s){let e,t,n,r,i=s[9].name+"",a,l,o,u;function f(g,v){return g[9].type==="dm"?Uu:Bu}let p=f(s),d=p(s);function m(){return s[7](s[9])}return{c(){e=k("button"),t=k("span"),d.c(),n=M(),r=k("span"),a=H(i),l=M(),this.h()},l(g){e=b(g,"BUTTON",{class:!0});var v=D(e);t=b(v,"SPAN",{class:!0});var A=D(t);d.l(A),A.forEach(_),n=L(v),r=b(v,"SPAN",{class:!0});var R=D(r);a=V(R,i),R.forEach(_),l=L(v),v.forEach(_),this.h()},h(){h(t,"class","channel-icon svelte-feor7p"),h(r,"class","channel-name svelte-feor7p"),h(e,"class","channel-item svelte-feor7p")},m(g,v){j(g,e,v),c(e,t),d.m(t,null),c(e,n),c(e,r),c(r,a),c(e,l),o||(u=G(e,"click",m),o=!0)},p(g,v){s=g,p!==(p=f(s))&&(d.d(1),d=p(s),d&&(d.c(),d.m(t,null))),v&4&&i!==(i=s[9].name+"")&&ne(a,i)},d(g){g&&_(e),d.d(),o=!1,u()}}}function Bu(s){let e;return{c(){e=H("#")},l(t){e=V(t,"#")},m(t,n){j(t,e,n)},d(t){t&&_(e)}}}function Uu(s){let e;return{c(){e=H("ðŸ’¬")},l(t){e=V(t,"ðŸ’¬")},m(t,n){j(t,e,n)},d(t){t&&_(e)}}}function bi(s){let e,t=s[9].id!==s[3]&&_i(s);return{c(){t&&t.c(),e=Fe()},l(n){t&&t.l(n),e=Fe()},m(n,r){t&&t.m(n,r),j(n,e,r)},p(n,r){n[9].id!==n[3]?t?t.p(n,r):(t=_i(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&_(e),t&&t.d(n)}}}function ju(s){let e,t=s[0]&&s[1]&&vi(s);return{c(){t&&t.c(),e=Fe()},l(n){t&&t.l(n),e=Fe()},m(n,r){t&&t.m(n,r),j(n,e,r)},p(n,[r]){n[0]&&n[1]?t?t.p(n,r):(t=vi(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ne,o:Ne,d(n){n&&_(e),t&&t.d(n)}}}function qu(s,e,t){let n,r,i;Re(s,Ls,d=>t(8,n=d)),Re(s,Qs,d=>t(2,r=d)),Re(s,Ms,d=>t(3,i=d));let{visible:a=!1}=e,{message:l=null}=e;function o(d){!l||!n||(n.emit("message",{channelId:d,text:l.text,type:l.type,gifUrl:l.gifUrl,fileUrl:l.fileUrl,fileName:l.fileName,fileSize:l.fileSize,files:l.files}),t(0,a=!1))}function u(){t(0,a=!1)}function f(d){Os.call(this,s,d)}const p=d=>o(d.id);return s.$$set=d=>{"visible"in d&&t(0,a=d.visible),"message"in d&&t(1,l=d.message)},[a,l,r,i,o,u,f,p]}class zu extends bt{constructor(e){super(),kt(this,e,qu,ju,_t,{visible:0,message:1})}}function ki(s,e,t){const n=s.slice();n[54]=e[t];const r=n[15](n[54].user);n[55]=r;const i=n[28](n[54].replyTo);return n[56]=i,n}function yi(s,e,t){const n=s.slice();return n[59]=e[t],n[61]=t,n}function wi(s){let e,t="<span>New Messages</span>";return{c(){e=k("div"),e.innerHTML=t,this.h()},l(n){e=b(n,"DIV",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-1uzyipm"&&(e.innerHTML=t),this.h()},h(){h(e,"class","new-messages-divider svelte-1hbqjje")},m(n,r){j(n,e,r)},d(n){n&&_(e)}}}function Vu(s){let e,t=s[54].user.charAt(0).toUpperCase()+"",n;return{c(){e=k("div"),n=H(t),this.h()},l(r){e=b(r,"DIV",{class:!0,style:!0});var i=D(e);n=V(i,t),i.forEach(_),this.h()},h(){h(e,"class","avatar-placeholder svelte-1hbqjje"),Me(e,"background-color",s[16](s[54].user))},m(r,i){j(r,e,i),c(e,n)},p(r,i){i[0]&1&&t!==(t=r[54].user.charAt(0).toUpperCase()+"")&&ne(n,t),i[0]&1&&Me(e,"background-color",r[16](r[54].user))},d(r){r&&_(e)}}}function Hu(s){let e,t,n;return{c(){e=k("img"),this.h()},l(r){e=b(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ue(e.src,t=s[55].profilePicture)||h(e,"src",t),h(e,"alt",n=s[54].user),h(e,"class","avatar svelte-1hbqjje")},m(r,i){j(r,e,i)},p(r,i){i[0]&1&&!Ue(e.src,t=r[55].profilePicture)&&h(e,"src",t),i[0]&1&&n!==(n=r[54].user)&&h(e,"alt",n)},d(r){r&&_(e)}}}function Gu(s){let e,t=s[54].user+"",n;return{c(){e=k("span"),n=H(t),this.h()},l(r){e=b(r,"SPAN",{class:!0});var i=D(e);n=V(i,t),i.forEach(_),this.h()},h(){h(e,"class","username svelte-1hbqjje")},m(r,i){j(r,e,i),c(e,n)},p(r,i){i[0]&1&&t!==(t=r[54].user+"")&&ne(n,t)},d(r){r&&_(e)}}}function $u(s){let e,t=s[54].user+"",n,r,i;function a(){return s[36](s[55])}return{c(){e=k("button"),n=H(t),this.h()},l(l){e=b(l,"BUTTON",{class:!0});var o=D(e);n=V(o,t),o.forEach(_),this.h()},h(){h(e,"class","username svelte-1hbqjje")},m(l,o){j(l,e,o),c(e,n),r||(i=G(e,"click",a),r=!0)},p(l,o){s=l,o[0]&1&&t!==(t=s[54].user+"")&&ne(n,t)},d(l){l&&_(e),r=!1,i()}}}function Ei(s){let e,t="ðŸ“Œ";return{c(){e=k("span"),e.textContent=t,this.h()},l(n){e=b(n,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),K(e)!=="svelte-cawwa1"&&(e.textContent=t),this.h()},h(){h(e,"class","pin-badge svelte-1hbqjje"),h(e,"title","Pinned message")},m(n,r){j(n,e,r)},d(n){n&&_(e)}}}function Ai(s){let e,t="(edited)";return{c(){e=k("span"),e.textContent=t,this.h()},l(n){e=b(n,"SPAN",{class:!0,title:!0,"data-svelte-h":!0}),K(e)!=="svelte-13y41lm"&&(e.textContent=t),this.h()},h(){h(e,"class","edited-badge svelte-1hbqjje"),h(e,"title","Edited")},m(n,r){j(n,e,r)},d(n){n&&_(e)}}}function Si(s){let e,t,n,r,i,a=s[56].user+"",l,o,u,f=s[56].text.substring(0,100)+"",p,d=s[56].text.length>100?"...":"",m;return{c(){e=k("div"),t=k("div"),n=M(),r=k("div"),i=k("span"),l=H(a),o=M(),u=k("span"),p=H(f),m=H(d),this.h()},l(g){e=b(g,"DIV",{class:!0});var v=D(e);t=b(v,"DIV",{class:!0}),D(t).forEach(_),n=L(v),r=b(v,"DIV",{class:!0});var A=D(r);i=b(A,"SPAN",{class:!0});var R=D(i);l=V(R,a),R.forEach(_),o=L(A),u=b(A,"SPAN",{class:!0});var y=D(u);p=V(y,f),m=V(y,d),y.forEach(_),A.forEach(_),v.forEach(_),this.h()},h(){h(t,"class","reply-line svelte-1hbqjje"),h(i,"class","reply-username svelte-1hbqjje"),h(u,"class","reply-text svelte-1hbqjje"),h(r,"class","reply-content svelte-1hbqjje"),h(e,"class","reply-preview svelte-1hbqjje")},m(g,v){j(g,e,v),c(e,t),c(e,n),c(e,r),c(r,i),c(i,l),c(r,o),c(r,u),c(u,p),c(u,m)},p(g,v){v[0]&1&&a!==(a=g[56].user+"")&&ne(l,a),v[0]&1&&f!==(f=g[56].text.substring(0,100)+"")&&ne(p,f),v[0]&1&&d!==(d=g[56].text.length>100?"...":"")&&ne(m,d)},d(g){g&&_(e)}}}function Wu(s){let e;function t(i,a){return i[54].type==="gif"&&i[54].gifUrl?Ku:i[54].type==="file"&&(i[54].fileUrl||i[54].files)?Xu:Zu}let n=t(s),r=n(s);return{c(){e=k("div"),r.c(),this.h()},l(i){e=b(i,"DIV",{class:!0});var a=D(e);r.l(a),a.forEach(_),this.h()},h(){h(e,"class","message-content")},m(i,a){j(i,e,a),r.m(e,null)},p(i,a){n===(n=t(i))&&r?r.p(i,a):(r.d(1),r=n(i),r&&(r.c(),r.m(e,null)))},d(i){i&&_(e),r.d()}}}function Yu(s){let e,t,n,r,i,a="Cancel",l,o,u="Save",f,p;function d(){return s[38](s[54])}return{c(){e=k("div"),t=k("textarea"),n=M(),r=k("div"),i=k("button"),i.textContent=a,l=M(),o=k("button"),o.textContent=u,this.h()},l(m){e=b(m,"DIV",{class:!0});var g=D(e);t=b(g,"TEXTAREA",{class:!0,rows:!0}),D(t).forEach(_),n=L(g),r=b(g,"DIV",{class:!0});var v=D(r);i=b(v,"BUTTON",{class:!0,"data-svelte-h":!0}),K(i)!=="svelte-1czerce"&&(i.textContent=a),l=L(v),o=b(v,"BUTTON",{class:!0,"data-svelte-h":!0}),K(o)!=="svelte-w3glyi"&&(o.textContent=u),v.forEach(_),g.forEach(_),this.h()},h(){h(t,"class","edit-textarea svelte-1hbqjje"),h(t,"rows","3"),h(i,"class","edit-cancel svelte-1hbqjje"),h(o,"class","edit-save svelte-1hbqjje"),h(r,"class","edit-actions svelte-1hbqjje"),h(e,"class","edit-mode svelte-1hbqjje")},m(m,g){j(m,e,g),c(e,t),tt(t,s[10]),c(e,n),c(e,r),c(r,i),c(r,l),c(r,o),f||(p=[G(t,"input",s[37]),G(i,"click",s[21]),G(o,"click",d)],f=!0)},p(m,g){s=m,g[0]&1024&&tt(t,s[10])},d(m){m&&_(e),f=!1,Le(p)}}}function Zu(s){let e,t,n=En(s[54].text)+"";return{c(){e=k("div"),t=new wl(!1),this.h()},l(r){e=b(r,"DIV",{class:!0});var i=D(e);t=yl(i,!1),i.forEach(_),this.h()},h(){t.a=null,h(e,"class","markdown-content svelte-1hbqjje")},m(r,i){j(r,e,i),t.m(n,e)},p(r,i){i[0]&1&&n!==(n=En(r[54].text)+"")&&t.p(n)},d(r){r&&_(e)}}}function Xu(s){let e,t;function n(l,o){if(l[54].files&&l[54].files.length>1)return Ju;if(l[54].fileUrl)return Qu}let r=n(s),i=r&&r(s),a=s[54].text&&(s[54].files?s[54].text!==`Shared ${s[54].files.length} files`:s[54].text!==`Shared: ${s[54].fileName}`)&&Ri(s);return{c(){i&&i.c(),e=M(),a&&a.c(),t=Fe()},l(l){i&&i.l(l),e=L(l),a&&a.l(l),t=Fe()},m(l,o){i&&i.m(l,o),j(l,e,o),a&&a.m(l,o),j(l,t,o)},p(l,o){r===(r=n(l))&&i?i.p(l,o):(i&&i.d(1),i=r&&r(l),i&&(i.c(),i.m(e.parentNode,e))),l[54].text&&(l[54].files?l[54].text!==`Shared ${l[54].files.length} files`:l[54].text!==`Shared: ${l[54].fileName}`)?a?a.p(l,o):(a=Ri(l),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null)},d(l){l&&(_(e),_(t)),i&&i.d(l),a&&a.d(l)}}}function Ku(s){let e,t;return{c(){e=k("img"),this.h()},l(n){e=b(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ue(e.src,t=s[54].gifUrl)||h(e,"src",t),h(e,"alt","GIF"),h(e,"class","gif svelte-1hbqjje")},m(n,r){j(n,e,r)},p(n,r){r[0]&1&&!Ue(e.src,t=n[54].gifUrl)&&h(e,"src",t)},d(n){n&&_(e)}}}function Qu(s){let e,t,n;function r(l,o){return o[0]&1&&(e=null),o[0]&1&&(t=null),e==null&&(e=!!ca(l[54].fileName)),e?sf:(t==null&&(t=!!ua(l[54].fileName)),t?tf:ef)}let i=r(s,[-1,-1]),a=i(s);return{c(){a.c(),n=Fe()},l(l){a.l(l),n=Fe()},m(l,o){a.m(l,o),j(l,n,o)},p(l,o){i===(i=r(l,o))&&a?a.p(l,o):(a.d(1),a=i(l),a&&(a.c(),a.m(n.parentNode,n)))},d(l){l&&_(n),a.d(l)}}}function Ju(s){let e,t=Ve(s[54].files.slice(0,4)),n=[];for(let r=0;r<t.length;r+=1)n[r]=Ii(yi(s,t,r));return{c(){e=k("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=b(r,"DIV",{class:!0});var i=D(e);for(let a=0;a<n.length;a+=1)n[a].l(i);i.forEach(_),this.h()},h(){h(e,"class","files-gallery svelte-1hbqjje"),Te(e,"has-more",s[54].files.length>4)},m(r,i){j(r,e,i);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null)},p(r,i){if(i[0]&536870913|i[1]&1){t=Ve(r[54].files.slice(0,4));let a;for(a=0;a<t.length;a+=1){const l=yi(r,t,a);n[a]?n[a].p(l,i):(n[a]=Ii(l),n[a].c(),n[a].m(e,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}i[0]&1&&Te(e,"has-more",r[54].files.length>4)},d(r){r&&_(e),Tn(n,r)}}}function ef(s){let e,t,n=os(s[54].fileName)+"",r,i,a,l,o=s[54].fileName+"",u,f,p,d=as(s[54].fileSize)+"",m,g,v;return{c(){e=k("a"),t=k("span"),r=H(n),i=M(),a=k("div"),l=k("span"),u=H(o),f=M(),p=k("span"),m=H(d),this.h()},l(A){e=b(A,"A",{href:!0,download:!0,class:!0});var R=D(e);t=b(R,"SPAN",{class:!0});var y=D(t);r=V(y,n),y.forEach(_),i=L(R),a=b(R,"DIV",{class:!0});var E=D(a);l=b(E,"SPAN",{class:!0});var w=D(l);u=V(w,o),w.forEach(_),f=L(E),p=b(E,"SPAN",{class:!0});var T=D(p);m=V(T,d),T.forEach(_),E.forEach(_),R.forEach(_),this.h()},h(){h(t,"class","file-icon svelte-1hbqjje"),h(l,"class","file-name svelte-1hbqjje"),h(p,"class","file-size svelte-1hbqjje"),h(a,"class","file-info svelte-1hbqjje"),h(e,"href",g=$e(s[54].fileUrl)),h(e,"download",v=s[54].fileName),h(e,"class","file-attachment svelte-1hbqjje")},m(A,R){j(A,e,R),c(e,t),c(t,r),c(e,i),c(e,a),c(a,l),c(l,u),c(a,f),c(a,p),c(p,m)},p(A,R){R[0]&1&&n!==(n=os(A[54].fileName)+"")&&ne(r,n),R[0]&1&&o!==(o=A[54].fileName+"")&&ne(u,o),R[0]&1&&d!==(d=as(A[54].fileSize)+"")&&ne(m,d),R[0]&1&&g!==(g=$e(A[54].fileUrl))&&h(e,"href",g),R[0]&1&&v!==(v=A[54].fileName)&&h(e,"download",v)},d(A){A&&_(e)}}}function tf(s){let e,t,n,r,i,a,l,o,u,f=os(s[54].fileName)+"",p,d,m=s[54].fileName+"",g,v,A,R,y=as(s[54].fileSize)+"",E,w,T,C,S,F;function N(...I){return s[43](s[54],...I)}function O(...I){return s[44](s[54],...I)}return{c(){e=k("div"),t=k("video"),n=k("source"),a=H(`\r
									Your browser does not support the video tag.`),l=M(),o=k("a"),u=k("span"),p=H(f),d=M(),g=H(m),v=M(),A=k("span"),R=H("("),E=H(y),w=H(")"),this.h()},l(I){e=b(I,"DIV",{class:!0});var P=D(e);t=b(P,"VIDEO",{class:!0,title:!0});var B=D(t);n=b(B,"SOURCE",{src:!0,type:!0}),a=V(B,`\r
									Your browser does not support the video tag.`),B.forEach(_),l=L(P),o=b(P,"A",{href:!0,download:!0,class:!0});var U=D(o);u=b(U,"SPAN",{class:!0});var $=D(u);p=V($,f),$.forEach(_),d=L(U),g=V(U,m),v=L(U),A=b(U,"SPAN",{class:!0});var X=D(A);R=V(X,"("),E=V(X,y),w=V(X,")"),X.forEach(_),U.forEach(_),P.forEach(_),this.h()},h(){var I;Ue(n.src,r=$e(s[54].fileUrl))||h(n,"src",r),h(n,"type",i="video/"+((I=s[54].fileName)==null?void 0:I.split(".").pop())),t.controls=!0,h(t,"class","inline-video svelte-1hbqjje"),h(t,"title","Click to enlarge, right-click for options"),h(u,"class","file-icon svelte-1hbqjje"),h(A,"class","file-size svelte-1hbqjje"),h(o,"href",T=$e(s[54].fileUrl)),h(o,"download",C=s[54].fileName),h(o,"class","video-download-link svelte-1hbqjje"),h(e,"class","video-container svelte-1hbqjje")},m(I,P){j(I,e,P),c(e,t),c(t,n),c(t,a),c(e,l),c(e,o),c(o,u),c(u,p),c(o,d),c(o,g),c(o,v),c(o,A),c(A,R),c(A,E),c(A,w),S||(F=[G(t,"click",N),G(t,"contextmenu",O)],S=!0)},p(I,P){var B;s=I,P[0]&1&&!Ue(n.src,r=$e(s[54].fileUrl))&&h(n,"src",r),P[0]&1&&i!==(i="video/"+((B=s[54].fileName)==null?void 0:B.split(".").pop()))&&h(n,"type",i),P[0]&1&&f!==(f=os(s[54].fileName)+"")&&ne(p,f),P[0]&1&&m!==(m=s[54].fileName+"")&&ne(g,m),P[0]&1&&y!==(y=as(s[54].fileSize)+"")&&ne(E,y),P[0]&1&&T!==(T=$e(s[54].fileUrl))&&h(o,"href",T),P[0]&1&&C!==(C=s[54].fileName)&&h(o,"download",C)},d(I){I&&_(e),S=!1,Le(F)}}}function sf(s){let e,t,n,r,i,a,l,o=os(s[54].fileName)+"",u,f,p=s[54].fileName+"",d,m,g,v,A=as(s[54].fileSize)+"",R,y,E,w,T,C;function S(...N){return s[41](s[54],...N)}function F(...N){return s[42](s[54],...N)}return{c(){e=k("div"),t=k("img"),i=M(),a=k("a"),l=k("span"),u=H(o),f=M(),d=H(p),m=M(),g=k("span"),v=H("("),R=H(A),y=H(")"),this.h()},l(N){e=b(N,"DIV",{class:!0});var O=D(e);t=b(O,"IMG",{src:!0,alt:!0,class:!0,title:!0}),i=L(O),a=b(O,"A",{href:!0,download:!0,class:!0});var I=D(a);l=b(I,"SPAN",{class:!0});var P=D(l);u=V(P,o),P.forEach(_),f=L(I),d=V(I,p),m=L(I),g=b(I,"SPAN",{class:!0});var B=D(g);v=V(B,"("),R=V(B,A),y=V(B,")"),B.forEach(_),I.forEach(_),O.forEach(_),this.h()},h(){Ue(t.src,n=$e(s[54].fileUrl))||h(t,"src",n),h(t,"alt",r=s[54].fileName),h(t,"class","inline-image svelte-1hbqjje"),h(t,"title","Click to enlarge, right-click for options"),h(l,"class","file-icon svelte-1hbqjje"),h(g,"class","file-size svelte-1hbqjje"),h(a,"href",E=$e(s[54].fileUrl)),h(a,"download",w=s[54].fileName),h(a,"class","image-download-link svelte-1hbqjje"),h(e,"class","image-container svelte-1hbqjje")},m(N,O){j(N,e,O),c(e,t),c(e,i),c(e,a),c(a,l),c(l,u),c(a,f),c(a,d),c(a,m),c(a,g),c(g,v),c(g,R),c(g,y),T||(C=[G(t,"click",S),G(t,"contextmenu",F)],T=!0)},p(N,O){s=N,O[0]&1&&!Ue(t.src,n=$e(s[54].fileUrl))&&h(t,"src",n),O[0]&1&&r!==(r=s[54].fileName)&&h(t,"alt",r),O[0]&1&&o!==(o=os(s[54].fileName)+"")&&ne(u,o),O[0]&1&&p!==(p=s[54].fileName+"")&&ne(d,p),O[0]&1&&A!==(A=as(s[54].fileSize)+"")&&ne(R,A),O[0]&1&&E!==(E=$e(s[54].fileUrl))&&h(a,"href",E),O[0]&1&&w!==(w=s[54].fileName)&&h(a,"download",w)},d(N){N&&_(e),T=!1,Le(C)}}}function nf(s){let e,t,n=os(s[59].fileName)+"",r,i,a,l,o=s[59].fileName+"",u,f,p,d,m=as(s[59].fileSize)+"",g,v,A,R,y;return{c(){e=k("a"),t=k("div"),r=H(n),i=M(),a=k("div"),l=k("span"),u=H(o),f=M(),p=k("span"),d=H("("),g=H(m),v=H(")"),A=M(),this.h()},l(E){e=b(E,"A",{href:!0,download:!0,class:!0});var w=D(e);t=b(w,"DIV",{class:!0});var T=D(t);r=V(T,n),T.forEach(_),i=L(w),a=b(w,"DIV",{class:!0});var C=D(a);l=b(C,"SPAN",{class:!0});var S=D(l);u=V(S,o),S.forEach(_),f=L(C),p=b(C,"SPAN",{class:!0});var F=D(p);d=V(F,"("),g=V(F,m),v=V(F,")"),F.forEach(_),C.forEach(_),A=L(w),w.forEach(_),this.h()},h(){h(t,"class","gallery-file-icon-large svelte-1hbqjje"),h(l,"class","file-name-truncate svelte-1hbqjje"),h(p,"class","file-size-small svelte-1hbqjje"),h(a,"class","gallery-file-overlay svelte-1hbqjje"),h(e,"href",R=$e(s[59].fileUrl)),h(e,"download",y=s[59].fileName),h(e,"class","gallery-file-item file-link svelte-1hbqjje")},m(E,w){j(E,e,w),c(e,t),c(t,r),c(e,i),c(e,a),c(a,l),c(l,u),c(a,f),c(a,p),c(p,d),c(p,g),c(p,v),c(e,A)},p(E,w){w[0]&1&&n!==(n=os(E[59].fileName)+"")&&ne(r,n),w[0]&1&&o!==(o=E[59].fileName+"")&&ne(u,o),w[0]&1&&m!==(m=as(E[59].fileSize)+"")&&ne(g,m),w[0]&1&&R!==(R=$e(E[59].fileUrl))&&h(e,"href",R),w[0]&1&&y!==(y=E[59].fileName)&&h(e,"download",y)},d(E){E&&_(e)}}}function rf(s){let e,t,n,r,i,a,l,o;function u(...p){return s[40](s[59],...p)}let f=s[61]===3&&s[54].files.length>4&&Ti(s);return{c(){e=k("div"),t=k("video"),n=k("source"),i=M(),f&&f.c(),a=M(),this.h()},l(p){e=b(p,"DIV",{class:!0});var d=D(e);t=b(d,"VIDEO",{class:!0,title:!0});var m=D(t);n=b(m,"SOURCE",{src:!0}),m.forEach(_),i=L(d),f&&f.l(d),a=L(d),d.forEach(_),this.h()},h(){Ue(n.src,r=$e(s[59].fileUrl))||h(n,"src",r),h(t,"class","gallery-file-video svelte-1hbqjje"),h(t,"title","Click to enlarge"),h(e,"class","gallery-file-item svelte-1hbqjje"),Te(e,"last-item",s[61]===3&&s[54].files.length>4)},m(p,d){j(p,e,d),c(e,t),c(t,n),c(e,i),f&&f.m(e,null),c(e,a),l||(o=G(t,"click",u),l=!0)},p(p,d){s=p,d[0]&1&&!Ue(n.src,r=$e(s[59].fileUrl))&&h(n,"src",r),s[61]===3&&s[54].files.length>4?f?f.p(s,d):(f=Ti(s),f.c(),f.m(e,a)):f&&(f.d(1),f=null),d[0]&1&&Te(e,"last-item",s[61]===3&&s[54].files.length>4)},d(p){p&&_(e),f&&f.d(),l=!1,o()}}}function lf(s){let e,t,n,r,i,a,l,o;function u(...p){return s[39](s[59],...p)}let f=s[61]===3&&s[54].files.length>4&&Ci(s);return{c(){e=k("div"),t=k("img"),i=M(),f&&f.c(),a=M(),this.h()},l(p){e=b(p,"DIV",{class:!0});var d=D(e);t=b(d,"IMG",{src:!0,alt:!0,class:!0,title:!0}),i=L(d),f&&f.l(d),a=L(d),d.forEach(_),this.h()},h(){Ue(t.src,n=$e(s[59].fileUrl))||h(t,"src",n),h(t,"alt",r=s[59].fileName),h(t,"class","gallery-file-image svelte-1hbqjje"),h(t,"title","Click to enlarge"),h(e,"class","gallery-file-item svelte-1hbqjje"),Te(e,"last-item",s[61]===3&&s[54].files.length>4)},m(p,d){j(p,e,d),c(e,t),c(e,i),f&&f.m(e,null),c(e,a),l||(o=G(t,"click",u),l=!0)},p(p,d){s=p,d[0]&1&&!Ue(t.src,n=$e(s[59].fileUrl))&&h(t,"src",n),d[0]&1&&r!==(r=s[59].fileName)&&h(t,"alt",r),s[61]===3&&s[54].files.length>4?f?f.p(s,d):(f=Ci(s),f.c(),f.m(e,a)):f&&(f.d(1),f=null),d[0]&1&&Te(e,"last-item",s[61]===3&&s[54].files.length>4)},d(p){p&&_(e),f&&f.d(),l=!1,o()}}}function Ti(s){let e,t,n,r=s[54].files.length-4+"",i;return{c(){e=k("div"),t=k("span"),n=H("+"),i=H(r),this.h()},l(a){e=b(a,"DIV",{class:!0});var l=D(e);t=b(l,"SPAN",{class:!0});var o=D(t);n=V(o,"+"),i=V(o,r),o.forEach(_),l.forEach(_),this.h()},h(){h(t,"class","more-count svelte-1hbqjje"),h(e,"class","more-overlay svelte-1hbqjje")},m(a,l){j(a,e,l),c(e,t),c(t,n),c(t,i)},p(a,l){l[0]&1&&r!==(r=a[54].files.length-4+"")&&ne(i,r)},d(a){a&&_(e)}}}function Ci(s){let e,t,n,r=s[54].files.length-4+"",i;return{c(){e=k("div"),t=k("span"),n=H("+"),i=H(r),this.h()},l(a){e=b(a,"DIV",{class:!0});var l=D(e);t=b(l,"SPAN",{class:!0});var o=D(t);n=V(o,"+"),i=V(o,r),o.forEach(_),l.forEach(_),this.h()},h(){h(t,"class","more-count svelte-1hbqjje"),h(e,"class","more-overlay svelte-1hbqjje")},m(a,l){j(a,e,l),c(e,t),c(t,n),c(t,i)},p(a,l){l[0]&1&&r!==(r=a[54].files.length-4+"")&&ne(i,r)},d(a){a&&_(e)}}}function Ii(s){let e,t,n;function r(l,o){return o[0]&1&&(e=null),o[0]&1&&(t=null),e==null&&(e=!!ca(l[59].fileName)),e?lf:(t==null&&(t=!!ua(l[59].fileName)),t?rf:nf)}let i=r(s,[-1,-1]),a=i(s);return{c(){a.c(),n=Fe()},l(l){a.l(l),n=Fe()},m(l,o){a.m(l,o),j(l,n,o)},p(l,o){i===(i=r(l,o))&&a?a.p(l,o):(a.d(1),a=i(l),a&&(a.c(),a.m(n.parentNode,n)))},d(l){l&&_(n),a.d(l)}}}function Ri(s){let e,t,n=En(s[54].text)+"";return{c(){e=k("div"),t=new wl(!1),this.h()},l(r){e=b(r,"DIV",{class:!0});var i=D(e);t=yl(i,!1),i.forEach(_),this.h()},h(){t.a=null,h(e,"class","markdown-content svelte-1hbqjje")},m(r,i){j(r,e,i),t.m(n,e)},p(r,i){i[0]&1&&n!==(n=En(r[54].text)+"")&&t.p(n)},d(r){r&&_(e)}}}function Di(s,e){let t,n,r,i,a,l,o,u,f,p,d,m,g=Fi(e[54].timestamp)+"",v,A,R,y,E,w,T=e[1]===e[54].id&&wi();function C(q,z){var W;return(W=q[55])!=null&&W.profilePicture?Hu:Vu}let S=C(e),F=S(e);function N(q,z){return q[55]?$u:Gu}let O=N(e),I=O(e),P=e[54].isPinned&&Ei(),B=e[54].isEdited&&Ai(),U=e[56]&&Si(e);function $(q,z){return q[9]===q[54].id?Yu:Wu}let X=$(e),Q=X(e);function te(...q){return e[45](e[54],...q)}return{key:s,first:null,c(){t=Fe(),T&&T.c(),n=M(),r=k("div"),i=k("div"),F.c(),a=M(),l=k("div"),o=k("div"),u=k("div"),I.c(),f=M(),P&&P.c(),p=M(),B&&B.c(),d=M(),m=k("span"),v=H(g),A=M(),U&&U.c(),R=M(),Q.c(),this.h()},l(q){t=Fe(),T&&T.l(q),n=L(q),r=b(q,"DIV",{class:!0});var z=D(r);i=b(z,"DIV",{class:!0});var W=D(i);F.l(W),W.forEach(_),a=L(z),l=b(z,"DIV",{class:!0});var Y=D(l);o=b(Y,"DIV",{class:!0});var ie=D(o);u=b(ie,"DIV",{class:!0});var he=D(u);I.l(he),f=L(he),P&&P.l(he),p=L(he),B&&B.l(he),he.forEach(_),d=L(ie),m=b(ie,"SPAN",{class:!0});var re=D(m);v=V(re,g),re.forEach(_),ie.forEach(_),A=L(Y),U&&U.l(Y),R=L(Y),Q.l(Y),Y.forEach(_),z.forEach(_),this.h()},h(){h(i,"class","message-avatar svelte-1hbqjje"),h(u,"class","header-left svelte-1hbqjje"),h(m,"class","timestamp svelte-1hbqjje"),h(o,"class","message-header svelte-1hbqjje"),h(l,"class","message-body svelte-1hbqjje"),h(r,"class",y="message "+(e[54].isPinned?"pinned":"")+" svelte-1hbqjje"),this.first=t},m(q,z){j(q,t,z),T&&T.m(q,z),j(q,n,z),j(q,r,z),c(r,i),F.m(i,null),c(r,a),c(r,l),c(l,o),c(o,u),I.m(u,null),c(u,f),P&&P.m(u,null),c(u,p),B&&B.m(u,null),c(o,d),c(o,m),c(m,v),c(l,A),U&&U.m(l,null),c(l,R),Q.m(l,null),E||(w=G(r,"contextmenu",te),E=!0)},p(q,z){e=q,e[1]===e[54].id?T||(T=wi(),T.c(),T.m(n.parentNode,n)):T&&(T.d(1),T=null),S===(S=C(e))&&F?F.p(e,z):(F.d(1),F=S(e),F&&(F.c(),F.m(i,null))),O===(O=N(e))&&I?I.p(e,z):(I.d(1),I=O(e),I&&(I.c(),I.m(u,f))),e[54].isPinned?P||(P=Ei(),P.c(),P.m(u,p)):P&&(P.d(1),P=null),e[54].isEdited?B||(B=Ai(),B.c(),B.m(u,null)):B&&(B.d(1),B=null),z[0]&1&&g!==(g=Fi(e[54].timestamp)+"")&&ne(v,g),e[56]?U?U.p(e,z):(U=Si(e),U.c(),U.m(l,R)):U&&(U.d(1),U=null),X===(X=$(e))&&Q?Q.p(e,z):(Q.d(1),Q=X(e),Q&&(Q.c(),Q.m(l,null))),z[0]&1&&y!==(y="message "+(e[54].isPinned?"pinned":"")+" svelte-1hbqjje")&&h(r,"class",y)},d(q){q&&(_(t),_(n),_(r)),T&&T.d(q),F.d(),I.d(),P&&P.d(),B&&B.d(),U&&U.d(),Q.d(),E=!1,w()}}}function Oi(s){let e,t,n;function r(a){s[48](a)}let i={message:s[8],x:s[6],y:s[7],onEdit:s[19],onDelete:s[22],onPin:s[23],onReply:s[24],onDownload:s[25],onForward:s[26]};return s[5]!==void 0&&(i.visible=s[5]),e=new Mu({props:i}),ot.push(()=>Zt(e,"visible",r)),{c(){gt(e.$$.fragment)},l(a){pt(e.$$.fragment,a)},m(a,l){dt(e,a,l),n=!0},p(a,l){const o={};l[0]&256&&(o.message=a[8]),l[0]&64&&(o.x=a[6]),l[0]&128&&(o.y=a[7]),!t&&l[0]&32&&(t=!0,o.visible=a[5],Yt(()=>t=!1)),e.$set(o)},i(a){n||(Ce(e.$$.fragment,a),n=!0)},o(a){xe(e.$$.fragment,a),n=!1},d(a){ht(e,a)}}}function Ni(s){let e,t,n,r,i,a="âœ•",l,o,u,f,p;return{c(){e=k("div"),t=k("img"),r=M(),i=k("button"),i.textContent=a,l=M(),o=k("a"),u=H("Open in new tab"),this.h()},l(d){e=b(d,"DIV",{class:!0});var m=D(e);t=b(m,"IMG",{src:!0,alt:!0,class:!0}),r=L(m),i=b(m,"BUTTON",{class:!0,"data-svelte-h":!0}),K(i)!=="svelte-cyanf1"&&(i.textContent=a),l=L(m),o=b(m,"A",{href:!0,target:!0,rel:!0,class:!0});var g=D(o);u=V(g,"Open in new tab"),g.forEach(_),m.forEach(_),this.h()},h(){Ue(t.src,n=s[13])||h(t,"src",n),h(t,"alt","Enlarged"),h(t,"class","enlarged-image svelte-1hbqjje"),h(i,"class","close-modal svelte-1hbqjje"),h(o,"href",s[13]),h(o,"target","_blank"),h(o,"rel","noopener noreferrer"),h(o,"class","open-new-tab svelte-1hbqjje"),h(e,"class","image-modal svelte-1hbqjje")},m(d,m){j(d,e,m),c(e,t),c(e,r),c(e,i),c(e,l),c(e,o),c(o,u),f||(p=[G(t,"click",Es(s[35])),G(i,"click",s[30]),G(e,"click",s[30])],f=!0)},p(d,m){m[0]&8192&&!Ue(t.src,n=d[13])&&h(t,"src",n),m[0]&8192&&h(o,"href",d[13])},d(d){d&&_(e),f=!1,Le(p)}}}function Pi(s){let e,t,n,r,i,a,l,o="âœ•",u,f,p,d,m;return{c(){e=k("div"),t=k("video"),n=k("source"),i=H(`\r
			Your browser does not support the video tag.`),a=M(),l=k("button"),l.textContent=o,u=M(),f=k("a"),p=H("Open in new tab"),this.h()},l(g){e=b(g,"DIV",{class:!0});var v=D(e);t=b(v,"VIDEO",{class:!0});var A=D(t);n=b(A,"SOURCE",{src:!0}),i=V(A,`\r
			Your browser does not support the video tag.`),A.forEach(_),a=L(v),l=b(v,"BUTTON",{class:!0,"data-svelte-h":!0}),K(l)!=="svelte-yc21b"&&(l.textContent=o),u=L(v),f=b(v,"A",{href:!0,target:!0,rel:!0,class:!0});var R=D(f);p=V(R,"Open in new tab"),R.forEach(_),v.forEach(_),this.h()},h(){Ue(n.src,r=s[14])||h(n,"src",r),t.controls=!0,t.autoplay=!0,h(t,"class","enlarged-video svelte-1hbqjje"),h(l,"class","close-modal svelte-1hbqjje"),h(f,"href",s[14]),h(f,"target","_blank"),h(f,"rel","noopener noreferrer"),h(f,"class","open-new-tab svelte-1hbqjje"),h(e,"class","video-modal svelte-1hbqjje")},m(g,v){j(g,e,v),c(e,t),c(t,n),c(t,i),c(e,a),c(e,l),c(e,u),c(e,f),c(f,p),d||(m=[G(t,"click",Es(s[34])),G(l,"click",s[32]),G(e,"click",s[32])],d=!0)},p(g,v){v[0]&16384&&!Ue(n.src,r=g[14])&&h(n,"src",r),v[0]&16384&&h(f,"href",g[14])},d(g){g&&_(e),d=!1,Le(m)}}}function af(s){let e=[],t=new Map,n,r,i,a,l,o,u,f,p,d,m,g,v,A=Ve(s[0]);const R=I=>I[54].id;for(let I=0;I<A.length;I+=1){let P=ki(s,A,I),B=R(P);t.set(B,e[I]=Di(B,P))}function y(I){s[46](I)}function E(I){s[47](I)}let w={isOwnProfile:s[4]};s[2]!==void 0&&(w.isOpen=s[2]),s[3]!==void 0&&(w.user=s[3]),r=new oa({props:w}),ot.push(()=>Zt(r,"isOpen",y)),ot.push(()=>Zt(r,"user",E));let T=s[8]&&Oi(s);function C(I){s[49](I)}function S(I){s[50](I)}let F={};s[11]!==void 0&&(F.visible=s[11]),s[12]!==void 0&&(F.message=s[12]),u=new zu({props:F}),ot.push(()=>Zt(u,"visible",C)),ot.push(()=>Zt(u,"message",S));let N=s[13]&&Ni(s),O=s[14]&&Pi(s);return{c(){for(let I=0;I<e.length;I+=1)e[I].c();n=M(),gt(r.$$.fragment),l=M(),T&&T.c(),o=M(),gt(u.$$.fragment),d=M(),N&&N.c(),m=M(),O&&O.c(),g=Fe()},l(I){for(let P=0;P<e.length;P+=1)e[P].l(I);n=L(I),pt(r.$$.fragment,I),l=L(I),T&&T.l(I),o=L(I),pt(u.$$.fragment,I),d=L(I),N&&N.l(I),m=L(I),O&&O.l(I),g=Fe()},m(I,P){for(let B=0;B<e.length;B+=1)e[B]&&e[B].m(I,P);j(I,n,P),dt(r,I,P),j(I,l,P),T&&T.m(I,P),j(I,o,P),dt(u,I,P),j(I,d,P),N&&N.m(I,P),j(I,m,P),O&&O.m(I,P),j(I,g,P),v=!0},p(I,P){P[0]&943162883|P[1]&1&&(A=Ve(I[0]),e=Ss(e,P,R,1,I,A,t,n.parentNode,As,Di,n,ki));const B={};P[0]&16&&(B.isOwnProfile=I[4]),!i&&P[0]&4&&(i=!0,B.isOpen=I[2],Yt(()=>i=!1)),!a&&P[0]&8&&(a=!0,B.user=I[3],Yt(()=>a=!1)),r.$set(B),I[8]?T?(T.p(I,P),P[0]&256&&Ce(T,1)):(T=Oi(I),T.c(),Ce(T,1),T.m(o.parentNode,o)):T&&(Ns(),xe(T,1,1,()=>{T=null}),Ps());const U={};!f&&P[0]&2048&&(f=!0,U.visible=I[11],Yt(()=>f=!1)),!p&&P[0]&4096&&(p=!0,U.message=I[12],Yt(()=>p=!1)),u.$set(U),I[13]?N?N.p(I,P):(N=Ni(I),N.c(),N.m(m.parentNode,m)):N&&(N.d(1),N=null),I[14]?O?O.p(I,P):(O=Pi(I),O.c(),O.m(g.parentNode,g)):O&&(O.d(1),O=null)},i(I){v||(Ce(r.$$.fragment,I),Ce(T),Ce(u.$$.fragment,I),v=!0)},o(I){xe(r.$$.fragment,I),xe(T),xe(u.$$.fragment,I),v=!1},d(I){I&&(_(n),_(l),_(o),_(d),_(m),_(g));for(let P=0;P<e.length;P+=1)e[P].d(I);ht(r,I),T&&T.d(I),ht(u,I),N&&N.d(I),O&&O.d(I)}}}function Fi(s){return new Date(s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}function as(s){return s?s<1024?s+" B":s<1024*1024?(s/1024).toFixed(1)+" KB":(s/(1024*1024)).toFixed(1)+" MB":""}function $e(s){return s?s.startsWith("data:")||s.startsWith("http:")||s.startsWith("https:")?s:`${window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin}${s}`:""}function os(s){if(!s)return"ðŸ“Ž";const e=s.toLowerCase().split(".").pop()||"";return{jpg:"ðŸ–¼ï¸",jpeg:"ðŸ–¼ï¸",png:"ðŸ–¼ï¸",gif:"ðŸ–¼ï¸",bmp:"ðŸ–¼ï¸",svg:"ðŸ–¼ï¸",webp:"ðŸ–¼ï¸",mp4:"ðŸŽ¬",mov:"ðŸŽ¬",avi:"ðŸŽ¬",mkv:"ðŸŽ¬",webm:"ðŸŽ¬",flv:"ðŸŽ¬",mp3:"ðŸŽµ",wav:"ðŸŽµ",ogg:"ðŸŽµ",flac:"ðŸŽµ",pdf:"ðŸ“„",doc:"ðŸ“",docx:"ðŸ“",txt:"ðŸ“",rtf:"ðŸ“",xls:"ðŸ“Š",xlsx:"ðŸ“Š",csv:"ðŸ“Š",ppt:"ðŸ“½ï¸",pptx:"ðŸ“½ï¸",zip:"ðŸ“¦",rar:"ðŸ“¦","7z":"ðŸ“¦",tar:"ðŸ“¦",gz:"ðŸ“¦",js:"ðŸ’»",ts:"ðŸ’»",py:"ðŸ’»",java:"ðŸ’»",cpp:"ðŸ’»",c:"ðŸ’»",cs:"ðŸ’»",html:"ðŸ’»",css:"ðŸ’»",json:"ðŸ’»",blend:"ðŸŽ¨",fbx:"ðŸŽ¨",obj:"ðŸŽ¨",stl:"ðŸŽ¨",psd:"ðŸŽ¨",ai:"ðŸŽ¨",sketch:"ðŸŽ¨"}[e]||"ðŸ“Ž"}function ca(s){if(!s)return!1;const e=s.toLowerCase().split(".").pop()||"";return["jpg","jpeg","png","gif","bmp","svg","webp"].includes(e)}function ua(s){if(!s)return!1;const e=s.toLowerCase().split(".").pop()||"";return["mp4","mov","avi","mkv","webm","flv"].includes(e)}function xi(){document.querySelectorAll('.spoiler[data-spoiler="true"]').forEach(e=>{e.hasAttribute("data-listener-attached")||(e.addEventListener("click",function(){this.classList.toggle("revealed")}),e.setAttribute("data-listener-attached","true"))})}function of(s,e,t){let n,r,i;Re(s,Ms,ee=>t(51,n=ee)),Re(s,ys,ee=>t(52,r=ee)),Re(s,ns,ee=>t(53,i=ee));let{messages:a}=e,{onReply:l=()=>{}}=e,{firstUnreadMessageId:o=null}=e,u=!1,f=null,p=!1,d=!1,m=0,g=0,v=null,A=null,R="";function y(ee){return i.find(ve=>ve.username===ee)}function E(ee){const ve=y(ee);return(ve==null?void 0:ve.color)||"#6b7280"}function w(ee){t(3,f=ee),t(4,p=ee.id===(r==null?void 0:r.id)),t(2,u=!0)}function T(ee,ve){ee.preventDefault(),t(8,v=ve),t(6,m=ee.clientX),t(7,g=ee.clientY),t(5,d=!0)}function C(){v&&(t(9,A=v.id),t(10,R=v.text),t(5,d=!1))}function S(ee){R.trim()&&sa(n,ee,R.trim()),t(9,A=null),t(10,R="")}function F(){t(9,A=null),t(10,R="")}function N(){v&&(confirm("Are you sure you want to delete this message?")&&Bc(n,v.id),t(5,d=!1))}function O(){v&&(na(n,v.id),t(5,d=!1))}function I(){v&&(l(v),t(5,d=!1))}async function P(){if(!(!(v!=null&&v.fileUrl)||!(v!=null&&v.fileName))){try{const ee=$e(v.fileUrl),He=await(await fetch(ee)).blob(),Ge=window.URL.createObjectURL(He),Ke=document.createElement("a");Ke.href=Ge,Ke.download=v.fileName,document.body.appendChild(Ke),Ke.click(),document.body.removeChild(Ke),window.URL.revokeObjectURL(Ge)}catch(ee){console.error("Download failed:",ee)}t(5,d=!1)}}let B=!1,U=null;function $(){v&&(t(12,U=v),t(11,B=!0),t(5,d=!1))}function X(ee,ve){ee.preventDefault(),t(8,v=ve),t(6,m=ee.clientX),t(7,g=ee.clientY),t(5,d=!0)}function Q(ee){if(ee)return a.find(ve=>ve.id===ee)}let te=null,q=null;function z(ee){t(13,te=ee)}function W(){t(13,te=null)}function Y(ee){t(14,q=ee)}function ie(){t(14,q=null)}ws(xi),va(xi);function he(ee){Os.call(this,s,ee)}function re(ee){Os.call(this,s,ee)}const ge=ee=>w(ee);function de(){R=this.value,t(10,R)}const se=ee=>S(ee.id),Z=(ee,ve)=>ve.button===0&&z($e(ee.fileUrl)),ue=(ee,ve)=>ve.button===0&&Y($e(ee.fileUrl)),fe=(ee,ve)=>ve.button===0&&ee.fileUrl&&z($e(ee.fileUrl)),me=(ee,ve)=>X(ve,ee),ce=(ee,ve)=>{ve.button===0&&ee.fileUrl&&Y($e(ee.fileUrl))},ke=(ee,ve)=>X(ve,ee),Ae=(ee,ve)=>T(ve,ee);function Se(ee){u=ee,t(2,u)}function Ze(ee){f=ee,t(3,f)}function Oe(ee){d=ee,t(5,d)}function Pe(ee){B=ee,t(11,B)}function Xe(ee){U=ee,t(12,U)}return s.$$set=ee=>{"messages"in ee&&t(0,a=ee.messages),"onReply"in ee&&t(33,l=ee.onReply),"firstUnreadMessageId"in ee&&t(1,o=ee.firstUnreadMessageId)},[a,o,u,f,p,d,m,g,v,A,R,B,U,te,q,y,E,w,T,C,S,F,N,O,I,P,$,X,Q,z,W,Y,ie,l,he,re,ge,de,se,Z,ue,fe,me,ce,ke,Ae,Se,Ze,Oe,Pe,Xe]}class cf extends bt{constructor(e){super(),kt(this,e,of,af,_t,{messages:0,onReply:33,firstUnreadMessageId:1},null,[-1,-1])}}function Li(s,e,t){const n=s.slice();return n[6]=e[t],n}function Mi(s){let e,t,n,r="ðŸ“Œ",i,a,l="Pinned Messages",o,u,f,p=s[0].length+"",d,m,g,v,A=[],R=new Map,y=Ve(s[0]);const E=w=>w[6].id;for(let w=0;w<y.length;w+=1){let T=Li(s,y,w),C=E(T);R.set(C,A[w]=Bi(C,T))}return{c(){e=k("div"),t=k("div"),n=k("span"),n.textContent=r,i=M(),a=k("span"),a.textContent=l,o=M(),u=k("span"),f=H("("),d=H(p),m=H(")"),g=M(),v=k("div");for(let w=0;w<A.length;w+=1)A[w].c();this.h()},l(w){e=b(w,"DIV",{class:!0});var T=D(e);t=b(T,"DIV",{class:!0});var C=D(t);n=b(C,"SPAN",{class:!0,"data-svelte-h":!0}),K(n)!=="svelte-73xtmc"&&(n.textContent=r),i=L(C),a=b(C,"SPAN",{class:!0,"data-svelte-h":!0}),K(a)!=="svelte-123zvdk"&&(a.textContent=l),o=L(C),u=b(C,"SPAN",{class:!0});var S=D(u);f=V(S,"("),d=V(S,p),m=V(S,")"),S.forEach(_),C.forEach(_),g=L(T),v=b(T,"DIV",{class:!0});var F=D(v);for(let N=0;N<A.length;N+=1)A[N].l(F);F.forEach(_),T.forEach(_),this.h()},h(){h(n,"class","pinned-icon svelte-1ivhp56"),h(a,"class","pinned-title svelte-1ivhp56"),h(u,"class","pinned-count svelte-1ivhp56"),h(t,"class","pinned-header svelte-1ivhp56"),h(v,"class","pinned-messages svelte-1ivhp56"),h(e,"class","pinned-container svelte-1ivhp56")},m(w,T){j(w,e,T),c(e,t),c(t,n),c(t,i),c(t,a),c(t,o),c(t,u),c(u,f),c(u,d),c(u,m),c(e,g),c(e,v);for(let C=0;C<A.length;C+=1)A[C]&&A[C].m(v,null)},p(w,T){T&1&&p!==(p=w[0].length+"")&&ne(d,p),T&7&&(y=Ve(w[0]),A=Ss(A,T,E,1,w,y,R,v,As,Bi,null,Li))},d(w){w&&_(e);for(let T=0;T<A.length;T+=1)A[T].d()}}}function Bi(s,e){let t,n,r,i=e[6].user+"",a,l,o,u=e[6].text.substring(0,100)+"",f,p=e[6].text.length>100?"...":"",d,m,g,v=Ui(e[6].timestamp)+"",A,R,y,E="Ã—",w,T,C;function S(){return e[3](e[6])}return{key:s,first:null,c(){t=k("div"),n=k("div"),r=k("span"),a=H(i),l=M(),o=k("span"),f=H(u),d=H(p),m=M(),g=k("span"),A=H(v),R=M(),y=k("button"),y.textContent=E,w=M(),this.h()},l(F){t=b(F,"DIV",{class:!0});var N=D(t);n=b(N,"DIV",{class:!0});var O=D(n);r=b(O,"SPAN",{class:!0,style:!0});var I=D(r);a=V(I,i),I.forEach(_),l=L(O),o=b(O,"SPAN",{class:!0});var P=D(o);f=V(P,u),d=V(P,p),P.forEach(_),m=L(O),g=b(O,"SPAN",{class:!0});var B=D(g);A=V(B,v),B.forEach(_),O.forEach(_),R=L(N),y=b(N,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),K(y)!=="svelte-87szfn"&&(y.textContent=E),w=L(N),N.forEach(_),this.h()},h(){h(r,"class","pinned-user svelte-1ivhp56"),Me(r,"color",e[1](e[6].user)),h(o,"class","pinned-text svelte-1ivhp56"),h(g,"class","pinned-time svelte-1ivhp56"),h(n,"class","pinned-message-content svelte-1ivhp56"),h(y,"class","unpin-btn svelte-1ivhp56"),h(y,"title","Unpin message"),h(t,"class","pinned-message svelte-1ivhp56"),this.first=t},m(F,N){j(F,t,N),c(t,n),c(n,r),c(r,a),c(n,l),c(n,o),c(o,f),c(o,d),c(n,m),c(n,g),c(g,A),c(t,R),c(t,y),c(t,w),T||(C=G(y,"click",S),T=!0)},p(F,N){e=F,N&1&&i!==(i=e[6].user+"")&&ne(a,i),N&1&&Me(r,"color",e[1](e[6].user)),N&1&&u!==(u=e[6].text.substring(0,100)+"")&&ne(f,u),N&1&&p!==(p=e[6].text.length>100?"...":"")&&ne(d,p),N&1&&v!==(v=Ui(e[6].timestamp)+"")&&ne(A,v)},d(F){F&&_(t),T=!1,C()}}}function uf(s){let e,t=s[0].length>0&&Mi(s);return{c(){t&&t.c(),e=Fe()},l(n){t&&t.l(n),e=Fe()},m(n,r){t&&t.m(n,r),j(n,e,r)},p(n,[r]){n[0].length>0?t?t.p(n,r):(t=Mi(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ne,o:Ne,d(n){n&&_(e),t&&t.d(n)}}}function Ui(s){return new Date(s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}function ff(s,e,t){let n;Re(s,ns,u=>t(4,n=u));let{pinnedMessages:r}=e;function i(u){return n.find(f=>f.username===u)}function a(u){const f=i(u);return(f==null?void 0:f.color)||"#6b7280"}function l(u){na(u)}const o=u=>l(u.id);return s.$$set=u=>{"pinnedMessages"in u&&t(0,r=u.pinnedMessages)},[r,a,l,o]}class hf extends bt{constructor(e){super(),kt(this,e,ff,uf,_t,{pinnedMessages:0})}}function ji(s,e,t){const n=s.slice();return n[42]=e[t].file,n[43]=e[t].preview,n[45]=t,n}function qi(s){let e,t='<div class="drag-overlay-content svelte-1938lan"><div class="drag-icon svelte-1938lan">ðŸ“</div> <div class="drag-text svelte-1938lan">Drop files here to upload</div></div>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(n){e=b(n,"DIV",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-1patjf9"&&(e.innerHTML=t),this.h()},h(){h(e,"class","drag-overlay svelte-1938lan")},m(n,r){j(n,e,r)},d(n){n&&_(e)}}}function zi(s){let e,t,n,r,i=s[14].join(", ")+"",a,l,o=s[14].length===1?"is":"are",u,f;return{c(){e=k("div"),t=k("span"),n=M(),r=k("span"),a=H(i),l=M(),u=H(o),f=H(" typing..."),this.h()},l(p){e=b(p,"DIV",{class:!0});var d=D(e);t=b(d,"SPAN",{class:!0}),D(t).forEach(_),n=L(d),r=b(d,"SPAN",{});var m=D(r);a=V(m,i),l=L(m),u=V(m,o),f=V(m," typing..."),m.forEach(_),d.forEach(_),this.h()},h(){h(t,"class","typing-dots svelte-1938lan"),h(e,"class","typing-indicator svelte-1938lan")},m(p,d){j(p,e,d),c(e,t),c(e,n),c(e,r),c(r,a),c(r,l),c(r,u),c(r,f)},p(p,d){d[0]&16384&&i!==(i=p[14].join(", ")+"")&&ne(a,i),d[0]&16384&&o!==(o=p[14].length===1?"is":"are")&&ne(u,o)},d(p){p&&_(e)}}}function Vi(s){let e,t;return e=new Su({}),e.$on("select",s[19]),e.$on("close",s[31]),{c(){gt(e.$$.fragment)},l(n){pt(e.$$.fragment,n)},m(n,r){dt(e,n,r),t=!0},p:Ne,i(n){t||(Ce(e.$$.fragment,n),t=!0)},o(n){xe(e.$$.fragment,n),t=!1},d(n){ht(e,n)}}}function df(s){let e,t,n,r,i=s[5].user+"",a,l,o,u,f=s[5].text.substring(0,50)+"",p,d=s[5].text.length>50?"...":"",m,g,v,A="âœ•",R,y;return{c(){e=k("div"),t=k("div"),n=k("span"),r=H("Replying to "),a=H(i),l=H(":"),o=M(),u=k("span"),p=H(f),m=H(d),g=M(),v=k("button"),v.textContent=A,this.h()},l(E){e=b(E,"DIV",{class:!0});var w=D(e);t=b(w,"DIV",{class:!0});var T=D(t);n=b(T,"SPAN",{class:!0});var C=D(n);r=V(C,"Replying to "),a=V(C,i),l=V(C,":"),C.forEach(_),o=L(T),u=b(T,"SPAN",{class:!0});var S=D(u);p=V(S,f),m=V(S,d),S.forEach(_),T.forEach(_),g=L(w),v=b(w,"BUTTON",{class:!0,"data-svelte-h":!0}),K(v)!=="svelte-1av190j"&&(v.textContent=A),w.forEach(_),this.h()},h(){h(n,"class","reply-label svelte-1938lan"),h(u,"class","reply-preview svelte-1938lan"),h(t,"class","reply-info svelte-1938lan"),h(v,"class","cancel-reply svelte-1938lan"),h(e,"class","reply-bar svelte-1938lan")},m(E,w){j(E,e,w),c(e,t),c(t,n),c(n,r),c(n,a),c(n,l),c(t,o),c(t,u),c(u,p),c(u,m),c(e,g),c(e,v),R||(y=G(v,"click",s[21]),R=!0)},p(E,w){w[0]&32&&i!==(i=E[5].user+"")&&ne(a,i),w[0]&32&&f!==(f=E[5].text.substring(0,50)+"")&&ne(p,f),w[0]&32&&d!==(d=E[5].text.length>50?"...":"")&&ne(m,d)},d(E){E&&_(e),R=!1,y()}}}function pf(s){let e,t,n='<span class="edit-label svelte-1938lan">Editing message</span> <span class="edit-hint svelte-1938lan">Press Escape to cancel</span>',r,i,a="âœ•",l,o;return{c(){e=k("div"),t=k("div"),t.innerHTML=n,r=M(),i=k("button"),i.textContent=a,this.h()},l(u){e=b(u,"DIV",{class:!0});var f=D(e);t=b(f,"DIV",{class:!0,"data-svelte-h":!0}),K(t)!=="svelte-1kwfa7y"&&(t.innerHTML=n),r=L(f),i=b(f,"BUTTON",{class:!0,"data-svelte-h":!0}),K(i)!=="svelte-1anw7a5"&&(i.textContent=a),f.forEach(_),this.h()},h(){h(t,"class","edit-info svelte-1938lan"),h(i,"class","cancel-edit svelte-1938lan"),h(e,"class","edit-bar svelte-1938lan")},m(u,f){j(u,e,f),c(e,t),c(e,r),c(e,i),l||(o=G(i,"click",s[18]),l=!0)},p:Ne,d(u){u&&_(e),l=!1,o()}}}function Hi(s){let e,t,n,r=s[10].length+"",i,a,l=s[10].length>1?"s":"",o,u,f,p,d="âœ•",m,g,v,A,R,y=s[10].length+"",E,w,T=s[10].length>1?"s":"",C,S,F,N=Ve(s[10]),O=[];for(let I=0;I<N.length;I+=1)O[I]=Gi(ji(s,N,I));return{c(){e=k("div"),t=k("div"),n=k("span"),i=H(r),a=H(" file"),o=H(l),u=H(" selected"),f=M(),p=k("button"),p.textContent=d,m=M(),g=k("div");for(let I=0;I<O.length;I+=1)O[I].c();v=M(),A=k("button"),R=H("Upload "),E=H(y),w=H(" file"),C=H(T),this.h()},l(I){e=b(I,"DIV",{class:!0});var P=D(e);t=b(P,"DIV",{class:!0});var B=D(t);n=b(B,"SPAN",{});var U=D(n);i=V(U,r),a=V(U," file"),o=V(U,l),u=V(U," selected"),U.forEach(_),f=L(B),p=b(B,"BUTTON",{class:!0,"data-svelte-h":!0}),K(p)!=="svelte-pcsk7y"&&(p.textContent=d),B.forEach(_),m=L(P),g=b(P,"DIV",{class:!0});var $=D(g);for(let Q=0;Q<O.length;Q+=1)O[Q].l($);$.forEach(_),v=L(P),A=b(P,"BUTTON",{class:!0});var X=D(A);R=V(X,"Upload "),E=V(X,y),w=V(X," file"),C=V(X,T),X.forEach(_),P.forEach(_),this.h()},h(){h(p,"class","cancel-gallery svelte-1938lan"),h(t,"class","gallery-header svelte-1938lan"),h(g,"class","gallery-grid svelte-1938lan"),h(A,"class","upload-files-btn svelte-1938lan"),h(e,"class","file-gallery svelte-1938lan")},m(I,P){j(I,e,P),c(e,t),c(t,n),c(n,i),c(n,a),c(n,o),c(n,u),c(t,f),c(t,p),c(e,m),c(e,g);for(let B=0;B<O.length;B+=1)O[B]&&O[B].m(g,null);c(e,v),c(e,A),c(A,R),c(A,E),c(A,w),c(A,C),S||(F=[G(p,"click",s[24]),G(A,"click",s[28])],S=!0)},p(I,P){if(P[0]&1024&&r!==(r=I[10].length+"")&&ne(i,r),P[0]&1024&&l!==(l=I[10].length>1?"s":"")&&ne(o,l),P[0]&8389632){N=Ve(I[10]);let B;for(B=0;B<N.length;B+=1){const U=ji(I,N,B);O[B]?O[B].p(U,P):(O[B]=Gi(U),O[B].c(),O[B].m(g,null))}for(;B<O.length;B+=1)O[B].d(1);O.length=N.length}P[0]&1024&&y!==(y=I[10].length+"")&&ne(E,y),P[0]&1024&&T!==(T=I[10].length>1?"s":"")&&ne(C,T)},d(I){I&&_(e),Tn(O,I),S=!1,Le(F)}}}function gf(s){let e,t,n;function r(l,o){return o[0]&1024&&(t=null),o[0]&1024&&(n=null),t==null&&(t=!!l[42].type.startsWith("video/")),t?bf:(n==null&&(n=!!l[42].type.startsWith("audio/")),n?_f:vf)}let i=r(s,[-1,-1]),a=i(s);return{c(){e=k("div"),a.c(),this.h()},l(l){e=b(l,"DIV",{class:!0});var o=D(e);a.l(o),o.forEach(_),this.h()},h(){h(e,"class","gallery-file-icon svelte-1938lan")},m(l,o){j(l,e,o),a.m(e,null)},p(l,o){i!==(i=r(l,o))&&(a.d(1),a=i(l),a&&(a.c(),a.m(e,null)))},d(l){l&&_(e),a.d()}}}function mf(s){let e,t,n;return{c(){e=k("img"),this.h()},l(r){e=b(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ue(e.src,t=s[43])||h(e,"src",t),h(e,"alt",n=s[42].name),h(e,"class","gallery-preview svelte-1938lan")},m(r,i){j(r,e,i)},p(r,i){i[0]&1024&&!Ue(e.src,t=r[43])&&h(e,"src",t),i[0]&1024&&n!==(n=r[42].name)&&h(e,"alt",n)},d(r){r&&_(e)}}}function vf(s){let e;return{c(){e=H("ðŸ“„")},l(t){e=V(t,"ðŸ“„")},m(t,n){j(t,e,n)},d(t){t&&_(e)}}}function _f(s){let e;return{c(){e=H("ðŸŽµ")},l(t){e=V(t,"ðŸŽµ")},m(t,n){j(t,e,n)},d(t){t&&_(e)}}}function bf(s){let e;return{c(){e=H("ðŸŽ¬")},l(t){e=V(t,"ðŸŽ¬")},m(t,n){j(t,e,n)},d(t){t&&_(e)}}}function Gi(s){let e,t,n,r,i=s[42].name+"",a,l,o,u=(s[42].size/1024/1024).toFixed(2)+"",f,p,d,m,g="âœ•",v,A,R;function y(C,S){return C[43]?mf:gf}let E=y(s),w=E(s);function T(){return s[32](s[45])}return{c(){e=k("div"),w.c(),t=M(),n=k("div"),r=k("div"),a=H(i),l=M(),o=k("div"),f=H(u),p=H(" MB"),d=M(),m=k("button"),m.textContent=g,v=M(),this.h()},l(C){e=b(C,"DIV",{class:!0});var S=D(e);w.l(S),t=L(S),n=b(S,"DIV",{class:!0});var F=D(n);r=b(F,"DIV",{class:!0});var N=D(r);a=V(N,i),N.forEach(_),l=L(F),o=b(F,"DIV",{class:!0});var O=D(o);f=V(O,u),p=V(O," MB"),O.forEach(_),F.forEach(_),d=L(S),m=b(S,"BUTTON",{class:!0,"data-svelte-h":!0}),K(m)!=="svelte-17gof1i"&&(m.textContent=g),v=L(S),S.forEach(_),this.h()},h(){h(r,"class","gallery-file-name svelte-1938lan"),h(o,"class","gallery-file-size svelte-1938lan"),h(n,"class","gallery-file-info svelte-1938lan"),h(m,"class","remove-file svelte-1938lan"),h(e,"class","gallery-item svelte-1938lan")},m(C,S){j(C,e,S),w.m(e,null),c(e,t),c(e,n),c(n,r),c(r,a),c(n,l),c(n,o),c(o,f),c(o,p),c(e,d),c(e,m),c(e,v),A||(R=G(m,"click",T),A=!0)},p(C,S){s=C,E===(E=y(s))&&w?w.p(s,S):(w.d(1),w=E(s),w&&(w.c(),w.m(e,t))),S[0]&1024&&i!==(i=s[42].name+"")&&ne(a,i),S[0]&1024&&u!==(u=(s[42].size/1024/1024).toFixed(2)+"")&&ne(f,u)},d(C){C&&_(e),w.d(),A=!1,R()}}}function $i(s){let e,t,n,r="Uploading files...",i,a,l,o,u,f,p;return{c(){e=k("div"),t=k("div"),n=k("span"),n.textContent=r,i=M(),a=k("span"),l=H(s[8]),o=H("%"),u=M(),f=k("div"),p=k("div"),this.h()},l(d){e=b(d,"DIV",{class:!0});var m=D(e);t=b(m,"DIV",{class:!0});var g=D(t);n=b(g,"SPAN",{"data-svelte-h":!0}),K(n)!=="svelte-10wvq4k"&&(n.textContent=r),i=L(g),a=b(g,"SPAN",{});var v=D(a);l=V(v,s[8]),o=V(v,"%"),v.forEach(_),g.forEach(_),u=L(m),f=b(m,"DIV",{class:!0});var A=D(f);p=b(A,"DIV",{class:!0,style:!0}),D(p).forEach(_),A.forEach(_),m.forEach(_),this.h()},h(){h(t,"class","upload-progress-info svelte-1938lan"),h(p,"class","progress-fill svelte-1938lan"),Me(p,"width",s[8]+"%"),h(f,"class","progress-bar svelte-1938lan"),h(e,"class","upload-progress-bar svelte-1938lan")},m(d,m){j(d,e,m),c(e,t),c(t,n),c(t,i),c(t,a),c(a,l),c(a,o),c(e,u),c(e,f),c(f,p)},p(d,m){m[0]&256&&ne(l,d[8]),m[0]&256&&Me(p,"width",d[8]+"%")},d(d){d&&_(e)}}}function kf(s){let e,t,n,r,i,a,l,o,u,f,p,d,m,g,v,A,R,y,E,w,T,C,S="ðŸ“Ž",F,N,O="GIF",I,P,B,U,$,X,Q,te,q,z=s[11]&&qi();o=new hf({props:{pinnedMessages:s[12]}}),f=new cf({props:{messages:s[0],onReply:s[20],firstUnreadMessageId:s[13]}});let W=s[14].length>0&&zi(s),Y=s[4]&&Vi(s);function ie(se,Z){if(se[7])return pf;if(se[5])return df}let he=ie(s),re=he&&he(s),ge=s[10].length>0&&!s[9]&&Hi(s),de=s[9]&&$i(s);return{c(){e=k("div"),z&&z.c(),t=M(),n=k("div"),r=k("h2"),i=H(s[1]),a=M(),l=k("div"),gt(o.$$.fragment),u=M(),gt(f.$$.fragment),p=M(),W&&W.c(),d=M(),Y&&Y.c(),m=M(),re&&re.c(),g=M(),v=k("div"),ge&&ge.c(),A=M(),de&&de.c(),R=M(),y=k("input"),E=M(),w=k("div"),T=k("div"),C=k("button"),C.textContent=S,F=M(),N=k("button"),N.textContent=O,I=M(),P=k("textarea"),B=M(),U=k("button"),$=H("Send"),this.h()},l(se){e=b(se,"DIV",{class:!0});var Z=D(e);z&&z.l(Z),t=L(Z),n=b(Z,"DIV",{class:!0});var ue=D(n);r=b(ue,"H2",{class:!0});var fe=D(r);i=V(fe,s[1]),fe.forEach(_),ue.forEach(_),a=L(Z),l=b(Z,"DIV",{class:!0});var me=D(l);pt(o.$$.fragment,me),u=L(me),pt(f.$$.fragment,me),p=L(me),W&&W.l(me),me.forEach(_),d=L(Z),Y&&Y.l(Z),m=L(Z),re&&re.l(Z),g=L(Z),v=b(Z,"DIV",{class:!0});var ce=D(v);ge&&ge.l(ce),A=L(ce),de&&de.l(ce),R=L(ce),y=b(ce,"INPUT",{type:!0,style:!0}),E=L(ce),w=b(ce,"DIV",{class:!0});var ke=D(w);T=b(ke,"DIV",{class:!0});var Ae=D(T);C=b(Ae,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),K(C)!=="svelte-1fiys3t"&&(C.textContent=S),F=L(Ae),N=b(Ae,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),K(N)!=="svelte-1i50t7a"&&(N.textContent=O),Ae.forEach(_),I=L(ke),P=b(ke,"TEXTAREA",{placeholder:!0,maxlength:!0,rows:!0,class:!0}),D(P).forEach(_),B=L(ke),U=b(ke,"BUTTON",{class:!0});var Se=D(U);$=V(Se,"Send"),Se.forEach(_),ke.forEach(_),ce.forEach(_),Z.forEach(_),this.h()},h(){h(r,"class","svelte-1938lan"),h(n,"class","chat-header svelte-1938lan"),h(l,"class","messages svelte-1938lan"),h(y,"type","file"),y.multiple=!0,Me(y,"display","none"),h(C,"class","input-icon-button svelte-1938lan"),h(C,"title","Attach file"),h(N,"class","input-icon-button svelte-1938lan"),h(N,"title","Add GIF"),h(T,"class","input-buttons-left svelte-1938lan"),h(P,"placeholder","Type a message... (Shift+Enter for new line)"),h(P,"maxlength","2000"),h(P,"rows","1"),h(P,"class","svelte-1938lan"),h(U,"class","send-button svelte-1938lan"),U.disabled=X=!s[2].trim(),h(w,"class","input-container svelte-1938lan"),h(v,"class","input-wrapper svelte-1938lan"),h(e,"class","chat-container svelte-1938lan")},m(se,Z){j(se,e,Z),z&&z.m(e,null),c(e,t),c(e,n),c(n,r),c(r,i),c(e,a),c(e,l),dt(o,l,null),c(l,u),dt(f,l,null),c(l,p),W&&W.m(l,null),s[30](l),c(e,d),Y&&Y.m(e,null),c(e,m),re&&re.m(e,null),c(e,g),c(e,v),ge&&ge.m(v,null),c(v,A),de&&de.m(v,null),c(v,R),c(v,y),s[33](y),c(v,E),c(v,w),c(w,T),c(T,C),c(T,F),c(T,N),c(w,I),c(w,P),tt(P,s[2]),c(w,B),c(w,U),c(U,$),Q=!0,te||(q=[G(y,"change",s[22]),G(C,"click",s[34]),G(N,"click",s[35]),G(P,"input",s[36]),G(P,"input",s[15]),G(P,"keydown",s[16]),G(U,"click",s[17]),G(e,"dragenter",s[25]),G(e,"dragleave",s[26]),G(e,"dragover",yf),G(e,"drop",s[27])],te=!0)},p(se,Z){se[11]?z||(z=qi(),z.c(),z.m(e,t)):z&&(z.d(1),z=null),(!Q||Z[0]&2)&&ne(i,se[1]);const ue={};Z[0]&4096&&(ue.pinnedMessages=se[12]),o.$set(ue);const fe={};Z[0]&1&&(fe.messages=se[0]),Z[0]&8192&&(fe.firstUnreadMessageId=se[13]),f.$set(fe),se[14].length>0?W?W.p(se,Z):(W=zi(se),W.c(),W.m(l,null)):W&&(W.d(1),W=null),se[4]?Y?(Y.p(se,Z),Z[0]&16&&Ce(Y,1)):(Y=Vi(se),Y.c(),Ce(Y,1),Y.m(e,m)):Y&&(Ns(),xe(Y,1,1,()=>{Y=null}),Ps()),he===(he=ie(se))&&re?re.p(se,Z):(re&&re.d(1),re=he&&he(se),re&&(re.c(),re.m(e,g))),se[10].length>0&&!se[9]?ge?ge.p(se,Z):(ge=Hi(se),ge.c(),ge.m(v,A)):ge&&(ge.d(1),ge=null),se[9]?de?de.p(se,Z):(de=$i(se),de.c(),de.m(v,R)):de&&(de.d(1),de=null),Z[0]&4&&tt(P,se[2]),(!Q||Z[0]&4&&X!==(X=!se[2].trim()))&&(U.disabled=X)},i(se){Q||(Ce(o.$$.fragment,se),Ce(f.$$.fragment,se),Ce(Y),Q=!0)},o(se){xe(o.$$.fragment,se),xe(f.$$.fragment,se),xe(Y),Q=!1},d(se){se&&_(e),z&&z.d(),ht(o),ht(f),W&&W.d(),s[30](null),Y&&Y.d(),re&&re.d(),ge&&ge.d(),de&&de.d(),s[33](null),te=!1,Le(q)}}}function yf(s){s.preventDefault(),s.stopPropagation()}function wf(s,e,t){let n,r,i,a,l,o,u;Re(s,Ms,Z=>t(1,i=Z)),Re(s,ys,Z=>t(40,a=Z)),Re(s,Ut,Z=>t(29,l=Z)),Re(s,kr,Z=>t(13,o=Z)),Re(s,ea,Z=>t(14,u=Z));let f="",p,d,m=!1,g=null,v,A=null,R=0,y=!1,E=[],w=[],T=!1,C=0;async function S(){await _a(),p&&t(3,p.scrollTop=p.scrollHeight,p)}function F(){Vn(!0),d&&clearTimeout(d),d=setTimeout(()=>{Vn(!1)},1e3)}function N(Z){if(Z.key==="ArrowUp"&&!f.trim()&&!A){Z.preventDefault();const ue=n.filter(fe=>fe.userId===(a==null?void 0:a.id));if(ue.length>0){const fe=ue[ue.length-1];t(7,A=fe),t(2,f=fe.text)}}else Z.key==="Escape"&&A?(Z.preventDefault(),I()):Z.key==="Enter"&&!Z.shiftKey&&(Z.preventDefault(),O())}function O(){f.trim()&&(A?(sa(i,A.id,f.trim()),t(7,A=null)):(fn(i,f.trim(),"text",{replyTo:g==null?void 0:g.id}),t(5,g=null)),t(2,f=""),Vn(!1),d&&clearTimeout(d))}function I(){t(7,A=null),t(2,f="")}function P(Z){fn(i,"","gif",{gifUrl:Z.detail,replyTo:g==null?void 0:g.id}),t(5,g=null),t(4,m=!1)}function B(Z){t(5,g=Z);const ue=document.querySelector('input[type="text"]');ue==null||ue.focus()}function U(){t(5,g=null)}async function $(Z){const ue=Z.target,fe=Array.from(ue.files||[]);if(fe.length===0){console.log("No files selected");return}console.log("Files selected:",fe.length);const me=1024*1024*1024;for(const ce of fe)if(ce.size>me){alert(`File too large! Maximum size is 1GB per file. "${ce.name}" is ${(ce.size/1024/1024).toFixed(2)}MB`),ue.value="";return}E=fe,t(10,w=await Promise.all(fe.map(async ce=>{if(ce.type.startsWith("image/")){const ke=await new Promise(Ae=>{const Se=new FileReader;Se.onload=Ze=>{var Oe;return Ae((Oe=Ze.target)==null?void 0:Oe.result)},Se.readAsDataURL(ce)});return{file:ce,preview:ke}}return{file:ce}}))),ue.value=""}function X(Z){E=E.filter((ue,fe)=>fe!==Z),t(10,w=w.filter((ue,fe)=>fe!==Z))}function Q(){E=[],t(10,w=[])}function te(Z){var ue;Z.preventDefault(),Z.stopPropagation(),C++,(ue=Z.dataTransfer)!=null&&ue.types.includes("Files")&&t(11,T=!0)}function q(Z){Z.preventDefault(),Z.stopPropagation(),C--,C===0&&t(11,T=!1)}async function z(Z){var me;Z.preventDefault(),Z.stopPropagation(),t(11,T=!1),C=0;const ue=Array.from(((me=Z.dataTransfer)==null?void 0:me.files)||[]);if(ue.length===0)return;const fe=1024*1024*1024;for(const ce of ue)if(ce.size>fe){alert(`File too large! Maximum size is 1GB per file. "${ce.name}" is ${(ce.size/1024/1024).toFixed(2)}MB`);return}E=ue,t(10,w=await Promise.all(ue.map(async ce=>{if(ce.type.startsWith("image/")){const ke=await new Promise(Ae=>{const Se=new FileReader;Se.onload=Ze=>{var Oe;return Ae((Oe=Ze.target)==null?void 0:Oe.result)},Se.readAsDataURL(ce)});return{file:ce,preview:ke}}return{file:ce}})))}async function W(){if(E.length===0)return;t(9,y=!0);const Z=E.length;let ue=0;try{const fe=window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin,me=[];for(const ce of E){const ke=await new Promise((Ae,Se)=>{const Ze=new FormData;Ze.append("file",ce),Ze.append("channelId",i);const Oe=new XMLHttpRequest;Oe.upload.addEventListener("progress",Pe=>{if(Pe.lengthComputable){const Xe=Pe.loaded/Pe.total*100,ee=(ue+Xe/100)/Z*100;t(8,R=Math.round(ee))}}),Oe.addEventListener("load",()=>{if(Oe.status===200){const Pe=JSON.parse(Oe.responseText);ue++,Ae({fileUrl:Pe.fileUrl,fileName:ce.name,fileSize:ce.size})}else Se(new Error("Upload failed"))}),Oe.addEventListener("error",()=>{Se(new Error("Upload failed"))}),Oe.open("POST",`${fe}/api/upload`),Oe.send(Ze)});me.push(ke)}me.length===1?fn(i,f.trim()||`Shared: ${me[0].fileName}`,"file",{fileUrl:me[0].fileUrl,fileName:me[0].fileName,fileSize:me[0].fileSize,replyTo:g==null?void 0:g.id}):fn(i,f.trim()||`Shared ${me.length} files`,"file",{files:me,replyTo:g==null?void 0:g.id}),console.log("All files uploaded"),t(2,f=""),t(5,g=null),E=[],t(10,w=[]),t(9,y=!1),t(8,R=0)}catch(fe){console.error("Upload error:",fe),alert("Failed to upload files. Please try again."),t(9,y=!1),t(8,R=0)}}ws(()=>{S()});function Y(Z){ot[Z?"unshift":"push"](()=>{p=Z,t(3,p)})}const ie=()=>t(4,m=!1),he=Z=>X(Z);function re(Z){ot[Z?"unshift":"push"](()=>{v=Z,t(6,v)})}const ge=()=>v==null?void 0:v.click(),de=()=>t(4,m=!m);function se(){f=this.value,t(2,f)}return s.$$.update=()=>{s.$$.dirty[0]&536870914&&t(0,n=l[i]||[]),s.$$.dirty[0]&1&&t(12,r=n.filter(Z=>Z.isPinned)),s.$$.dirty[0]&1&&n.length&&S()},[n,i,f,p,m,g,v,A,R,y,w,T,r,o,u,F,N,O,I,P,B,U,$,X,Q,te,q,z,W,l,Y,ie,he,re,ge,de,se]}class Ef extends bt{constructor(e){super(),kt(this,e,wf,kf,_t,{},null,[-1,-1])}}function Af(s){let e,t,n,r,i,a,l,o,u,f="Join Chat",p,d;return{c(){e=k("div"),t=k("div"),n=k("img"),i=M(),a=k("form"),l=k("input"),o=M(),u=k("button"),u.textContent=f,this.h()},l(m){e=b(m,"DIV",{class:!0});var g=D(e);t=b(g,"DIV",{class:!0});var v=D(t);n=b(v,"IMG",{src:!0,alt:!0,class:!0}),i=L(v),a=b(v,"FORM",{class:!0});var A=D(a);l=b(A,"INPUT",{type:!0,placeholder:!0,maxlength:!0,class:!0}),o=L(A),u=b(A,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),K(u)!=="svelte-1oym1t5"&&(u.textContent=f),A.forEach(_),v.forEach(_),g.forEach(_),this.h()},h(){Ue(n.src,r="/wabi-logo.png")||h(n,"src",r),h(n,"alt","Wabi"),h(n,"class","logo svelte-1icgi6p"),h(l,"type","text"),h(l,"placeholder","Enter your username"),h(l,"maxlength","20"),l.required=!0,l.autofocus=!0,h(l,"class","svelte-1icgi6p"),h(u,"type","submit"),h(u,"class","svelte-1icgi6p"),h(a,"class","svelte-1icgi6p"),h(t,"class","login-box svelte-1icgi6p"),h(e,"class","login-container svelte-1icgi6p")},m(m,g){j(m,e,g),c(e,t),c(t,n),c(t,i),c(t,a),c(a,l),tt(l,s[0]),c(a,o),c(a,u),l.focus(),p||(d=[G(l,"input",s[2]),G(a,"submit",ba(s[1]))],p=!0)},p(m,[g]){g&1&&l.value!==m[0]&&tt(l,m[0])},i:Ne,o:Ne,d(m){m&&_(e),p=!1,Le(d)}}}function Sf(s,e,t){const n=kl();let r="";function i(){r.trim()&&n("login",r.trim())}function a(){r=this.value,t(0,r)}return[r,i,a]}class Tf extends bt{constructor(e){super(),kt(this,e,Sf,Af,_t,{})}}function Wi(s,e,t){const n=s.slice();return n[17]=e[t],n}function Yi(s){let e,t,n,r="Total Messages",i,a,l=s[3].totalMessages.toLocaleString()+"",o,u,f,p,d="Storage Used",m,g,v=An(s[3].totalSize)+"",A,R,y,E,w="Archives",T,C,S=s[3].archives.length+"",F,N,O,I,P,B="Rotation Period",U,$,X,Q="Weekly",te,q="Monthly",z,W="Every 6 Months",Y,ie="Yearly",he,re,ge="How often to create a new archive file (like changing batteries)",de,se,Z,ue,fe="Keep Last",me,ce,ke,Ae,Se,Ze="archives",Oe,Pe,Xe="Older archives are automatically deleted to save space",ee,ve,He,Ge,Ke="ðŸ—‘ï¸ Clear All History",yt,Qe;function Ct(pe,ye){return pe[3].archives.length>0?If:Cf}let Ht=Ct(s),Je=Ht(s);return{c(){e=k("div"),t=k("div"),n=k("div"),n.textContent=r,i=M(),a=k("div"),o=H(l),u=M(),f=k("div"),p=k("div"),p.textContent=d,m=M(),g=k("div"),A=H(v),R=M(),y=k("div"),E=k("div"),E.textContent=w,T=M(),C=k("div"),F=H(S),N=M(),O=k("div"),I=k("label"),P=k("span"),P.textContent=B,U=M(),$=k("select"),X=k("option"),X.textContent=Q,te=k("option"),te.textContent=q,z=k("option"),z.textContent=W,Y=k("option"),Y.textContent=ie,he=M(),re=k("p"),re.textContent=ge,de=M(),se=k("div"),Z=k("label"),ue=k("span"),ue.textContent=fe,me=M(),ce=k("div"),ke=k("input"),Ae=M(),Se=k("span"),Se.textContent=Ze,Oe=M(),Pe=k("p"),Pe.textContent=Xe,ee=M(),Je.c(),ve=M(),He=k("div"),Ge=k("button"),Ge.textContent=Ke,this.h()},l(pe){e=b(pe,"DIV",{class:!0});var ye=D(e);t=b(ye,"DIV",{class:!0});var Dt=D(t);n=b(Dt,"DIV",{class:!0,"data-svelte-h":!0}),K(n)!=="svelte-akn32o"&&(n.textContent=r),i=L(Dt),a=b(Dt,"DIV",{class:!0});var Lt=D(a);o=V(Lt,l),Lt.forEach(_),Dt.forEach(_),u=L(ye),f=b(ye,"DIV",{class:!0});var qe=D(f);p=b(qe,"DIV",{class:!0,"data-svelte-h":!0}),K(p)!=="svelte-5vlbe4"&&(p.textContent=d),m=L(qe),g=b(qe,"DIV",{class:!0});var Ot=D(g);A=V(Ot,v),Ot.forEach(_),qe.forEach(_),R=L(ye),y=b(ye,"DIV",{class:!0});var Nt=D(y);E=b(Nt,"DIV",{class:!0,"data-svelte-h":!0}),K(E)!=="svelte-1e1df45"&&(E.textContent=w),T=L(Nt),C=b(Nt,"DIV",{class:!0});var It=D(C);F=V(It,S),It.forEach(_),Nt.forEach(_),ye.forEach(_),N=L(pe),O=b(pe,"DIV",{class:!0});var wt=D(O);I=b(wt,"LABEL",{class:!0});var Rt=D(I);P=b(Rt,"SPAN",{class:!0,"data-svelte-h":!0}),K(P)!=="svelte-608xyy"&&(P.textContent=B),U=L(Rt),$=b(Rt,"SELECT",{class:!0});var et=D($);X=b(et,"OPTION",{"data-svelte-h":!0}),K(X)!=="svelte-crm6lv"&&(X.textContent=Q),te=b(et,"OPTION",{"data-svelte-h":!0}),K(te)!=="svelte-hva46z"&&(te.textContent=q),z=b(et,"OPTION",{"data-svelte-h":!0}),K(z)!=="svelte-1s0lvql"&&(z.textContent=W),Y=b(et,"OPTION",{"data-svelte-h":!0}),K(Y)!=="svelte-jp5v27"&&(Y.textContent=ie),et.forEach(_),Rt.forEach(_),he=L(wt),re=b(wt,"P",{class:!0,"data-svelte-h":!0}),K(re)!=="svelte-qu5pay"&&(re.textContent=ge),wt.forEach(_),de=L(pe),se=b(pe,"DIV",{class:!0});var Qt=D(se);Z=b(Qt,"LABEL",{class:!0});var Be=D(Z);ue=b(Be,"SPAN",{class:!0,"data-svelte-h":!0}),K(ue)!=="svelte-1im50qe"&&(ue.textContent=fe),me=L(Be),ce=b(Be,"DIV",{class:!0});var Gt=D(ce);ke=b(Gt,"INPUT",{type:!0,min:!0,max:!0,class:!0}),Ae=L(Gt),Se=b(Gt,"SPAN",{class:!0,"data-svelte-h":!0}),K(Se)!=="svelte-nj3imy"&&(Se.textContent=Ze),Gt.forEach(_),Be.forEach(_),Oe=L(Qt),Pe=b(Qt,"P",{class:!0,"data-svelte-h":!0}),K(Pe)!=="svelte-he359b"&&(Pe.textContent=Xe),Qt.forEach(_),ee=L(pe),Je.l(pe),ve=L(pe),He=b(pe,"DIV",{class:!0});var us=D(He);Ge=b(us,"BUTTON",{class:!0,"data-svelte-h":!0}),K(Ge)!=="svelte-1u0bcm7"&&(Ge.textContent=Ke),us.forEach(_),this.h()},h(){h(n,"class","stat-label svelte-qkrj18"),h(a,"class","stat-value svelte-qkrj18"),h(t,"class","stat svelte-qkrj18"),h(p,"class","stat-label svelte-qkrj18"),h(g,"class","stat-value svelte-qkrj18"),h(f,"class","stat svelte-qkrj18"),h(E,"class","stat-label svelte-qkrj18"),h(C,"class","stat-value svelte-qkrj18"),h(y,"class","stat svelte-qkrj18"),h(e,"class","stats-panel svelte-qkrj18"),h(P,"class","label svelte-qkrj18"),X.__value="week",tt(X,X.__value),te.__value="month",tt(te,te.__value),z.__value="half-year",tt(z,z.__value),Y.__value="year",tt(Y,Y.__value),h($,"class","svelte-qkrj18"),s[1]===void 0&&ka(()=>s[12].call($)),h(I,"class","svelte-qkrj18"),h(re,"class","hint svelte-qkrj18"),h(O,"class","setting-group svelte-qkrj18"),h(ue,"class","label svelte-qkrj18"),h(ke,"type","number"),h(ke,"min","1"),h(ke,"max","52"),h(ke,"class","svelte-qkrj18"),h(Se,"class","unit svelte-qkrj18"),h(ce,"class","number-input-group svelte-qkrj18"),h(Z,"class","svelte-qkrj18"),h(Pe,"class","hint svelte-qkrj18"),h(se,"class","setting-group svelte-qkrj18"),h(Ge,"class","btn-danger svelte-qkrj18"),h(He,"class","actions svelte-qkrj18")},m(pe,ye){j(pe,e,ye),c(e,t),c(t,n),c(t,i),c(t,a),c(a,o),c(e,u),c(e,f),c(f,p),c(f,m),c(f,g),c(g,A),c(e,R),c(e,y),c(y,E),c(y,T),c(y,C),c(C,F),j(pe,N,ye),j(pe,O,ye),c(O,I),c(I,P),c(I,U),c(I,$),c($,X),c($,te),c($,z),c($,Y),Tr($,s[1],!0),c(O,he),c(O,re),j(pe,de,ye),j(pe,se,ye),c(se,Z),c(Z,ue),c(Z,me),c(Z,ce),c(ce,ke),tt(ke,s[2]),c(ce,Ae),c(ce,Se),c(se,Oe),c(se,Pe),j(pe,ee,ye),Je.m(pe,ye),j(pe,ve,ye),j(pe,He,ye),c(He,Ge),yt||(Qe=[G($,"change",s[12]),G($,"change",s[5]),G(ke,"input",s[13]),G(ke,"change",s[6]),G(Ge,"click",s[10])],yt=!0)},p(pe,ye){ye&8&&l!==(l=pe[3].totalMessages.toLocaleString()+"")&&ne(o,l),ye&8&&v!==(v=An(pe[3].totalSize)+"")&&ne(A,v),ye&8&&S!==(S=pe[3].archives.length+"")&&ne(F,S),ye&2&&Tr($,pe[1]),ye&4&&El(ke.value)!==pe[2]&&tt(ke,pe[2]),Ht===(Ht=Ct(pe))&&Je?Je.p(pe,ye):(Je.d(1),Je=Ht(pe),Je&&(Je.c(),Je.m(ve.parentNode,ve)))},d(pe){pe&&(_(e),_(N),_(O),_(de),_(se),_(ee),_(ve),_(He)),Je.d(pe),yt=!1,Le(Qe)}}}function Cf(s){let e,t="<p>No archives yet. Messages will be saved as you chat.</p>";return{c(){e=k("div"),e.innerHTML=t,this.h()},l(n){e=b(n,"DIV",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-kqcvlb"&&(e.innerHTML=t),this.h()},h(){h(e,"class","empty-state svelte-qkrj18")},m(n,r){j(n,e,r)},p:Ne,d(n){n&&_(e)}}}function If(s){let e,t,n,r="Archive History",i,a,l="ðŸ“¦ Export All",o,u,f,p,d=Ve(s[3].archives),m=[];for(let g=0;g<d.length;g+=1)m[g]=Zi(Wi(s,d,g));return{c(){e=k("div"),t=k("div"),n=k("h4"),n.textContent=r,i=M(),a=k("button"),a.textContent=l,o=M(),u=k("div");for(let g=0;g<m.length;g+=1)m[g].c();this.h()},l(g){e=b(g,"DIV",{class:!0});var v=D(e);t=b(v,"DIV",{class:!0});var A=D(t);n=b(A,"H4",{class:!0,"data-svelte-h":!0}),K(n)!=="svelte-1i91zrs"&&(n.textContent=r),i=L(A),a=b(A,"BUTTON",{class:!0,"data-svelte-h":!0}),K(a)!=="svelte-197zvis"&&(a.textContent=l),A.forEach(_),o=L(v),u=b(v,"DIV",{class:!0});var R=D(u);for(let y=0;y<m.length;y+=1)m[y].l(R);R.forEach(_),v.forEach(_),this.h()},h(){h(n,"class","svelte-qkrj18"),h(a,"class","btn-small svelte-qkrj18"),h(t,"class","section-header svelte-qkrj18"),h(u,"class","archive-list svelte-qkrj18"),h(e,"class","archives-section svelte-qkrj18")},m(g,v){j(g,e,v),c(e,t),c(t,n),c(t,i),c(t,a),c(e,o),c(e,u);for(let A=0;A<m.length;A+=1)m[A]&&m[A].m(u,null);f||(p=G(a,"click",s[9]),f=!0)},p(g,v){if(v&392){d=Ve(g[3].archives);let A;for(A=0;A<d.length;A+=1){const R=Wi(g,d,A);m[A]?m[A].p(R,v):(m[A]=Zi(R),m[A].c(),m[A].m(u,null))}for(;A<m.length;A+=1)m[A].d(1);m.length=d.length}},d(g){g&&_(e),Tn(m,g),f=!1,p()}}}function Zi(s){let e,t,n,r=ir(s[17].period)+"",i,a,l,o=An(s[17].size)+"",u,f,p=s[17].messageCount.toLocaleString()+"",d,m,g,v,A,R="ðŸ’¾",y,E,w="ðŸ—‘ï¸",T,C,S;function F(){return s[14](s[17])}function N(){return s[15](s[17])}return{c(){e=k("div"),t=k("div"),n=k("span"),i=H(r),a=M(),l=k("span"),u=H(o),f=H(" â€¢ "),d=H(p),m=H(" messages"),g=M(),v=k("div"),A=k("button"),A.textContent=R,y=M(),E=k("button"),E.textContent=w,T=M(),this.h()},l(O){e=b(O,"DIV",{class:!0});var I=D(e);t=b(I,"DIV",{class:!0});var P=D(t);n=b(P,"SPAN",{class:!0});var B=D(n);i=V(B,r),B.forEach(_),a=L(P),l=b(P,"SPAN",{class:!0});var U=D(l);u=V(U,o),f=V(U," â€¢ "),d=V(U,p),m=V(U," messages"),U.forEach(_),P.forEach(_),g=L(I),v=b(I,"DIV",{class:!0});var $=D(v);A=b($,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),K(A)!=="svelte-13e8aja"&&(A.textContent=R),y=L($),E=b($,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),K(E)!=="svelte-1br206h"&&(E.textContent=w),$.forEach(_),T=L(I),I.forEach(_),this.h()},h(){h(n,"class","archive-period svelte-qkrj18"),h(l,"class","archive-meta svelte-qkrj18"),h(t,"class","archive-info svelte-qkrj18"),h(A,"class","btn-icon svelte-qkrj18"),h(A,"title","Export"),h(E,"class","btn-icon danger svelte-qkrj18"),h(E,"title","Delete"),h(v,"class","archive-actions svelte-qkrj18"),h(e,"class","archive-item svelte-qkrj18")},m(O,I){j(O,e,I),c(e,t),c(t,n),c(n,i),c(t,a),c(t,l),c(l,u),c(l,f),c(l,d),c(l,m),c(e,g),c(e,v),c(v,A),c(v,y),c(v,E),c(e,T),C||(S=[G(A,"click",F),G(E,"click",N)],C=!0)},p(O,I){s=O,I&8&&r!==(r=ir(s[17].period)+"")&&ne(i,r),I&8&&o!==(o=An(s[17].size)+"")&&ne(u,o),I&8&&p!==(p=s[17].messageCount.toLocaleString()+"")&&ne(d,p)},d(O){O&&_(e),C=!1,Le(S)}}}function Rf(s){let e,t,n='<h3 class="svelte-qkrj18">ðŸ’¾ Local Storage</h3> <p class="subtitle svelte-qkrj18">Your chat history is saved only on your device. The server stores nothing permanently.</p>',r,i,a,l,o,u,f="Save chat history locally",p,d,m="When enabled, messages are stored in your browser. You control your data.",g,v,A,R=s[0]&&Yi(s);return{c(){e=k("div"),t=k("div"),t.innerHTML=n,r=M(),i=k("div"),a=k("label"),l=k("input"),o=M(),u=k("span"),u.textContent=f,p=M(),d=k("p"),d.textContent=m,g=M(),R&&R.c(),this.h()},l(y){e=b(y,"DIV",{class:!0});var E=D(e);t=b(E,"DIV",{class:!0,"data-svelte-h":!0}),K(t)!=="svelte-s9o5r3"&&(t.innerHTML=n),r=L(E),i=b(E,"DIV",{class:!0});var w=D(i);a=b(w,"LABEL",{class:!0});var T=D(a);l=b(T,"INPUT",{type:!0,class:!0}),o=L(T),u=b(T,"SPAN",{class:!0,"data-svelte-h":!0}),K(u)!=="svelte-1ssgcs1"&&(u.textContent=f),T.forEach(_),p=L(w),d=b(w,"P",{class:!0,"data-svelte-h":!0}),K(d)!=="svelte-1hbmqvb"&&(d.textContent=m),w.forEach(_),g=L(E),R&&R.l(E),E.forEach(_),this.h()},h(){h(t,"class","header svelte-qkrj18"),h(l,"type","checkbox"),h(l,"class","svelte-qkrj18"),h(u,"class","toggle-label"),h(a,"class","toggle-setting svelte-qkrj18"),h(d,"class","hint svelte-qkrj18"),h(i,"class","setting-group svelte-qkrj18"),h(e,"class","storage-settings svelte-qkrj18")},m(y,E){j(y,e,E),c(e,t),c(e,r),c(e,i),c(i,a),c(a,l),l.checked=s[0],c(a,o),c(a,u),c(i,p),c(i,d),c(e,g),R&&R.m(e,null),v||(A=[G(l,"change",s[11]),G(l,"change",s[4])],v=!0)},p(y,[E]){E&1&&(l.checked=y[0]),y[0]?R?R.p(y,E):(R=Yi(y),R.c(),R.m(e,null)):R&&(R.d(1),R=null)},i:Ne,o:Ne,d(y){y&&_(e),R&&R.d(),v=!1,Le(A)}}}function An(s){if(s===0)return"0 B";const e=s/(1024*1024);return e>=.01?`${e.toFixed(2)} MB`:`${(s/1024).toFixed(2)} KB`}function ir(s){if(s.includes("-W")){const[e,t]=s.split("-W");return`Week ${t}, ${e}`}else if(s.includes("-H")){const[e,t]=s.split("-");return`${t==="H1"?"First":"Second"} Half ${e}`}else if(s.match(/^\d{4}-\d{2}$/)){const[e,t]=s.split("-");return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(t)-1]} ${e}`}else return`Year ${s}`}function Df(s,e,t){let n=!1,r=Tt.getRotationPeriod(),i=Tt.getMaxArchives(),a={archives:[],totalSize:0,totalMessages:0};async function l(){t(0,n=!n),await Tt.setEnabled(n),n||confirm("Disable local storage? Your saved history will remain until you clear it manually.")||(t(0,n=!0),await Tt.setEnabled(!0)),await g()}async function o(){await Tt.setRotationPeriod(r),await g()}async function u(){await Tt.setMaxArchives(i),await g()}async function f(w){confirm(`Delete archive "${ir(w)}"?`)&&(await Tt.deleteArchive(w),await g())}async function p(w){await Tt.exportArchive(w)}async function d(){await Tt.exportArchives()}async function m(){confirm("Delete ALL saved chat history? This cannot be undone!")&&(await Tt.clearAllHistory(),await g())}async function g(){t(3,a=await Tt.getStats())}ws(async()=>{t(0,n=await Tt.isEnabled()),await g()});function v(){n=this.checked,t(0,n)}function A(){r=ya(this),t(1,r)}function R(){i=El(this.value),t(2,i)}return[n,r,i,a,l,o,u,f,p,d,m,v,A,R,w=>p(w.period),w=>f(w.period)]}class Of extends bt{constructor(e){super(),kt(this,e,Df,Rf,_t,{})}}function Xi(s){let e,t,n,r,i="âš™ï¸ Settings",a,l,o="âœ•",u,f,p,d,m="ðŸŽ¤ Audio & Video",g,v,A,R='<span class="setting-label svelte-9y3hbf">Sound Effects</span> <span class="setting-description svelte-9y3hbf">Play sounds for messages and notifications</span>',y,E,w=s[1]?"ðŸ”Š":"ðŸ”‡",T,C,S,F,N='<span class="setting-label svelte-9y3hbf">Microphone</span> <span class="setting-description svelte-9y3hbf">Enable microphone for voice calls</span>',O,I,P=s[3]?"ðŸŽ¤":"ðŸ”‡",B,U,$,X,Q='<span class="setting-label svelte-9y3hbf">Camera</span> <span class="setting-description svelte-9y3hbf">Enable camera for video calls</span>',te,q,z=s[4]?"ðŸ“¹":"ðŸ“·",W,Y,ie,he,re="ðŸ”” Notifications",ge,de,se,Z='<span class="setting-label svelte-9y3hbf">Desktop Notifications</span> <span class="setting-description svelte-9y3hbf">Get notified when you receive new messages</span>',ue,fe,me=s[2]?"âœ… Enabled":"ðŸ”” Enable",ce,ke,Ae,Se,Ze="ðŸŽ¨ Appearance",Oe,Pe,Xe,ee='<span class="setting-label svelte-9y3hbf">Theme</span> <span class="setting-description svelte-9y3hbf">Switch between light and dark mode</span>',ve,He,Ge=s[5]==="dark"?"ðŸŒ™":"â˜€ï¸",Ke,yt,Qe,Ct,Ht="ðŸ–¥ï¸ Server Management",Je,pe,ye,Dt='<span class="setting-label svelte-9y3hbf">Clear All Server Messages</span> <span class="setting-description svelte-9y3hbf">Delete all messages from the server for all users (cannot be undone)</span>',Lt,qe,Ot="ðŸ—‘ï¸ Clear Server",Nt,It,wt,Rt,et,Qt='<h3 class="svelte-9y3hbf">â„¹ï¸ About</h3> <div class="about-info svelte-9y3hbf"><p class="svelte-9y3hbf"><strong class="svelte-9y3hbf">Wabi Chat</strong></p> <p class="svelte-9y3hbf">Privacy-first ephemeral chat. No tracking. No data collection.</p> <p class="svelte-9y3hbf">Server stores nothing permanently. You control your data.</p> <p class="version svelte-9y3hbf">Version 1.0.0</p></div>',Be,Gt,us;return wt=new Of({}),{c(){e=k("div"),t=k("div"),n=k("div"),r=k("h2"),r.textContent=i,a=M(),l=k("button"),l.textContent=o,u=M(),f=k("div"),p=k("div"),d=k("h3"),d.textContent=m,g=M(),v=k("div"),A=k("div"),A.innerHTML=R,y=M(),E=k("button"),T=H(w),C=M(),S=k("div"),F=k("div"),F.innerHTML=N,O=M(),I=k("button"),B=H(P),U=M(),$=k("div"),X=k("div"),X.innerHTML=Q,te=M(),q=k("button"),W=H(z),Y=M(),ie=k("div"),he=k("h3"),he.textContent=re,ge=M(),de=k("div"),se=k("div"),se.innerHTML=Z,ue=M(),fe=k("button"),ce=H(me),ke=M(),Ae=k("div"),Se=k("h3"),Se.textContent=Ze,Oe=M(),Pe=k("div"),Xe=k("div"),Xe.innerHTML=ee,ve=M(),He=k("button"),Ke=H(Ge),yt=M(),Qe=k("div"),Ct=k("h3"),Ct.textContent=Ht,Je=M(),pe=k("div"),ye=k("div"),ye.innerHTML=Dt,Lt=M(),qe=k("button"),qe.textContent=Ot,Nt=M(),It=k("div"),gt(wt.$$.fragment),Rt=M(),et=k("div"),et.innerHTML=Qt,this.h()},l(_e){e=b(_e,"DIV",{class:!0});var ze=D(e);t=b(ze,"DIV",{class:!0});var Cs=D(t);n=b(Cs,"DIV",{class:!0});var fs=D(n);r=b(fs,"H2",{class:!0,"data-svelte-h":!0}),K(r)!=="svelte-15bbpfh"&&(r.textContent=i),a=L(fs),l=b(fs,"BUTTON",{class:!0,"data-svelte-h":!0}),K(l)!=="svelte-3o141q"&&(l.textContent=o),fs.forEach(_),u=L(Cs),f=b(Cs,"DIV",{class:!0});var lt=D(f);p=b(lt,"DIV",{class:!0});var Mt=D(p);d=b(Mt,"H3",{class:!0,"data-svelte-h":!0}),K(d)!=="svelte-1tdb4hv"&&(d.textContent=m),g=L(Mt),v=b(Mt,"DIV",{class:!0});var hs=D(v);A=b(hs,"DIV",{class:!0,"data-svelte-h":!0}),K(A)!=="svelte-5e193f"&&(A.innerHTML=R),y=L(hs),E=b(hs,"BUTTON",{class:!0});var rn=D(E);T=V(rn,w),rn.forEach(_),hs.forEach(_),C=L(Mt),S=b(Mt,"DIV",{class:!0});var ct=D(S);F=b(ct,"DIV",{class:!0,"data-svelte-h":!0}),K(F)!=="svelte-ql0oob"&&(F.innerHTML=N),O=L(ct),I=b(ct,"BUTTON",{class:!0});var $t=D(I);B=V($t,P),$t.forEach(_),ct.forEach(_),U=L(Mt),$=b(Mt,"DIV",{class:!0});var ds=D($);X=b(ds,"DIV",{class:!0,"data-svelte-h":!0}),K(X)!=="svelte-fu2kxq"&&(X.innerHTML=Q),te=L(ds),q=b(ds,"BUTTON",{class:!0});var Bs=D(q);W=V(Bs,z),Bs.forEach(_),ds.forEach(_),Mt.forEach(_),Y=L(lt),ie=b(lt,"DIV",{class:!0});var is=D(ie);he=b(is,"H3",{class:!0,"data-svelte-h":!0}),K(he)!=="svelte-yb4801"&&(he.textContent=re),ge=L(is),de=b(is,"DIV",{class:!0});var ps=D(de);se=b(ps,"DIV",{class:!0,"data-svelte-h":!0}),K(se)!=="svelte-11j8eba"&&(se.innerHTML=Z),ue=L(ps),fe=b(ps,"BUTTON",{class:!0});var Pt=D(fe);ce=V(Pt,me),Pt.forEach(_),ps.forEach(_),is.forEach(_),ke=L(lt),Ae=b(lt,"DIV",{class:!0});var gs=D(Ae);Se=b(gs,"H3",{class:!0,"data-svelte-h":!0}),K(Se)!=="svelte-bdq4j0"&&(Se.textContent=Ze),Oe=L(gs),Pe=b(gs,"DIV",{class:!0});var ms=D(Pe);Xe=b(ms,"DIV",{class:!0,"data-svelte-h":!0}),K(Xe)!=="svelte-1expsbb"&&(Xe.innerHTML=ee),ve=L(ms),He=b(ms,"BUTTON",{class:!0});var Us=D(He);Ke=V(Us,Ge),Us.forEach(_),ms.forEach(_),gs.forEach(_),yt=L(lt),Qe=b(lt,"DIV",{class:!0});var vs=D(Qe);Ct=b(vs,"H3",{class:!0,"data-svelte-h":!0}),K(Ct)!=="svelte-13bxj89"&&(Ct.textContent=Ht),Je=L(vs),pe=b(vs,"DIV",{class:!0});var Is=D(pe);ye=b(Is,"DIV",{class:!0,"data-svelte-h":!0}),K(ye)!=="svelte-1kywvm7"&&(ye.innerHTML=Dt),Lt=L(Is),qe=b(Is,"BUTTON",{class:!0,"data-svelte-h":!0}),K(qe)!=="svelte-uzfcg3"&&(qe.textContent=Ot),Is.forEach(_),vs.forEach(_),Nt=L(lt),It=b(lt,"DIV",{class:!0});var oe=D(It);pt(wt.$$.fragment,oe),oe.forEach(_),Rt=L(lt),et=b(lt,"DIV",{class:!0,"data-svelte-h":!0}),K(et)!=="svelte-137zy12"&&(et.innerHTML=Qt),lt.forEach(_),Cs.forEach(_),ze.forEach(_),this.h()},h(){h(r,"class","svelte-9y3hbf"),h(l,"class","close-btn svelte-9y3hbf"),h(n,"class","modal-header svelte-9y3hbf"),h(d,"class","svelte-9y3hbf"),h(A,"class","setting-info svelte-9y3hbf"),h(E,"class","toggle-btn svelte-9y3hbf"),Te(E,"active",s[1]),h(v,"class","setting-item svelte-9y3hbf"),h(F,"class","setting-info svelte-9y3hbf"),h(I,"class","toggle-btn svelte-9y3hbf"),Te(I,"active",s[3]),h(S,"class","setting-item svelte-9y3hbf"),h(X,"class","setting-info svelte-9y3hbf"),h(q,"class","toggle-btn svelte-9y3hbf"),Te(q,"active",s[4]),h($,"class","setting-item svelte-9y3hbf"),h(p,"class","settings-section svelte-9y3hbf"),h(he,"class","svelte-9y3hbf"),h(se,"class","setting-info svelte-9y3hbf"),h(fe,"class","action-btn svelte-9y3hbf"),Te(fe,"active",s[2]),h(de,"class","setting-item svelte-9y3hbf"),h(ie,"class","settings-section svelte-9y3hbf"),h(Se,"class","svelte-9y3hbf"),h(Xe,"class","setting-info svelte-9y3hbf"),h(He,"class","toggle-btn svelte-9y3hbf"),Te(He,"active",s[5]==="light"),h(Pe,"class","setting-item svelte-9y3hbf"),h(Ae,"class","settings-section svelte-9y3hbf"),h(Ct,"class","svelte-9y3hbf"),h(ye,"class","setting-info svelte-9y3hbf"),h(qe,"class","action-btn danger svelte-9y3hbf"),h(pe,"class","setting-item svelte-9y3hbf"),h(Qe,"class","settings-section svelte-9y3hbf"),h(It,"class","settings-section svelte-9y3hbf"),h(et,"class","settings-section svelte-9y3hbf"),h(f,"class","settings-sections svelte-9y3hbf"),h(t,"class","modal-content svelte-9y3hbf"),h(e,"class","modal-overlay svelte-9y3hbf")},m(_e,ze){j(_e,e,ze),c(e,t),c(t,n),c(n,r),c(n,a),c(n,l),c(t,u),c(t,f),c(f,p),c(p,d),c(p,g),c(p,v),c(v,A),c(v,y),c(v,E),c(E,T),c(p,C),c(p,S),c(S,F),c(S,O),c(S,I),c(I,B),c(p,U),c(p,$),c($,X),c($,te),c($,q),c(q,W),c(f,Y),c(f,ie),c(ie,he),c(ie,ge),c(ie,de),c(de,se),c(de,ue),c(de,fe),c(fe,ce),c(f,ke),c(f,Ae),c(Ae,Se),c(Ae,Oe),c(Ae,Pe),c(Pe,Xe),c(Pe,ve),c(Pe,He),c(He,Ke),c(f,yt),c(f,Qe),c(Qe,Ct),c(Qe,Je),c(Qe,pe),c(pe,ye),c(pe,Lt),c(pe,qe),c(f,Nt),c(f,It),dt(wt,It,null),c(f,Rt),c(f,et),Be=!0,Gt||(us=[G(l,"click",s[12]),G(E,"click",s[6]),G(I,"click",s[7]),G(q,"click",s[8]),G(fe,"click",s[10]),G(He,"click",s[9]),G(qe,"click",s[11]),G(t,"click",Es(s[13])),G(e,"click",s[12])],Gt=!0)},p(_e,ze){(!Be||ze&2)&&w!==(w=_e[1]?"ðŸ”Š":"ðŸ”‡")&&ne(T,w),(!Be||ze&2)&&Te(E,"active",_e[1]),(!Be||ze&8)&&P!==(P=_e[3]?"ðŸŽ¤":"ðŸ”‡")&&ne(B,P),(!Be||ze&8)&&Te(I,"active",_e[3]),(!Be||ze&16)&&z!==(z=_e[4]?"ðŸ“¹":"ðŸ“·")&&ne(W,z),(!Be||ze&16)&&Te(q,"active",_e[4]),(!Be||ze&4)&&me!==(me=_e[2]?"âœ… Enabled":"ðŸ”” Enable")&&ne(ce,me),(!Be||ze&4)&&Te(fe,"active",_e[2]),(!Be||ze&32)&&Ge!==(Ge=_e[5]==="dark"?"ðŸŒ™":"â˜€ï¸")&&ne(Ke,Ge),(!Be||ze&32)&&Te(He,"active",_e[5]==="light")},i(_e){Be||(Ce(wt.$$.fragment,_e),Be=!0)},o(_e){xe(wt.$$.fragment,_e),Be=!1},d(_e){_e&&_(e),ht(wt),Gt=!1,Le(us)}}}function Nf(s){let e,t,n=s[0]&&Xi(s);return{c(){n&&n.c(),e=Fe()},l(r){n&&n.l(r),e=Fe()},m(r,i){n&&n.m(r,i),j(r,e,i),t=!0},p(r,[i]){r[0]?n?(n.p(r,i),i&1&&Ce(n,1)):(n=Xi(r),n.c(),Ce(n,1),n.m(e.parentNode,e)):n&&(Ns(),xe(n,1,1,()=>{n=null}),Ps())},i(r){t||(Ce(n),t=!0)},o(r){xe(n),t=!1},d(r){r&&_(e),n&&n.d(r)}}}function Pf(s,e,t){Re(s,ys,R=>t(14,R)),Re(s,ns,R=>t(15,R)),Re(s,Ut,R=>t(16,R));let{isOpen:n=!1}=e,r=!0,i=!0,a=!0,l=!0,o="dark";ws(()=>{t(1,r=localStorage.getItem("soundEnabled")!=="false"),t(2,i=localStorage.getItem("notificationsEnabled")!=="false"),t(3,a=localStorage.getItem("micEnabled")!=="false"),t(4,l=localStorage.getItem("cameraEnabled")!=="false"),t(5,o=localStorage.getItem("theme")||"dark")});function u(){t(1,r=!r),localStorage.setItem("soundEnabled",r.toString())}function f(){t(3,a=!a),localStorage.setItem("micEnabled",a.toString())}function p(){t(4,l=!l),localStorage.setItem("cameraEnabled",l.toString())}function d(){t(5,o=o==="dark"?"light":"dark"),localStorage.setItem("theme",o),document.documentElement.setAttribute("data-theme",o)}async function m(){if(!("Notification"in window)){alert("This browser does not support notifications");return}if(Notification.permission==="granted"){alert("Notifications are already enabled!");return}await Notification.requestPermission()==="granted"?(t(2,i=!0),localStorage.setItem("notificationsEnabled","true"),new Notification("Community Chat",{body:"Notifications enabled! You'll be notified of new messages.",icon:"/icon-192.png"})):(t(2,i=!1),localStorage.setItem("notificationsEnabled","false"))}async function g(){if(confirm("Are you sure you want to delete ALL messages from the server? This will clear messages for all users and cannot be undone!"))try{const R=window.location.origin.includes(":5173")?"http://localhost:3000":window.location.origin,E=await(await fetch(`${R}/api/clear-messages`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();E.success?(Ut.set({general:[]}),alert("All server messages have been deleted successfully!")):alert("Failed to clear server messages: "+(E.error||"Unknown error"))}catch(R){console.error("Error clearing server messages:",R),alert("Failed to clear server messages. Check console for details.")}}function v(){t(0,n=!1)}function A(R){Os.call(this,s,R)}return s.$$set=R=>{"isOpen"in R&&t(0,n=R.isOpen)},[n,r,i,a,l,o,u,f,p,d,m,g,v,A]}class Ff extends bt{constructor(e){super(),kt(this,e,Pf,Nf,_t,{isOpen:0})}}function Ki(s,e,t){const n=s.slice();return n[17]=e[t],n}function Qi(s){let e,t,n,r,i="Create",a,l;return{c(){e=k("div"),t=k("input"),n=M(),r=k("button"),r.textContent=i,this.h()},l(o){e=b(o,"DIV",{class:!0});var u=D(e);t=b(u,"INPUT",{type:!0,placeholder:!0,class:!0}),n=L(u),r=b(u,"BUTTON",{class:!0,"data-svelte-h":!0}),K(r)!=="svelte-1ih09o9"&&(r.textContent=i),u.forEach(_),this.h()},h(){h(t,"type","text"),h(t,"placeholder","channel-name"),t.autofocus=!0,h(t,"class","svelte-143upw8"),h(r,"class","svelte-143upw8"),h(e,"class","create-channel svelte-143upw8")},m(o,u){j(o,e,u),c(e,t),tt(t,s[1]),c(e,n),c(e,r),t.focus(),a||(l=[G(t,"input",s[12]),G(t,"keydown",s[13]),G(r,"click",s[7])],a=!0)},p(o,u){u&2&&t.value!==o[1]&&tt(t,o[1])},d(o){o&&_(e),a=!1,Le(l)}}}function Ji(s){let e,t="Ã—",n,r;function i(){return s[15](s[17])}return{c(){e=k("button"),e.textContent=t,this.h()},l(a){e=b(a,"BUTTON",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-12rgdhl"&&(e.textContent=t),this.h()},h(){h(e,"class","delete-btn svelte-143upw8")},m(a,l){j(a,e,l),n||(r=G(e,"click",Es(i)),n=!0)},p(a,l){s=a},d(a){a&&_(e),n=!1,r()}}}function el(s,e){let t,n,r,i="#",a,l=e[17].name+"",o,u,f,p,d;function m(){return e[14](e[17])}let g=e[17].id!=="general"&&Ji(e);return{key:s,first:null,c(){t=k("div"),n=k("button"),r=k("span"),r.textContent=i,a=M(),o=H(l),u=M(),g&&g.c(),f=M(),this.h()},l(v){t=b(v,"DIV",{class:!0});var A=D(t);n=b(A,"BUTTON",{class:!0});var R=D(n);r=b(R,"SPAN",{class:!0,"data-svelte-h":!0}),K(r)!=="svelte-16vlh54"&&(r.textContent=i),a=L(R),o=V(R,l),R.forEach(_),u=L(A),g&&g.l(A),f=L(A),A.forEach(_),this.h()},h(){h(r,"class","hash svelte-143upw8"),h(n,"class","channel-btn svelte-143upw8"),h(t,"class","channel-item svelte-143upw8"),Te(t,"active",e[5]===e[17].id),this.first=t},m(v,A){j(v,t,A),c(t,n),c(n,r),c(n,a),c(n,o),c(t,u),g&&g.m(t,null),c(t,f),p||(d=G(n,"click",m),p=!0)},p(v,A){e=v,A&16&&l!==(l=e[17].name+"")&&ne(o,l),e[17].id!=="general"?g?g.p(e,A):(g=Ji(e),g.c(),g.m(t,f)):g&&(g.d(1),g=null),A&48&&Te(t,"active",e[5]===e[17].id)},d(v){v&&_(t),g&&g.d(),p=!1,d()}}}function xf(s){let e,t,n,r='<img src="/wabi-logo.png" alt="Wabi" class="logo-img svelte-143upw8"/>',i,a,l="âš™ï¸",o,u,f,p="Text Channels",d,m,g,v="ðŸ“º",A,R,y="+",E,w,T,C=[],S=new Map,F,N,O,I,P,B,U=s[2]&&Qi(s),$=Ve(s[4]);const X=q=>q[17].id;for(let q=0;q<$.length;q+=1){let z=Ki(s,$,q),W=X(z);S.set(W,C[q]=el(W,z))}function Q(q){s[16](q)}let te={};return s[3]!==void 0&&(te.isOpen=s[3]),N=new Ff({props:te}),ot.push(()=>Zt(N,"isOpen",Q)),{c(){e=k("div"),t=k("div"),n=k("div"),n.innerHTML=r,i=M(),a=k("button"),a.textContent=l,o=M(),u=k("div"),f=k("h3"),f.textContent=p,d=M(),m=k("div"),g=k("button"),g.textContent=v,A=M(),R=k("button"),R.textContent=y,E=M(),U&&U.c(),w=M(),T=k("div");for(let q=0;q<C.length;q+=1)C[q].c();F=M(),gt(N.$$.fragment),this.h()},l(q){e=b(q,"DIV",{class:!0});var z=D(e);t=b(z,"DIV",{class:!0});var W=D(t);n=b(W,"DIV",{class:!0,"data-svelte-h":!0}),K(n)!=="svelte-16tyvz0"&&(n.innerHTML=r),i=L(W),a=b(W,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),K(a)!=="svelte-128luu5"&&(a.textContent=l),W.forEach(_),o=L(z),u=b(z,"DIV",{class:!0});var Y=D(u);f=b(Y,"H3",{class:!0,"data-svelte-h":!0}),K(f)!=="svelte-cahn79"&&(f.textContent=p),d=L(Y),m=b(Y,"DIV",{class:!0});var ie=D(m);g=b(ie,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),K(g)!=="svelte-5el016"&&(g.textContent=v),A=L(ie),R=b(ie,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),K(R)!=="svelte-ou792o"&&(R.textContent=y),ie.forEach(_),Y.forEach(_),E=L(z),U&&U.l(z),w=L(z),T=b(z,"DIV",{class:!0});var he=D(T);for(let re=0;re<C.length;re+=1)C[re].l(he);he.forEach(_),z.forEach(_),F=L(q),pt(N.$$.fragment,q),this.h()},h(){h(n,"class","logo svelte-143upw8"),h(a,"class","settings-btn svelte-143upw8"),h(a,"title","Settings"),h(t,"class","top-section svelte-143upw8"),h(f,"class","svelte-143upw8"),h(g,"class","screen-share-icon-btn svelte-143upw8"),h(g,"title","Screen Share"),Te(g,"active",s[0]==="screen"),h(R,"class","add-btn svelte-143upw8"),h(R,"title","Create channel"),h(m,"class","header-buttons svelte-143upw8"),h(u,"class","sidebar-header svelte-143upw8"),h(T,"class","channel-list svelte-143upw8"),h(e,"class","channel-sidebar svelte-143upw8")},m(q,z){j(q,e,z),c(e,t),c(t,n),c(t,i),c(t,a),c(e,o),c(e,u),c(u,f),c(u,d),c(u,m),c(m,g),c(m,A),c(m,R),c(e,E),U&&U.m(e,null),c(e,w),c(e,T);for(let W=0;W<C.length;W+=1)C[W]&&C[W].m(T,null);j(q,F,z),dt(N,q,z),I=!0,P||(B=[G(a,"click",s[9]),G(g,"click",s[10]),G(R,"click",s[11])],P=!0)},p(q,[z]){(!I||z&1)&&Te(g,"active",q[0]==="screen"),q[2]?U?U.p(q,z):(U=Qi(q),U.c(),U.m(e,w)):U&&(U.d(1),U=null),z&368&&($=Ve(q[4]),C=Ss(C,z,X,1,q,$,S,T,As,el,null,Ki));const W={};!O&&z&8&&(O=!0,W.isOpen=q[3],Yt(()=>O=!1)),N.$set(W)},i(q){I||(Ce(N.$$.fragment,q),I=!0)},o(q){xe(N.$$.fragment,q),I=!1},d(q){q&&(_(e),_(F)),U&&U.d();for(let z=0;z<C.length;z+=1)C[z].d();ht(N,q),P=!1,Le(B)}}}function Lf(s,e,t){let n,r;Re(s,Qs,w=>t(4,n=w)),Re(s,Ms,w=>t(5,r=w));let{activeView:i="chat"}=e,a="",l=!1,o=!1;function u(w){xc(w)}function f(){a.trim()&&(Lc(a.trim()),t(1,a=""),t(2,l=!1))}function p(w){confirm(`Delete channel #${w}?`)&&Mc(w)}const d=()=>t(3,o=!0),m=()=>t(0,i="screen"),g=()=>t(2,l=!l);function v(){a=this.value,t(1,a)}const A=w=>w.key==="Enter"&&f(),R=w=>u(w.id),y=w=>p(w.id);function E(w){o=w,t(3,o)}return s.$$set=w=>{"activeView"in w&&t(0,i=w.activeView)},s.$$.update=()=>{s.$$.dirty&1&&i==="chat"&&jc()},[i,a,l,o,n,r,u,f,p,d,m,g,v,A,R,y,E]}class Mf extends bt{constructor(e){super(),kt(this,e,Lf,xf,_t,{activeView:0})}}const yr=it([]),Sn=it(null),On=it(!1),sn=it(!1),nn=it(!1),Fs=new Map;let st=null;const fa={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]};async function tl(s,e,t=!1){try{return st=await navigator.mediaDevices.getUserMedia({video:t,audio:!0}),On.set(!0),sn.set(!1),nn.set(!t),s.emit("call-initiate",{targetUserId:e,isVideoCall:t}),st}catch(n){throw console.error("Error starting call:",n),n}}async function Bf(s,e,t=!1){try{return st=await navigator.mediaDevices.getUserMedia({video:t,audio:!0}),On.set(!0),sn.set(!1),nn.set(!t),s.emit("call-answer",{callerId:e,isVideoCall:t}),Sn.set(null),st}catch(n){throw console.error("Error answering call:",n),n}}function Uf(s,e){s.emit("call-reject",{callerId:e}),Sn.set(null)}function $n(s){st&&(st.getTracks().forEach(e=>e.stop()),st=null),On.set(!1),sn.set(!1),nn.set(!1),s.emit("call-end"),Fs.forEach(e=>e.close()),Fs.clear(),yr.set([])}function jf(){if(st){const s=st.getAudioTracks()[0];s&&(s.enabled=!s.enabled,sn.set(!s.enabled))}}function qf(){if(st){const s=st.getVideoTracks()[0];s&&(s.enabled=!s.enabled,nn.set(!s.enabled))}}async function zf(s,e){const t=new RTCPeerConnection(fa);Fs.set(e,t),st&&st.getTracks().forEach(r=>{t.addTrack(r,st)}),t.onicecandidate=r=>{r.candidate&&s.emit("call-ice-candidate",{candidate:r.candidate,targetId:e})},t.ontrack=r=>{ha(e,r.streams[0])};const n=await t.createOffer();await t.setLocalDescription(n),s.emit("call-offer",{offer:n,targetId:e})}async function Vf(s,e,t,n){const r=new RTCPeerConnection(fa);Fs.set(e,r),st&&st.getTracks().forEach(a=>{r.addTrack(a,st)}),r.ontrack=a=>{ha(e,a.streams[0])},r.onicecandidate=a=>{a.candidate&&s.emit("call-ice-candidate",{candidate:a.candidate,targetId:e})},await r.setRemoteDescription(n);const i=await r.createAnswer();await r.setLocalDescription(i),s.emit("call-answer-sdp",{answer:i,targetId:e})}async function Hf(s,e){const t=Fs.get(s);t&&await t.setRemoteDescription(e)}async function Gf(s,e){const t=Fs.get(s);t&&await t.addIceCandidate(e)}function ha(s,e){yr.update(t=>{const n=t.findIndex(i=>i.userId===s),r={userId:s,username:"",stream:e,isVideoEnabled:e.getVideoTracks().length>0,isAudioEnabled:e.getAudioTracks().length>0};return n>=0?(t[n]=r,t):[...t,r]})}function $f(){return st}function sl(s,e,t){const n=s.slice();return n[14]=e[t],n}function Wf(s){let e,t=s[14].username.charAt(0).toUpperCase()+"",n;return{c(){e=k("div"),n=H(t),this.h()},l(r){e=b(r,"DIV",{class:!0,style:!0});var i=D(e);n=V(i,t),i.forEach(_),this.h()},h(){h(e,"class","user-avatar-placeholder svelte-15lp6hy"),Me(e,"background-color",s[14].color)},m(r,i){j(r,e,i),c(e,n)},p(r,i){i&16&&t!==(t=r[14].username.charAt(0).toUpperCase()+"")&&ne(n,t),i&16&&Me(e,"background-color",r[14].color)},d(r){r&&_(e)}}}function Yf(s){let e,t,n;return{c(){e=k("img"),this.h()},l(r){e=b(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ue(e.src,t=s[14].profilePicture)||h(e,"src",t),h(e,"alt",n=s[14].username),h(e,"class","user-avatar svelte-15lp6hy")},m(r,i){j(r,e,i)},p(r,i){i&16&&!Ue(e.src,t=r[14].profilePicture)&&h(e,"src",t),i&16&&n!==(n=r[14].username)&&h(e,"alt",n)},d(r){r&&_(e)}}}function nl(s){let e,t="(you)";return{c(){e=k("span"),e.textContent=t,this.h()},l(n){e=b(n,"SPAN",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-2b4nly"&&(e.textContent=t),this.h()},h(){h(e,"class","you-badge svelte-15lp6hy")},m(n,r){j(n,e,r)},d(n){n&&_(e)}}}function rl(s){let e,t,n="ðŸ“ž",r,i,a="ðŸ“¹",l,o;function u(...p){return s[9](s[14],...p)}function f(...p){return s[10](s[14],...p)}return{c(){e=k("div"),t=k("button"),t.textContent=n,r=M(),i=k("button"),i.textContent=a,this.h()},l(p){e=b(p,"DIV",{class:!0});var d=D(e);t=b(d,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),K(t)!=="svelte-jmuv4z"&&(t.textContent=n),r=L(d),i=b(d,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),K(i)!=="svelte-1whn4df"&&(i.textContent=a),d.forEach(_),this.h()},h(){h(t,"class","call-btn voice-call svelte-15lp6hy"),h(t,"title","Voice call"),h(i,"class","call-btn video-call svelte-15lp6hy"),h(i,"title","Video call"),h(e,"class","call-buttons svelte-15lp6hy")},m(p,d){j(p,e,d),c(e,t),c(e,r),c(e,i),l||(o=[G(t,"click",u),G(i,"click",f)],l=!0)},p(p,d){s=p},d(p){p&&_(e),l=!1,Le(o)}}}function il(s,e){var I,P;let t,n,r,i,a,l=e[14].username+"",o,u,f,p,d,m,g,v=e[14].status+"",A,R,y,E,w;function T(B,U){return B[14].profilePicture?Yf:Wf}let C=T(e),S=C(e),F=e[14].id===((I=e[3])==null?void 0:I.id)&&nl();function N(){return e[8](e[14])}let O=e[14].id!==((P=e[3])==null?void 0:P.id)&&rl(e);return{key:s,first:null,c(){t=k("div"),n=k("button"),S.c(),r=M(),i=k("div"),a=k("span"),o=H(l),u=M(),F&&F.c(),f=M(),p=k("div"),d=k("span"),m=M(),g=k("span"),A=H(v),R=M(),O&&O.c(),y=M(),this.h()},l(B){t=b(B,"DIV",{class:!0});var U=D(t);n=b(U,"BUTTON",{class:!0});var $=D(n);S.l($),r=L($),i=b($,"DIV",{class:!0});var X=D(i);a=b(X,"SPAN",{class:!0});var Q=D(a);o=V(Q,l),u=L(Q),F&&F.l(Q),Q.forEach(_),f=L(X),p=b(X,"DIV",{class:!0});var te=D(p);d=b(te,"SPAN",{class:!0,style:!0}),D(d).forEach(_),m=L(te),g=b(te,"SPAN",{class:!0});var q=D(g);A=V(q,v),q.forEach(_),te.forEach(_),X.forEach(_),$.forEach(_),R=L(U),O&&O.l(U),y=L(U),U.forEach(_),this.h()},h(){h(a,"class","user-name svelte-15lp6hy"),h(d,"class","status-dot svelte-15lp6hy"),Me(d,"background-color",ll(e[14].status)),h(g,"class","status-text svelte-15lp6hy"),h(p,"class","user-status svelte-15lp6hy"),h(i,"class","user-info svelte-15lp6hy"),h(n,"class","user svelte-15lp6hy"),h(t,"class","user-container svelte-15lp6hy"),this.first=t},m(B,U){j(B,t,U),c(t,n),S.m(n,null),c(n,r),c(n,i),c(i,a),c(a,o),c(a,u),F&&F.m(a,null),c(i,f),c(i,p),c(p,d),c(p,m),c(p,g),c(g,A),c(t,R),O&&O.m(t,null),c(t,y),E||(w=G(n,"click",N),E=!0)},p(B,U){var $,X;e=B,C===(C=T(e))&&S?S.p(e,U):(S.d(1),S=C(e),S&&(S.c(),S.m(n,r))),U&16&&l!==(l=e[14].username+"")&&ne(o,l),e[14].id===(($=e[3])==null?void 0:$.id)?F||(F=nl(),F.c(),F.m(a,null)):F&&(F.d(1),F=null),U&16&&Me(d,"background-color",ll(e[14].status)),U&16&&v!==(v=e[14].status+"")&&ne(A,v),e[14].id!==((X=e[3])==null?void 0:X.id)?O?O.p(e,U):(O=rl(e),O.c(),O.m(t,y)):O&&(O.d(1),O=null)},d(B){B&&_(t),S.d(),F&&F.d(),O&&O.d(),E=!1,w()}}}function Zf(s){let e,t,n,r,i=s[4].length+"",a,l,o,u,f=[],p=new Map,d,m,g,v,A,R=Ve(s[4]);const y=C=>C[14].id;for(let C=0;C<R.length;C+=1){let S=sl(s,R,C),F=y(S);p.set(F,f[C]=il(F,S))}function E(C){s[11](C)}function w(C){s[12](C)}let T={isOwnProfile:s[2]};return s[0]!==void 0&&(T.isOpen=s[0]),s[1]!==void 0&&(T.user=s[1]),m=new oa({props:T}),ot.push(()=>Zt(m,"isOpen",E)),ot.push(()=>Zt(m,"user",w)),{c(){e=k("aside"),t=k("div"),n=k("h3"),r=H("Online ("),a=H(i),l=H(")"),o=M(),u=k("div");for(let C=0;C<f.length;C+=1)f[C].c();d=M(),gt(m.$$.fragment),this.h()},l(C){e=b(C,"ASIDE",{class:!0});var S=D(e);t=b(S,"DIV",{class:!0});var F=D(t);n=b(F,"H3",{class:!0});var N=D(n);r=V(N,"Online ("),a=V(N,i),l=V(N,")"),N.forEach(_),F.forEach(_),o=L(S),u=b(S,"DIV",{class:!0});var O=D(u);for(let I=0;I<f.length;I+=1)f[I].l(O);O.forEach(_),S.forEach(_),d=L(C),pt(m.$$.fragment,C),this.h()},h(){h(n,"class","svelte-15lp6hy"),h(t,"class","panel-header svelte-15lp6hy"),h(u,"class","user-list svelte-15lp6hy"),h(e,"class","user-panel svelte-15lp6hy")},m(C,S){j(C,e,S),c(e,t),c(t,n),c(n,r),c(n,a),c(n,l),c(e,o),c(e,u);for(let F=0;F<f.length;F+=1)f[F]&&f[F].m(u,null);j(C,d,S),dt(m,C,S),A=!0},p(C,[S]){(!A||S&16)&&i!==(i=C[4].length+"")&&ne(a,i),S&248&&(R=Ve(C[4]),f=Ss(f,S,y,1,C,R,p,u,As,il,null,sl));const F={};S&4&&(F.isOwnProfile=C[2]),!g&&S&1&&(g=!0,F.isOpen=C[0],Yt(()=>g=!1)),!v&&S&2&&(v=!0,F.user=C[1],Yt(()=>v=!1)),m.$set(F)},i(C){A||(Ce(m.$$.fragment,C),A=!0)},o(C){xe(m.$$.fragment,C),A=!1},d(C){C&&(_(e),_(d));for(let S=0;S<f.length;S+=1)f[S].d();ht(m,C)}}}function ll(s){switch(s){case"active":return"#10b981";case"away":return"#f59e0b";case"busy":return"#ef4444";default:return"#6b7280"}}function Xf(s,e,t){let n,r,i;Re(s,Ls,R=>t(13,n=R)),Re(s,ys,R=>t(3,r=R)),Re(s,ns,R=>t(4,i=R));let a=!1,l=null,o=!1;function u(R){t(1,l=R),t(2,o=R.id===(r==null?void 0:r.id)),t(0,a=!0)}async function f(R,y){if(R.stopPropagation(),!(!n||y.id===(r==null?void 0:r.id)))try{await tl(n,y.id,!1)}catch{alert("Failed to start voice call. Please check microphone permissions.")}}async function p(R,y){if(R.stopPropagation(),!(!n||y.id===(r==null?void 0:r.id)))try{await tl(n,y.id,!0)}catch{alert("Failed to start video call. Please check camera and microphone permissions.")}}const d=R=>u(R),m=(R,y)=>f(y,R),g=(R,y)=>p(y,R);function v(R){a=R,t(0,a)}function A(R){l=R,t(1,l)}return[a,l,o,r,i,u,f,p,d,m,g,v,A]}class Kf extends bt{constructor(e){super(),kt(this,e,Xf,Zf,_t,{})}}const wr=it([]),Er=it(!1),cs=new Map;let rs=null;const da={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]};async function Qf(s){try{return rs=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1}),Er.set(!0),s.emit("start-screen-share"),rs.getVideoTracks()[0].onended=()=>{pa(s)},rs}catch(e){throw console.error("Error starting screen share:",e),e}}function pa(s){rs&&(rs.getTracks().forEach(e=>e.stop()),rs=null),Er.set(!1),s.emit("stop-screen-share"),cs.forEach(e=>e.close()),cs.clear()}async function Jf(s,e){const t=new RTCPeerConnection(da);cs.set(e,t),rs&&rs.getTracks().forEach(r=>{t.addTrack(r,rs)}),t.onicecandidate=r=>{r.candidate&&s.emit("webrtc-ice-candidate",{candidate:r.candidate,targetId:e})};const n=await t.createOffer();await t.setLocalDescription(n),s.emit("webrtc-offer",{offer:n,targetId:e})}async function eh(s,e,t,n){const r=new RTCPeerConnection(da);cs.set(e,r),r.ontrack=a=>{wr.update(l=>{const o=l.findIndex(f=>f.userId===e),u={userId:e,username:t,stream:a.streams[0]};return o>=0?(l[o]=u,l):[...l,u]})},r.onicecandidate=a=>{a.candidate&&s.emit("webrtc-ice-candidate",{candidate:a.candidate,targetId:e})},await r.setRemoteDescription(n);const i=await r.createAnswer();await r.setLocalDescription(i),s.emit("webrtc-answer",{answer:i,targetId:e})}async function th(s,e){const t=cs.get(s);t&&await t.setRemoteDescription(e)}async function sh(s,e){const t=cs.get(s);t&&await t.addIceCandidate(e)}function nh(s){wr.update(t=>t.filter(n=>n.userId!==s));const e=cs.get(s);e&&(e.close(),cs.delete(s))}function al(s,e,t){const n=s.slice();return n[12]=e[t],n}function rh(s){let e,t="Start Sharing",n,r;return{c(){e=k("button"),e.textContent=t},l(i){e=b(i,"BUTTON",{"data-svelte-h":!0}),K(e)!=="svelte-1ms5zeg"&&(e.textContent=t)},m(i,a){j(i,e,a),n||(r=G(e,"click",s[6]),n=!0)},p:Ne,d(i){i&&_(e),n=!1,r()}}}function ih(s){let e,t="Stop Sharing",n,r;return{c(){e=k("button"),e.textContent=t,this.h()},l(i){e=b(i,"BUTTON",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-1urv00m"&&(e.textContent=t),this.h()},h(){h(e,"class","stop-btn svelte-bu6z9u")},m(i,a){j(i,e,a),n||(r=G(e,"click",s[7]),n=!0)},p:Ne,d(i){i&&_(e),n=!1,r()}}}function ol(s){let e,t;return{c(){e=k("div"),t=H(s[2]),this.h()},l(n){e=b(n,"DIV",{class:!0});var r=D(e);t=V(r,s[2]),r.forEach(_),this.h()},h(){h(e,"class","error svelte-bu6z9u")},m(n,r){j(n,e,r),c(e,t)},p(n,r){r&4&&ne(t,n[2])},d(n){n&&_(e)}}}function cl(s){let e,t,n='<span class="badge svelte-bu6z9u">Your Screen</span>',r,i;return{c(){e=k("div"),t=k("div"),t.innerHTML=n,r=M(),i=k("video"),this.h()},l(a){e=b(a,"DIV",{class:!0});var l=D(e);t=b(l,"DIV",{class:!0,"data-svelte-h":!0}),K(t)!=="svelte-16dlolc"&&(t.innerHTML=n),r=L(l),i=b(l,"VIDEO",{class:!0}),D(i).forEach(_),l.forEach(_),this.h()},h(){h(t,"class","screen-header svelte-bu6z9u"),i.autoplay=!0,i.muted=!0,i.playsInline=!0,h(i,"class","svelte-bu6z9u"),h(e,"class","screen-item svelte-bu6z9u")},m(a,l){j(a,e,l),c(e,t),c(e,r),c(e,i),s[9](i)},p:Ne,d(a){a&&_(e),s[9](null)}}}function ul(s,e){let t,n,r,i=e[12].username+"",a,l,o,u,f,p,d;return{key:s,first:null,c(){t=k("div"),n=k("div"),r=k("span"),a=H(i),l=H("'s Screen"),o=M(),u=k("video"),this.h()},l(m){t=b(m,"DIV",{class:!0});var g=D(t);n=b(g,"DIV",{class:!0});var v=D(n);r=b(v,"SPAN",{class:!0});var A=D(r);a=V(A,i),l=V(A,"'s Screen"),A.forEach(_),v.forEach(_),o=L(g),u=b(g,"VIDEO",{class:!0}),D(u).forEach(_),g.forEach(_),this.h()},h(){h(r,"class","username svelte-bu6z9u"),h(n,"class","screen-header svelte-bu6z9u"),u.autoplay=!0,u.playsInline=!0,h(u,"class","svelte-bu6z9u"),h(t,"class","screen-item svelte-bu6z9u"),this.first=t},m(m,g){j(m,t,g),c(t,n),c(n,r),c(r,a),c(r,l),c(t,o),c(t,u),p||(d=wa(f=ah.call(null,u,e[12].stream)),p=!0)},p(m,g){e=m,g&16&&i!==(i=e[12].username+"")&&ne(a,i),f&&bs(f.update)&&g&16&&f.update.call(null,e[12].stream)},d(m){m&&_(t),p=!1,d()}}}function fl(s){let e,t='<p class="svelte-bu6z9u">No active screen shares</p> <p class="hint svelte-bu6z9u">Click &quot;Start Sharing&quot; to share your screen</p>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(n){e=b(n,"DIV",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-reuplr"&&(e.innerHTML=t),this.h()},h(){h(e,"class","empty-state svelte-bu6z9u")},m(n,r){j(n,e,r)},d(n){n&&_(e)}}}function lh(s){let e,t,n,r,i="â† Back",a,l,o="ðŸ–¥ï¸ Screen Sharing",u,f,p,d,m,g=[],v=new Map,A,R,y;function E(I,P){return I[3]?ih:rh}let w=E(s),T=w(s),C=s[2]&&ol(s),S=s[3]&&s[0]&&cl(s),F=Ve(s[4]);const N=I=>I[12].userId;for(let I=0;I<F.length;I+=1){let P=al(s,F,I),B=N(P);v.set(B,g[I]=ul(B,P))}let O=!s[3]&&s[4].length===0&&fl();return{c(){e=k("div"),t=k("div"),n=k("div"),r=k("button"),r.textContent=i,a=M(),l=k("h2"),l.textContent=o,u=M(),T.c(),f=M(),C&&C.c(),p=M(),d=k("div"),S&&S.c(),m=M();for(let I=0;I<g.length;I+=1)g[I].c();A=M(),O&&O.c(),this.h()},l(I){e=b(I,"DIV",{class:!0});var P=D(e);t=b(P,"DIV",{class:!0});var B=D(t);n=b(B,"DIV",{class:!0});var U=D(n);r=b(U,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),K(r)!=="svelte-ts724a"&&(r.textContent=i),a=L(U),l=b(U,"H2",{class:!0,"data-svelte-h":!0}),K(l)!=="svelte-1el2fdv"&&(l.textContent=o),U.forEach(_),u=L(B),T.l(B),B.forEach(_),f=L(P),C&&C.l(P),p=L(P),d=b(P,"DIV",{class:!0});var $=D(d);S&&S.l($),m=L($);for(let X=0;X<g.length;X+=1)g[X].l($);A=L($),O&&O.l($),$.forEach(_),P.forEach(_),this.h()},h(){h(r,"class","back-btn svelte-bu6z9u"),h(r,"title","Back to chat"),h(l,"class","svelte-bu6z9u"),h(n,"class","header-left svelte-bu6z9u"),h(t,"class","header svelte-bu6z9u"),h(d,"class","screens svelte-bu6z9u"),h(e,"class","screen-share-container svelte-bu6z9u")},m(I,P){j(I,e,P),c(e,t),c(t,n),c(n,r),c(n,a),c(n,l),c(t,u),T.m(t,null),c(e,f),C&&C.m(e,null),c(e,p),c(e,d),S&&S.m(d,null),c(d,m);for(let B=0;B<g.length;B+=1)g[B]&&g[B].m(d,null);c(d,A),O&&O.m(d,null),R||(y=G(r,"click",s[5]),R=!0)},p(I,[P]){w===(w=E(I))&&T?T.p(I,P):(T.d(1),T=w(I),T&&(T.c(),T.m(t,null))),I[2]?C?C.p(I,P):(C=ol(I),C.c(),C.m(e,p)):C&&(C.d(1),C=null),I[3]&&I[0]?S?S.p(I,P):(S=cl(I),S.c(),S.m(d,m)):S&&(S.d(1),S=null),P&16&&(F=Ve(I[4]),g=Ss(g,P,N,1,I,F,v,d,As,ul,A,al)),!I[3]&&I[4].length===0?O||(O=fl(),O.c(),O.m(d,null)):O&&(O.d(1),O=null)},i:Ne,o:Ne,d(I){I&&_(e),T.d(),C&&C.d(),S&&S.d();for(let P=0;P<g.length;P+=1)g[P].d();O&&O.d(),R=!1,y()}}}function ah(s,e){return console.log("Setting remote video srcObject",e,"tracks:",e.getTracks()),s.srcObject=e,s.play().catch(t=>console.error("Error playing remote video:",t)),{update(t){console.log("Updating remote video srcObject",t,"tracks:",t.getTracks()),s.srcObject=t,s.play().catch(n=>console.error("Error playing updated remote video:",n))}}}function oh(s,e,t){let n,r,i,a;Re(s,Ls,v=>t(10,n=v)),Re(s,Er,v=>t(3,r=v)),Re(s,ns,v=>t(11,i=v)),Re(s,wr,v=>t(4,a=v));let{activeView:l="screen"}=e,o=null,u="",f;function p(){t(8,l="chat")}async function d(){try{if(!n)return;t(0,o=await Qf(n)),console.log("Screen share started, stream:",o),console.log("Stream tracks:",o==null?void 0:o.getTracks()),console.log("Video tracks:",o==null?void 0:o.getVideoTracks()),t(2,u="")}catch(v){t(2,u="Failed to start screen sharing. Please grant permissions."),console.error("Screen share error:",v)}}function m(){n&&(pa(n),t(0,o=null))}ws(()=>{n&&(n.on("screen-share-started",async v=>{}),n.on("screen-share-stopped",v=>{nh(v)}),n.on("webrtc-offer",async v=>{if(!n)return;const A=i.find(R=>R.id===v.senderId);A&&await eh(n,v.senderId,A.username,v.offer)}),n.on("webrtc-answer",async v=>{await th(v.senderId,v.answer)}),n.on("webrtc-ice-candidate",async v=>{await sh(v.senderId,v.candidate)}),n.on("user-joined",async v=>{r&&n&&setTimeout(()=>{n&&Jf(n,v.id)},1e3)}))});function g(v){ot[v?"unshift":"push"](()=>{f=v,t(1,f),t(0,o)})}return s.$$set=v=>{"activeView"in v&&t(8,l=v.activeView)},s.$$.update=()=>{s.$$.dirty&3&&f&&o&&(console.log("Setting local video srcObject",o),t(1,f.srcObject=o,f),f.play().catch(v=>console.error("Error playing local video:",v)))},[o,f,u,r,a,p,d,m,l,g]}class ch extends bt{constructor(e){super(),kt(this,e,oh,lh,_t,{activeView:8})}}function hl(s,e,t){const n=s.slice();return n[15]=e[t],n[16]=e,n[17]=t,n}function dl(s){let e,t,n,r,i=s[2].username.charAt(0).toUpperCase()+"",a,l,o,u=s[2].username+"",f,p,d,m=s[2].isVideoCall?"ðŸ“¹ Video":"ðŸ“ž Voice",g,v,A,R,y,E=`<span class="btn-icon svelte-1e217ta">ðŸ“ž</span>
					Answer`,w,T,C=`<span class="btn-icon svelte-1e217ta">âœ–ï¸</span>
					Decline`,S,F;return{c(){e=k("div"),t=k("div"),n=k("div"),r=k("div"),a=H(i),l=M(),o=k("h2"),f=H(u),p=M(),d=k("p"),g=H(m),v=H(" Call"),A=M(),R=k("div"),y=k("button"),y.innerHTML=E,w=M(),T=k("button"),T.innerHTML=C,this.h()},l(N){e=b(N,"DIV",{class:!0});var O=D(e);t=b(O,"DIV",{class:!0});var I=D(t);n=b(I,"DIV",{class:!0});var P=D(n);r=b(P,"DIV",{class:!0});var B=D(r);a=V(B,i),B.forEach(_),l=L(P),o=b(P,"H2",{class:!0});var U=D(o);f=V(U,u),U.forEach(_),p=L(P),d=b(P,"P",{class:!0});var $=D(d);g=V($,m),v=V($," Call"),$.forEach(_),P.forEach(_),A=L(I),R=b(I,"DIV",{class:!0});var X=D(R);y=b(X,"BUTTON",{class:!0,"data-svelte-h":!0}),K(y)!=="svelte-u3s2jz"&&(y.innerHTML=E),w=L(X),T=b(X,"BUTTON",{class:!0,"data-svelte-h":!0}),K(T)!=="svelte-om1ns7"&&(T.innerHTML=C),X.forEach(_),I.forEach(_),O.forEach(_),this.h()},h(){h(r,"class","caller-avatar svelte-1e217ta"),h(o,"class","svelte-1e217ta"),h(d,"class","call-type svelte-1e217ta"),h(n,"class","caller-info svelte-1e217ta"),h(y,"class","answer-btn svelte-1e217ta"),h(T,"class","reject-btn svelte-1e217ta"),h(R,"class","call-actions svelte-1e217ta"),h(t,"class","incoming-call-modal svelte-1e217ta"),h(e,"class","call-modal-overlay svelte-1e217ta")},m(N,O){j(N,e,O),c(e,t),c(t,n),c(n,r),c(r,a),c(n,l),c(n,o),c(o,f),c(n,p),c(n,d),c(d,g),c(d,v),c(t,A),c(t,R),c(R,y),c(R,w),c(R,T),S||(F=[G(y,"click",s[7]),G(T,"click",s[8])],S=!0)},p(N,O){O&4&&i!==(i=N[2].username.charAt(0).toUpperCase()+"")&&ne(a,i),O&4&&u!==(u=N[2].username+"")&&ne(f,u),O&4&&m!==(m=N[2].isVideoCall?"ðŸ“¹ Video":"ðŸ“ž Voice")&&ne(g,m)},d(N){N&&_(e),S=!1,Le(F)}}}function pl(s){let e,t,n,r,i,a,l,o="You",u,f=[],p=new Map,d,m,g,v,A=s[6]?"ðŸ”‡":"ðŸŽ¤",R,y,E,w,T,C=s[5]?"ðŸ“¹":"ðŸ“·",S,F,N,O,I='<span class="control-icon svelte-1e217ta">ðŸ“ž</span>',P,B,U=s[5]&&gl(),$=Ve(s[3]);const X=Q=>Q[15].userId;for(let Q=0;Q<$.length;Q+=1){let te=hl(s,$,Q),q=X(te);p.set(q,f[Q]=vl(q,te))}return{c(){e=k("div"),t=k("div"),n=k("div"),r=k("video"),i=M(),U&&U.c(),a=M(),l=k("div"),l.textContent=o,u=M();for(let Q=0;Q<f.length;Q+=1)f[Q].c();d=M(),m=k("div"),g=k("button"),v=k("span"),R=H(A),E=M(),w=k("button"),T=k("span"),S=H(C),N=M(),O=k("button"),O.innerHTML=I,this.h()},l(Q){e=b(Q,"DIV",{class:!0});var te=D(e);t=b(te,"DIV",{class:!0});var q=D(t);n=b(q,"DIV",{class:!0});var z=D(n);r=b(z,"VIDEO",{class:!0}),D(r).forEach(_),i=L(z),U&&U.l(z),a=L(z),l=b(z,"DIV",{class:!0,"data-svelte-h":!0}),K(l)!=="svelte-1l6ztyc"&&(l.textContent=o),z.forEach(_),u=L(q);for(let ge=0;ge<f.length;ge+=1)f[ge].l(q);q.forEach(_),d=L(te),m=b(te,"DIV",{class:!0});var W=D(m);g=b(W,"BUTTON",{class:!0,title:!0});var Y=D(g);v=b(Y,"SPAN",{class:!0});var ie=D(v);R=V(ie,A),ie.forEach(_),Y.forEach(_),E=L(W),w=b(W,"BUTTON",{class:!0,title:!0});var he=D(w);T=b(he,"SPAN",{class:!0});var re=D(T);S=V(re,C),re.forEach(_),he.forEach(_),N=L(W),O=b(W,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),K(O)!=="svelte-1rszrze"&&(O.innerHTML=I),W.forEach(_),te.forEach(_),this.h()},h(){r.autoplay=!0,r.muted=!0,r.playsInline=!0,h(r,"class","video-element svelte-1e217ta"),Te(r,"video-hidden",s[5]),h(l,"class","video-label svelte-1e217ta"),h(n,"class","video-wrapper local-video svelte-1e217ta"),h(t,"class","video-grid svelte-1e217ta"),h(v,"class","control-icon svelte-1e217ta"),h(g,"class","control-btn svelte-1e217ta"),h(g,"title",y=s[6]?"Unmute":"Mute"),Te(g,"active",s[6]),h(T,"class","control-icon svelte-1e217ta"),h(w,"class","control-btn svelte-1e217ta"),h(w,"title",F=s[5]?"Turn on camera":"Turn off camera"),Te(w,"active",s[5]),h(O,"class","control-btn end-call-btn svelte-1e217ta"),h(O,"title","End call"),h(m,"class","call-controls svelte-1e217ta"),h(e,"class","active-call-container svelte-1e217ta")},m(Q,te){j(Q,e,te),c(e,t),c(t,n),c(n,r),s[12](r),c(n,i),U&&U.m(n,null),c(n,a),c(n,l),c(t,u);for(let q=0;q<f.length;q+=1)f[q]&&f[q].m(t,null);c(e,d),c(e,m),c(m,g),c(g,v),c(v,R),c(m,E),c(m,w),c(w,T),c(T,S),c(m,N),c(m,O),P||(B=[G(g,"click",s[10]),G(w,"click",s[11]),G(O,"click",s[9])],P=!0)},p(Q,te){te&32&&Te(r,"video-hidden",Q[5]),Q[5]?U||(U=gl(),U.c(),U.m(n,a)):U&&(U.d(1),U=null),te&10&&($=Ve(Q[3]),f=Ss(f,te,X,1,Q,$,p,t,As,vl,null,hl)),te&64&&A!==(A=Q[6]?"ðŸ”‡":"ðŸŽ¤")&&ne(R,A),te&64&&y!==(y=Q[6]?"Unmute":"Mute")&&h(g,"title",y),te&64&&Te(g,"active",Q[6]),te&32&&C!==(C=Q[5]?"ðŸ“¹":"ðŸ“·")&&ne(S,C),te&32&&F!==(F=Q[5]?"Turn on camera":"Turn off camera")&&h(w,"title",F),te&32&&Te(w,"active",Q[5])},d(Q){Q&&_(e),s[12](null),U&&U.d();for(let te=0;te<f.length;te+=1)f[te].d();P=!1,Le(B)}}}function gl(s){let e,t='<span class="placeholder-icon svelte-1e217ta">ðŸ“¹</span> <span>Camera Off</span>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(n){e=b(n,"DIV",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-57tuav"&&(e.innerHTML=t),this.h()},h(){h(e,"class","video-placeholder svelte-1e217ta")},m(n,r){j(n,e,r)},d(n){n&&_(e)}}}function ml(s){let e,t,n="ðŸ‘¤",r,i,a=(s[15].username||"User")+"",l;return{c(){e=k("div"),t=k("span"),t.textContent=n,r=M(),i=k("span"),l=H(a),this.h()},l(o){e=b(o,"DIV",{class:!0});var u=D(e);t=b(u,"SPAN",{class:!0,"data-svelte-h":!0}),K(t)!=="svelte-18bpbb5"&&(t.textContent=n),r=L(u),i=b(u,"SPAN",{});var f=D(i);l=V(f,a),f.forEach(_),u.forEach(_),this.h()},h(){h(t,"class","placeholder-icon svelte-1e217ta"),h(e,"class","video-placeholder svelte-1e217ta")},m(o,u){j(o,e,u),c(e,t),c(e,r),c(e,i),c(i,l)},p(o,u){u&8&&a!==(a=(o[15].username||"User")+"")&&ne(l,a)},d(o){o&&_(e)}}}function vl(s,e){let t,n,r=e[15],i,a,l,o=(e[15].username||"User")+"",u,f;const p=()=>e[13](n,r),d=()=>e[13](null,r);let m=!e[15].isVideoEnabled&&ml(e);return{key:s,first:null,c(){t=k("div"),n=k("video"),i=M(),m&&m.c(),a=M(),l=k("div"),u=H(o),f=M(),this.h()},l(g){t=b(g,"DIV",{class:!0});var v=D(t);n=b(v,"VIDEO",{class:!0}),D(n).forEach(_),i=L(v),m&&m.l(v),a=L(v),l=b(v,"DIV",{class:!0});var A=D(l);u=V(A,o),A.forEach(_),f=L(v),v.forEach(_),this.h()},h(){n.autoplay=!0,n.playsInline=!0,h(n,"class","video-element svelte-1e217ta"),Te(n,"video-hidden",!e[15].isVideoEnabled),h(l,"class","video-label svelte-1e217ta"),h(t,"class","video-wrapper remote-video svelte-1e217ta"),this.first=t},m(g,v){j(g,t,v),c(t,n),p(),c(t,i),m&&m.m(t,null),c(t,a),c(t,l),c(l,u),c(t,f)},p(g,v){e=g,r!==e[15]&&(d(),r=e[15],p()),v&8&&Te(n,"video-hidden",!e[15].isVideoEnabled),e[15].isVideoEnabled?m&&(m.d(1),m=null):m?m.p(e,v):(m=ml(e),m.c(),m.m(t,a)),v&8&&o!==(o=(e[15].username||"User")+"")&&ne(u,o)},d(g){g&&_(t),d(),m&&m.d()}}}function uh(s){let e,t,n=s[2]&&dl(s),r=s[4]&&pl(s);return{c(){n&&n.c(),e=M(),r&&r.c(),t=Fe()},l(i){n&&n.l(i),e=L(i),r&&r.l(i),t=Fe()},m(i,a){n&&n.m(i,a),j(i,e,a),r&&r.m(i,a),j(i,t,a)},p(i,[a]){i[2]?n?n.p(i,a):(n=dl(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),i[4]?r?r.p(i,a):(r=pl(i),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:Ne,o:Ne,d(i){i&&(_(e),_(t)),n&&n.d(i),r&&r.d(i)}}}function fh(){console.log("Incoming call ringtone")}function hh(s,e,t){let n,r,i,a,l,o;Re(s,Ls,y=>t(14,n=y)),Re(s,Sn,y=>t(2,r=y)),Re(s,yr,y=>t(3,i=y)),Re(s,On,y=>t(4,a=y)),Re(s,nn,y=>t(5,l=y)),Re(s,sn,y=>t(6,o=y));let u,f={};ws(()=>{n&&(n.on("call-incoming",y=>{Sn.set({userId:y.userId,username:y.username,isVideoCall:y.isVideoCall})}),n.on("call-accepted",async y=>{await zf(n,y.userId)}),n.on("call-rejected",y=>{alert("Call was rejected"),$n(n)}),n.on("call-ended",y=>{$n(n)}),n.on("call-offer",async y=>{const E=i.find(T=>T.userId===y.senderId)||r,w=E?E.username:"Unknown";await Vf(n,y.senderId,w,y.offer)}),n.on("call-answer-sdp",async y=>{await Hf(y.senderId,y.answer)}),n.on("call-ice-candidate",async y=>{await Gf(y.senderId,y.candidate)}))}),Al(()=>{n&&(n.off("call-incoming"),n.off("call-accepted"),n.off("call-rejected"),n.off("call-ended"),n.off("call-offer"),n.off("call-answer-sdp"),n.off("call-ice-candidate"))});async function p(){!r||!n||await Bf(n,r.userId,r.isVideoCall)}function d(){!r||!n||Uf(n,r.userId)}function m(){n&&$n(n)}function g(){jf()}function v(){qf()}function A(y){ot[y?"unshift":"push"](()=>{u=y,t(0,u),t(4,a)})}function R(y,E){ot[y?"unshift":"push"](()=>{f[E.userId]=y,t(1,f)})}return s.$$.update=()=>{if(s.$$.dirty&4&&r&&fh(),s.$$.dirty&17&&a&&u){const y=$f();y&&t(0,u.srcObject=y,u)}s.$$.dirty&10&&i.length>0&&i.forEach(y=>{const E=f[y.userId];E&&y.stream&&(E.srcObject=y.stream)})},[u,f,r,i,a,l,o,p,d,m,g,v,A,R]}class dh extends bt{constructor(e){super(),kt(this,e,hh,uh,_t,{})}}const{window:_l}=Ea;function ph(s){let e,t,n,r,i,a,l,o,u,f,p,d,m,g=s[2]?"â†’":"â†",v,A,R,y,E,w,T,C;function S(B){s[12](B)}let F={};s[1]!==void 0&&(F.activeView=s[1]),n=new Mf({props:F}),ot.push(()=>Zt(n,"activeView",S));const N=[vh,mh],O=[];function I(B,U){return B[1]==="chat"?0:B[1]==="screen"?1:-1}~(u=I(s))&&(f=O[u]=N[u](s));let P=s[2]&&bl(s);return E=new dh({}),{c(){e=k("div"),t=k("div"),gt(n.$$.fragment),i=M(),a=k("div"),l=M(),o=k("div"),f&&f.c(),p=M(),P&&P.c(),d=M(),m=k("button"),v=H(g),y=M(),gt(E.$$.fragment),this.h()},l(B){e=b(B,"DIV",{class:!0});var U=D(e);t=b(U,"DIV",{class:!0,style:!0});var $=D(t);pt(n.$$.fragment,$),i=L($),a=b($,"DIV",{class:!0}),D(a).forEach(_),$.forEach(_),l=L(U),o=b(U,"DIV",{class:!0});var X=D(o);f&&f.l(X),X.forEach(_),p=L(U),P&&P.l(U),d=L(U),m=b(U,"BUTTON",{class:!0,title:!0,style:!0});var Q=D(m);v=V(Q,g),Q.forEach(_),U.forEach(_),y=L(B),pt(E.$$.fragment,B),this.h()},h(){h(a,"class","resize-handle resize-handle-channel svelte-1secep6"),h(t,"class","channel-sidebar-container svelte-1secep6"),Me(t,"width",s[3]+"px"),h(o,"class","main-content svelte-1secep6"),h(m,"class","user-panel-toggle svelte-1secep6"),h(m,"title",A=s[2]?"Hide user panel":"Show user panel"),h(m,"style",R=s[2]?`right: ${s[4]}px`:"right: 0"),Te(m,"open",s[2]),h(e,"class","app-container svelte-1secep6"),Te(e,"resizing",s[5]||s[6])},m(B,U){j(B,e,U),c(e,t),dt(n,t,null),c(t,i),c(t,a),c(e,l),c(e,o),~u&&O[u].m(o,null),c(e,p),P&&P.m(e,null),c(e,d),c(e,m),c(m,v),j(B,y,U),dt(E,B,U),w=!0,T||(C=[G(a,"mousedown",s[8]),G(m,"click",s[14])],T=!0)},p(B,U){const $={};!r&&U&2&&(r=!0,$.activeView=B[1],Yt(()=>r=!1)),n.$set($),(!w||U&8)&&Me(t,"width",B[3]+"px");let X=u;u=I(B),u===X?~u&&O[u].p(B,U):(f&&(Ns(),xe(O[X],1,1,()=>{O[X]=null}),Ps()),~u?(f=O[u],f?f.p(B,U):(f=O[u]=N[u](B),f.c()),Ce(f,1),f.m(o,null)):f=null),B[2]?P?(P.p(B,U),U&4&&Ce(P,1)):(P=bl(B),P.c(),Ce(P,1),P.m(e,d)):P&&(Ns(),xe(P,1,1,()=>{P=null}),Ps()),(!w||U&4)&&g!==(g=B[2]?"â†’":"â†")&&ne(v,g),(!w||U&4&&A!==(A=B[2]?"Hide user panel":"Show user panel"))&&h(m,"title",A),(!w||U&20&&R!==(R=B[2]?`right: ${B[4]}px`:"right: 0"))&&h(m,"style",R),(!w||U&4)&&Te(m,"open",B[2]),(!w||U&96)&&Te(e,"resizing",B[5]||B[6])},i(B){w||(Ce(n.$$.fragment,B),Ce(f),Ce(P),Ce(E.$$.fragment,B),w=!0)},o(B){xe(n.$$.fragment,B),xe(f),xe(P),xe(E.$$.fragment,B),w=!1},d(B){B&&(_(e),_(y)),ht(n),~u&&O[u].d(),P&&P.d(),ht(E,B),T=!1,Le(C)}}}function gh(s){let e,t;return e=new Tf({}),e.$on("login",s[7]),{c(){gt(e.$$.fragment)},l(n){pt(e.$$.fragment,n)},m(n,r){dt(e,n,r),t=!0},p:Ne,i(n){t||(Ce(e.$$.fragment,n),t=!0)},o(n){xe(e.$$.fragment,n),t=!1},d(n){ht(e,n)}}}function mh(s){let e,t,n;function r(a){s[13](a)}let i={};return s[1]!==void 0&&(i.activeView=s[1]),e=new ch({props:i}),ot.push(()=>Zt(e,"activeView",r)),{c(){gt(e.$$.fragment)},l(a){pt(e.$$.fragment,a)},m(a,l){dt(e,a,l),n=!0},p(a,l){const o={};!t&&l&2&&(t=!0,o.activeView=a[1],Yt(()=>t=!1)),e.$set(o)},i(a){n||(Ce(e.$$.fragment,a),n=!0)},o(a){xe(e.$$.fragment,a),n=!1},d(a){ht(e,a)}}}function vh(s){let e,t;return e=new Ef({}),{c(){gt(e.$$.fragment)},l(n){pt(e.$$.fragment,n)},m(n,r){dt(e,n,r),t=!0},p:Ne,i(n){t||(Ce(e.$$.fragment,n),t=!0)},o(n){xe(e.$$.fragment,n),t=!1},d(n){ht(e,n)}}}function bl(s){let e,t,n,r,i,a,l;return r=new Kf({}),{c(){e=k("div"),t=k("div"),n=M(),gt(r.$$.fragment),this.h()},l(o){e=b(o,"DIV",{class:!0,style:!0});var u=D(e);t=b(u,"DIV",{class:!0}),D(t).forEach(_),n=L(u),pt(r.$$.fragment,u),u.forEach(_),this.h()},h(){h(t,"class","resize-handle resize-handle-user svelte-1secep6"),h(e,"class","user-panel-container svelte-1secep6"),Me(e,"width",s[4]+"px")},m(o,u){j(o,e,u),c(e,t),c(e,n),dt(r,e,null),i=!0,a||(l=G(t,"mousedown",s[9]),a=!0)},p(o,u){(!i||u&16)&&Me(e,"width",o[4]+"px")},i(o){i||(Ce(r.$$.fragment,o),i=!0)},o(o){xe(r.$$.fragment,o),i=!1},d(o){o&&_(e),ht(r),a=!1,l()}}}function _h(s){let e,t,n,r,i,a;const l=[gh,ph],o=[];function u(f,p){return f[0]?1:0}return e=u(s),t=o[e]=l[e](s),{c(){t.c(),n=Fe()},l(f){t.l(f),n=Fe()},m(f,p){o[e].m(f,p),j(f,n,p),r=!0,i||(a=[G(_l,"mousemove",s[10]),G(_l,"mouseup",s[11])],i=!0)},p(f,[p]){let d=e;e=u(f),e===d?o[e].p(f,p):(Ns(),xe(o[d],1,1,()=>{o[d]=null}),Ps(),t=o[e],t?t.p(f,p):(t=o[e]=l[e](f),t.c()),Ce(t,1),t.m(n.parentNode,n))},i(f){r||(Ce(t),r=!0)},o(f){xe(t),r=!1},d(f){f&&_(n),o[e].d(f),i=!1,Le(a)}}}function bh(s,e,t){let n="",r=!1,i="chat",a=!1,l=240,o=250,u=!1,f=!1;function p(E){n=E.detail,Fc(n),t(0,r=!0)}function d(E){t(5,u=!0),E.preventDefault()}function m(E){t(6,f=!0),E.preventDefault()}function g(E){if(u){const w=E.clientX;w>=180&&w<=400&&t(3,l=w)}else if(f){const w=window.innerWidth-E.clientX;w>=200&&w<=500&&t(4,o=w)}}function v(){t(5,u=!1),t(6,f=!1)}Al(()=>{Uc()});function A(E){i=E,t(1,i)}function R(E){i=E,t(1,i)}return[r,i,a,l,o,u,f,p,d,m,g,v,A,R,()=>t(2,a=!a)]}class Th extends bt{constructor(e){super(),kt(this,e,bh,_h,_t,{})}}export{Th as component};
